function FE(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function UE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jx={exports:{}},wu={},kx={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qa=Symbol.for("react.element"),$E=Symbol.for("react.portal"),zE=Symbol.for("react.fragment"),BE=Symbol.for("react.strict_mode"),WE=Symbol.for("react.profiler"),HE=Symbol.for("react.provider"),qE=Symbol.for("react.context"),GE=Symbol.for("react.forward_ref"),KE=Symbol.for("react.suspense"),QE=Symbol.for("react.memo"),YE=Symbol.for("react.lazy"),x0=Symbol.iterator;function JE(t){return t===null||typeof t!="object"?null:(t=x0&&t[x0]||t["@@iterator"],typeof t=="function"?t:null)}var Px={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rx=Object.assign,Dx={};function so(t,e,n){this.props=t,this.context=e,this.refs=Dx,this.updater=n||Px}so.prototype.isReactComponent={};so.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};so.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Mx(){}Mx.prototype=so.prototype;function ym(t,e,n){this.props=t,this.context=e,this.refs=Dx,this.updater=n||Px}var vm=ym.prototype=new Mx;vm.constructor=ym;Rx(vm,so.prototype);vm.isPureReactComponent=!0;var w0=Array.isArray,Lx=Object.prototype.hasOwnProperty,xm={current:null},Ox={key:!0,ref:!0,__self:!0,__source:!0};function Vx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Lx.call(e,r)&&!Ox.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Qa,type:t,key:i,ref:o,props:s,_owner:xm.current}}function XE(t,e){return{$$typeof:Qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function wm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qa}function ZE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var _0=/\/+/g;function qd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZE(""+t.key):e.toString(36)}function Ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qa:case $E:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+qd(o,0):r,w0(s)?(n="",t!=null&&(n=t.replace(_0,"$&/")+"/"),Ql(s,e,n,"",function(d){return d})):s!=null&&(wm(s)&&(s=XE(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(_0,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",w0(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+qd(i,u);o+=Ql(i,e,n,c,s)}else if(c=JE(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+qd(i,u++),o+=Ql(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Tl(t,e,n){if(t==null)return t;var r=[],s=0;return Ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function eN(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ut={current:null},Yl={transition:null},tN={ReactCurrentDispatcher:Ut,ReactCurrentBatchConfig:Yl,ReactCurrentOwner:xm};function Fx(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Tl,forEach:function(t,e,n){Tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Tl(t,function(){e++}),e},toArray:function(t){return Tl(t,function(e){return e})||[]},only:function(t){if(!wm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=so;fe.Fragment=zE;fe.Profiler=WE;fe.PureComponent=ym;fe.StrictMode=BE;fe.Suspense=KE;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tN;fe.act=Fx;fe.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=xm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)Lx.call(e,c)&&!Ox.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Qa,type:t.type,key:s,ref:i,props:r,_owner:o}};fe.createContext=function(t){return t={$$typeof:qE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HE,_context:t},t.Consumer=t};fe.createElement=Vx;fe.createFactory=function(t){var e=Vx.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:GE,render:t}};fe.isValidElement=wm;fe.lazy=function(t){return{$$typeof:YE,_payload:{_status:-1,_result:t},_init:eN}};fe.memo=function(t,e){return{$$typeof:QE,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Yl.transition;Yl.transition={};try{t()}finally{Yl.transition=e}};fe.unstable_act=Fx;fe.useCallback=function(t,e){return Ut.current.useCallback(t,e)};fe.useContext=function(t){return Ut.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return Ut.current.useDeferredValue(t)};fe.useEffect=function(t,e){return Ut.current.useEffect(t,e)};fe.useId=function(){return Ut.current.useId()};fe.useImperativeHandle=function(t,e,n){return Ut.current.useImperativeHandle(t,e,n)};fe.useInsertionEffect=function(t,e){return Ut.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return Ut.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return Ut.current.useMemo(t,e)};fe.useReducer=function(t,e,n){return Ut.current.useReducer(t,e,n)};fe.useRef=function(t){return Ut.current.useRef(t)};fe.useState=function(t){return Ut.current.useState(t)};fe.useSyncExternalStore=function(t,e,n){return Ut.current.useSyncExternalStore(t,e,n)};fe.useTransition=function(){return Ut.current.useTransition()};fe.version="18.3.1";kx.exports=fe;var R=kx.exports;const qe=UE(R),nN=FE({__proto__:null,default:qe},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rN=R,sN=Symbol.for("react.element"),iN=Symbol.for("react.fragment"),oN=Object.prototype.hasOwnProperty,aN=rN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lN={key:!0,ref:!0,__self:!0,__source:!0};function Ux(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)oN.call(e,r)&&!lN.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:sN,type:t,key:i,ref:o,props:s,_owner:aN.current}}wu.Fragment=iN;wu.jsx=Ux;wu.jsxs=Ux;jx.exports=wu;var a=jx.exports,$h={},$x={exports:{}},sn={},zx={exports:{}},Bx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Y){var J=$.length;$.push(Y);e:for(;0<J;){var X=J-1>>>1,ye=$[X];if(0<s(ye,Y))$[X]=Y,$[J]=ye,J=X;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Y=$[0],J=$.pop();if(J!==Y){$[0]=J;e:for(var X=0,ye=$.length,te=ye>>>1;X<te;){var de=2*(X+1)-1,st=$[de],Je=de+1,Pt=$[Je];if(0>s(st,J))Je<ye&&0>s(Pt,st)?($[X]=Pt,$[Je]=J,X=Je):($[X]=st,$[de]=J,X=de);else if(Je<ye&&0>s(Pt,J))$[X]=Pt,$[Je]=J,X=Je;else break e}}return Y}function s($,Y){var J=$.sortIndex-Y.sortIndex;return J!==0?J:$.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],d=[],h=1,f=null,m=3,v=!1,y=!1,w=!1,A=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S($){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=$)r(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(d)}}function P($){if(w=!1,S($),!y)if(n(c)!==null)y=!0,ue(L);else{var Y=n(d);Y!==null&&le(P,Y.startTime-$)}}function L($,Y){y=!1,w&&(w=!1,_(E),E=-1),v=!0;var J=m;try{for(S(Y),f=n(c);f!==null&&(!(f.expirationTime>Y)||$&&!C());){var X=f.callback;if(typeof X=="function"){f.callback=null,m=f.priorityLevel;var ye=X(f.expirationTime<=Y);Y=t.unstable_now(),typeof ye=="function"?f.callback=ye:f===n(c)&&r(c),S(Y)}else r(c);f=n(c)}if(f!==null)var te=!0;else{var de=n(d);de!==null&&le(P,de.startTime-Y),te=!1}return te}finally{f=null,m=J,v=!1}}var F=!1,I=null,E=-1,j=5,x=-1;function C(){return!(t.unstable_now()-x<j)}function k(){if(I!==null){var $=t.unstable_now();x=$;var Y=!0;try{Y=I(!0,$)}finally{Y?T():(F=!1,I=null)}}else F=!1}var T;if(typeof b=="function")T=function(){b(k)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,Z=W.port2;W.port1.onmessage=k,T=function(){Z.postMessage(null)}}else T=function(){A(k,0)};function ue($){I=$,F||(F=!0,T())}function le($,Y){E=A(function(){$(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,ue(L))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var J=m;m=Y;try{return $()}finally{m=J}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Y){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var J=m;m=$;try{return Y()}finally{m=J}},t.unstable_scheduleCallback=function($,Y,J){var X=t.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?X+J:X):J=X,$){case 1:var ye=-1;break;case 2:ye=250;break;case 5:ye=1073741823;break;case 4:ye=1e4;break;default:ye=5e3}return ye=J+ye,$={id:h++,callback:Y,priorityLevel:$,startTime:J,expirationTime:ye,sortIndex:-1},J>X?($.sortIndex=J,e(d,$),n(c)===null&&$===n(d)&&(w?(_(E),E=-1):w=!0,le(P,J-X))):($.sortIndex=ye,e(c,$),y||v||(y=!0,ue(L))),$},t.unstable_shouldYield=C,t.unstable_wrapCallback=function($){var Y=m;return function(){var J=m;m=Y;try{return $.apply(this,arguments)}finally{m=J}}}})(Bx);zx.exports=Bx;var cN=zx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uN=R,nn=cN;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Wx=new Set,ga={};function Xs(t,e){Ui(t,e),Ui(t+"Capture",e)}function Ui(t,e){for(ga[t]=e,t=0;t<e.length;t++)Wx.add(e[t])}var ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zh=Object.prototype.hasOwnProperty,dN=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,b0={},E0={};function hN(t){return zh.call(E0,t)?!0:zh.call(b0,t)?!1:dN.test(t)?E0[t]=!0:(b0[t]=!0,!1)}function fN(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function mN(t,e,n,r){if(e===null||typeof e>"u"||fN(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var xt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){xt[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];xt[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){xt[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){xt[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){xt[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){xt[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){xt[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){xt[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){xt[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var _m=/[\-:]([a-z])/g;function bm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(_m,bm);xt[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(_m,bm);xt[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(_m,bm);xt[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){xt[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});xt.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){xt[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Em(t,e,n,r){var s=xt.hasOwnProperty(e)?xt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(mN(e,n,s,r)&&(n=null),r||s===null?hN(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var pr=uN.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Il=Symbol.for("react.element"),hi=Symbol.for("react.portal"),fi=Symbol.for("react.fragment"),Nm=Symbol.for("react.strict_mode"),Bh=Symbol.for("react.profiler"),Hx=Symbol.for("react.provider"),qx=Symbol.for("react.context"),Sm=Symbol.for("react.forward_ref"),Wh=Symbol.for("react.suspense"),Hh=Symbol.for("react.suspense_list"),Tm=Symbol.for("react.memo"),Ir=Symbol.for("react.lazy"),Gx=Symbol.for("react.offscreen"),N0=Symbol.iterator;function Lo(t){return t===null||typeof t!="object"?null:(t=N0&&t[N0]||t["@@iterator"],typeof t=="function"?t:null)}var Ve=Object.assign,Gd;function Ho(t){if(Gd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gd=e&&e[1]||""}return`
`+Gd+t}var Kd=!1;function Qd(t,e){if(!t||Kd)return"";Kd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Kd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ho(t):""}function pN(t){switch(t.tag){case 5:return Ho(t.type);case 16:return Ho("Lazy");case 13:return Ho("Suspense");case 19:return Ho("SuspenseList");case 0:case 2:case 15:return t=Qd(t.type,!1),t;case 11:return t=Qd(t.type.render,!1),t;case 1:return t=Qd(t.type,!0),t;default:return""}}function qh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case fi:return"Fragment";case hi:return"Portal";case Bh:return"Profiler";case Nm:return"StrictMode";case Wh:return"Suspense";case Hh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case qx:return(t.displayName||"Context")+".Consumer";case Hx:return(t._context.displayName||"Context")+".Provider";case Sm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Tm:return e=t.displayName||null,e!==null?e:qh(t.type)||"Memo";case Ir:e=t._payload,t=t._init;try{return qh(t(e))}catch{}}return null}function gN(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qh(e);case 8:return e===Nm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Kx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function yN(t){var e=Kx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Al(t){t._valueTracker||(t._valueTracker=yN(t))}function Qx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Kx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function bc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Gh(t,e){var n=e.checked;return Ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function S0(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=rs(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Yx(t,e){e=e.checked,e!=null&&Em(t,"checked",e,!1)}function Kh(t,e){Yx(t,e);var n=rs(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Qh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Qh(t,e.type,rs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function T0(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Qh(t,e,n){(e!=="number"||bc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var qo=Array.isArray;function Ti(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+rs(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Yh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return Ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function I0(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(z(92));if(qo(n)){if(1<n.length)throw Error(z(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:rs(n)}}function Jx(t,e){var n=rs(e.value),r=rs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function A0(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Xx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Jh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Xx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Cl,Zx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Cl=Cl||document.createElement("div"),Cl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Cl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ya(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ea={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},vN=["Webkit","ms","Moz","O"];Object.keys(ea).forEach(function(t){vN.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ea[e]=ea[t]})});function e1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ea.hasOwnProperty(t)&&ea[t]?(""+e).trim():e+"px"}function t1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=e1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var xN=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Xh(t,e){if(e){if(xN[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function Zh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ef=null;function Im(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var tf=null,Ii=null,Ai=null;function C0(t){if(t=Xa(t)){if(typeof tf!="function")throw Error(z(280));var e=t.stateNode;e&&(e=Su(e),tf(t.stateNode,t.type,e))}}function n1(t){Ii?Ai?Ai.push(t):Ai=[t]:Ii=t}function r1(){if(Ii){var t=Ii,e=Ai;if(Ai=Ii=null,C0(t),e)for(t=0;t<e.length;t++)C0(e[t])}}function s1(t,e){return t(e)}function i1(){}var Yd=!1;function o1(t,e,n){if(Yd)return t(e,n);Yd=!0;try{return s1(t,e,n)}finally{Yd=!1,(Ii!==null||Ai!==null)&&(i1(),r1())}}function va(t,e){var n=t.stateNode;if(n===null)return null;var r=Su(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(z(231,e,typeof n));return n}var nf=!1;if(ir)try{var Oo={};Object.defineProperty(Oo,"passive",{get:function(){nf=!0}}),window.addEventListener("test",Oo,Oo),window.removeEventListener("test",Oo,Oo)}catch{nf=!1}function wN(t,e,n,r,s,i,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(h){this.onError(h)}}var ta=!1,Ec=null,Nc=!1,rf=null,_N={onError:function(t){ta=!0,Ec=t}};function bN(t,e,n,r,s,i,o,u,c){ta=!1,Ec=null,wN.apply(_N,arguments)}function EN(t,e,n,r,s,i,o,u,c){if(bN.apply(this,arguments),ta){if(ta){var d=Ec;ta=!1,Ec=null}else throw Error(z(198));Nc||(Nc=!0,rf=d)}}function Zs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function a1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function j0(t){if(Zs(t)!==t)throw Error(z(188))}function NN(t){var e=t.alternate;if(!e){if(e=Zs(t),e===null)throw Error(z(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return j0(s),t;if(i===r)return j0(s),e;i=i.sibling}throw Error(z(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(z(189))}}if(n.alternate!==r)throw Error(z(190))}if(n.tag!==3)throw Error(z(188));return n.stateNode.current===n?t:e}function l1(t){return t=NN(t),t!==null?c1(t):null}function c1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=c1(t);if(e!==null)return e;t=t.sibling}return null}var u1=nn.unstable_scheduleCallback,k0=nn.unstable_cancelCallback,SN=nn.unstable_shouldYield,TN=nn.unstable_requestPaint,Ke=nn.unstable_now,IN=nn.unstable_getCurrentPriorityLevel,Am=nn.unstable_ImmediatePriority,d1=nn.unstable_UserBlockingPriority,Sc=nn.unstable_NormalPriority,AN=nn.unstable_LowPriority,h1=nn.unstable_IdlePriority,_u=null,Un=null;function CN(t){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(_u,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:PN,jN=Math.log,kN=Math.LN2;function PN(t){return t>>>=0,t===0?32:31-(jN(t)/kN|0)|0}var jl=64,kl=4194304;function Go(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Go(u):(i&=o,i!==0&&(r=Go(i)))}else o=n&~s,o!==0?r=Go(o):i!==0&&(r=Go(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),s=1<<n,r|=t[n],e&=~s;return r}function RN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function DN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-Sn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=RN(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function sf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function f1(){var t=jl;return jl<<=1,!(jl&4194240)&&(jl=64),t}function Jd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ya(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function MN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-Sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function Cm(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var Ee=0;function m1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var p1,jm,g1,y1,v1,of=!1,Pl=[],$r=null,zr=null,Br=null,xa=new Map,wa=new Map,Cr=[],LN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function P0(t,e){switch(t){case"focusin":case"focusout":$r=null;break;case"dragenter":case"dragleave":zr=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":xa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(e.pointerId)}}function Vo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Xa(e),e!==null&&jm(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function ON(t,e,n,r,s){switch(e){case"focusin":return $r=Vo($r,t,e,n,r,s),!0;case"dragenter":return zr=Vo(zr,t,e,n,r,s),!0;case"mouseover":return Br=Vo(Br,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return xa.set(i,Vo(xa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,wa.set(i,Vo(wa.get(i)||null,t,e,n,r,s)),!0}return!1}function x1(t){var e=ks(t.target);if(e!==null){var n=Zs(e);if(n!==null){if(e=n.tag,e===13){if(e=a1(n),e!==null){t.blockedOn=e,v1(t.priority,function(){g1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=af(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ef=r,n.target.dispatchEvent(r),ef=null}else return e=Xa(n),e!==null&&jm(e),t.blockedOn=n,!1;e.shift()}return!0}function R0(t,e,n){Jl(t)&&n.delete(e)}function VN(){of=!1,$r!==null&&Jl($r)&&($r=null),zr!==null&&Jl(zr)&&(zr=null),Br!==null&&Jl(Br)&&(Br=null),xa.forEach(R0),wa.forEach(R0)}function Fo(t,e){t.blockedOn===e&&(t.blockedOn=null,of||(of=!0,nn.unstable_scheduleCallback(nn.unstable_NormalPriority,VN)))}function _a(t){function e(s){return Fo(s,t)}if(0<Pl.length){Fo(Pl[0],t);for(var n=1;n<Pl.length;n++){var r=Pl[n];r.blockedOn===t&&(r.blockedOn=null)}}for($r!==null&&Fo($r,t),zr!==null&&Fo(zr,t),Br!==null&&Fo(Br,t),xa.forEach(e),wa.forEach(e),n=0;n<Cr.length;n++)r=Cr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Cr.length&&(n=Cr[0],n.blockedOn===null);)x1(n),n.blockedOn===null&&Cr.shift()}var Ci=pr.ReactCurrentBatchConfig,Ic=!0;function FN(t,e,n,r){var s=Ee,i=Ci.transition;Ci.transition=null;try{Ee=1,km(t,e,n,r)}finally{Ee=s,Ci.transition=i}}function UN(t,e,n,r){var s=Ee,i=Ci.transition;Ci.transition=null;try{Ee=4,km(t,e,n,r)}finally{Ee=s,Ci.transition=i}}function km(t,e,n,r){if(Ic){var s=af(t,e,n,r);if(s===null)ah(t,e,r,Ac,n),P0(t,r);else if(ON(s,t,e,n,r))r.stopPropagation();else if(P0(t,r),e&4&&-1<LN.indexOf(t)){for(;s!==null;){var i=Xa(s);if(i!==null&&p1(i),i=af(t,e,n,r),i===null&&ah(t,e,r,Ac,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else ah(t,e,r,null,n)}}var Ac=null;function af(t,e,n,r){if(Ac=null,t=Im(r),t=ks(t),t!==null)if(e=Zs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=a1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ac=t,null}function w1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(IN()){case Am:return 1;case d1:return 4;case Sc:case AN:return 16;case h1:return 536870912;default:return 16}default:return 16}}var Or=null,Pm=null,Xl=null;function _1(){if(Xl)return Xl;var t,e=Pm,n=e.length,r,s="value"in Or?Or.value:Or.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Xl=s.slice(t,1<r?1-r:void 0)}function Zl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function D0(){return!1}function on(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rl:D0,this.isPropagationStopped=D0,this}return Ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var io={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Rm=on(io),Ja=Ve({},io,{view:0,detail:0}),$N=on(Ja),Xd,Zd,Uo,bu=Ve({},Ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Dm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Uo&&(Uo&&t.type==="mousemove"?(Xd=t.screenX-Uo.screenX,Zd=t.screenY-Uo.screenY):Zd=Xd=0,Uo=t),Xd)},movementY:function(t){return"movementY"in t?t.movementY:Zd}}),M0=on(bu),zN=Ve({},bu,{dataTransfer:0}),BN=on(zN),WN=Ve({},Ja,{relatedTarget:0}),eh=on(WN),HN=Ve({},io,{animationName:0,elapsedTime:0,pseudoElement:0}),qN=on(HN),GN=Ve({},io,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),KN=on(GN),QN=Ve({},io,{data:0}),L0=on(QN),YN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=XN[t])?!!e[t]:!1}function Dm(){return ZN}var eS=Ve({},Ja,{key:function(t){if(t.key){var e=YN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Dm,charCode:function(t){return t.type==="keypress"?Zl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),tS=on(eS),nS=Ve({},bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),O0=on(nS),rS=Ve({},Ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Dm}),sS=on(rS),iS=Ve({},io,{propertyName:0,elapsedTime:0,pseudoElement:0}),oS=on(iS),aS=Ve({},bu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lS=on(aS),cS=[9,13,27,32],Mm=ir&&"CompositionEvent"in window,na=null;ir&&"documentMode"in document&&(na=document.documentMode);var uS=ir&&"TextEvent"in window&&!na,b1=ir&&(!Mm||na&&8<na&&11>=na),V0=String.fromCharCode(32),F0=!1;function E1(t,e){switch(t){case"keyup":return cS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function N1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var mi=!1;function dS(t,e){switch(t){case"compositionend":return N1(e);case"keypress":return e.which!==32?null:(F0=!0,V0);case"textInput":return t=e.data,t===V0&&F0?null:t;default:return null}}function hS(t,e){if(mi)return t==="compositionend"||!Mm&&E1(t,e)?(t=_1(),Xl=Pm=Or=null,mi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return b1&&e.locale!=="ko"?null:e.data;default:return null}}var fS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function U0(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fS[t.type]:e==="textarea"}function S1(t,e,n,r){n1(r),e=Cc(e,"onChange"),0<e.length&&(n=new Rm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ra=null,ba=null;function mS(t){L1(t,0)}function Eu(t){var e=yi(t);if(Qx(e))return t}function pS(t,e){if(t==="change")return e}var T1=!1;if(ir){var th;if(ir){var nh="oninput"in document;if(!nh){var $0=document.createElement("div");$0.setAttribute("oninput","return;"),nh=typeof $0.oninput=="function"}th=nh}else th=!1;T1=th&&(!document.documentMode||9<document.documentMode)}function z0(){ra&&(ra.detachEvent("onpropertychange",I1),ba=ra=null)}function I1(t){if(t.propertyName==="value"&&Eu(ba)){var e=[];S1(e,ba,t,Im(t)),o1(mS,e)}}function gS(t,e,n){t==="focusin"?(z0(),ra=e,ba=n,ra.attachEvent("onpropertychange",I1)):t==="focusout"&&z0()}function yS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Eu(ba)}function vS(t,e){if(t==="click")return Eu(e)}function xS(t,e){if(t==="input"||t==="change")return Eu(e)}function wS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:wS;function Ea(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!zh.call(e,s)||!Cn(t[s],e[s]))return!1}return!0}function B0(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function W0(t,e){var n=B0(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=B0(n)}}function A1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?A1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function C1(){for(var t=window,e=bc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=bc(t.document)}return e}function Lm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _S(t){var e=C1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&A1(n.ownerDocument.documentElement,n)){if(r!==null&&Lm(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=W0(n,i);var o=W0(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bS=ir&&"documentMode"in document&&11>=document.documentMode,pi=null,lf=null,sa=null,cf=!1;function H0(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;cf||pi==null||pi!==bc(r)||(r=pi,"selectionStart"in r&&Lm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sa&&Ea(sa,r)||(sa=r,r=Cc(lf,"onSelect"),0<r.length&&(e=new Rm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=pi)))}function Dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var gi={animationend:Dl("Animation","AnimationEnd"),animationiteration:Dl("Animation","AnimationIteration"),animationstart:Dl("Animation","AnimationStart"),transitionend:Dl("Transition","TransitionEnd")},rh={},j1={};ir&&(j1=document.createElement("div").style,"AnimationEvent"in window||(delete gi.animationend.animation,delete gi.animationiteration.animation,delete gi.animationstart.animation),"TransitionEvent"in window||delete gi.transitionend.transition);function Nu(t){if(rh[t])return rh[t];if(!gi[t])return t;var e=gi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in j1)return rh[t]=e[n];return t}var k1=Nu("animationend"),P1=Nu("animationiteration"),R1=Nu("animationstart"),D1=Nu("transitionend"),M1=new Map,q0="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ms(t,e){M1.set(t,e),Xs(e,[t])}for(var sh=0;sh<q0.length;sh++){var ih=q0[sh],ES=ih.toLowerCase(),NS=ih[0].toUpperCase()+ih.slice(1);ms(ES,"on"+NS)}ms(k1,"onAnimationEnd");ms(P1,"onAnimationIteration");ms(R1,"onAnimationStart");ms("dblclick","onDoubleClick");ms("focusin","onFocus");ms("focusout","onBlur");ms(D1,"onTransitionEnd");Ui("onMouseEnter",["mouseout","mouseover"]);Ui("onMouseLeave",["mouseout","mouseover"]);Ui("onPointerEnter",["pointerout","pointerover"]);Ui("onPointerLeave",["pointerout","pointerover"]);Xs("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xs("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xs("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xs("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xs("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ko="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ko));function G0(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,EN(r,e,void 0,t),t.currentTarget=null}function L1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;G0(s,u,d),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;G0(s,u,d),i=c}}}if(Nc)throw t=rf,Nc=!1,rf=null,t}function je(t,e){var n=e[mf];n===void 0&&(n=e[mf]=new Set);var r=t+"__bubble";n.has(r)||(O1(e,t,2,!1),n.add(r))}function oh(t,e,n){var r=0;e&&(r|=4),O1(n,t,r,e)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function Na(t){if(!t[Ml]){t[Ml]=!0,Wx.forEach(function(n){n!=="selectionchange"&&(SS.has(n)||oh(n,!1,t),oh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ml]||(e[Ml]=!0,oh("selectionchange",!1,e))}}function O1(t,e,n,r){switch(w1(e)){case 1:var s=FN;break;case 4:s=UN;break;default:s=km}n=s.bind(null,e,n,t),s=void 0,!nf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function ah(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=ks(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}o1(function(){var d=i,h=Im(n),f=[];e:{var m=M1.get(t);if(m!==void 0){var v=Rm,y=t;switch(t){case"keypress":if(Zl(n)===0)break e;case"keydown":case"keyup":v=tS;break;case"focusin":y="focus",v=eh;break;case"focusout":y="blur",v=eh;break;case"beforeblur":case"afterblur":v=eh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=M0;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=BN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=sS;break;case k1:case P1:case R1:v=qN;break;case D1:v=oS;break;case"scroll":v=$N;break;case"wheel":v=lS;break;case"copy":case"cut":case"paste":v=KN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=O0}var w=(e&4)!==0,A=!w&&t==="scroll",_=w?m!==null?m+"Capture":null:m;w=[];for(var b=d,S;b!==null;){S=b;var P=S.stateNode;if(S.tag===5&&P!==null&&(S=P,_!==null&&(P=va(b,_),P!=null&&w.push(Sa(b,P,S)))),A)break;b=b.return}0<w.length&&(m=new v(m,y,null,n,h),f.push({event:m,listeners:w}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&n!==ef&&(y=n.relatedTarget||n.fromElement)&&(ks(y)||y[or]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=d,y=y?ks(y):null,y!==null&&(A=Zs(y),y!==A||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=d),v!==y)){if(w=M0,P="onMouseLeave",_="onMouseEnter",b="mouse",(t==="pointerout"||t==="pointerover")&&(w=O0,P="onPointerLeave",_="onPointerEnter",b="pointer"),A=v==null?m:yi(v),S=y==null?m:yi(y),m=new w(P,b+"leave",v,n,h),m.target=A,m.relatedTarget=S,P=null,ks(h)===d&&(w=new w(_,b+"enter",y,n,h),w.target=S,w.relatedTarget=A,P=w),A=P,v&&y)t:{for(w=v,_=y,b=0,S=w;S;S=ai(S))b++;for(S=0,P=_;P;P=ai(P))S++;for(;0<b-S;)w=ai(w),b--;for(;0<S-b;)_=ai(_),S--;for(;b--;){if(w===_||_!==null&&w===_.alternate)break t;w=ai(w),_=ai(_)}w=null}else w=null;v!==null&&K0(f,m,v,w,!1),y!==null&&A!==null&&K0(f,A,y,w,!0)}}e:{if(m=d?yi(d):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var L=pS;else if(U0(m))if(T1)L=xS;else{L=yS;var F=gS}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=vS);if(L&&(L=L(t,d))){S1(f,L,n,h);break e}F&&F(t,m,d),t==="focusout"&&(F=m._wrapperState)&&F.controlled&&m.type==="number"&&Qh(m,"number",m.value)}switch(F=d?yi(d):window,t){case"focusin":(U0(F)||F.contentEditable==="true")&&(pi=F,lf=d,sa=null);break;case"focusout":sa=lf=pi=null;break;case"mousedown":cf=!0;break;case"contextmenu":case"mouseup":case"dragend":cf=!1,H0(f,n,h);break;case"selectionchange":if(bS)break;case"keydown":case"keyup":H0(f,n,h)}var I;if(Mm)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else mi?E1(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(b1&&n.locale!=="ko"&&(mi||E!=="onCompositionStart"?E==="onCompositionEnd"&&mi&&(I=_1()):(Or=h,Pm="value"in Or?Or.value:Or.textContent,mi=!0)),F=Cc(d,E),0<F.length&&(E=new L0(E,t,null,n,h),f.push({event:E,listeners:F}),I?E.data=I:(I=N1(n),I!==null&&(E.data=I)))),(I=uS?dS(t,n):hS(t,n))&&(d=Cc(d,"onBeforeInput"),0<d.length&&(h=new L0("onBeforeInput","beforeinput",null,n,h),f.push({event:h,listeners:d}),h.data=I))}L1(f,e)})}function Sa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Cc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=va(t,n),i!=null&&r.unshift(Sa(t,i,s)),i=va(t,e),i!=null&&r.push(Sa(t,i,s))),t=t.return}return r}function ai(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function K0(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=va(n,i),c!=null&&o.unshift(Sa(n,c,u))):s||(c=va(n,i),c!=null&&o.push(Sa(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var TS=/\r\n?/g,IS=/\u0000|\uFFFD/g;function Q0(t){return(typeof t=="string"?t:""+t).replace(TS,`
`).replace(IS,"")}function Ll(t,e,n){if(e=Q0(e),Q0(t)!==e&&n)throw Error(z(425))}function jc(){}var uf=null,df=null;function hf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var ff=typeof setTimeout=="function"?setTimeout:void 0,AS=typeof clearTimeout=="function"?clearTimeout:void 0,Y0=typeof Promise=="function"?Promise:void 0,CS=typeof queueMicrotask=="function"?queueMicrotask:typeof Y0<"u"?function(t){return Y0.resolve(null).then(t).catch(jS)}:ff;function jS(t){setTimeout(function(){throw t})}function lh(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),_a(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);_a(e)}function Wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function J0(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var oo=Math.random().toString(36).slice(2),Vn="__reactFiber$"+oo,Ta="__reactProps$"+oo,or="__reactContainer$"+oo,mf="__reactEvents$"+oo,kS="__reactListeners$"+oo,PS="__reactHandles$"+oo;function ks(t){var e=t[Vn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[or]||n[Vn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=J0(t);t!==null;){if(n=t[Vn])return n;t=J0(t)}return e}t=n,n=t.parentNode}return null}function Xa(t){return t=t[Vn]||t[or],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function yi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function Su(t){return t[Ta]||null}var pf=[],vi=-1;function ps(t){return{current:t}}function Pe(t){0>vi||(t.current=pf[vi],pf[vi]=null,vi--)}function Ae(t,e){vi++,pf[vi]=t.current,t.current=e}var ss={},jt=ps(ss),qt=ps(!1),Us=ss;function $i(t,e){var n=t.type.contextTypes;if(!n)return ss;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Gt(t){return t=t.childContextTypes,t!=null}function kc(){Pe(qt),Pe(jt)}function X0(t,e,n){if(jt.current!==ss)throw Error(z(168));Ae(jt,e),Ae(qt,n)}function V1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(z(108,gN(t)||"Unknown",s));return Ve({},n,r)}function Pc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ss,Us=jt.current,Ae(jt,t),Ae(qt,qt.current),!0}function Z0(t,e,n){var r=t.stateNode;if(!r)throw Error(z(169));n?(t=V1(t,e,Us),r.__reactInternalMemoizedMergedChildContext=t,Pe(qt),Pe(jt),Ae(jt,t)):Pe(qt),Ae(qt,n)}var Jn=null,Tu=!1,ch=!1;function F1(t){Jn===null?Jn=[t]:Jn.push(t)}function RS(t){Tu=!0,F1(t)}function gs(){if(!ch&&Jn!==null){ch=!0;var t=0,e=Ee;try{var n=Jn;for(Ee=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jn=null,Tu=!1}catch(s){throw Jn!==null&&(Jn=Jn.slice(t+1)),u1(Am,gs),s}finally{Ee=e,ch=!1}}return null}var xi=[],wi=0,Rc=null,Dc=0,un=[],dn=0,$s=null,Xn=1,Zn="";function Is(t,e){xi[wi++]=Dc,xi[wi++]=Rc,Rc=t,Dc=e}function U1(t,e,n){un[dn++]=Xn,un[dn++]=Zn,un[dn++]=$s,$s=t;var r=Xn;t=Zn;var s=32-Sn(r)-1;r&=~(1<<s),n+=1;var i=32-Sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xn=1<<32-Sn(e)+s|n<<s|r,Zn=i+t}else Xn=1<<i|n<<s|r,Zn=t}function Om(t){t.return!==null&&(Is(t,1),U1(t,1,0))}function Vm(t){for(;t===Rc;)Rc=xi[--wi],xi[wi]=null,Dc=xi[--wi],xi[wi]=null;for(;t===$s;)$s=un[--dn],un[dn]=null,Zn=un[--dn],un[dn]=null,Xn=un[--dn],un[dn]=null}var tn=null,Zt=null,De=!1,bn=null;function $1(t,e){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function ey(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,tn=t,Zt=Wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,tn=t,Zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=$s!==null?{id:Xn,overflow:Zn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,tn=t,Zt=null,!0):!1;default:return!1}}function gf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function yf(t){if(De){var e=Zt;if(e){var n=e;if(!ey(t,e)){if(gf(t))throw Error(z(418));e=Wr(n.nextSibling);var r=tn;e&&ey(t,e)?$1(r,n):(t.flags=t.flags&-4097|2,De=!1,tn=t)}}else{if(gf(t))throw Error(z(418));t.flags=t.flags&-4097|2,De=!1,tn=t}}}function ty(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;tn=t}function Ol(t){if(t!==tn)return!1;if(!De)return ty(t),De=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!hf(t.type,t.memoizedProps)),e&&(e=Zt)){if(gf(t))throw z1(),Error(z(418));for(;e;)$1(t,e),e=Wr(e.nextSibling)}if(ty(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Zt=Wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Zt=null}}else Zt=tn?Wr(t.stateNode.nextSibling):null;return!0}function z1(){for(var t=Zt;t;)t=Wr(t.nextSibling)}function zi(){Zt=tn=null,De=!1}function Fm(t){bn===null?bn=[t]:bn.push(t)}var DS=pr.ReactCurrentBatchConfig;function $o(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(z(309));var r=n.stateNode}if(!r)throw Error(z(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(z(284));if(!n._owner)throw Error(z(290,t))}return t}function Vl(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ny(t){var e=t._init;return e(t._payload)}function B1(t){function e(_,b){if(t){var S=_.deletions;S===null?(_.deletions=[b],_.flags|=16):S.push(b)}}function n(_,b){if(!t)return null;for(;b!==null;)e(_,b),b=b.sibling;return null}function r(_,b){for(_=new Map;b!==null;)b.key!==null?_.set(b.key,b):_.set(b.index,b),b=b.sibling;return _}function s(_,b){return _=Kr(_,b),_.index=0,_.sibling=null,_}function i(_,b,S){return _.index=S,t?(S=_.alternate,S!==null?(S=S.index,S<b?(_.flags|=2,b):S):(_.flags|=2,b)):(_.flags|=1048576,b)}function o(_){return t&&_.alternate===null&&(_.flags|=2),_}function u(_,b,S,P){return b===null||b.tag!==6?(b=gh(S,_.mode,P),b.return=_,b):(b=s(b,S),b.return=_,b)}function c(_,b,S,P){var L=S.type;return L===fi?h(_,b,S.props.children,P,S.key):b!==null&&(b.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ir&&ny(L)===b.type)?(P=s(b,S.props),P.ref=$o(_,b,S),P.return=_,P):(P=oc(S.type,S.key,S.props,null,_.mode,P),P.ref=$o(_,b,S),P.return=_,P)}function d(_,b,S,P){return b===null||b.tag!==4||b.stateNode.containerInfo!==S.containerInfo||b.stateNode.implementation!==S.implementation?(b=yh(S,_.mode,P),b.return=_,b):(b=s(b,S.children||[]),b.return=_,b)}function h(_,b,S,P,L){return b===null||b.tag!==7?(b=Ls(S,_.mode,P,L),b.return=_,b):(b=s(b,S),b.return=_,b)}function f(_,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return b=gh(""+b,_.mode,S),b.return=_,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Il:return S=oc(b.type,b.key,b.props,null,_.mode,S),S.ref=$o(_,null,b),S.return=_,S;case hi:return b=yh(b,_.mode,S),b.return=_,b;case Ir:var P=b._init;return f(_,P(b._payload),S)}if(qo(b)||Lo(b))return b=Ls(b,_.mode,S,null),b.return=_,b;Vl(_,b)}return null}function m(_,b,S,P){var L=b!==null?b.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:u(_,b,""+S,P);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Il:return S.key===L?c(_,b,S,P):null;case hi:return S.key===L?d(_,b,S,P):null;case Ir:return L=S._init,m(_,b,L(S._payload),P)}if(qo(S)||Lo(S))return L!==null?null:h(_,b,S,P,null);Vl(_,S)}return null}function v(_,b,S,P,L){if(typeof P=="string"&&P!==""||typeof P=="number")return _=_.get(S)||null,u(b,_,""+P,L);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case Il:return _=_.get(P.key===null?S:P.key)||null,c(b,_,P,L);case hi:return _=_.get(P.key===null?S:P.key)||null,d(b,_,P,L);case Ir:var F=P._init;return v(_,b,S,F(P._payload),L)}if(qo(P)||Lo(P))return _=_.get(S)||null,h(b,_,P,L,null);Vl(b,P)}return null}function y(_,b,S,P){for(var L=null,F=null,I=b,E=b=0,j=null;I!==null&&E<S.length;E++){I.index>E?(j=I,I=null):j=I.sibling;var x=m(_,I,S[E],P);if(x===null){I===null&&(I=j);break}t&&I&&x.alternate===null&&e(_,I),b=i(x,b,E),F===null?L=x:F.sibling=x,F=x,I=j}if(E===S.length)return n(_,I),De&&Is(_,E),L;if(I===null){for(;E<S.length;E++)I=f(_,S[E],P),I!==null&&(b=i(I,b,E),F===null?L=I:F.sibling=I,F=I);return De&&Is(_,E),L}for(I=r(_,I);E<S.length;E++)j=v(I,_,E,S[E],P),j!==null&&(t&&j.alternate!==null&&I.delete(j.key===null?E:j.key),b=i(j,b,E),F===null?L=j:F.sibling=j,F=j);return t&&I.forEach(function(C){return e(_,C)}),De&&Is(_,E),L}function w(_,b,S,P){var L=Lo(S);if(typeof L!="function")throw Error(z(150));if(S=L.call(S),S==null)throw Error(z(151));for(var F=L=null,I=b,E=b=0,j=null,x=S.next();I!==null&&!x.done;E++,x=S.next()){I.index>E?(j=I,I=null):j=I.sibling;var C=m(_,I,x.value,P);if(C===null){I===null&&(I=j);break}t&&I&&C.alternate===null&&e(_,I),b=i(C,b,E),F===null?L=C:F.sibling=C,F=C,I=j}if(x.done)return n(_,I),De&&Is(_,E),L;if(I===null){for(;!x.done;E++,x=S.next())x=f(_,x.value,P),x!==null&&(b=i(x,b,E),F===null?L=x:F.sibling=x,F=x);return De&&Is(_,E),L}for(I=r(_,I);!x.done;E++,x=S.next())x=v(I,_,E,x.value,P),x!==null&&(t&&x.alternate!==null&&I.delete(x.key===null?E:x.key),b=i(x,b,E),F===null?L=x:F.sibling=x,F=x);return t&&I.forEach(function(k){return e(_,k)}),De&&Is(_,E),L}function A(_,b,S,P){if(typeof S=="object"&&S!==null&&S.type===fi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Il:e:{for(var L=S.key,F=b;F!==null;){if(F.key===L){if(L=S.type,L===fi){if(F.tag===7){n(_,F.sibling),b=s(F,S.props.children),b.return=_,_=b;break e}}else if(F.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Ir&&ny(L)===F.type){n(_,F.sibling),b=s(F,S.props),b.ref=$o(_,F,S),b.return=_,_=b;break e}n(_,F);break}else e(_,F);F=F.sibling}S.type===fi?(b=Ls(S.props.children,_.mode,P,S.key),b.return=_,_=b):(P=oc(S.type,S.key,S.props,null,_.mode,P),P.ref=$o(_,b,S),P.return=_,_=P)}return o(_);case hi:e:{for(F=S.key;b!==null;){if(b.key===F)if(b.tag===4&&b.stateNode.containerInfo===S.containerInfo&&b.stateNode.implementation===S.implementation){n(_,b.sibling),b=s(b,S.children||[]),b.return=_,_=b;break e}else{n(_,b);break}else e(_,b);b=b.sibling}b=yh(S,_.mode,P),b.return=_,_=b}return o(_);case Ir:return F=S._init,A(_,b,F(S._payload),P)}if(qo(S))return y(_,b,S,P);if(Lo(S))return w(_,b,S,P);Vl(_,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,b!==null&&b.tag===6?(n(_,b.sibling),b=s(b,S),b.return=_,_=b):(n(_,b),b=gh(S,_.mode,P),b.return=_,_=b),o(_)):n(_,b)}return A}var Bi=B1(!0),W1=B1(!1),Mc=ps(null),Lc=null,_i=null,Um=null;function $m(){Um=_i=Lc=null}function zm(t){var e=Mc.current;Pe(Mc),t._currentValue=e}function vf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ji(t,e){Lc=t,Um=_i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ht=!0),t.firstContext=null)}function pn(t){var e=t._currentValue;if(Um!==t)if(t={context:t,memoizedValue:e,next:null},_i===null){if(Lc===null)throw Error(z(308));_i=t,Lc.dependencies={lanes:0,firstContext:t}}else _i=_i.next=t;return e}var Ps=null;function Bm(t){Ps===null?Ps=[t]:Ps.push(t)}function H1(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Bm(e)):(n.next=s.next,s.next=n),e.interleaved=n,ar(t,r)}function ar(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Ar=!1;function Wm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function q1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Hr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,xe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ar(t,n)}return s=r.interleaved,s===null?(e.next=e,Bm(r)):(e.next=s.next,s.next=e),r.interleaved=e,ar(t,n)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cm(t,n)}}function ry(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Oc(t,e,n,r){var s=t.updateQueue;Ar=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,u=h.lastBaseUpdate,u!==o&&(u===null?h.firstBaseUpdate=d:u.next=d,h.lastBaseUpdate=c))}if(i!==null){var f=s.baseState;o=0,h=d=c=null,u=i;do{var m=u.lane,v=u.eventTime;if((r&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var y=t,w=u;switch(m=e,v=n,w.tag){case 1:if(y=w.payload,typeof y=="function"){f=y.call(v,f,m);break e}f=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=w.payload,m=typeof y=="function"?y.call(v,f,m):y,m==null)break e;f=Ve({},f,m);break e;case 2:Ar=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[u]:m.push(u))}else v={eventTime:v,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},h===null?(d=h=v,c=f):h=h.next=v,o|=m;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;m=u,u=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(h===null&&(c=f),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Bs|=o,t.lanes=o,t.memoizedState=f}}function sy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(z(191,s));s.call(r)}}}var Za={},$n=ps(Za),Ia=ps(Za),Aa=ps(Za);function Rs(t){if(t===Za)throw Error(z(174));return t}function Hm(t,e){switch(Ae(Aa,e),Ae(Ia,t),Ae($n,Za),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Jh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Jh(e,t)}Pe($n),Ae($n,e)}function Wi(){Pe($n),Pe(Ia),Pe(Aa)}function G1(t){Rs(Aa.current);var e=Rs($n.current),n=Jh(e,t.type);e!==n&&(Ae(Ia,t),Ae($n,n))}function qm(t){Ia.current===t&&(Pe($n),Pe(Ia))}var Le=ps(0);function Vc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var uh=[];function Gm(){for(var t=0;t<uh.length;t++)uh[t]._workInProgressVersionPrimary=null;uh.length=0}var tc=pr.ReactCurrentDispatcher,dh=pr.ReactCurrentBatchConfig,zs=0,Oe=null,ot=null,dt=null,Fc=!1,ia=!1,Ca=0,MS=0;function Et(){throw Error(z(321))}function Km(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function Qm(t,e,n,r,s,i){if(zs=i,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tc.current=t===null||t.memoizedState===null?FS:US,t=n(r,s),ia){i=0;do{if(ia=!1,Ca=0,25<=i)throw Error(z(301));i+=1,dt=ot=null,e.updateQueue=null,tc.current=$S,t=n(r,s)}while(ia)}if(tc.current=Uc,e=ot!==null&&ot.next!==null,zs=0,dt=ot=Oe=null,Fc=!1,e)throw Error(z(300));return t}function Ym(){var t=Ca!==0;return Ca=0,t}function Ln(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return dt===null?Oe.memoizedState=dt=t:dt=dt.next=t,dt}function gn(){if(ot===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=ot.next;var e=dt===null?Oe.memoizedState:dt.next;if(e!==null)dt=e,ot=t;else{if(t===null)throw Error(z(310));ot=t,t={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},dt===null?Oe.memoizedState=dt=t:dt=dt.next=t}return dt}function ja(t,e){return typeof e=="function"?e(t):e}function hh(t){var e=gn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=ot,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,d=i;do{var h=d.lane;if((zs&h)===h)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=f,o=r):c=c.next=f,Oe.lanes|=h,Bs|=h}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=u,Cn(r,e.memoizedState)||(Ht=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Oe.lanes|=i,Bs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function fh(t){var e=gn(),n=e.queue;if(n===null)throw Error(z(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);Cn(i,e.memoizedState)||(Ht=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function K1(){}function Q1(t,e){var n=Oe,r=gn(),s=e(),i=!Cn(r.memoizedState,s);if(i&&(r.memoizedState=s,Ht=!0),r=r.queue,Jm(X1.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||dt!==null&&dt.memoizedState.tag&1){if(n.flags|=2048,ka(9,J1.bind(null,n,r,s,e),void 0,null),ft===null)throw Error(z(349));zs&30||Y1(n,e,s)}return s}function Y1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function J1(t,e,n,r){e.value=n,e.getSnapshot=r,Z1(e)&&ew(t)}function X1(t,e,n){return n(function(){Z1(e)&&ew(t)})}function Z1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function ew(t){var e=ar(t,1);e!==null&&Tn(e,t,1,-1)}function iy(t){var e=Ln();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:t},e.queue=t,t=t.dispatch=VS.bind(null,Oe,t),[e.memoizedState,t]}function ka(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function tw(){return gn().memoizedState}function nc(t,e,n,r){var s=Ln();Oe.flags|=t,s.memoizedState=ka(1|e,n,void 0,r===void 0?null:r)}function Iu(t,e,n,r){var s=gn();r=r===void 0?null:r;var i=void 0;if(ot!==null){var o=ot.memoizedState;if(i=o.destroy,r!==null&&Km(r,o.deps)){s.memoizedState=ka(e,n,i,r);return}}Oe.flags|=t,s.memoizedState=ka(1|e,n,i,r)}function oy(t,e){return nc(8390656,8,t,e)}function Jm(t,e){return Iu(2048,8,t,e)}function nw(t,e){return Iu(4,2,t,e)}function rw(t,e){return Iu(4,4,t,e)}function sw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function iw(t,e,n){return n=n!=null?n.concat([t]):null,Iu(4,4,sw.bind(null,e,t),n)}function Xm(){}function ow(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Km(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function aw(t,e){var n=gn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Km(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function lw(t,e,n){return zs&21?(Cn(n,e)||(n=f1(),Oe.lanes|=n,Bs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ht=!0),t.memoizedState=n)}function LS(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var r=dh.transition;dh.transition={};try{t(!1),e()}finally{Ee=n,dh.transition=r}}function cw(){return gn().memoizedState}function OS(t,e,n){var r=Gr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},uw(t))dw(e,n);else if(n=H1(t,e,n,r),n!==null){var s=Ft();Tn(n,t,r,s),hw(n,e,r)}}function VS(t,e,n){var r=Gr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(uw(t))dw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,Cn(u,o)){var c=e.interleaved;c===null?(s.next=s,Bm(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=H1(t,e,s,r),n!==null&&(s=Ft(),Tn(n,t,r,s),hw(n,e,r))}}function uw(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function dw(t,e){ia=Fc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function hw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Cm(t,n)}}var Uc={readContext:pn,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},FS={readContext:pn,useCallback:function(t,e){return Ln().memoizedState=[t,e===void 0?null:e],t},useContext:pn,useEffect:oy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,sw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=Ln();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ln();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=OS.bind(null,Oe,t),[r.memoizedState,t]},useRef:function(t){var e=Ln();return t={current:t},e.memoizedState=t},useState:iy,useDebugValue:Xm,useDeferredValue:function(t){return Ln().memoizedState=t},useTransition:function(){var t=iy(!1),e=t[0];return t=LS.bind(null,t[1]),Ln().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Oe,s=Ln();if(De){if(n===void 0)throw Error(z(407));n=n()}else{if(n=e(),ft===null)throw Error(z(349));zs&30||Y1(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,oy(X1.bind(null,r,i,t),[t]),r.flags|=2048,ka(9,J1.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Ln(),e=ft.identifierPrefix;if(De){var n=Zn,r=Xn;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ca++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=MS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},US={readContext:pn,useCallback:ow,useContext:pn,useEffect:Jm,useImperativeHandle:iw,useInsertionEffect:nw,useLayoutEffect:rw,useMemo:aw,useReducer:hh,useRef:tw,useState:function(){return hh(ja)},useDebugValue:Xm,useDeferredValue:function(t){var e=gn();return lw(e,ot.memoizedState,t)},useTransition:function(){var t=hh(ja)[0],e=gn().memoizedState;return[t,e]},useMutableSource:K1,useSyncExternalStore:Q1,useId:cw,unstable_isNewReconciler:!1},$S={readContext:pn,useCallback:ow,useContext:pn,useEffect:Jm,useImperativeHandle:iw,useInsertionEffect:nw,useLayoutEffect:rw,useMemo:aw,useReducer:fh,useRef:tw,useState:function(){return fh(ja)},useDebugValue:Xm,useDeferredValue:function(t){var e=gn();return ot===null?e.memoizedState=t:lw(e,ot.memoizedState,t)},useTransition:function(){var t=fh(ja)[0],e=gn().memoizedState;return[t,e]},useMutableSource:K1,useSyncExternalStore:Q1,useId:cw,unstable_isNewReconciler:!1};function wn(t,e){if(t&&t.defaultProps){e=Ve({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function xf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ve({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Au={isMounted:function(t){return(t=t._reactInternals)?Zs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ft(),s=Gr(t),i=nr(r,s);i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(Tn(e,t,s,r),ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ft(),s=Gr(t),i=nr(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Hr(t,i,s),e!==null&&(Tn(e,t,s,r),ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ft(),r=Gr(t),s=nr(n,r);s.tag=2,e!=null&&(s.callback=e),e=Hr(t,s,r),e!==null&&(Tn(e,t,r,n),ec(e,t,r))}};function ay(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Ea(n,r)||!Ea(s,i):!0}function fw(t,e,n){var r=!1,s=ss,i=e.contextType;return typeof i=="object"&&i!==null?i=pn(i):(s=Gt(e)?Us:jt.current,r=e.contextTypes,i=(r=r!=null)?$i(t,s):ss),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Au,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function ly(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Au.enqueueReplaceState(e,e.state,null)}function wf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Wm(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=pn(i):(i=Gt(e)?Us:jt.current,s.context=$i(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(xf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Au.enqueueReplaceState(s,s.state,null),Oc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Hi(t,e){try{var n="",r=e;do n+=pN(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function _f(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var zS=typeof WeakMap=="function"?WeakMap:Map;function mw(t,e,n){n=nr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){zc||(zc=!0,kf=r),_f(t,e)},n}function pw(t,e,n){n=nr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){_f(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){_f(t,e),typeof r!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function cy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new zS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=nT.bind(null,t,e,n),e.then(t,t))}function uy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function dy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nr(-1,1),e.tag=2,Hr(n,e,1))),n.lanes|=1),t)}var BS=pr.ReactCurrentOwner,Ht=!1;function Mt(t,e,n,r){e.child=t===null?W1(e,null,n,r):Bi(e,t.child,n,r)}function hy(t,e,n,r,s){n=n.render;var i=e.ref;return ji(e,s),r=Qm(t,e,n,r,i,s),n=Ym(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,lr(t,e,s)):(De&&n&&Om(e),e.flags|=1,Mt(t,e,r,s),e.child)}function fy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!op(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,gw(t,e,i,r,s)):(t=oc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Ea,n(o,r)&&t.ref===e.ref)return lr(t,e,s)}return e.flags|=1,t=Kr(i,r),t.ref=e.ref,t.return=e,e.child=t}function gw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Ea(i,r)&&t.ref===e.ref)if(Ht=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Ht=!0);else return e.lanes=t.lanes,lr(t,e,s)}return bf(t,e,n,r,s)}function yw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(Ei,Xt),Xt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(Ei,Xt),Xt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,Ae(Ei,Xt),Xt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,Ae(Ei,Xt),Xt|=r;return Mt(t,e,s,n),e.child}function vw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function bf(t,e,n,r,s){var i=Gt(n)?Us:jt.current;return i=$i(e,i),ji(e,s),n=Qm(t,e,n,r,i,s),r=Ym(),t!==null&&!Ht?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,lr(t,e,s)):(De&&r&&Om(e),e.flags|=1,Mt(t,e,n,s),e.child)}function my(t,e,n,r,s){if(Gt(n)){var i=!0;Pc(e)}else i=!1;if(ji(e,s),e.stateNode===null)rc(t,e),fw(e,n,r),wf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=pn(d):(d=Gt(n)?Us:jt.current,d=$i(e,d));var h=n.getDerivedStateFromProps,f=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&ly(e,o,r,d),Ar=!1;var m=e.memoizedState;o.state=m,Oc(e,r,o,s),c=e.memoizedState,u!==r||m!==c||qt.current||Ar?(typeof h=="function"&&(xf(e,n,h,r),c=e.memoizedState),(u=Ar||ay(e,n,u,r,m,c,d))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,q1(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:wn(e.type,u),o.props=d,f=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=pn(c):(c=Gt(n)?Us:jt.current,c=$i(e,c));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==f||m!==c)&&ly(e,o,r,c),Ar=!1,m=e.memoizedState,o.state=m,Oc(e,r,o,s);var y=e.memoizedState;u!==f||m!==y||qt.current||Ar?(typeof v=="function"&&(xf(e,n,v,r),y=e.memoizedState),(d=Ar||ay(e,n,d,r,m,y,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Ef(t,e,n,r,i,s)}function Ef(t,e,n,r,s,i){vw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Z0(e,n,!1),lr(t,e,i);r=e.stateNode,BS.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Bi(e,t.child,null,i),e.child=Bi(e,null,u,i)):Mt(t,e,u,i),e.memoizedState=r.state,s&&Z0(e,n,!0),e.child}function xw(t){var e=t.stateNode;e.pendingContext?X0(t,e.pendingContext,e.pendingContext!==e.context):e.context&&X0(t,e.context,!1),Hm(t,e.containerInfo)}function py(t,e,n,r,s){return zi(),Fm(s),e.flags|=256,Mt(t,e,n,r),e.child}var Nf={dehydrated:null,treeContext:null,retryLane:0};function Sf(t){return{baseLanes:t,cachePool:null,transitions:null}}function ww(t,e,n){var r=e.pendingProps,s=Le.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),Ae(Le,s&1),t===null)return yf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=ku(o,r,0,null),t=Ls(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Sf(n),e.memoizedState=Nf,t):Zm(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return WS(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Kr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Kr(u,i):(i=Ls(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Sf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Nf,r}return i=t.child,t=i.sibling,r=Kr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zm(t,e){return e=ku({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Fl(t,e,n,r){return r!==null&&Fm(r),Bi(e,t.child,null,n),t=Zm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function WS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=mh(Error(z(422))),Fl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=ku({mode:"visible",children:r.children},s,0,null),i=Ls(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Bi(e,t.child,null,o),e.child.memoizedState=Sf(o),e.memoizedState=Nf,i);if(!(e.mode&1))return Fl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(z(419)),r=mh(i,r,void 0),Fl(t,e,o,r)}if(u=(o&t.childLanes)!==0,Ht||u){if(r=ft,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ar(t,s),Tn(r,t,s,-1))}return ip(),r=mh(Error(z(421))),Fl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=rT.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Zt=Wr(s.nextSibling),tn=e,De=!0,bn=null,t!==null&&(un[dn++]=Xn,un[dn++]=Zn,un[dn++]=$s,Xn=t.id,Zn=t.overflow,$s=e),e=Zm(e,r.children),e.flags|=4096,e)}function gy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),vf(t.return,e,n)}function ph(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function _w(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Mt(t,e,r.children,n),r=Le.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&gy(t,n,e);else if(t.tag===19)gy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ae(Le,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Vc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),ph(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Vc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}ph(e,!0,n,null,i);break;case"together":ph(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function lr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Bs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,n=Kr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Kr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function HS(t,e,n){switch(e.tag){case 3:xw(e),zi();break;case 5:G1(e);break;case 1:Gt(e.type)&&Pc(e);break;case 4:Hm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;Ae(Mc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ae(Le,Le.current&1),e.flags|=128,null):n&e.child.childLanes?ww(t,e,n):(Ae(Le,Le.current&1),t=lr(t,e,n),t!==null?t.sibling:null);Ae(Le,Le.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return _w(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Ae(Le,Le.current),r)break;return null;case 22:case 23:return e.lanes=0,yw(t,e,n)}return lr(t,e,n)}var bw,Tf,Ew,Nw;bw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Tf=function(){};Ew=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,Rs($n.current);var i=null;switch(n){case"input":s=Gh(t,s),r=Gh(t,r),i=[];break;case"select":s=Ve({},s,{value:void 0}),r=Ve({},r,{value:void 0}),i=[];break;case"textarea":s=Yh(t,s),r=Yh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=jc)}Xh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ga.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ga.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&je("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Nw=function(t,e,n,r){n!==r&&(e.flags|=4)};function zo(t,e){if(!De)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qS(t,e,n){var r=e.pendingProps;switch(Vm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return Gt(e.type)&&kc(),Nt(e),null;case 3:return r=e.stateNode,Wi(),Pe(qt),Pe(jt),Gm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ol(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,bn!==null&&(Df(bn),bn=null))),Tf(t,e),Nt(e),null;case 5:qm(e);var s=Rs(Aa.current);if(n=e.type,t!==null&&e.stateNode!=null)Ew(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(z(166));return Nt(e),null}if(t=Rs($n.current),Ol(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Vn]=e,r[Ta]=i,t=(e.mode&1)!==0,n){case"dialog":je("cancel",r),je("close",r);break;case"iframe":case"object":case"embed":je("load",r);break;case"video":case"audio":for(s=0;s<Ko.length;s++)je(Ko[s],r);break;case"source":je("error",r);break;case"img":case"image":case"link":je("error",r),je("load",r);break;case"details":je("toggle",r);break;case"input":S0(r,i),je("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},je("invalid",r);break;case"textarea":I0(r,i),je("invalid",r)}Xh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,u,t),s=["children",""+u]):ga.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&je("scroll",r)}switch(n){case"input":Al(r),T0(r,i,!0);break;case"textarea":Al(r),A0(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=jc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Xx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Vn]=e,t[Ta]=r,bw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Zh(n,r),n){case"dialog":je("cancel",t),je("close",t),s=r;break;case"iframe":case"object":case"embed":je("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ko.length;s++)je(Ko[s],t);s=r;break;case"source":je("error",t),s=r;break;case"img":case"image":case"link":je("error",t),je("load",t),s=r;break;case"details":je("toggle",t),s=r;break;case"input":S0(t,r),s=Gh(t,r),je("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ve({},r,{value:void 0}),je("invalid",t);break;case"textarea":I0(t,r),s=Yh(t,r),je("invalid",t);break;default:s=r}Xh(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?t1(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Zx(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ya(t,c):typeof c=="number"&&ya(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ga.hasOwnProperty(i)?c!=null&&i==="onScroll"&&je("scroll",t):c!=null&&Em(t,i,c,o))}switch(n){case"input":Al(t),T0(t,r,!1);break;case"textarea":Al(t),A0(t);break;case"option":r.value!=null&&t.setAttribute("value",""+rs(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ti(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ti(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=jc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)Nw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(z(166));if(n=Rs(Aa.current),Rs($n.current),Ol(e)){if(r=e.stateNode,n=e.memoizedProps,r[Vn]=e,(i=r.nodeValue!==n)&&(t=tn,t!==null))switch(t.tag){case 3:Ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ll(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vn]=e,e.stateNode=r}return Nt(e),null;case 13:if(Pe(Le),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(De&&Zt!==null&&e.mode&1&&!(e.flags&128))z1(),zi(),e.flags|=98560,i=!1;else if(i=Ol(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(z(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(z(317));i[Vn]=e}else zi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),i=!1}else bn!==null&&(Df(bn),bn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Le.current&1?at===0&&(at=3):ip())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return Wi(),Tf(t,e),t===null&&Na(e.stateNode.containerInfo),Nt(e),null;case 10:return zm(e.type._context),Nt(e),null;case 17:return Gt(e.type)&&kc(),Nt(e),null;case 19:if(Pe(Le),i=e.memoizedState,i===null)return Nt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)zo(i,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Vc(t),o!==null){for(e.flags|=128,zo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Le,Le.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ke()>qi&&(e.flags|=128,r=!0,zo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Vc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),zo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!De)return Nt(e),null}else 2*Ke()-i.renderingStartTime>qi&&n!==1073741824&&(e.flags|=128,r=!0,zo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ke(),e.sibling=null,n=Le.current,Ae(Le,r?n&1|2:n&1),e):(Nt(e),null);case 22:case 23:return sp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Xt&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function GS(t,e){switch(Vm(e),e.tag){case 1:return Gt(e.type)&&kc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wi(),Pe(qt),Pe(jt),Gm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return qm(e),null;case 13:if(Pe(Le),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));zi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Pe(Le),null;case 4:return Wi(),null;case 10:return zm(e.type._context),null;case 22:case 23:return sp(),null;case 24:return null;default:return null}}var Ul=!1,At=!1,KS=typeof WeakSet=="function"?WeakSet:Set,G=null;function bi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ze(t,e,r)}else n.current=null}function If(t,e,n){try{n()}catch(r){ze(t,e,r)}}var yy=!1;function QS(t,e){if(uf=Ic,t=C1(),Lm(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var v;f!==n||s!==0&&f.nodeType!==3||(u=o+s),f!==i||r!==0&&f.nodeType!==3||(c=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===t)break t;if(m===n&&++d===s&&(u=o),m===i&&++h===r&&(c=o),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(df={focusedElem:t,selectionRange:n},Ic=!1,G=e;G!==null;)if(e=G,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,G=t;else for(;G!==null;){e=G;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var w=y.memoizedProps,A=y.memoizedState,_=e.stateNode,b=_.getSnapshotBeforeUpdate(e.elementType===e.type?w:wn(e.type,w),A);_.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(P){ze(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,G=t;break}G=e.return}return y=yy,yy=!1,y}function oa(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&If(e,n,i)}s=s.next}while(s!==r)}}function Cu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Af(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Sw(t){var e=t.alternate;e!==null&&(t.alternate=null,Sw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vn],delete e[Ta],delete e[mf],delete e[kS],delete e[PS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Tw(t){return t.tag===5||t.tag===3||t.tag===4}function vy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Tw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Cf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=jc));else if(r!==4&&(t=t.child,t!==null))for(Cf(t,e,n),t=t.sibling;t!==null;)Cf(t,e,n),t=t.sibling}function jf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(jf(t,e,n),t=t.sibling;t!==null;)jf(t,e,n),t=t.sibling}var pt=null,_n=!1;function Sr(t,e,n){for(n=n.child;n!==null;)Iw(t,e,n),n=n.sibling}function Iw(t,e,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(_u,n)}catch{}switch(n.tag){case 5:At||bi(n,e);case 6:var r=pt,s=_n;pt=null,Sr(t,e,n),pt=r,_n=s,pt!==null&&(_n?(t=pt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):pt.removeChild(n.stateNode));break;case 18:pt!==null&&(_n?(t=pt,n=n.stateNode,t.nodeType===8?lh(t.parentNode,n):t.nodeType===1&&lh(t,n),_a(t)):lh(pt,n.stateNode));break;case 4:r=pt,s=_n,pt=n.stateNode.containerInfo,_n=!0,Sr(t,e,n),pt=r,_n=s;break;case 0:case 11:case 14:case 15:if(!At&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&If(n,e,o),s=s.next}while(s!==r)}Sr(t,e,n);break;case 1:if(!At&&(bi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){ze(n,e,u)}Sr(t,e,n);break;case 21:Sr(t,e,n);break;case 22:n.mode&1?(At=(r=At)||n.memoizedState!==null,Sr(t,e,n),At=r):Sr(t,e,n);break;default:Sr(t,e,n)}}function xy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new KS),e.forEach(function(r){var s=sT.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function xn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:pt=u.stateNode,_n=!1;break e;case 3:pt=u.stateNode.containerInfo,_n=!0;break e;case 4:pt=u.stateNode.containerInfo,_n=!0;break e}u=u.return}if(pt===null)throw Error(z(160));Iw(i,o,s),pt=null,_n=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){ze(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Aw(e,t),e=e.sibling}function Aw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xn(e,t),Mn(t),r&4){try{oa(3,t,t.return),Cu(3,t)}catch(w){ze(t,t.return,w)}try{oa(5,t,t.return)}catch(w){ze(t,t.return,w)}}break;case 1:xn(e,t),Mn(t),r&512&&n!==null&&bi(n,n.return);break;case 5:if(xn(e,t),Mn(t),r&512&&n!==null&&bi(n,n.return),t.flags&32){var s=t.stateNode;try{ya(s,"")}catch(w){ze(t,t.return,w)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&Yx(s,i),Zh(u,o);var d=Zh(u,i);for(o=0;o<c.length;o+=2){var h=c[o],f=c[o+1];h==="style"?t1(s,f):h==="dangerouslySetInnerHTML"?Zx(s,f):h==="children"?ya(s,f):Em(s,h,f,d)}switch(u){case"input":Kh(s,i);break;case"textarea":Jx(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Ti(s,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ti(s,!!i.multiple,i.defaultValue,!0):Ti(s,!!i.multiple,i.multiple?[]:"",!1))}s[Ta]=i}catch(w){ze(t,t.return,w)}}break;case 6:if(xn(e,t),Mn(t),r&4){if(t.stateNode===null)throw Error(z(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(w){ze(t,t.return,w)}}break;case 3:if(xn(e,t),Mn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_a(e.containerInfo)}catch(w){ze(t,t.return,w)}break;case 4:xn(e,t),Mn(t);break;case 13:xn(e,t),Mn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(np=Ke())),r&4&&xy(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(At=(d=At)||h,xn(e,t),At=d):xn(e,t),Mn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(G=t,h=t.child;h!==null;){for(f=G=h;G!==null;){switch(m=G,v=m.child,m.tag){case 0:case 11:case 14:case 15:oa(4,m,m.return);break;case 1:bi(m,m.return);var y=m.stateNode;if(typeof y.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(w){ze(r,n,w)}}break;case 5:bi(m,m.return);break;case 22:if(m.memoizedState!==null){_y(f);continue}}v!==null?(v.return=m,G=v):_y(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=e1("display",o))}catch(w){ze(t,t.return,w)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(w){ze(t,t.return,w)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:xn(e,t),Mn(t),r&4&&xy(t);break;case 21:break;default:xn(e,t),Mn(t)}}function Mn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Tw(n)){var r=n;break e}n=n.return}throw Error(z(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(ya(s,""),r.flags&=-33);var i=vy(t);jf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=vy(t);Cf(t,u,o);break;default:throw Error(z(161))}}catch(c){ze(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function YS(t,e,n){G=t,Cw(t)}function Cw(t,e,n){for(var r=(t.mode&1)!==0;G!==null;){var s=G,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ul;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||At;u=Ul;var d=At;if(Ul=o,(At=c)&&!d)for(G=s;G!==null;)o=G,c=o.child,o.tag===22&&o.memoizedState!==null?by(s):c!==null?(c.return=o,G=c):by(s);for(;i!==null;)G=i,Cw(i),i=i.sibling;G=s,Ul=u,At=d}wy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,G=i):wy(t)}}function wy(t){for(;G!==null;){var e=G;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:At||Cu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!At)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:wn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&sy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}sy(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&_a(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}At||e.flags&512&&Af(e)}catch(m){ze(e,e.return,m)}}if(e===t){G=null;break}if(n=e.sibling,n!==null){n.return=e.return,G=n;break}G=e.return}}function _y(t){for(;G!==null;){var e=G;if(e===t){G=null;break}var n=e.sibling;if(n!==null){n.return=e.return,G=n;break}G=e.return}}function by(t){for(;G!==null;){var e=G;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Cu(4,e)}catch(c){ze(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){ze(e,s,c)}}var i=e.return;try{Af(e)}catch(c){ze(e,i,c)}break;case 5:var o=e.return;try{Af(e)}catch(c){ze(e,o,c)}}}catch(c){ze(e,e.return,c)}if(e===t){G=null;break}var u=e.sibling;if(u!==null){u.return=e.return,G=u;break}G=e.return}}var JS=Math.ceil,$c=pr.ReactCurrentDispatcher,ep=pr.ReactCurrentOwner,mn=pr.ReactCurrentBatchConfig,xe=0,ft=null,tt=null,vt=0,Xt=0,Ei=ps(0),at=0,Pa=null,Bs=0,ju=0,tp=0,aa=null,Bt=null,np=0,qi=1/0,Yn=null,zc=!1,kf=null,qr=null,$l=!1,Vr=null,Bc=0,la=0,Pf=null,sc=-1,ic=0;function Ft(){return xe&6?Ke():sc!==-1?sc:sc=Ke()}function Gr(t){return t.mode&1?xe&2&&vt!==0?vt&-vt:DS.transition!==null?(ic===0&&(ic=f1()),ic):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:w1(t.type)),t):1}function Tn(t,e,n,r){if(50<la)throw la=0,Pf=null,Error(z(185));Ya(t,n,r),(!(xe&2)||t!==ft)&&(t===ft&&(!(xe&2)&&(ju|=n),at===4&&jr(t,vt)),Kt(t,r),n===1&&xe===0&&!(e.mode&1)&&(qi=Ke()+500,Tu&&gs()))}function Kt(t,e){var n=t.callbackNode;DN(t,e);var r=Tc(t,t===ft?vt:0);if(r===0)n!==null&&k0(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&k0(n),e===1)t.tag===0?RS(Ey.bind(null,t)):F1(Ey.bind(null,t)),CS(function(){!(xe&6)&&gs()}),n=null;else{switch(m1(r)){case 1:n=Am;break;case 4:n=d1;break;case 16:n=Sc;break;case 536870912:n=h1;break;default:n=Sc}n=Ow(n,jw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function jw(t,e){if(sc=-1,ic=0,xe&6)throw Error(z(327));var n=t.callbackNode;if(ki()&&t.callbackNode!==n)return null;var r=Tc(t,t===ft?vt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Wc(t,r);else{e=r;var s=xe;xe|=2;var i=Pw();(ft!==t||vt!==e)&&(Yn=null,qi=Ke()+500,Ms(t,e));do try{eT();break}catch(u){kw(t,u)}while(1);$m(),$c.current=i,xe=s,tt!==null?e=0:(ft=null,vt=0,e=at)}if(e!==0){if(e===2&&(s=sf(t),s!==0&&(r=s,e=Rf(t,s))),e===1)throw n=Pa,Ms(t,0),jr(t,r),Kt(t,Ke()),n;if(e===6)jr(t,r);else{if(s=t.current.alternate,!(r&30)&&!XS(s)&&(e=Wc(t,r),e===2&&(i=sf(t),i!==0&&(r=i,e=Rf(t,i))),e===1))throw n=Pa,Ms(t,0),jr(t,r),Kt(t,Ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(z(345));case 2:As(t,Bt,Yn);break;case 3:if(jr(t,r),(r&130023424)===r&&(e=np+500-Ke(),10<e)){if(Tc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Ft(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=ff(As.bind(null,t,Bt,Yn),e);break}As(t,Bt,Yn);break;case 4:if(jr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-Sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JS(r/1960))-r,10<r){t.timeoutHandle=ff(As.bind(null,t,Bt,Yn),r);break}As(t,Bt,Yn);break;case 5:As(t,Bt,Yn);break;default:throw Error(z(329))}}}return Kt(t,Ke()),t.callbackNode===n?jw.bind(null,t):null}function Rf(t,e){var n=aa;return t.current.memoizedState.isDehydrated&&(Ms(t,e).flags|=256),t=Wc(t,e),t!==2&&(e=Bt,Bt=n,e!==null&&Df(e)),t}function Df(t){Bt===null?Bt=t:Bt.push.apply(Bt,t)}function XS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Cn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function jr(t,e){for(e&=~tp,e&=~ju,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function Ey(t){if(xe&6)throw Error(z(327));ki();var e=Tc(t,0);if(!(e&1))return Kt(t,Ke()),null;var n=Wc(t,e);if(t.tag!==0&&n===2){var r=sf(t);r!==0&&(e=r,n=Rf(t,r))}if(n===1)throw n=Pa,Ms(t,0),jr(t,e),Kt(t,Ke()),n;if(n===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,As(t,Bt,Yn),Kt(t,Ke()),null}function rp(t,e){var n=xe;xe|=1;try{return t(e)}finally{xe=n,xe===0&&(qi=Ke()+500,Tu&&gs())}}function Ws(t){Vr!==null&&Vr.tag===0&&!(xe&6)&&ki();var e=xe;xe|=1;var n=mn.transition,r=Ee;try{if(mn.transition=null,Ee=1,t)return t()}finally{Ee=r,mn.transition=n,xe=e,!(xe&6)&&gs()}}function sp(){Xt=Ei.current,Pe(Ei)}function Ms(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,AS(n)),tt!==null)for(n=tt.return;n!==null;){var r=n;switch(Vm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&kc();break;case 3:Wi(),Pe(qt),Pe(jt),Gm();break;case 5:qm(r);break;case 4:Wi();break;case 13:Pe(Le);break;case 19:Pe(Le);break;case 10:zm(r.type._context);break;case 22:case 23:sp()}n=n.return}if(ft=t,tt=t=Kr(t.current,null),vt=Xt=e,at=0,Pa=null,tp=ju=Bs=0,Bt=aa=null,Ps!==null){for(e=0;e<Ps.length;e++)if(n=Ps[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}Ps=null}return t}function kw(t,e){do{var n=tt;try{if($m(),tc.current=Uc,Fc){for(var r=Oe.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Fc=!1}if(zs=0,dt=ot=Oe=null,ia=!1,Ca=0,ep.current=null,n===null||n.return===null){at=1,Pa=e,tt=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=vt,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,h=u,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=uy(o);if(v!==null){v.flags&=-257,dy(v,o,u,i,e),v.mode&1&&cy(i,d,e),e=v,c=d;var y=e.updateQueue;if(y===null){var w=new Set;w.add(c),e.updateQueue=w}else y.add(c);break e}else{if(!(e&1)){cy(i,d,e),ip();break e}c=Error(z(426))}}else if(De&&u.mode&1){var A=uy(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),dy(A,o,u,i,e),Fm(Hi(c,u));break e}}i=c=Hi(c,u),at!==4&&(at=2),aa===null?aa=[i]:aa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var _=mw(i,c,e);ry(i,_);break e;case 1:u=c;var b=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(qr===null||!qr.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=pw(i,u,e);ry(i,P);break e}}i=i.return}while(i!==null)}Dw(n)}catch(L){e=L,tt===n&&n!==null&&(tt=n=n.return);continue}break}while(1)}function Pw(){var t=$c.current;return $c.current=Uc,t===null?Uc:t}function ip(){(at===0||at===3||at===2)&&(at=4),ft===null||!(Bs&268435455)&&!(ju&268435455)||jr(ft,vt)}function Wc(t,e){var n=xe;xe|=2;var r=Pw();(ft!==t||vt!==e)&&(Yn=null,Ms(t,e));do try{ZS();break}catch(s){kw(t,s)}while(1);if($m(),xe=n,$c.current=r,tt!==null)throw Error(z(261));return ft=null,vt=0,at}function ZS(){for(;tt!==null;)Rw(tt)}function eT(){for(;tt!==null&&!SN();)Rw(tt)}function Rw(t){var e=Lw(t.alternate,t,Xt);t.memoizedProps=t.pendingProps,e===null?Dw(t):tt=e,ep.current=null}function Dw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=GS(n,e),n!==null){n.flags&=32767,tt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,tt=null;return}}else if(n=qS(n,e,Xt),n!==null){tt=n;return}if(e=e.sibling,e!==null){tt=e;return}tt=e=t}while(e!==null);at===0&&(at=5)}function As(t,e,n){var r=Ee,s=mn.transition;try{mn.transition=null,Ee=1,tT(t,e,n,r)}finally{mn.transition=s,Ee=r}return null}function tT(t,e,n,r){do ki();while(Vr!==null);if(xe&6)throw Error(z(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(MN(t,i),t===ft&&(tt=ft=null,vt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||$l||($l=!0,Ow(Sc,function(){return ki(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mn.transition,mn.transition=null;var o=Ee;Ee=1;var u=xe;xe|=4,ep.current=null,QS(t,n),Aw(n,t),_S(df),Ic=!!uf,df=uf=null,t.current=n,YS(n),TN(),xe=u,Ee=o,mn.transition=i}else t.current=n;if($l&&($l=!1,Vr=t,Bc=s),i=t.pendingLanes,i===0&&(qr=null),CN(n.stateNode),Kt(t,Ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(zc)throw zc=!1,t=kf,kf=null,t;return Bc&1&&t.tag!==0&&ki(),i=t.pendingLanes,i&1?t===Pf?la++:(la=0,Pf=t):la=0,gs(),null}function ki(){if(Vr!==null){var t=m1(Bc),e=mn.transition,n=Ee;try{if(mn.transition=null,Ee=16>t?16:t,Vr===null)var r=!1;else{if(t=Vr,Vr=null,Bc=0,xe&6)throw Error(z(331));var s=xe;for(xe|=4,G=t.current;G!==null;){var i=G,o=i.child;if(G.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(G=d;G!==null;){var h=G;switch(h.tag){case 0:case 11:case 15:oa(8,h,i)}var f=h.child;if(f!==null)f.return=h,G=f;else for(;G!==null;){h=G;var m=h.sibling,v=h.return;if(Sw(h),h===d){G=null;break}if(m!==null){m.return=v,G=m;break}G=v}}}var y=i.alternate;if(y!==null){var w=y.child;if(w!==null){y.child=null;do{var A=w.sibling;w.sibling=null,w=A}while(w!==null)}}G=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,G=o;else e:for(;G!==null;){if(i=G,i.flags&2048)switch(i.tag){case 0:case 11:case 15:oa(9,i,i.return)}var _=i.sibling;if(_!==null){_.return=i.return,G=_;break e}G=i.return}}var b=t.current;for(G=b;G!==null;){o=G;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,G=S;else e:for(o=b;G!==null;){if(u=G,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:Cu(9,u)}}catch(L){ze(u,u.return,L)}if(u===o){G=null;break e}var P=u.sibling;if(P!==null){P.return=u.return,G=P;break e}G=u.return}}if(xe=s,gs(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(_u,t)}catch{}r=!0}return r}finally{Ee=n,mn.transition=e}}return!1}function Ny(t,e,n){e=Hi(n,e),e=mw(t,e,1),t=Hr(t,e,1),e=Ft(),t!==null&&(Ya(t,1,e),Kt(t,e))}function ze(t,e,n){if(t.tag===3)Ny(t,t,n);else for(;e!==null;){if(e.tag===3){Ny(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(qr===null||!qr.has(r))){t=Hi(n,t),t=pw(e,t,1),e=Hr(e,t,1),t=Ft(),e!==null&&(Ya(e,1,t),Kt(e,t));break}}e=e.return}}function nT(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ft(),t.pingedLanes|=t.suspendedLanes&n,ft===t&&(vt&n)===n&&(at===4||at===3&&(vt&130023424)===vt&&500>Ke()-np?Ms(t,0):tp|=n),Kt(t,e)}function Mw(t,e){e===0&&(t.mode&1?(e=kl,kl<<=1,!(kl&130023424)&&(kl=4194304)):e=1);var n=Ft();t=ar(t,e),t!==null&&(Ya(t,e,n),Kt(t,n))}function rT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Mw(t,n)}function sT(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(z(314))}r!==null&&r.delete(e),Mw(t,n)}var Lw;Lw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||qt.current)Ht=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ht=!1,HS(t,e,n);Ht=!!(t.flags&131072)}else Ht=!1,De&&e.flags&1048576&&U1(e,Dc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rc(t,e),t=e.pendingProps;var s=$i(e,jt.current);ji(e,n),s=Qm(null,e,r,t,s,n);var i=Ym();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Gt(r)?(i=!0,Pc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Wm(e),s.updater=Au,e.stateNode=s,s._reactInternals=e,wf(e,r,t,n),e=Ef(null,e,r,!0,i,n)):(e.tag=0,De&&i&&Om(e),Mt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=oT(r),t=wn(r,t),s){case 0:e=bf(null,e,r,t,n);break e;case 1:e=my(null,e,r,t,n);break e;case 11:e=hy(null,e,r,t,n);break e;case 14:e=fy(null,e,r,wn(r.type,t),n);break e}throw Error(z(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),bf(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),my(t,e,r,s,n);case 3:e:{if(xw(e),t===null)throw Error(z(387));r=e.pendingProps,i=e.memoizedState,s=i.element,q1(t,e),Oc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Hi(Error(z(423)),e),e=py(t,e,r,n,s);break e}else if(r!==s){s=Hi(Error(z(424)),e),e=py(t,e,r,n,s);break e}else for(Zt=Wr(e.stateNode.containerInfo.firstChild),tn=e,De=!0,bn=null,n=W1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zi(),r===s){e=lr(t,e,n);break e}Mt(t,e,r,n)}e=e.child}return e;case 5:return G1(e),t===null&&yf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,hf(r,s)?o=null:i!==null&&hf(r,i)&&(e.flags|=32),vw(t,e),Mt(t,e,o,n),e.child;case 6:return t===null&&yf(e),null;case 13:return ww(t,e,n);case 4:return Hm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Bi(e,null,r,n):Mt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),hy(t,e,r,s,n);case 7:return Mt(t,e,e.pendingProps,n),e.child;case 8:return Mt(t,e,e.pendingProps.children,n),e.child;case 12:return Mt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,Ae(Mc,r._currentValue),r._currentValue=o,i!==null)if(Cn(i.value,o)){if(i.children===s.children&&!qt.current){e=lr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=nr(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?c.next=c:(c.next=h.next,h.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),vf(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(z(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),vf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Mt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ji(e,n),s=pn(s),r=r(s),e.flags|=1,Mt(t,e,r,n),e.child;case 14:return r=e.type,s=wn(r,e.pendingProps),s=wn(r.type,s),fy(t,e,r,s,n);case 15:return gw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:wn(r,s),rc(t,e),e.tag=1,Gt(r)?(t=!0,Pc(e)):t=!1,ji(e,n),fw(e,r,s),wf(e,r,s,n),Ef(null,e,r,!0,t,n);case 19:return _w(t,e,n);case 22:return yw(t,e,n)}throw Error(z(156,e.tag))};function Ow(t,e){return u1(t,e)}function iT(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,r){return new iT(t,e,n,r)}function op(t){return t=t.prototype,!(!t||!t.isReactComponent)}function oT(t){if(typeof t=="function")return op(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Sm)return 11;if(t===Tm)return 14}return 2}function Kr(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")op(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case fi:return Ls(n.children,s,i,e);case Nm:o=8,s|=8;break;case Bh:return t=fn(12,n,e,s|2),t.elementType=Bh,t.lanes=i,t;case Wh:return t=fn(13,n,e,s),t.elementType=Wh,t.lanes=i,t;case Hh:return t=fn(19,n,e,s),t.elementType=Hh,t.lanes=i,t;case Gx:return ku(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Hx:o=10;break e;case qx:o=9;break e;case Sm:o=11;break e;case Tm:o=14;break e;case Ir:o=16,r=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=fn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function Ls(t,e,n,r){return t=fn(7,t,r,e),t.lanes=n,t}function ku(t,e,n,r){return t=fn(22,t,r,e),t.elementType=Gx,t.lanes=n,t.stateNode={isHidden:!1},t}function gh(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function yh(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function aT(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Jd(0),this.expirationTimes=Jd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Jd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function ap(t,e,n,r,s,i,o,u,c){return t=new aT(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=fn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Wm(i),t}function lT(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Vw(t){if(!t)return ss;t=t._reactInternals;e:{if(Zs(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Gt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var n=t.type;if(Gt(n))return V1(t,n,e)}return e}function Fw(t,e,n,r,s,i,o,u,c){return t=ap(n,r,!0,t,s,i,o,u,c),t.context=Vw(null),n=t.current,r=Ft(),s=Gr(n),i=nr(r,s),i.callback=e??null,Hr(n,i,s),t.current.lanes=s,Ya(t,s,r),Kt(t,r),t}function Pu(t,e,n,r){var s=e.current,i=Ft(),o=Gr(s);return n=Vw(n),e.context===null?e.context=n:e.pendingContext=n,e=nr(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Hr(s,e,o),t!==null&&(Tn(t,s,o,i),ec(t,s,o)),o}function Hc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Sy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function lp(t,e){Sy(t,e),(t=t.alternate)&&Sy(t,e)}function cT(){return null}var Uw=typeof reportError=="function"?reportError:function(t){console.error(t)};function cp(t){this._internalRoot=t}Ru.prototype.render=cp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));Pu(t,e,null,null)};Ru.prototype.unmount=cp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ws(function(){Pu(null,t,null,null)}),e[or]=null}};function Ru(t){this._internalRoot=t}Ru.prototype.unstable_scheduleHydration=function(t){if(t){var e=y1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Cr.length&&e!==0&&e<Cr[n].priority;n++);Cr.splice(n,0,t),n===0&&x1(t)}};function up(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Du(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ty(){}function uT(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Hc(o);i.call(d)}}var o=Fw(e,r,t,0,null,!1,!1,"",Ty);return t._reactRootContainer=o,t[or]=o.current,Na(t.nodeType===8?t.parentNode:t),Ws(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=Hc(c);u.call(d)}}var c=ap(t,0,!1,null,null,!1,!1,"",Ty);return t._reactRootContainer=c,t[or]=c.current,Na(t.nodeType===8?t.parentNode:t),Ws(function(){Pu(e,c,n,r)}),c}function Mu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Hc(o);u.call(c)}}Pu(e,o,t,s)}else o=uT(n,e,t,s,r);return Hc(o)}p1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Go(e.pendingLanes);n!==0&&(Cm(e,n|1),Kt(e,Ke()),!(xe&6)&&(qi=Ke()+500,gs()))}break;case 13:Ws(function(){var r=ar(t,1);if(r!==null){var s=Ft();Tn(r,t,1,s)}}),lp(t,1)}};jm=function(t){if(t.tag===13){var e=ar(t,134217728);if(e!==null){var n=Ft();Tn(e,t,134217728,n)}lp(t,134217728)}};g1=function(t){if(t.tag===13){var e=Gr(t),n=ar(t,e);if(n!==null){var r=Ft();Tn(n,t,e,r)}lp(t,e)}};y1=function(){return Ee};v1=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};tf=function(t,e,n){switch(e){case"input":if(Kh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Su(r);if(!s)throw Error(z(90));Qx(r),Kh(r,s)}}}break;case"textarea":Jx(t,n);break;case"select":e=n.value,e!=null&&Ti(t,!!n.multiple,e,!1)}};s1=rp;i1=Ws;var dT={usingClientEntryPoint:!1,Events:[Xa,yi,Su,n1,r1,rp]},Bo={findFiberByHostInstance:ks,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},hT={bundleType:Bo.bundleType,version:Bo.version,rendererPackageName:Bo.rendererPackageName,rendererConfig:Bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=l1(t),t===null?null:t.stateNode},findFiberByHostInstance:Bo.findFiberByHostInstance||cT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zl.isDisabled&&zl.supportsFiber)try{_u=zl.inject(hT),Un=zl}catch{}}sn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dT;sn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!up(e))throw Error(z(200));return lT(t,e,null,n)};sn.createRoot=function(t,e){if(!up(t))throw Error(z(299));var n=!1,r="",s=Uw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=ap(t,1,!1,null,null,n,!1,r,s),t[or]=e.current,Na(t.nodeType===8?t.parentNode:t),new cp(e)};sn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=l1(e),t=t===null?null:t.stateNode,t};sn.flushSync=function(t){return Ws(t)};sn.hydrate=function(t,e,n){if(!Du(e))throw Error(z(200));return Mu(null,t,e,!0,n)};sn.hydrateRoot=function(t,e,n){if(!up(t))throw Error(z(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Uw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Fw(e,null,t,1,n??null,s,!1,i,o),t[or]=e.current,Na(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Ru(e)};sn.render=function(t,e,n){if(!Du(e))throw Error(z(200));return Mu(null,t,e,!1,n)};sn.unmountComponentAtNode=function(t){if(!Du(t))throw Error(z(40));return t._reactRootContainer?(Ws(function(){Mu(null,null,t,!1,function(){t._reactRootContainer=null,t[or]=null})}),!0):!1};sn.unstable_batchedUpdates=rp;sn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Du(n))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return Mu(t,e,n,!1,r)};sn.version="18.3.1-next-f1338f8080-20240426";function $w(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE($w)}catch(t){console.error(t)}}$w(),$x.exports=sn;var zw=$x.exports,Iy=zw;$h.createRoot=Iy.createRoot,$h.hydrateRoot=Iy.hydrateRoot;var Bw={exports:{}},Ww={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gi=R;function fT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mT=typeof Object.is=="function"?Object.is:fT,pT=Gi.useState,gT=Gi.useEffect,yT=Gi.useLayoutEffect,vT=Gi.useDebugValue;function xT(t,e){var n=e(),r=pT({inst:{value:n,getSnapshot:e}}),s=r[0].inst,i=r[1];return yT(function(){s.value=n,s.getSnapshot=e,vh(s)&&i({inst:s})},[t,n,e]),gT(function(){return vh(s)&&i({inst:s}),t(function(){vh(s)&&i({inst:s})})},[t]),vT(n),n}function vh(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mT(t,n)}catch{return!0}}function wT(t,e){return e()}var _T=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?wT:xT;Ww.useSyncExternalStore=Gi.useSyncExternalStore!==void 0?Gi.useSyncExternalStore:_T;Bw.exports=Ww;var bT=Bw.exports,Hw={exports:{}},qw={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lu=R,ET=bT;function NT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ST=typeof Object.is=="function"?Object.is:NT,TT=ET.useSyncExternalStore,IT=Lu.useRef,AT=Lu.useEffect,CT=Lu.useMemo,jT=Lu.useDebugValue;qw.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var i=IT(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=CT(function(){function c(v){if(!d){if(d=!0,h=v,v=r(v),s!==void 0&&o.hasValue){var y=o.value;if(s(y,v))return f=y}return f=v}if(y=f,ST(h,v))return y;var w=r(v);return s!==void 0&&s(y,w)?(h=v,y):(h=v,f=w)}var d=!1,h,f,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,r,s]);var u=TT(t,i[0],i[1]);return AT(function(){o.hasValue=!0,o.value=u},[u]),jT(u),u};Hw.exports=qw;var kT=Hw.exports;function PT(t){t()}let Gw=PT;const RT=t=>Gw=t,DT=()=>Gw,Ay=Symbol.for("react-redux-context"),Cy=typeof globalThis<"u"?globalThis:{};function MT(){var t;if(!R.createContext)return{};const e=(t=Cy[Ay])!=null?t:Cy[Ay]=new Map;let n=e.get(R.createContext);return n||(n=R.createContext(null),e.set(R.createContext,n)),n}const is=MT();function dp(t=is){return function(){return R.useContext(t)}}const Kw=dp(),LT=()=>{throw new Error("uSES not initialized!")};let Qw=LT;const OT=t=>{Qw=t},VT=(t,e)=>t===e;function FT(t=is){const e=t===is?Kw:dp(t);return function(r,s={}){const{equalityFn:i=VT,stabilityCheck:o=void 0,noopCheck:u=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:c,subscription:d,getServerState:h,stabilityCheck:f,noopCheck:m}=e();R.useRef(!0);const v=R.useCallback({[r.name](w){return r(w)}}[r.name],[r,f,o]),y=Qw(d.addNestedSub,c.getState,h||c.getState,v,i);return R.useDebugValue(y),y}}const He=FT();var Yw={exports:{}},Ne={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mt=typeof Symbol=="function"&&Symbol.for,hp=mt?Symbol.for("react.element"):60103,fp=mt?Symbol.for("react.portal"):60106,Ou=mt?Symbol.for("react.fragment"):60107,Vu=mt?Symbol.for("react.strict_mode"):60108,Fu=mt?Symbol.for("react.profiler"):60114,Uu=mt?Symbol.for("react.provider"):60109,$u=mt?Symbol.for("react.context"):60110,mp=mt?Symbol.for("react.async_mode"):60111,zu=mt?Symbol.for("react.concurrent_mode"):60111,Bu=mt?Symbol.for("react.forward_ref"):60112,Wu=mt?Symbol.for("react.suspense"):60113,UT=mt?Symbol.for("react.suspense_list"):60120,Hu=mt?Symbol.for("react.memo"):60115,qu=mt?Symbol.for("react.lazy"):60116,$T=mt?Symbol.for("react.block"):60121,zT=mt?Symbol.for("react.fundamental"):60117,BT=mt?Symbol.for("react.responder"):60118,WT=mt?Symbol.for("react.scope"):60119;function an(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case hp:switch(t=t.type,t){case mp:case zu:case Ou:case Fu:case Vu:case Wu:return t;default:switch(t=t&&t.$$typeof,t){case $u:case Bu:case qu:case Hu:case Uu:return t;default:return e}}case fp:return e}}}function Jw(t){return an(t)===zu}Ne.AsyncMode=mp;Ne.ConcurrentMode=zu;Ne.ContextConsumer=$u;Ne.ContextProvider=Uu;Ne.Element=hp;Ne.ForwardRef=Bu;Ne.Fragment=Ou;Ne.Lazy=qu;Ne.Memo=Hu;Ne.Portal=fp;Ne.Profiler=Fu;Ne.StrictMode=Vu;Ne.Suspense=Wu;Ne.isAsyncMode=function(t){return Jw(t)||an(t)===mp};Ne.isConcurrentMode=Jw;Ne.isContextConsumer=function(t){return an(t)===$u};Ne.isContextProvider=function(t){return an(t)===Uu};Ne.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===hp};Ne.isForwardRef=function(t){return an(t)===Bu};Ne.isFragment=function(t){return an(t)===Ou};Ne.isLazy=function(t){return an(t)===qu};Ne.isMemo=function(t){return an(t)===Hu};Ne.isPortal=function(t){return an(t)===fp};Ne.isProfiler=function(t){return an(t)===Fu};Ne.isStrictMode=function(t){return an(t)===Vu};Ne.isSuspense=function(t){return an(t)===Wu};Ne.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Ou||t===zu||t===Fu||t===Vu||t===Wu||t===UT||typeof t=="object"&&t!==null&&(t.$$typeof===qu||t.$$typeof===Hu||t.$$typeof===Uu||t.$$typeof===$u||t.$$typeof===Bu||t.$$typeof===zT||t.$$typeof===BT||t.$$typeof===WT||t.$$typeof===$T)};Ne.typeOf=an;Yw.exports=Ne;var HT=Yw.exports,Xw=HT,qT={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},GT={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Zw={};Zw[Xw.ForwardRef]=qT;Zw[Xw.Memo]=GT;var Se={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pp=Symbol.for("react.element"),gp=Symbol.for("react.portal"),Gu=Symbol.for("react.fragment"),Ku=Symbol.for("react.strict_mode"),Qu=Symbol.for("react.profiler"),Yu=Symbol.for("react.provider"),Ju=Symbol.for("react.context"),KT=Symbol.for("react.server_context"),Xu=Symbol.for("react.forward_ref"),Zu=Symbol.for("react.suspense"),ed=Symbol.for("react.suspense_list"),td=Symbol.for("react.memo"),nd=Symbol.for("react.lazy"),QT=Symbol.for("react.offscreen"),e_;e_=Symbol.for("react.module.reference");function yn(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case pp:switch(t=t.type,t){case Gu:case Qu:case Ku:case Zu:case ed:return t;default:switch(t=t&&t.$$typeof,t){case KT:case Ju:case Xu:case nd:case td:case Yu:return t;default:return e}}case gp:return e}}}Se.ContextConsumer=Ju;Se.ContextProvider=Yu;Se.Element=pp;Se.ForwardRef=Xu;Se.Fragment=Gu;Se.Lazy=nd;Se.Memo=td;Se.Portal=gp;Se.Profiler=Qu;Se.StrictMode=Ku;Se.Suspense=Zu;Se.SuspenseList=ed;Se.isAsyncMode=function(){return!1};Se.isConcurrentMode=function(){return!1};Se.isContextConsumer=function(t){return yn(t)===Ju};Se.isContextProvider=function(t){return yn(t)===Yu};Se.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===pp};Se.isForwardRef=function(t){return yn(t)===Xu};Se.isFragment=function(t){return yn(t)===Gu};Se.isLazy=function(t){return yn(t)===nd};Se.isMemo=function(t){return yn(t)===td};Se.isPortal=function(t){return yn(t)===gp};Se.isProfiler=function(t){return yn(t)===Qu};Se.isStrictMode=function(t){return yn(t)===Ku};Se.isSuspense=function(t){return yn(t)===Zu};Se.isSuspenseList=function(t){return yn(t)===ed};Se.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Gu||t===Qu||t===Ku||t===Zu||t===ed||t===QT||typeof t=="object"&&t!==null&&(t.$$typeof===nd||t.$$typeof===td||t.$$typeof===Yu||t.$$typeof===Ju||t.$$typeof===Xu||t.$$typeof===e_||t.getModuleId!==void 0)};Se.typeOf=yn;function YT(){const t=DT();let e=null,n=null;return{clear(){e=null,n=null},notify(){t(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){let r=[],s=e;for(;s;)r.push(s),s=s.next;return r},subscribe(r){let s=!0,i=n={callback:r,next:null,prev:n};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:n=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const jy={notify(){},get:()=>[]};function JT(t,e){let n,r=jy,s=0,i=!1;function o(w){h();const A=r.subscribe(w);let _=!1;return()=>{_||(_=!0,A(),f())}}function u(){r.notify()}function c(){y.onStateChange&&y.onStateChange()}function d(){return i}function h(){s++,n||(n=e?e.addNestedSub(c):t.subscribe(c),r=YT())}function f(){s--,n&&s===0&&(n(),n=void 0,r.clear(),r=jy)}function m(){i||(i=!0,h())}function v(){i&&(i=!1,f())}const y={addNestedSub:o,notifyNestedSubs:u,handleChangeWrapper:c,isSubscribed:d,trySubscribe:m,tryUnsubscribe:v,getListeners:()=>r};return y}const XT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ZT=XT?R.useLayoutEffect:R.useEffect;function eI({store:t,context:e,children:n,serverState:r,stabilityCheck:s="once",noopCheck:i="once"}){const o=R.useMemo(()=>{const d=JT(t);return{store:t,subscription:d,getServerState:r?()=>r:void 0,stabilityCheck:s,noopCheck:i}},[t,r,s,i]),u=R.useMemo(()=>t.getState(),[t]);ZT(()=>{const{subscription:d}=o;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),u!==t.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[o,u]);const c=e||is;return R.createElement(c.Provider,{value:o},n)}function t_(t=is){const e=t===is?Kw:dp(t);return function(){const{store:r}=e();return r}}const tI=t_();function nI(t=is){const e=t===is?tI:t_(t);return function(){return e().dispatch}}const ys=nI();OT(kT.useSyncExternalStoreWithSelector);RT(zw.unstable_batchedUpdates);/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ra(){return Ra=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ra.apply(this,arguments)}var Fr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Fr||(Fr={}));const ky="popstate";function rI(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:u}=r.location;return Mf("",{pathname:i,search:o,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:qc(s)}return iI(e,n,null,t)}function Ye(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function yp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function sI(){return Math.random().toString(36).substr(2,8)}function Py(t,e){return{usr:t.state,key:t.key,idx:e}}function Mf(t,e,n,r){return n===void 0&&(n=null),Ra({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ao(e):e,{state:n,key:e&&e.key||r||sI()})}function qc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ao(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function iI(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,u=Fr.Pop,c=null,d=h();d==null&&(d=0,o.replaceState(Ra({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function f(){u=Fr.Pop;let A=h(),_=A==null?null:A-d;d=A,c&&c({action:u,location:w.location,delta:_})}function m(A,_){u=Fr.Push;let b=Mf(w.location,A,_);n&&n(b,A),d=h()+1;let S=Py(b,d),P=w.createHref(b);try{o.pushState(S,"",P)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(P)}i&&c&&c({action:u,location:w.location,delta:1})}function v(A,_){u=Fr.Replace;let b=Mf(w.location,A,_);n&&n(b,A),d=h();let S=Py(b,d),P=w.createHref(b);o.replaceState(S,"",P),i&&c&&c({action:u,location:w.location,delta:0})}function y(A){let _=s.location.origin!=="null"?s.location.origin:s.location.href,b=typeof A=="string"?A:qc(A);return b=b.replace(/ $/,"%20"),Ye(_,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,_)}let w={get action(){return u},get location(){return t(s,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(ky,f),c=A,()=>{s.removeEventListener(ky,f),c=null}},createHref(A){return e(s,A)},createURL:y,encodeLocation(A){let _=y(A);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:m,replace:v,go(A){return o.go(A)}};return w}var Ry;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ry||(Ry={}));function oI(t,e,n){return n===void 0&&(n="/"),aI(t,e,n,!1)}function aI(t,e,n,r){let s=typeof e=="string"?ao(e):e,i=vp(s.pathname||"/",n);if(i==null)return null;let o=n_(t);lI(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let d=xI(i);u=yI(o[c],d,r)}return u}function n_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Ye(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Qr([r,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(Ye(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),n_(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:pI(d,i.index),routesMeta:h})};return t.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,o);else for(let c of r_(i.path))s(i,o,c)}),e}function r_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=r_(r.join("/")),u=[];return u.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&u.push(...o),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function lI(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:gI(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const cI=/^:[\w-]+$/,uI=3,dI=2,hI=1,fI=10,mI=-2,Dy=t=>t==="*";function pI(t,e){let n=t.split("/"),r=n.length;return n.some(Dy)&&(r+=mI),e&&(r+=dI),n.filter(s=>!Dy(s)).reduce((s,i)=>s+(cI.test(i)?uI:i===""?hI:fI),r)}function gI(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function yI(t,e,n){n===void 0&&(n=!1);let{routesMeta:r}=t,s={},i="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],d=u===r.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=My({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},h),m=c.route;if(!f&&d&&n&&!r[r.length-1].route.index&&(f=My({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),o.push({params:s,pathname:Qr([i,f.pathname]),pathnameBase:NI(Qr([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=Qr([i,f.pathnameBase]))}return o}function My(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=vI(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((d,h,f)=>{let{paramName:m,isOptional:v}=h;if(m==="*"){let w=u[f]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const y=u[f];return v&&!y?d[m]=void 0:d[m]=(y||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function vI(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),yp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function xI(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return yp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function vp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}const wI=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,_I=t=>wI.test(t);function bI(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ao(t):t,i;if(n)if(_I(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),yp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=Ly(n.substring(1),"/"):i=Ly(n,e)}else i=e;return{pathname:i,search:SI(r),hash:TI(s)}}function Ly(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function xh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EI(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function xp(t,e){let n=EI(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function wp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ao(t):(s=Ra({},t),Ye(!s.pathname||!s.pathname.includes("?"),xh("?","pathname","search",s)),Ye(!s.pathname||!s.pathname.includes("#"),xh("#","pathname","hash",s)),Ye(!s.search||!s.search.includes("#"),xh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,u;if(o==null)u=n;else{let f=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}u=f>=0?e[f]:"/"}let c=bI(s,u),d=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||h)&&(c.pathname+="/"),c}const Qr=t=>t.join("/").replace(/\/\/+/g,"/"),NI=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SI=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TI=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function II(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const s_=["post","put","patch","delete"];new Set(s_);const AI=["get",...s_];new Set(AI);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Da(){return Da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Da.apply(this,arguments)}const _p=R.createContext(null),CI=R.createContext(null),vs=R.createContext(null),rd=R.createContext(null),gr=R.createContext({outlet:null,matches:[],isDataRoute:!1}),i_=R.createContext(null);function jI(t,e){let{relative:n}=e===void 0?{}:e;lo()||Ye(!1);let{basename:r,navigator:s}=R.useContext(vs),{hash:i,pathname:o,search:u}=a_(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Qr([r,o])),s.createHref({pathname:c,search:u,hash:i})}function lo(){return R.useContext(rd)!=null}function Pn(){return lo()||Ye(!1),R.useContext(rd).location}function o_(t){R.useContext(vs).static||R.useLayoutEffect(t)}function ln(){let{isDataRoute:t}=R.useContext(gr);return t?HI():kI()}function kI(){lo()||Ye(!1);let t=R.useContext(_p),{basename:e,future:n,navigator:r}=R.useContext(vs),{matches:s}=R.useContext(gr),{pathname:i}=Pn(),o=JSON.stringify(xp(s,n.v7_relativeSplatPath)),u=R.useRef(!1);return o_(()=>{u.current=!0}),R.useCallback(function(d,h){if(h===void 0&&(h={}),!u.current)return;if(typeof d=="number"){r.go(d);return}let f=wp(d,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Qr([e,f.pathname])),(h.replace?r.replace:r.push)(f,h.state,h)},[e,r,o,i,t])}const PI=R.createContext(null);function RI(t){let e=R.useContext(gr).outlet;return e&&R.createElement(PI.Provider,{value:t},e)}function a_(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(vs),{matches:s}=R.useContext(gr),{pathname:i}=Pn(),o=JSON.stringify(xp(s,r.v7_relativeSplatPath));return R.useMemo(()=>wp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function DI(t,e){return MI(t,e)}function MI(t,e,n,r){lo()||Ye(!1);let{navigator:s}=R.useContext(vs),{matches:i}=R.useContext(gr),o=i[i.length-1],u=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Pn(),h;if(e){var f;let A=typeof e=="string"?ao(e):e;c==="/"||(f=A.pathname)!=null&&f.startsWith(c)||Ye(!1),h=A}else h=d;let m=h.pathname||"/",v=m;if(c!=="/"){let A=c.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(A.length).join("/")}let y=oI(t,{pathname:v}),w=UI(y&&y.map(A=>Object.assign({},A,{params:Object.assign({},u,A.params),pathname:Qr([c,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:Qr([c,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&w?R.createElement(rd.Provider,{value:{location:Da({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Fr.Pop}},w):w}function LI(){let t=WI(),e=II(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,i)}const OI=R.createElement(LI,null);class VI extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(gr.Provider,{value:this.props.routeContext},R.createElement(i_.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function FI(t){let{routeContext:e,match:n,children:r}=t,s=R.useContext(_p);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(gr.Provider,{value:e},r)}function UI(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let h=o.findIndex(f=>f.route.id&&(u==null?void 0:u[f.route.id])!==void 0);h>=0||Ye(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let f=o[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:v}=n,y=f.route.loader&&m[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||y){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,f,m)=>{let v,y=!1,w=null,A=null;n&&(v=u&&f.route.id?u[f.route.id]:void 0,w=f.route.errorElement||OI,c&&(d<0&&m===0?(qI("route-fallback",!1),y=!0,A=null):d===m&&(y=!0,A=f.route.hydrateFallbackElement||null)));let _=e.concat(o.slice(0,m+1)),b=()=>{let S;return v?S=w:y?S=A:f.route.Component?S=R.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,R.createElement(FI,{match:f,routeContext:{outlet:h,matches:_,isDataRoute:n!=null},children:S})};return n&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?R.createElement(VI,{location:n.location,revalidation:n.revalidation,component:w,error:v,children:b(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):b()},null)}var l_=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(l_||{}),Gc=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gc||{});function $I(t){let e=R.useContext(_p);return e||Ye(!1),e}function zI(t){let e=R.useContext(CI);return e||Ye(!1),e}function BI(t){let e=R.useContext(gr);return e||Ye(!1),e}function c_(t){let e=BI(),n=e.matches[e.matches.length-1];return n.route.id||Ye(!1),n.route.id}function WI(){var t;let e=R.useContext(i_),n=zI(Gc.UseRouteError),r=c_(Gc.UseRouteError);return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function HI(){let{router:t}=$I(l_.UseNavigateStable),e=c_(Gc.UseNavigateStable),n=R.useRef(!1);return o_(()=>{n.current=!0}),R.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Da({fromRouteId:e},i)))},[t,e])}const Oy={};function qI(t,e,n){!e&&!Oy[t]&&(Oy[t]=!0)}function GI(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function Kc(t){let{to:e,replace:n,state:r,relative:s}=t;lo()||Ye(!1);let{future:i,static:o}=R.useContext(vs),{matches:u}=R.useContext(gr),{pathname:c}=Pn(),d=ln(),h=wp(e,xp(u,i.v7_relativeSplatPath),c,s==="path"),f=JSON.stringify(h);return R.useEffect(()=>d(JSON.parse(f),{replace:n,state:r,relative:s}),[d,f,s,n,r]),null}function KI(t){return RI(t.context)}function Ze(t){Ye(!1)}function QI(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Fr.Pop,navigator:i,static:o=!1,future:u}=t;lo()&&Ye(!1);let c=e.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:c,navigator:i,static:o,future:Da({v7_relativeSplatPath:!1},u)}),[c,u,i,o]);typeof r=="string"&&(r=ao(r));let{pathname:h="/",search:f="",hash:m="",state:v=null,key:y="default"}=r,w=R.useMemo(()=>{let A=vp(h,c);return A==null?null:{location:{pathname:A,search:f,hash:m,state:v,key:y},navigationType:s}},[c,h,f,m,v,y,s]);return w==null?null:R.createElement(vs.Provider,{value:d},R.createElement(rd.Provider,{children:n,value:w}))}function YI(t){let{children:e,location:n}=t;return DI(Lf(e),n)}new Promise(()=>{});function Lf(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,Lf(r.props.children,i));return}r.type!==Ze&&Ye(!1),!r.props.index||!r.props.children||Ye(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Lf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Of(){return Of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Of.apply(this,arguments)}function JI(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function XI(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function ZI(t,e){return t.button===0&&(!e||e==="_self")&&!XI(t)}function Vf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function e4(t,e){let n=Vf(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const t4=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],n4="6";try{window.__reactRouterVersion=n4}catch{}const r4="startTransition",Vy=nN[r4];function s4(t){let{basename:e,children:n,future:r,window:s}=t,i=R.useRef();i.current==null&&(i.current=rI({window:s,v5Compat:!0}));let o=i.current,[u,c]=R.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=R.useCallback(f=>{d&&Vy?Vy(()=>c(f)):c(f)},[c,d]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.useEffect(()=>GI(r),[r]),R.createElement(QI,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:o,future:r})}const i4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",o4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ma=R.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:u,target:c,to:d,preventScrollReset:h,viewTransition:f}=e,m=JI(e,t4),{basename:v}=R.useContext(vs),y,w=!1;if(typeof d=="string"&&o4.test(d)&&(y=d,i4))try{let S=new URL(window.location.href),P=d.startsWith("//")?new URL(S.protocol+d):new URL(d),L=vp(P.pathname,v);P.origin===S.origin&&L!=null?d=L+P.search+P.hash:w=!0}catch{}let A=jI(d,{relative:s}),_=a4(d,{replace:o,state:u,target:c,preventScrollReset:h,relative:s,viewTransition:f});function b(S){r&&r(S),S.defaultPrevented||_(S)}return R.createElement("a",Of({},m,{href:y||A,onClick:w||i?r:b,ref:n,target:c}))});var Fy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Fy||(Fy={}));var Uy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Uy||(Uy={}));function a4(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:u}=e===void 0?{}:e,c=ln(),d=Pn(),h=a_(t,{relative:o});return R.useCallback(f=>{if(ZI(f,n)){f.preventDefault();let m=r!==void 0?r:qc(d)===qc(h);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:u})}},[d,c,h,r,s,n,t,i,o,u])}function l4(t){let e=R.useRef(Vf(t)),n=R.useRef(!1),r=Pn(),s=R.useMemo(()=>e4(r.search,n.current?null:e.current),[r.search]),i=ln(),o=R.useCallback((u,c)=>{const d=Vf(typeof u=="function"?u(s):u);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}function En(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+t+(n.length?" "+n.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function os(t){return!!t&&!!t[Re]}function cr(t){var e;return!!t&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var s=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===y4}(t)||Array.isArray(t)||!!t[Gy]||!!(!((e=t.constructor)===null||e===void 0)&&e[Gy])||bp(t)||Ep(t))}function Hs(t,e,n){n===void 0&&(n=!1),co(t)===0?(n?Object.keys:Ri)(t).forEach(function(r){n&&typeof r=="symbol"||e(r,t[r],t)}):t.forEach(function(r,s){return e(s,r,t)})}function co(t){var e=t[Re];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:bp(t)?2:Ep(t)?3:0}function Pi(t,e){return co(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function c4(t,e){return co(t)===2?t.get(e):t[e]}function u_(t,e,n){var r=co(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function d_(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function bp(t){return p4&&t instanceof Map}function Ep(t){return g4&&t instanceof Set}function Cs(t){return t.o||t.t}function Np(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=f_(t);delete e[Re];for(var n=Ri(e),r=0;r<n.length;r++){var s=n[r],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function Sp(t,e){return e===void 0&&(e=!1),Tp(t)||os(t)||!cr(t)||(co(t)>1&&(t.set=t.add=t.clear=t.delete=u4),Object.freeze(t),e&&Hs(t,function(n,r){return Sp(r,!0)},!0)),t}function u4(){En(2)}function Tp(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function zn(t){var e=zf[t];return e||En(18,t),e}function d4(t,e){zf[t]||(zf[t]=e)}function Ff(){return La}function wh(t,e){e&&(zn("Patches"),t.u=[],t.s=[],t.v=e)}function Qc(t){Uf(t),t.p.forEach(h4),t.p=null}function Uf(t){t===La&&(La=t.l)}function $y(t){return La={p:[],l:La,h:t,m:!0,_:0}}function h4(t){var e=t[Re];e.i===0||e.i===1?e.j():e.g=!0}function _h(t,e){e._=e.p.length;var n=e.p[0],r=t!==void 0&&t!==n;return e.h.O||zn("ES5").S(e,t,r),r?(n[Re].P&&(Qc(e),En(4)),cr(t)&&(t=Yc(e,t),e.l||Jc(e,t)),e.u&&zn("Patches").M(n[Re].t,t,e.u,e.s)):t=Yc(e,n,[]),Qc(e),e.u&&e.v(e.u,e.s),t!==h_?t:void 0}function Yc(t,e,n){if(Tp(e))return e;var r=e[Re];if(!r)return Hs(e,function(u,c){return zy(t,r,e,u,c,n)},!0),e;if(r.A!==t)return e;if(!r.P)return Jc(t,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var s=r.i===4||r.i===5?r.o=Np(r.k):r.o,i=s,o=!1;r.i===3&&(i=new Set(s),s.clear(),o=!0),Hs(i,function(u,c){return zy(t,r,s,u,c,n,o)}),Jc(t,s,!1),n&&t.u&&zn("Patches").N(r,n,t.u,t.s)}return r.o}function zy(t,e,n,r,s,i,o){if(os(s)){var u=Yc(t,s,i&&e&&e.i!==3&&!Pi(e.R,r)?i.concat(r):void 0);if(u_(n,r,u),!os(u))return;t.m=!1}else o&&n.add(s);if(cr(s)&&!Tp(s)){if(!t.h.D&&t._<1)return;Yc(t,s),e&&e.A.l||Jc(t,s)}}function Jc(t,e,n){n===void 0&&(n=!1),!t.l&&t.h.D&&t.m&&Sp(e,n)}function bh(t,e){var n=t[Re];return(n?Cs(n):t)[e]}function By(t,e){if(e in t)for(var n=Object.getPrototypeOf(t);n;){var r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=Object.getPrototypeOf(n)}}function kr(t){t.P||(t.P=!0,t.l&&kr(t.l))}function Eh(t){t.o||(t.o=Np(t.t))}function $f(t,e,n){var r=bp(e)?zn("MapSet").F(e,n):Ep(e)?zn("MapSet").T(e,n):t.O?function(s,i){var o=Array.isArray(s),u={i:o?1:0,A:i?i.A:Ff(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},c=u,d=Oa;o&&(c=[u],d=Qo);var h=Proxy.revocable(c,d),f=h.revoke,m=h.proxy;return u.k=m,u.j=f,m}(e,n):zn("ES5").J(e,n);return(n?n.A:Ff()).p.push(r),r}function f4(t){return os(t)||En(22,t),function e(n){if(!cr(n))return n;var r,s=n[Re],i=co(n);if(s){if(!s.P&&(s.i<4||!zn("ES5").K(s)))return s.t;s.I=!0,r=Wy(n,i),s.I=!1}else r=Wy(n,i);return Hs(r,function(o,u){s&&c4(s.t,o)===u||u_(r,o,e(u))}),i===3?new Set(r):r}(t)}function Wy(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Np(t)}function m4(){function t(i,o){var u=s[i];return u?u.enumerable=o:s[i]=u={configurable:!0,enumerable:o,get:function(){var c=this[Re];return Oa.get(c,i)},set:function(c){var d=this[Re];Oa.set(d,i,c)}},u}function e(i){for(var o=i.length-1;o>=0;o--){var u=i[o][Re];if(!u.P)switch(u.i){case 5:r(u)&&kr(u);break;case 4:n(u)&&kr(u)}}}function n(i){for(var o=i.t,u=i.k,c=Ri(u),d=c.length-1;d>=0;d--){var h=c[d];if(h!==Re){var f=o[h];if(f===void 0&&!Pi(o,h))return!0;var m=u[h],v=m&&m[Re];if(v?v.t!==f:!d_(m,f))return!0}}var y=!!o[Re];return c.length!==Ri(o).length+(y?0:1)}function r(i){var o=i.k;if(o.length!==i.t.length)return!0;var u=Object.getOwnPropertyDescriptor(o,o.length-1);if(u&&!u.get)return!0;for(var c=0;c<o.length;c++)if(!o.hasOwnProperty(c))return!0;return!1}var s={};d4("ES5",{J:function(i,o){var u=Array.isArray(i),c=function(h,f){if(h){for(var m=Array(f.length),v=0;v<f.length;v++)Object.defineProperty(m,""+v,t(v,!0));return m}var y=f_(f);delete y[Re];for(var w=Ri(y),A=0;A<w.length;A++){var _=w[A];y[_]=t(_,h||!!y[_].enumerable)}return Object.create(Object.getPrototypeOf(f),y)}(u,i),d={i:u?5:4,A:o?o.A:Ff(),P:!1,I:!1,R:{},l:o,t:i,k:c,o:null,g:!1,C:!1};return Object.defineProperty(c,Re,{value:d,writable:!0}),c},S:function(i,o,u){u?os(o)&&o[Re].A===i&&e(i.p):(i.u&&function c(d){if(d&&typeof d=="object"){var h=d[Re];if(h){var f=h.t,m=h.k,v=h.R,y=h.i;if(y===4)Hs(m,function(S){S!==Re&&(f[S]!==void 0||Pi(f,S)?v[S]||c(m[S]):(v[S]=!0,kr(h)))}),Hs(f,function(S){m[S]!==void 0||Pi(m,S)||(v[S]=!1,kr(h))});else if(y===5){if(r(h)&&(kr(h),v.length=!0),m.length<f.length)for(var w=m.length;w<f.length;w++)v[w]=!1;else for(var A=f.length;A<m.length;A++)v[A]=!0;for(var _=Math.min(m.length,f.length),b=0;b<_;b++)m.hasOwnProperty(b)||(v[b]=!0),v[b]===void 0&&c(m[b])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?n(i):r(i)}})}var Hy,La,Ip=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",p4=typeof Map<"u",g4=typeof Set<"u",qy=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",h_=Ip?Symbol.for("immer-nothing"):((Hy={})["immer-nothing"]=!0,Hy),Gy=Ip?Symbol.for("immer-draftable"):"__$immer_draftable",Re=Ip?Symbol.for("immer-state"):"__$immer_state",y4=""+Object.prototype.constructor,Ri=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,f_=Object.getOwnPropertyDescriptors||function(t){var e={};return Ri(t).forEach(function(n){e[n]=Object.getOwnPropertyDescriptor(t,n)}),e},zf={},Oa={get:function(t,e){if(e===Re)return t;var n=Cs(t);if(!Pi(n,e))return function(s,i,o){var u,c=By(i,o);return c?"value"in c?c.value:(u=c.get)===null||u===void 0?void 0:u.call(s.k):void 0}(t,n,e);var r=n[e];return t.I||!cr(r)?r:r===bh(t.t,e)?(Eh(t),t.o[e]=$f(t.A.h,r,t)):r},has:function(t,e){return e in Cs(t)},ownKeys:function(t){return Reflect.ownKeys(Cs(t))},set:function(t,e,n){var r=By(Cs(t),e);if(r!=null&&r.set)return r.set.call(t.k,n),!0;if(!t.P){var s=bh(Cs(t),e),i=s==null?void 0:s[Re];if(i&&i.t===n)return t.o[e]=n,t.R[e]=!1,!0;if(d_(n,s)&&(n!==void 0||Pi(t.t,e)))return!0;Eh(t),kr(t)}return t.o[e]===n&&(n!==void 0||e in t.o)||Number.isNaN(n)&&Number.isNaN(t.o[e])||(t.o[e]=n,t.R[e]=!0),!0},deleteProperty:function(t,e){return bh(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,Eh(t),kr(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var n=Cs(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty:function(){En(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){En(12)}},Qo={};Hs(Oa,function(t,e){Qo[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Qo.deleteProperty=function(t,e){return Qo.set.call(this,t,e,void 0)},Qo.set=function(t,e,n){return Oa.set.call(this,t[0],e,n,t[0])};var v4=function(){function t(n){var r=this;this.O=qy,this.D=!0,this.produce=function(s,i,o){if(typeof s=="function"&&typeof i!="function"){var u=i;i=s;var c=r;return function(w){var A=this;w===void 0&&(w=u);for(var _=arguments.length,b=Array(_>1?_-1:0),S=1;S<_;S++)b[S-1]=arguments[S];return c.produce(w,function(P){var L;return(L=i).call.apply(L,[A,P].concat(b))})}}var d;if(typeof i!="function"&&En(6),o!==void 0&&typeof o!="function"&&En(7),cr(s)){var h=$y(r),f=$f(r,s,void 0),m=!0;try{d=i(f),m=!1}finally{m?Qc(h):Uf(h)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(w){return wh(h,o),_h(w,h)},function(w){throw Qc(h),w}):(wh(h,o),_h(d,h))}if(!s||typeof s!="object"){if((d=i(s))===void 0&&(d=s),d===h_&&(d=void 0),r.D&&Sp(d,!0),o){var v=[],y=[];zn("Patches").M(s,d,v,y),o(v,y)}return d}En(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(d){for(var h=arguments.length,f=Array(h>1?h-1:0),m=1;m<h;m++)f[m-1]=arguments[m];return r.produceWithPatches(d,function(v){return s.apply(void 0,[v].concat(f))})};var o,u,c=r.produce(s,i,function(d,h){o=d,u=h});return typeof Promise<"u"&&c instanceof Promise?c.then(function(d){return[d,o,u]}):[c,o,u]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var e=t.prototype;return e.createDraft=function(n){cr(n)||En(8),os(n)&&(n=f4(n));var r=$y(this),s=$f(this,n,void 0);return s[Re].C=!0,Uf(r),s},e.finishDraft=function(n,r){var s=n&&n[Re],i=s.A;return wh(i,r),_h(void 0,i)},e.setAutoFreeze=function(n){this.D=n},e.setUseProxies=function(n){n&&!qy&&En(20),this.O=n},e.applyPatches=function(n,r){var s;for(s=r.length-1;s>=0;s--){var i=r[s];if(i.path.length===0&&i.op==="replace"){n=i.value;break}}s>-1&&(r=r.slice(s+1));var o=zn("Patches").$;return os(n)?o(n,r):this.produce(n,function(u){return o(u,r)})},t}(),rn=new v4,m_=rn.produce;rn.produceWithPatches.bind(rn);rn.setAutoFreeze.bind(rn);rn.setUseProxies.bind(rn);rn.applyPatches.bind(rn);rn.createDraft.bind(rn);rn.finishDraft.bind(rn);function Va(t){"@babel/helpers - typeof";return Va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Va(t)}function x4(t,e){if(Va(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e||"default");if(Va(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function w4(t){var e=x4(t,"string");return Va(e)=="symbol"?e:e+""}function _4(t,e,n){return(e=w4(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ky(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Qy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Ky(Object(n),!0).forEach(function(r){_4(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Ky(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tt(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Yy=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Nh=function(){return Math.random().toString(36).substring(7).split("").join(".")},Xc={INIT:"@@redux/INIT"+Nh(),REPLACE:"@@redux/REPLACE"+Nh(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Nh()}};function b4(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function p_(t,e,n){var r;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Tt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Tt(1));return n(p_)(t,e)}if(typeof t!="function")throw new Error(Tt(2));var s=t,i=e,o=[],u=o,c=!1;function d(){u===o&&(u=o.slice())}function h(){if(c)throw new Error(Tt(3));return i}function f(w){if(typeof w!="function")throw new Error(Tt(4));if(c)throw new Error(Tt(5));var A=!0;return d(),u.push(w),function(){if(A){if(c)throw new Error(Tt(6));A=!1,d();var b=u.indexOf(w);u.splice(b,1),o=null}}}function m(w){if(!b4(w))throw new Error(Tt(7));if(typeof w.type>"u")throw new Error(Tt(8));if(c)throw new Error(Tt(9));try{c=!0,i=s(i,w)}finally{c=!1}for(var A=o=u,_=0;_<A.length;_++){var b=A[_];b()}return w}function v(w){if(typeof w!="function")throw new Error(Tt(10));s=w,m({type:Xc.REPLACE})}function y(){var w,A=f;return w={subscribe:function(b){if(typeof b!="object"||b===null)throw new Error(Tt(11));function S(){b.next&&b.next(h())}S();var P=A(S);return{unsubscribe:P}}},w[Yy]=function(){return this},w}return m({type:Xc.INIT}),r={dispatch:m,subscribe:f,getState:h,replaceReducer:v},r[Yy]=y,r}function E4(t){Object.keys(t).forEach(function(e){var n=t[e],r=n(void 0,{type:Xc.INIT});if(typeof r>"u")throw new Error(Tt(12));if(typeof n(void 0,{type:Xc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tt(13))})}function N4(t){for(var e=Object.keys(t),n={},r=0;r<e.length;r++){var s=e[r];typeof t[s]=="function"&&(n[s]=t[s])}var i=Object.keys(n),o;try{E4(n)}catch(u){o=u}return function(c,d){if(c===void 0&&(c={}),o)throw o;for(var h=!1,f={},m=0;m<i.length;m++){var v=i[m],y=n[v],w=c[v],A=y(w,d);if(typeof A>"u")throw d&&d.type,new Error(Tt(14));f[v]=A,h=h||A!==w}return h=h||i.length!==Object.keys(c).length,h?f:c}}function Zc(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.length===0?function(r){return r}:e.length===1?e[0]:e.reduce(function(r,s){return function(){return r(s.apply(void 0,arguments))}})}function S4(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(r){return function(){var s=r.apply(void 0,arguments),i=function(){throw new Error(Tt(15))},o={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},u=e.map(function(c){return c(o)});return i=Zc.apply(void 0,u)(s.dispatch),Qy(Qy({},s),{},{dispatch:i})}}}function g_(t){var e=function(r){var s=r.dispatch,i=r.getState;return function(o){return function(u){return typeof u=="function"?u(s,i,t):o(u)}}};return e}var y_=g_();y_.withExtraArgument=g_;const Jy=y_;var v_=globalThis&&globalThis.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),T4=globalThis&&globalThis.__generator||function(t,e){var n={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},r,s,i,o;return o={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function u(d){return function(h){return c([d,h])}}function c(d){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return n.label++,{value:d[1],done:!1};case 5:n.label++,s=d[1],d=[0];continue;case 7:d=n.ops.pop(),n.trys.pop();continue;default:if(i=n.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){n=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){n.label=d[1];break}if(d[0]===6&&n.label<i[1]){n.label=i[1],i=d;break}if(i&&n.label<i[2]){n.label=i[2],n.ops.push(d);break}i[2]&&n.ops.pop(),n.trys.pop();continue}d=e.call(t,n)}catch(h){d=[6,h],s=0}finally{r=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Ki=globalThis&&globalThis.__spreadArray||function(t,e){for(var n=0,r=e.length,s=t.length;n<r;n++,s++)t[s]=e[n];return t},I4=Object.defineProperty,A4=Object.defineProperties,C4=Object.getOwnPropertyDescriptors,Xy=Object.getOwnPropertySymbols,j4=Object.prototype.hasOwnProperty,k4=Object.prototype.propertyIsEnumerable,Zy=function(t,e,n){return e in t?I4(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n},Yr=function(t,e){for(var n in e||(e={}))j4.call(e,n)&&Zy(t,n,e[n]);if(Xy)for(var r=0,s=Xy(e);r<s.length;r++){var n=s[r];k4.call(e,n)&&Zy(t,n,e[n])}return t},Sh=function(t,e){return A4(t,C4(e))},P4=function(t,e,n){return new Promise(function(r,s){var i=function(c){try{u(n.next(c))}catch(d){s(d)}},o=function(c){try{u(n.throw(c))}catch(d){s(d)}},u=function(c){return c.done?r(c.value):Promise.resolve(c.value).then(i,o)};u((n=n.apply(t,e)).next())})},R4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Zc:Zc.apply(null,arguments)};function D4(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var n=e;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return e===n}function Jr(t,e){function n(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(e){var i=e.apply(void 0,r);if(!i)throw new Error("prepareAction did not return an object");return Yr(Yr({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:r[0]}}return n.toString=function(){return""+t},n.type=t,n.match=function(r){return r.type===t},n}var M4=function(t){v_(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Ki([void 0],n[0].concat(this)))):new(e.bind.apply(e,Ki([void 0],n.concat(this))))},e}(Array),L4=function(t){v_(e,t);function e(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var s=t.apply(this,n)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return t.prototype.concat.apply(this,n)},e.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(e.bind.apply(e,Ki([void 0],n[0].concat(this)))):new(e.bind.apply(e,Ki([void 0],n.concat(this))))},e}(Array);function Bf(t){return cr(t)?m_(t,function(){}):t}function O4(t){return typeof t=="boolean"}function V4(){return function(e){return F4(e)}}function F4(t){t===void 0&&(t={});var e=t.thunk,n=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var r=new M4;return n&&(O4(n)?r.push(Jy):r.push(Jy.withExtraArgument(n.extraArgument))),r}var U4=!0;function $4(t){var e=V4(),n=t||{},r=n.reducer,s=r===void 0?void 0:r,i=n.middleware,o=i===void 0?e():i,u=n.devTools,c=u===void 0?!0:u,d=n.preloadedState,h=d===void 0?void 0:d,f=n.enhancers,m=f===void 0?void 0:f,v;if(typeof s=="function")v=s;else if(D4(s))v=N4(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var y=o;typeof y=="function"&&(y=y(e));var w=S4.apply(void 0,y),A=Zc;c&&(A=R4(Yr({trace:!U4},typeof c=="object"&&c)));var _=new L4(w),b=_;Array.isArray(m)?b=Ki([w],m):typeof m=="function"&&(b=m(_));var S=A.apply(void 0,b);return p_(v,h,S)}function x_(t){var e={},n=[],r,s={addCase:function(i,o){var u=typeof i=="string"?i:i.type;if(!u)throw new Error("`builder.addCase` cannot be called with an empty action type");if(u in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[u]=o,s},addMatcher:function(i,o){return n.push({matcher:i,reducer:o}),s},addDefaultCase:function(i){return r=i,s}};return t(s),[e,n,r]}function z4(t){return typeof t=="function"}function B4(t,e,n,r){n===void 0&&(n=[]);var s=typeof e=="function"?x_(e):[e,n,r],i=s[0],o=s[1],u=s[2],c;if(z4(t))c=function(){return Bf(t())};else{var d=Bf(t);c=function(){return d}}function h(f,m){f===void 0&&(f=c());var v=Ki([i[m.type]],o.filter(function(y){var w=y.matcher;return w(m)}).map(function(y){var w=y.reducer;return w}));return v.filter(function(y){return!!y}).length===0&&(v=[u]),v.reduce(function(y,w){if(w)if(os(y)){var A=y,_=w(A,m);return _===void 0?y:_}else{if(cr(y))return m_(y,function(b){return w(b,m)});var _=w(y,m);if(_===void 0){if(y===null)return y;throw Error("A case reducer on a non-draftable value must not return undefined")}return _}return y},f)}return h.getInitialState=c,h}function W4(t,e){return t+"/"+e}function sd(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof t.initialState=="function"?t.initialState:Bf(t.initialState),r=t.reducers||{},s=Object.keys(r),i={},o={},u={};s.forEach(function(h){var f=r[h],m=W4(e,h),v,y;"reducer"in f?(v=f.reducer,y=f.prepare):v=f,i[h]=v,o[m]=v,u[h]=y?Jr(m,y):Jr(m)});function c(){var h=typeof t.extraReducers=="function"?x_(t.extraReducers):[t.extraReducers],f=h[0],m=f===void 0?{}:f,v=h[1],y=v===void 0?[]:v,w=h[2],A=w===void 0?void 0:w,_=Yr(Yr({},m),o);return B4(n,function(b){for(var S in _)b.addCase(S,_[S]);for(var P=0,L=y;P<L.length;P++){var F=L[P];b.addMatcher(F.matcher,F.reducer)}A&&b.addDefaultCase(A)})}var d;return{name:e,reducer:function(h,f){return d||(d=c()),d(h,f)},actions:u,caseReducers:i,getInitialState:function(){return d||(d=c()),d.getInitialState()}}}var H4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",q4=function(t){t===void 0&&(t=21);for(var e="",n=t;n--;)e+=H4[Math.random()*64|0];return e},G4=["name","message","stack","code"],Th=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),ev=function(){function t(e,n){this.payload=e,this.meta=n}return t}(),K4=function(t){if(typeof t=="object"&&t!==null){for(var e={},n=0,r=G4;n<r.length;n++){var s=r[n];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}},yr=function(){function t(e,n,r){var s=Jr(e+"/fulfilled",function(d,h,f,m){return{payload:d,meta:Sh(Yr({},m||{}),{arg:f,requestId:h,requestStatus:"fulfilled"})}}),i=Jr(e+"/pending",function(d,h,f){return{payload:void 0,meta:Sh(Yr({},f||{}),{arg:h,requestId:d,requestStatus:"pending"})}}),o=Jr(e+"/rejected",function(d,h,f,m,v){return{payload:m,error:(r&&r.serializeError||K4)(d||"Rejected"),meta:Sh(Yr({},v||{}),{arg:f,requestId:h,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"})}}),u=typeof AbortController<"u"?AbortController:function(){function d(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return d.prototype.abort=function(){},d}();function c(d){return function(h,f,m){var v=r!=null&&r.idGenerator?r.idGenerator(d):q4(),y=new u,w;function A(b){w=b,y.abort()}var _=function(){return P4(this,null,function(){var b,S,P,L,F,I,E;return T4(this,function(j){switch(j.label){case 0:return j.trys.push([0,4,,5]),L=(b=r==null?void 0:r.condition)==null?void 0:b.call(r,d,{getState:f,extra:m}),Y4(L)?[4,L]:[3,2];case 1:L=j.sent(),j.label=2;case 2:if(L===!1||y.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return F=new Promise(function(x,C){return y.signal.addEventListener("abort",function(){return C({name:"AbortError",message:w||"Aborted"})})}),h(i(v,d,(S=r==null?void 0:r.getPendingMeta)==null?void 0:S.call(r,{requestId:v,arg:d},{getState:f,extra:m}))),[4,Promise.race([F,Promise.resolve(n(d,{dispatch:h,getState:f,extra:m,requestId:v,signal:y.signal,abort:A,rejectWithValue:function(x,C){return new Th(x,C)},fulfillWithValue:function(x,C){return new ev(x,C)}})).then(function(x){if(x instanceof Th)throw x;return x instanceof ev?s(x.payload,v,d,x.meta):s(x,v,d)})])];case 3:return P=j.sent(),[3,5];case 4:return I=j.sent(),P=I instanceof Th?o(null,v,d,I.payload,I.meta):o(I,v,d),[3,5];case 5:return E=r&&!r.dispatchConditionRejection&&o.match(P)&&P.meta.condition,E||h(P),[2,P]}})})}();return Object.assign(_,{abort:A,requestId:v,arg:d,unwrap:function(){return _.then(Q4)}})}}return Object.assign(c,{pending:i,rejected:o,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t}();function Q4(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function Y4(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Ap="listenerMiddleware";Jr(Ap+"/add");Jr(Ap+"/removeAll");Jr(Ap+"/remove");var tv;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);m4();const J4=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w_=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},X4=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},__={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,h=i>>2,f=(i&3)<<4|u>>4;let m=(u&15)<<2|d>>6,v=d&63;c||(v=64,o||(m=64)),r.push(n[h],n[f],n[m],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(w_(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):X4(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const f=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||f==null)throw new Z4;const m=i<<2|u>>4;if(r.push(m),d!==64){const v=u<<4&240|d>>2;if(r.push(v),f!==64){const y=d<<6&192|f;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Z4 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eA=function(t){const e=w_(t);return __.encodeByteArray(e,!0)},eu=function(t){return eA(t).replace(/\./g,"")},b_=function(t){try{return __.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nA=()=>tA().__FIREBASE_DEFAULTS__,rA=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&b_(t[1]);return e&&JSON.parse(e)},id=()=>{try{return J4()||nA()||rA()||sA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},E_=t=>{var e,n;return(n=(e=id())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},iA=t=>{const e=E_(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},N_=()=>{var t;return(t=id())==null?void 0:t.config},S_=t=>{var e;return(e=id())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function T_(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t},u="";return[eu(JSON.stringify(n)),eu(JSON.stringify(o)),u].join(".")}const ca={};function lA(){const t={prod:[],emulator:[]};for(const e of Object.keys(ca))ca[e]?t.emulator.push(e):t.prod.push(e);return t}function cA(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let nv=!1;function I_(t,e){if(typeof window>"u"||typeof document>"u"||!uo(window.location.host)||ca[t]===e||ca[t]||nv)return;ca[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=lA().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function u(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{nv=!0,o()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=cA(r),v=n("text"),y=document.getElementById(v)||document.createElement("span"),w=n("learnmore"),A=document.getElementById(w)||document.createElement("a"),_=n("preprendIcon"),b=document.getElementById(_)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;u(S),h(A,w);const P=d();c(b,_),S.append(b,y,A,P),document.body.appendChild(S)}i?(y.innerText="Preview backend disconnected.",b.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(b.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,y.innerText="Preview backend running in this workspace."),y.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function uA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(kt())}function dA(){var e;const t=(e=id())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function hA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function fA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function pA(){const t=kt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function gA(){return!dA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function yA(){try{return typeof indexedDB=="object"}catch{return!1}}function vA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="FirebaseError";class vr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xA,Object.setPrototypeOf(this,vr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,el.prototype.create)}}class el{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?wA(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new vr(s,u,r)}}function wA(t,e){return t.replace(_A,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const _A=/\{\$([^}]+)}/g;function bA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function qs(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(rv(i)&&rv(o)){if(!qs(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function rv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function EA(t,e){const n=new NA(t,e);return n.subscribe.bind(n)}class NA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");SA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ih),s.error===void 0&&(s.error=Ih),s.complete===void 0&&(s.complete=Ih);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function SA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ih(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t){return t&&t._delegate?t._delegate:t}class Gs{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new oA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(AA(e))try{this.getOrInitializeService({instanceIdentifier:js})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=js){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=js){return this.instances.has(e)}getOptions(e=js){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:IA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=js){return this.component?this.component.multipleInstances?e:js:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function IA(t){return t===js?void 0:t}function AA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new TA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const jA={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},kA=me.INFO,PA={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},RA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=PA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Cp{constructor(e){this.name=e,this._logLevel=kA,this._logHandler=RA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const DA=(t,e)=>e.some(n=>t instanceof n);let sv,iv;function MA(){return sv||(sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function LA(){return iv||(iv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const A_=new WeakMap,Wf=new WeakMap,C_=new WeakMap,Ah=new WeakMap,jp=new WeakMap;function OA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Xr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&A_.set(n,t)}).catch(()=>{}),jp.set(e,t),e}function VA(t){if(Wf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Wf.set(t,e)}let Hf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Wf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||C_.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function FA(t){Hf=t(Hf)}function UA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ch(this),e,...n);return C_.set(r,e.sort?e.sort():[e]),Xr(r)}:LA().includes(t)?function(...e){return t.apply(Ch(this),e),Xr(A_.get(this))}:function(...e){return Xr(t.apply(Ch(this),e))}}function $A(t){return typeof t=="function"?UA(t):(t instanceof IDBTransaction&&VA(t),DA(t,MA())?new Proxy(t,Hf):t)}function Xr(t){if(t instanceof IDBRequest)return OA(t);if(Ah.has(t))return Ah.get(t);const e=$A(t);return e!==t&&(Ah.set(t,e),jp.set(e,t)),e}const Ch=t=>jp.get(t);function zA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Xr(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Xr(o.result),c.oldVersion,c.newVersion,Xr(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}const BA=["get","getKey","getAll","getAllKeys","count"],WA=["put","add","delete","clear"],jh=new Map;function ov(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jh.get(e))return jh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=WA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||BA.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return jh.set(e,i),i}FA(t=>({...t,get:(e,n,r)=>ov(e,n)||t.get(e,n,r),has:(e,n)=>!!ov(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(qA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function qA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const qf="@firebase/app",av="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new Cp("@firebase/app"),GA="@firebase/app-compat",KA="@firebase/analytics-compat",QA="@firebase/analytics",YA="@firebase/app-check-compat",JA="@firebase/app-check",XA="@firebase/auth",ZA="@firebase/auth-compat",eC="@firebase/database",tC="@firebase/data-connect",nC="@firebase/database-compat",rC="@firebase/functions",sC="@firebase/functions-compat",iC="@firebase/installations",oC="@firebase/installations-compat",aC="@firebase/messaging",lC="@firebase/messaging-compat",cC="@firebase/performance",uC="@firebase/performance-compat",dC="@firebase/remote-config",hC="@firebase/remote-config-compat",fC="@firebase/storage",mC="@firebase/storage-compat",pC="@firebase/firestore",gC="@firebase/ai",yC="@firebase/firestore-compat",vC="firebase",xC="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gf="[DEFAULT]",wC={[qf]:"fire-core",[GA]:"fire-core-compat",[QA]:"fire-analytics",[KA]:"fire-analytics-compat",[JA]:"fire-app-check",[YA]:"fire-app-check-compat",[XA]:"fire-auth",[ZA]:"fire-auth-compat",[eC]:"fire-rtdb",[tC]:"fire-data-connect",[nC]:"fire-rtdb-compat",[rC]:"fire-fn",[sC]:"fire-fn-compat",[iC]:"fire-iid",[oC]:"fire-iid-compat",[aC]:"fire-fcm",[lC]:"fire-fcm-compat",[cC]:"fire-perf",[uC]:"fire-perf-compat",[dC]:"fire-rc",[hC]:"fire-rc-compat",[fC]:"fire-gcs",[mC]:"fire-gcs-compat",[pC]:"fire-fst",[yC]:"fire-fst-compat",[gC]:"fire-vertex","fire-js":"fire-js",[vC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu=new Map,_C=new Map,Kf=new Map;function lv(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Qi(t){const e=t.name;if(Kf.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Kf.set(e,t);for(const n of tu.values())lv(n,t);for(const n of _C.values())lv(n,t);return!0}function kp(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Fn(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zr=new el("app","Firebase",bC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Gs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ho=xC;function j_(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Gf,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw Zr.create("bad-app-name",{appName:String(s)});if(n||(n=N_()),!n)throw Zr.create("no-options");const i=tu.get(s);if(i){if(qs(n,i.options)&&qs(r,i.config))return i;throw Zr.create("duplicate-app",{appName:s})}const o=new CA(s);for(const c of Kf.values())o.addComponent(c);const u=new EC(n,r,o);return tu.set(s,u),u}function k_(t=Gf){const e=tu.get(t);if(!e&&t===Gf&&N_())return j_();if(!e)throw Zr.create("no-app",{appName:t});return e}function es(t,e,n){let r=wC[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(o.join(" "));return}Qi(new Gs(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC="firebase-heartbeat-database",SC=1,Fa="firebase-heartbeat-store";let kh=null;function P_(){return kh||(kh=zA(NC,SC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Zr.create("idb-open",{originalErrorMessage:t.message})})),kh}async function TC(t){try{const n=(await P_()).transaction(Fa),r=await n.objectStore(Fa).get(R_(t));return await n.done,r}catch(e){if(e instanceof vr)ur.warn(e.message);else{const n=Zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function cv(t,e){try{const r=(await P_()).transaction(Fa,"readwrite");await r.objectStore(Fa).put(e,R_(t)),await r.done}catch(n){if(n instanceof vr)ur.warn(n.message);else{const r=Zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(r.message)}}}function R_(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=1024,AC=30;class CC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new kC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=uv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>AC){const o=PC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=uv(),{heartbeatsToSend:r,unsentEntries:s}=jC(this._heartbeatsCache.heartbeats),i=eu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ur.warn(n),""}}}function uv(){return new Date().toISOString().substring(0,10)}function jC(t,e=IC){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),dv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),dv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class kC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yA()?vA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await TC(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return cv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function dv(t){return eu(JSON.stringify({version:2,heartbeats:t})).length}function PC(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t){Qi(new Gs("platform-logger",e=>new HA(e),"PRIVATE")),Qi(new Gs("heartbeat",e=>new CC(e),"PRIVATE")),es(qf,av,t),es(qf,av,"esm2020"),es("fire-js","")}RC("");var hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ts,D_;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,E){function j(){}j.prototype=E.prototype,I.F=E.prototype,I.prototype=new j,I.prototype.constructor=I,I.D=function(x,C,k){for(var T=Array(arguments.length-2),W=2;W<arguments.length;W++)T[W-2]=arguments[W];return E.prototype[C].apply(x,T)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,E,j){j||(j=0);const x=Array(16);if(typeof E=="string")for(var C=0;C<16;++C)x[C]=E.charCodeAt(j++)|E.charCodeAt(j++)<<8|E.charCodeAt(j++)<<16|E.charCodeAt(j++)<<24;else for(C=0;C<16;++C)x[C]=E[j++]|E[j++]<<8|E[j++]<<16|E[j++]<<24;E=I.g[0],j=I.g[1],C=I.g[2];let k=I.g[3],T;T=E+(k^j&(C^k))+x[0]+3614090360&4294967295,E=j+(T<<7&4294967295|T>>>25),T=k+(C^E&(j^C))+x[1]+3905402710&4294967295,k=E+(T<<12&4294967295|T>>>20),T=C+(j^k&(E^j))+x[2]+606105819&4294967295,C=k+(T<<17&4294967295|T>>>15),T=j+(E^C&(k^E))+x[3]+3250441966&4294967295,j=C+(T<<22&4294967295|T>>>10),T=E+(k^j&(C^k))+x[4]+4118548399&4294967295,E=j+(T<<7&4294967295|T>>>25),T=k+(C^E&(j^C))+x[5]+1200080426&4294967295,k=E+(T<<12&4294967295|T>>>20),T=C+(j^k&(E^j))+x[6]+2821735955&4294967295,C=k+(T<<17&4294967295|T>>>15),T=j+(E^C&(k^E))+x[7]+4249261313&4294967295,j=C+(T<<22&4294967295|T>>>10),T=E+(k^j&(C^k))+x[8]+1770035416&4294967295,E=j+(T<<7&4294967295|T>>>25),T=k+(C^E&(j^C))+x[9]+2336552879&4294967295,k=E+(T<<12&4294967295|T>>>20),T=C+(j^k&(E^j))+x[10]+4294925233&4294967295,C=k+(T<<17&4294967295|T>>>15),T=j+(E^C&(k^E))+x[11]+2304563134&4294967295,j=C+(T<<22&4294967295|T>>>10),T=E+(k^j&(C^k))+x[12]+1804603682&4294967295,E=j+(T<<7&4294967295|T>>>25),T=k+(C^E&(j^C))+x[13]+4254626195&4294967295,k=E+(T<<12&4294967295|T>>>20),T=C+(j^k&(E^j))+x[14]+2792965006&4294967295,C=k+(T<<17&4294967295|T>>>15),T=j+(E^C&(k^E))+x[15]+1236535329&4294967295,j=C+(T<<22&4294967295|T>>>10),T=E+(C^k&(j^C))+x[1]+4129170786&4294967295,E=j+(T<<5&4294967295|T>>>27),T=k+(j^C&(E^j))+x[6]+3225465664&4294967295,k=E+(T<<9&4294967295|T>>>23),T=C+(E^j&(k^E))+x[11]+643717713&4294967295,C=k+(T<<14&4294967295|T>>>18),T=j+(k^E&(C^k))+x[0]+3921069994&4294967295,j=C+(T<<20&4294967295|T>>>12),T=E+(C^k&(j^C))+x[5]+3593408605&4294967295,E=j+(T<<5&4294967295|T>>>27),T=k+(j^C&(E^j))+x[10]+38016083&4294967295,k=E+(T<<9&4294967295|T>>>23),T=C+(E^j&(k^E))+x[15]+3634488961&4294967295,C=k+(T<<14&4294967295|T>>>18),T=j+(k^E&(C^k))+x[4]+3889429448&4294967295,j=C+(T<<20&4294967295|T>>>12),T=E+(C^k&(j^C))+x[9]+568446438&4294967295,E=j+(T<<5&4294967295|T>>>27),T=k+(j^C&(E^j))+x[14]+3275163606&4294967295,k=E+(T<<9&4294967295|T>>>23),T=C+(E^j&(k^E))+x[3]+4107603335&4294967295,C=k+(T<<14&4294967295|T>>>18),T=j+(k^E&(C^k))+x[8]+1163531501&4294967295,j=C+(T<<20&4294967295|T>>>12),T=E+(C^k&(j^C))+x[13]+2850285829&4294967295,E=j+(T<<5&4294967295|T>>>27),T=k+(j^C&(E^j))+x[2]+4243563512&4294967295,k=E+(T<<9&4294967295|T>>>23),T=C+(E^j&(k^E))+x[7]+1735328473&4294967295,C=k+(T<<14&4294967295|T>>>18),T=j+(k^E&(C^k))+x[12]+2368359562&4294967295,j=C+(T<<20&4294967295|T>>>12),T=E+(j^C^k)+x[5]+4294588738&4294967295,E=j+(T<<4&4294967295|T>>>28),T=k+(E^j^C)+x[8]+2272392833&4294967295,k=E+(T<<11&4294967295|T>>>21),T=C+(k^E^j)+x[11]+1839030562&4294967295,C=k+(T<<16&4294967295|T>>>16),T=j+(C^k^E)+x[14]+4259657740&4294967295,j=C+(T<<23&4294967295|T>>>9),T=E+(j^C^k)+x[1]+2763975236&4294967295,E=j+(T<<4&4294967295|T>>>28),T=k+(E^j^C)+x[4]+1272893353&4294967295,k=E+(T<<11&4294967295|T>>>21),T=C+(k^E^j)+x[7]+4139469664&4294967295,C=k+(T<<16&4294967295|T>>>16),T=j+(C^k^E)+x[10]+3200236656&4294967295,j=C+(T<<23&4294967295|T>>>9),T=E+(j^C^k)+x[13]+681279174&4294967295,E=j+(T<<4&4294967295|T>>>28),T=k+(E^j^C)+x[0]+3936430074&4294967295,k=E+(T<<11&4294967295|T>>>21),T=C+(k^E^j)+x[3]+3572445317&4294967295,C=k+(T<<16&4294967295|T>>>16),T=j+(C^k^E)+x[6]+76029189&4294967295,j=C+(T<<23&4294967295|T>>>9),T=E+(j^C^k)+x[9]+3654602809&4294967295,E=j+(T<<4&4294967295|T>>>28),T=k+(E^j^C)+x[12]+3873151461&4294967295,k=E+(T<<11&4294967295|T>>>21),T=C+(k^E^j)+x[15]+530742520&4294967295,C=k+(T<<16&4294967295|T>>>16),T=j+(C^k^E)+x[2]+3299628645&4294967295,j=C+(T<<23&4294967295|T>>>9),T=E+(C^(j|~k))+x[0]+4096336452&4294967295,E=j+(T<<6&4294967295|T>>>26),T=k+(j^(E|~C))+x[7]+1126891415&4294967295,k=E+(T<<10&4294967295|T>>>22),T=C+(E^(k|~j))+x[14]+2878612391&4294967295,C=k+(T<<15&4294967295|T>>>17),T=j+(k^(C|~E))+x[5]+4237533241&4294967295,j=C+(T<<21&4294967295|T>>>11),T=E+(C^(j|~k))+x[12]+1700485571&4294967295,E=j+(T<<6&4294967295|T>>>26),T=k+(j^(E|~C))+x[3]+2399980690&4294967295,k=E+(T<<10&4294967295|T>>>22),T=C+(E^(k|~j))+x[10]+4293915773&4294967295,C=k+(T<<15&4294967295|T>>>17),T=j+(k^(C|~E))+x[1]+2240044497&4294967295,j=C+(T<<21&4294967295|T>>>11),T=E+(C^(j|~k))+x[8]+1873313359&4294967295,E=j+(T<<6&4294967295|T>>>26),T=k+(j^(E|~C))+x[15]+4264355552&4294967295,k=E+(T<<10&4294967295|T>>>22),T=C+(E^(k|~j))+x[6]+2734768916&4294967295,C=k+(T<<15&4294967295|T>>>17),T=j+(k^(C|~E))+x[13]+1309151649&4294967295,j=C+(T<<21&4294967295|T>>>11),T=E+(C^(j|~k))+x[4]+4149444226&4294967295,E=j+(T<<6&4294967295|T>>>26),T=k+(j^(E|~C))+x[11]+3174756917&4294967295,k=E+(T<<10&4294967295|T>>>22),T=C+(E^(k|~j))+x[2]+718787259&4294967295,C=k+(T<<15&4294967295|T>>>17),T=j+(k^(C|~E))+x[9]+3951481745&4294967295,I.g[0]=I.g[0]+E&4294967295,I.g[1]=I.g[1]+(C+(T<<21&4294967295|T>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+k&4294967295}r.prototype.v=function(I,E){E===void 0&&(E=I.length);const j=E-this.blockSize,x=this.C;let C=this.h,k=0;for(;k<E;){if(C==0)for(;k<=j;)s(this,I,k),k+=this.blockSize;if(typeof I=="string"){for(;k<E;)if(x[C++]=I.charCodeAt(k++),C==this.blockSize){s(this,x),C=0;break}}else for(;k<E;)if(x[C++]=I[k++],C==this.blockSize){s(this,x),C=0;break}}this.h=C,this.o+=E},r.prototype.A=function(){var I=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);I[0]=128;for(var E=1;E<I.length-8;++E)I[E]=0;E=this.o*8;for(var j=I.length-8;j<I.length;++j)I[j]=E&255,E/=256;for(this.v(I),I=Array(16),E=0,j=0;j<4;++j)for(let x=0;x<32;x+=8)I[E++]=this.g[j]>>>x&255;return I};function i(I,E){var j=u;return Object.prototype.hasOwnProperty.call(j,I)?j[I]:j[I]=E(I)}function o(I,E){this.h=E;const j=[];let x=!0;for(let C=I.length-1;C>=0;C--){const k=I[C]|0;x&&k==E||(j[C]=k,x=!1)}this.g=j}var u={};function c(I){return-128<=I&&I<128?i(I,function(E){return new o([E|0],E<0?-1:0)}):new o([I|0],I<0?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return f;if(I<0)return A(d(-I));const E=[];let j=1;for(let x=0;I>=j;x++)E[x]=I/j|0,j*=4294967296;return new o(E,0)}function h(I,E){if(I.length==0)throw Error("number format error: empty string");if(E=E||10,E<2||36<E)throw Error("radix out of range: "+E);if(I.charAt(0)=="-")return A(h(I.substring(1),E));if(I.indexOf("-")>=0)throw Error('number format error: interior "-" character');const j=d(Math.pow(E,8));let x=f;for(let k=0;k<I.length;k+=8){var C=Math.min(8,I.length-k);const T=parseInt(I.substring(k,k+C),E);C<8?(C=d(Math.pow(E,C)),x=x.j(C).add(d(T))):(x=x.j(j),x=x.add(d(T)))}return x}var f=c(0),m=c(1),v=c(16777216);t=o.prototype,t.m=function(){if(w(this))return-A(this).m();let I=0,E=1;for(let j=0;j<this.g.length;j++){const x=this.i(j);I+=(x>=0?x:4294967296+x)*E,E*=4294967296}return I},t.toString=function(I){if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(y(this))return"0";if(w(this))return"-"+A(this).toString(I);const E=d(Math.pow(I,6));var j=this;let x="";for(;;){const C=P(j,E).g;j=_(j,C.j(E));let k=((j.g.length>0?j.g[0]:j.h)>>>0).toString(I);if(j=C,y(j))return k+x;for(;k.length<6;)k="0"+k;x=k+x}},t.i=function(I){return I<0?0:I<this.g.length?this.g[I]:this.h};function y(I){if(I.h!=0)return!1;for(let E=0;E<I.g.length;E++)if(I.g[E]!=0)return!1;return!0}function w(I){return I.h==-1}t.l=function(I){return I=_(this,I),w(I)?-1:y(I)?0:1};function A(I){const E=I.g.length,j=[];for(let x=0;x<E;x++)j[x]=~I.g[x];return new o(j,~I.h).add(m)}t.abs=function(){return w(this)?A(this):this},t.add=function(I){const E=Math.max(this.g.length,I.g.length),j=[];let x=0;for(let C=0;C<=E;C++){let k=x+(this.i(C)&65535)+(I.i(C)&65535),T=(k>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);x=T>>>16,k&=65535,T&=65535,j[C]=T<<16|k}return new o(j,j[j.length-1]&-2147483648?-1:0)};function _(I,E){return I.add(A(E))}t.j=function(I){if(y(this)||y(I))return f;if(w(this))return w(I)?A(this).j(A(I)):A(A(this).j(I));if(w(I))return A(this.j(A(I)));if(this.l(v)<0&&I.l(v)<0)return d(this.m()*I.m());const E=this.g.length+I.g.length,j=[];for(var x=0;x<2*E;x++)j[x]=0;for(x=0;x<this.g.length;x++)for(let C=0;C<I.g.length;C++){const k=this.i(x)>>>16,T=this.i(x)&65535,W=I.i(C)>>>16,Z=I.i(C)&65535;j[2*x+2*C]+=T*Z,b(j,2*x+2*C),j[2*x+2*C+1]+=k*Z,b(j,2*x+2*C+1),j[2*x+2*C+1]+=T*W,b(j,2*x+2*C+1),j[2*x+2*C+2]+=k*W,b(j,2*x+2*C+2)}for(I=0;I<E;I++)j[I]=j[2*I+1]<<16|j[2*I];for(I=E;I<2*E;I++)j[I]=0;return new o(j,0)};function b(I,E){for(;(I[E]&65535)!=I[E];)I[E+1]+=I[E]>>>16,I[E]&=65535,E++}function S(I,E){this.g=I,this.h=E}function P(I,E){if(y(E))throw Error("division by zero");if(y(I))return new S(f,f);if(w(I))return E=P(A(I),E),new S(A(E.g),A(E.h));if(w(E))return E=P(I,A(E)),new S(A(E.g),E.h);if(I.g.length>30){if(w(I)||w(E))throw Error("slowDivide_ only works with positive integers.");for(var j=m,x=E;x.l(I)<=0;)j=L(j),x=L(x);var C=F(j,1),k=F(x,1);for(x=F(x,2),j=F(j,2);!y(x);){var T=k.add(x);T.l(I)<=0&&(C=C.add(j),k=T),x=F(x,1),j=F(j,1)}return E=_(I,C.j(E)),new S(C,E)}for(C=f;I.l(E)>=0;){for(j=Math.max(1,Math.floor(I.m()/E.m())),x=Math.ceil(Math.log(j)/Math.LN2),x=x<=48?1:Math.pow(2,x-48),k=d(j),T=k.j(E);w(T)||T.l(I)>0;)j-=x,k=d(j),T=k.j(E);y(k)&&(k=m),C=C.add(k),I=_(I,T)}return new S(C,I)}t.B=function(I){return P(this,I).h},t.and=function(I){const E=Math.max(this.g.length,I.g.length),j=[];for(let x=0;x<E;x++)j[x]=this.i(x)&I.i(x);return new o(j,this.h&I.h)},t.or=function(I){const E=Math.max(this.g.length,I.g.length),j=[];for(let x=0;x<E;x++)j[x]=this.i(x)|I.i(x);return new o(j,this.h|I.h)},t.xor=function(I){const E=Math.max(this.g.length,I.g.length),j=[];for(let x=0;x<E;x++)j[x]=this.i(x)^I.i(x);return new o(j,this.h^I.h)};function L(I){const E=I.g.length+1,j=[];for(let x=0;x<E;x++)j[x]=I.i(x)<<1|I.i(x-1)>>>31;return new o(j,I.h)}function F(I,E){const j=E>>5;E%=32;const x=I.g.length-j,C=[];for(let k=0;k<x;k++)C[k]=E>0?I.i(k+j)>>>E|I.i(k+j+1)<<32-E:I.i(k+j);return new o(C,I.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,D_=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,ts=o}).apply(typeof hv<"u"?hv:typeof self<"u"?self:typeof window<"u"?window:{});var Bl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var M_,Yo,L_,ac,Qf,O_,V_,F_;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof Bl=="object"&&Bl];for(var p=0;p<l.length;++p){var g=l[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,p){if(p)e:{var g=r;l=l.split(".");for(var N=0;N<l.length-1;N++){var M=l[N];if(!(M in g))break e;g=g[M]}l=l[l.length-1],N=g[l],p=p(N),p!=N&&p!=null&&e(g,l,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(l){return l||function(p){var g=[],N;for(N in p)Object.prototype.hasOwnProperty.call(p,N)&&g.push([N,p[N]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},o=this||self;function u(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function c(l,p,g){return l.call.apply(l.bind,arguments)}function d(l,p,g){return d=c,d.apply(null,arguments)}function h(l,p){var g=Array.prototype.slice.call(arguments,1);return function(){var N=g.slice();return N.push.apply(N,arguments),l.apply(this,N)}}function f(l,p){function g(){}g.prototype=p.prototype,l.Z=p.prototype,l.prototype=new g,l.prototype.constructor=l,l.Ob=function(N,M,O){for(var B=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)B[ce-2]=arguments[ce];return p.prototype[M].apply(N,B)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function v(l){const p=l.length;if(p>0){const g=Array(p);for(let N=0;N<p;N++)g[N]=l[N];return g}return[]}function y(l,p){for(let N=1;N<arguments.length;N++){const M=arguments[N];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=l.length||0;const O=M.length||0;l.length=g+O;for(let B=0;B<O;B++)l[g+B]=M[B]}else l.push(M)}}class w{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function A(l){o.setTimeout(()=>{throw l},0)}function _(){var l=I;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class b{constructor(){this.h=this.g=null}add(p,g){const N=S.get();N.set(p,g),this.h?this.h.next=N:this.g=N,this.h=N}}var S=new w(()=>new P,l=>l.reset());class P{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,F=!1,I=new b,E=()=>{const l=Promise.resolve(void 0);L=()=>{l.then(j)}};function j(){for(var l;l=_();){try{l.h.call(l.g)}catch(g){A(g)}var p=S;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}F=!1}function x(){this.u=this.u,this.C=this.C}x.prototype.u=!1,x.prototype.dispose=function(){this.u||(this.u=!0,this.N())},x.prototype[Symbol.dispose]=function(){this.dispose()},x.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function C(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}C.prototype.h=function(){this.defaultPrevented=!0};var k=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};o.addEventListener("test",g,p),o.removeEventListener("test",g,p)}catch{}return l}();function T(l){return/^[\s\xa0]*$/.test(l)}function W(l,p){C.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}f(W,C),W.prototype.init=function(l,p){const g=this.type=l.type,N=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(g=="mouseover"?p=l.fromElement:g=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,N?(this.clientX=N.clientX!==void 0?N.clientX:N.pageX,this.clientY=N.clientY!==void 0?N.clientY:N.pageY,this.screenX=N.screenX||0,this.screenY=N.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&W.Z.h.call(this)},W.prototype.h=function(){W.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Z="closure_listenable_"+(Math.random()*1e6|0),ue=0;function le(l,p,g,N,M){this.listener=l,this.proxy=null,this.src=p,this.type=g,this.capture=!!N,this.ha=M,this.key=++ue,this.da=this.fa=!1}function $(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Y(l,p,g){for(const N in l)p.call(g,l[N],N,l)}function J(l,p){for(const g in l)p.call(void 0,l[g],g,l)}function X(l){const p={};for(const g in l)p[g]=l[g];return p}const ye="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function te(l,p){let g,N;for(let M=1;M<arguments.length;M++){N=arguments[M];for(g in N)l[g]=N[g];for(let O=0;O<ye.length;O++)g=ye[O],Object.prototype.hasOwnProperty.call(N,g)&&(l[g]=N[g])}}function de(l){this.src=l,this.g={},this.h=0}de.prototype.add=function(l,p,g,N,M){const O=l.toString();l=this.g[O],l||(l=this.g[O]=[],this.h++);const B=Je(l,p,N,M);return B>-1?(p=l[B],g||(p.fa=!1)):(p=new le(p,this.src,O,!!N,M),p.fa=g,l.push(p)),p};function st(l,p){const g=p.type;if(g in l.g){var N=l.g[g],M=Array.prototype.indexOf.call(N,p,void 0),O;(O=M>=0)&&Array.prototype.splice.call(N,M,1),O&&($(p),l.g[g].length==0&&(delete l.g[g],l.h--))}}function Je(l,p,g,N){for(let M=0;M<l.length;++M){const O=l[M];if(!O.da&&O.listener==p&&O.capture==!!g&&O.ha==N)return M}return-1}var Pt="closure_lm_"+(Math.random()*1e6|0),Me={};function ri(l,p,g,N,M){if(N&&N.once)return Xe(l,p,g,N,M);if(Array.isArray(p)){for(let O=0;O<p.length;O++)ri(l,p[O],g,N,M);return null}return g=Ad(g),l&&l[Z]?l.J(p,g,u(N)?!!N.capture:!!N,M):D(l,p,g,!1,N,M)}function D(l,p,g,N,M,O){if(!p)throw Error("Invalid event type");const B=u(M)?!!M.capture:!!M;let ce=Td(l);if(ce||(l[Pt]=ce=new de(l)),g=ce.add(p,g,N,B,O),g.proxy)return g;if(N=_e(),g.proxy=N,N.src=l,N.listener=g,l.addEventListener)k||(M=B),M===void 0&&(M=!1),l.addEventListener(p.toString(),N,M);else if(l.attachEvent)l.attachEvent(Ng(p.toString()),N);else if(l.addListener&&l.removeListener)l.addListener(N);else throw Error("addEventListener and attachEvent are unavailable.");return g}function _e(){function l(g){return p.call(l.src,l.listener,g)}const p=hE;return l}function Xe(l,p,g,N,M){if(Array.isArray(p)){for(let O=0;O<p.length;O++)Xe(l,p[O],g,N,M);return null}return g=Ad(g),l&&l[Z]?l.K(p,g,u(N)?!!N.capture:!!N,M):D(l,p,g,!0,N,M)}function vn(l,p,g,N,M){if(Array.isArray(p))for(var O=0;O<p.length;O++)vn(l,p[O],g,N,M);else N=u(N)?!!N.capture:!!N,g=Ad(g),l&&l[Z]?(l=l.i,O=String(p).toString(),O in l.g&&(p=l.g[O],g=Je(p,g,N,M),g>-1&&($(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete l.g[O],l.h--)))):l&&(l=Td(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Je(p,g,N,M)),(g=l>-1?p[l]:null)&&xo(g))}function xo(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[Z])st(p.i,l);else{var g=l.type,N=l.proxy;p.removeEventListener?p.removeEventListener(g,N,l.capture):p.detachEvent?p.detachEvent(Ng(g),N):p.addListener&&p.removeListener&&p.removeListener(N),(g=Td(p))?(st(g,l),g.h==0&&(g.src=null,p[Pt]=null)):$(l)}}}function Ng(l){return l in Me?Me[l]:Me[l]="on"+l}function hE(l,p){if(l.da)l=!0;else{p=new W(p,this);const g=l.listener,N=l.ha||l.src;l.fa&&xo(l),l=g.call(N,p)}return l}function Td(l){return l=l[Pt],l instanceof de?l:null}var Id="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ad(l){return typeof l=="function"?l:(l[Id]||(l[Id]=function(p){return l.handleEvent(p)}),l[Id])}function bt(){x.call(this),this.i=new de(this),this.M=this,this.G=null}f(bt,x),bt.prototype[Z]=!0,bt.prototype.removeEventListener=function(l,p,g,N){vn(this,l,p,g,N)};function Rt(l,p){var g,N=l.G;if(N)for(g=[];N;N=N.G)g.push(N);if(l=l.M,N=p.type||p,typeof p=="string")p=new C(p,l);else if(p instanceof C)p.target=p.target||l;else{var M=p;p=new C(N,l),te(p,M)}M=!0;let O,B;if(g)for(B=g.length-1;B>=0;B--)O=p.g=g[B],M=ml(O,N,!0,p)&&M;if(O=p.g=l,M=ml(O,N,!0,p)&&M,M=ml(O,N,!1,p)&&M,g)for(B=0;B<g.length;B++)O=p.g=g[B],M=ml(O,N,!1,p)&&M}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var l=this.i;for(const p in l.g){const g=l.g[p];for(let N=0;N<g.length;N++)$(g[N]);delete l.g[p],l.h--}}this.G=null},bt.prototype.J=function(l,p,g,N){return this.i.add(String(l),p,!1,g,N)},bt.prototype.K=function(l,p,g,N){return this.i.add(String(l),p,!0,g,N)};function ml(l,p,g,N){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let M=!0;for(let O=0;O<p.length;++O){const B=p[O];if(B&&!B.da&&B.capture==g){const ce=B.listener,it=B.ha||B.src;B.fa&&st(l.i,B),M=ce.call(it,N)!==!1&&M}}return M&&!N.defaultPrevented}function fE(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=d(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function Sg(l){l.g=fE(()=>{l.g=null,l.i&&(l.i=!1,Sg(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class mE extends x{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:Sg(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wo(l){x.call(this),this.h=l,this.g={}}f(wo,x);var Tg=[];function Ig(l){Y(l.g,function(p,g){this.g.hasOwnProperty(g)&&xo(p)},l),l.g={}}wo.prototype.N=function(){wo.Z.N.call(this),Ig(this)},wo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Cd=o.JSON.stringify,pE=o.JSON.parse,gE=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function Ag(){}function Cg(){}var _o={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function jd(){C.call(this,"d")}f(jd,C);function kd(){C.call(this,"c")}f(kd,C);var _s={},jg=null;function pl(){return jg=jg||new bt}_s.Ia="serverreachability";function kg(l){C.call(this,_s.Ia,l)}f(kg,C);function bo(l){const p=pl();Rt(p,new kg(p))}_s.STAT_EVENT="statevent";function Pg(l,p){C.call(this,_s.STAT_EVENT,l),this.stat=p}f(Pg,C);function Dt(l){const p=pl();Rt(p,new Pg(p,l))}_s.Ja="timingevent";function Rg(l,p){C.call(this,_s.Ja,l),this.size=p}f(Rg,C);function Eo(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function No(){this.g=!0}No.prototype.ua=function(){this.g=!1};function yE(l,p,g,N,M,O){l.info(function(){if(l.g)if(O){var B="",ce=O.split("&");for(let Te=0;Te<ce.length;Te++){var it=ce[Te].split("=");if(it.length>1){const ct=it[0];it=it[1];const Dn=ct.split("_");B=Dn.length>=2&&Dn[1]=="type"?B+(ct+"="+it+"&"):B+(ct+"=redacted&")}}}else B=null;else B=O;return"XMLHTTP REQ ("+N+") [attempt "+M+"]: "+p+`
`+g+`
`+B})}function vE(l,p,g,N,M,O,B){l.info(function(){return"XMLHTTP RESP ("+N+") [ attempt "+M+"]: "+p+`
`+g+`
`+O+" "+B})}function si(l,p,g,N){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+wE(l,g)+(N?" "+N:"")})}function xE(l,p){l.info(function(){return"TIMEOUT: "+p})}No.prototype.info=function(){};function wE(l,p){if(!l.g)return p;if(!p)return null;try{const O=JSON.parse(p);if(O){for(l=0;l<O.length;l++)if(Array.isArray(O[l])){var g=O[l];if(!(g.length<2)){var N=g[1];if(Array.isArray(N)&&!(N.length<1)){var M=N[0];if(M!="noop"&&M!="stop"&&M!="close")for(let B=1;B<N.length;B++)N[B]=""}}}}return Cd(O)}catch{return p}}var gl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Dg={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Mg;function Pd(){}f(Pd,Ag),Pd.prototype.g=function(){return new XMLHttpRequest},Mg=new Pd;function So(l){return encodeURIComponent(String(l))}function _E(l){var p=1;l=l.split(":");const g=[];for(;p>0&&l.length;)g.push(l.shift()),p--;return l.length&&g.push(l.join(":")),g}function xr(l,p,g,N){this.j=l,this.i=p,this.l=g,this.S=N||1,this.V=new wo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Lg}function Lg(){this.i=null,this.g="",this.h=!1}var Og={},Rd={};function Dd(l,p,g){l.M=1,l.A=vl(Rn(p)),l.u=g,l.R=!0,Vg(l,null)}function Vg(l,p){l.F=Date.now(),yl(l),l.B=Rn(l.A);var g=l.B,N=l.S;Array.isArray(N)||(N=[String(N)]),Jg(g.i,"t",N),l.C=0,g=l.j.L,l.h=new Lg,l.g=p0(l.j,g?p:null,!l.u),l.P>0&&(l.O=new mE(d(l.Y,l,l.g),l.P)),p=l.V,g=l.g,N=l.ba;var M="readystatechange";Array.isArray(M)||(M&&(Tg[0]=M.toString()),M=Tg);for(let O=0;O<M.length;O++){const B=ri(g,M[O],N||p.handleEvent,!1,p.h||p);if(!B)break;p.g[B.key]=B}p=l.J?X(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),bo(),yE(l.i,l.v,l.B,l.l,l.S,l.u)}xr.prototype.ba=function(l){l=l.target;const p=this.O;p&&br(l)==3?p.j():this.Y(l)},xr.prototype.Y=function(l){try{if(l==this.g)e:{const ce=br(this.g),it=this.g.ya(),Te=this.g.ca();if(!(ce<3)&&(ce!=3||this.g&&(this.h.h||this.g.la()||s0(this.g)))){this.K||ce!=4||it==7||(it==8||Te<=0?bo(3):bo(2)),Md(this);var p=this.g.ca();this.X=p;var g=bE(this);if(this.o=p==200,vE(this.i,this.v,this.B,this.l,this.S,ce,p),this.o){if(this.U&&!this.L){t:{if(this.g){var N,M=this.g;if((N=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(N)){var O=N;break t}}O=null}if(l=O)si(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ld(this,l);else{this.o=!1,this.m=3,Dt(12),bs(this),To(this);break e}}if(this.R){l=!0;let ct;for(;!this.K&&this.C<g.length;)if(ct=EE(this,g),ct==Rd){ce==4&&(this.m=4,Dt(14),l=!1),si(this.i,this.l,null,"[Incomplete Response]");break}else if(ct==Og){this.m=4,Dt(15),si(this.i,this.l,g,"[Invalid Chunk]"),l=!1;break}else si(this.i,this.l,ct,null),Ld(this,ct);if(Fg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ce!=4||g.length!=0||this.h.h||(this.m=1,Dt(16),l=!1),this.o=this.o&&l,!l)si(this.i,this.l,g,"[Invalid Chunked Response]"),bs(this),To(this);else if(g.length>0&&!this.W){this.W=!0;var B=this.j;B.g==this&&B.aa&&!B.P&&(B.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Wd(B),B.P=!0,Dt(11))}}else si(this.i,this.l,g,null),Ld(this,g);ce==4&&bs(this),this.o&&!this.K&&(ce==4?d0(this.j,this):(this.o=!1,yl(this)))}else OE(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Dt(12)):(this.m=0,Dt(13)),bs(this),To(this)}}}catch{}finally{}};function bE(l){if(!Fg(l))return l.g.la();const p=s0(l.g);if(p==="")return"";let g="";const N=p.length,M=br(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return bs(l),To(l),"";l.h.i=new o.TextDecoder}for(let O=0;O<N;O++)l.h.h=!0,g+=l.h.i.decode(p[O],{stream:!(M&&O==N-1)});return p.length=0,l.h.g+=g,l.C=0,l.h.g}function Fg(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function EE(l,p){var g=l.C,N=p.indexOf(`
`,g);return N==-1?Rd:(g=Number(p.substring(g,N)),isNaN(g)?Og:(N+=1,N+g>p.length?Rd:(p=p.slice(N,N+g),l.C=N+g,p)))}xr.prototype.cancel=function(){this.K=!0,bs(this)};function yl(l){l.T=Date.now()+l.H,Ug(l,l.H)}function Ug(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=Eo(d(l.aa,l),p)}function Md(l){l.D&&(o.clearTimeout(l.D),l.D=null)}xr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(xE(this.i,this.B),this.M!=2&&(bo(),Dt(17)),bs(this),this.m=2,To(this)):Ug(this,this.T-l)};function To(l){l.j.I==0||l.K||d0(l.j,l)}function bs(l){Md(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,Ig(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Ld(l,p){try{var g=l.j;if(g.I!=0&&(g.g==l||Od(g.h,l))){if(!l.L&&Od(g.h,l)&&g.I==3){try{var N=g.Ba.g.parse(p)}catch{N=null}if(Array.isArray(N)&&N.length==3){var M=N;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<l.F)El(g),_l(g);else break e;Bd(g),Dt(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=Eo(d(g.Va,g),6e3));Bg(g.h)<=1&&g.ta&&(g.ta=void 0)}else Ns(g,11)}else if((l.L||g.g==l)&&El(g),!T(p))for(M=g.Ba.g.parse(p),p=0;p<M.length;p++){let Te=M[p];const ct=Te[0];if(!(ct<=g.K))if(g.K=ct,Te=Te[1],g.I==2)if(Te[0]=="c"){g.M=Te[1],g.ba=Te[2];const Dn=Te[3];Dn!=null&&(g.ka=Dn,g.j.info("VER="+g.ka));const Ss=Te[4];Ss!=null&&(g.za=Ss,g.j.info("SVER="+g.za));const Er=Te[5];Er!=null&&typeof Er=="number"&&Er>0&&(N=1.5*Er,g.O=N,g.j.info("backChannelRequestTimeoutMs_="+N)),N=g;const Nr=l.g;if(Nr){const Sl=Nr.g?Nr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var O=N.h;O.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(O.j=O.l,O.g=new Set,O.h&&(Vd(O,O.h),O.h=null))}if(N.G){const Hd=Nr.g?Nr.g.getResponseHeader("X-HTTP-Session-Id"):null;Hd&&(N.wa=Hd,Ce(N.J,N.G,Hd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-l.F,g.j.info("Handshake RTT: "+g.T+"ms")),N=g;var B=l;if(N.na=m0(N,N.L?N.ba:null,N.W),B.L){Wg(N.h,B);var ce=B,it=N.O;it&&(ce.H=it),ce.D&&(Md(ce),yl(ce)),N.g=B}else c0(N);g.i.length>0&&bl(g)}else Te[0]!="stop"&&Te[0]!="close"||Ns(g,7);else g.I==3&&(Te[0]=="stop"||Te[0]=="close"?Te[0]=="stop"?Ns(g,7):zd(g):Te[0]!="noop"&&g.l&&g.l.qa(Te),g.A=0)}}bo(4)}catch{}}var NE=class{constructor(l,p){this.g=l,this.map=p}};function $g(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function zg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Bg(l){return l.h?1:l.g?l.g.size:0}function Od(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function Vd(l,p){l.g?l.g.add(p):l.h=p}function Wg(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}$g.prototype.cancel=function(){if(this.i=Hg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Hg(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const g of l.g.values())p=p.concat(g.G);return p}return v(l.i)}var qg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function SE(l,p){if(l){l=l.split("&");for(let g=0;g<l.length;g++){const N=l[g].indexOf("=");let M,O=null;N>=0?(M=l[g].substring(0,N),O=l[g].substring(N+1)):M=l[g],p(M,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function wr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof wr?(this.l=l.l,Io(this,l.j),this.o=l.o,this.g=l.g,Ao(this,l.u),this.h=l.h,Fd(this,Xg(l.i)),this.m=l.m):l&&(p=String(l).match(qg))?(this.l=!1,Io(this,p[1]||"",!0),this.o=Co(p[2]||""),this.g=Co(p[3]||"",!0),Ao(this,p[4]),this.h=Co(p[5]||"",!0),Fd(this,p[6]||"",!0),this.m=Co(p[7]||"")):(this.l=!1,this.i=new ko(null,this.l))}wr.prototype.toString=function(){const l=[];var p=this.j;p&&l.push(jo(p,Gg,!0),":");var g=this.g;return(g||p=="file")&&(l.push("//"),(p=this.o)&&l.push(jo(p,Gg,!0),"@"),l.push(So(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&l.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(jo(g,g.charAt(0)=="/"?AE:IE,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",jo(g,jE)),l.join("")},wr.prototype.resolve=function(l){const p=Rn(this);let g=!!l.j;g?Io(p,l.j):g=!!l.o,g?p.o=l.o:g=!!l.g,g?p.g=l.g:g=l.u!=null;var N=l.h;if(g)Ao(p,l.u);else if(g=!!l.h){if(N.charAt(0)!="/")if(this.g&&!this.h)N="/"+N;else{var M=p.h.lastIndexOf("/");M!=-1&&(N=p.h.slice(0,M+1)+N)}if(M=N,M==".."||M==".")N="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){N=M.lastIndexOf("/",0)==0,M=M.split("/");const O=[];for(let B=0;B<M.length;){const ce=M[B++];ce=="."?N&&B==M.length&&O.push(""):ce==".."?((O.length>1||O.length==1&&O[0]!="")&&O.pop(),N&&B==M.length&&O.push("")):(O.push(ce),N=!0)}N=O.join("/")}else N=M}return g?p.h=N:g=l.i.toString()!=="",g?Fd(p,Xg(l.i)):g=!!l.m,g&&(p.m=l.m),p};function Rn(l){return new wr(l)}function Io(l,p,g){l.j=g?Co(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Ao(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function Fd(l,p,g){p instanceof ko?(l.i=p,kE(l.i,l.l)):(g||(p=jo(p,CE)),l.i=new ko(p,l.l))}function Ce(l,p,g){l.i.set(p,g)}function vl(l){return Ce(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Co(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function jo(l,p,g){return typeof l=="string"?(l=encodeURI(l).replace(p,TE),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function TE(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var Gg=/[#\/\?@]/g,IE=/[#\?:]/g,AE=/[#\?]/g,CE=/[#\?@]/g,jE=/#/g;function ko(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Es(l){l.g||(l.g=new Map,l.h=0,l.i&&SE(l.i,function(p,g){l.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=ko.prototype,t.add=function(l,p){Es(this),this.i=null,l=ii(this,l);let g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(p),this.h+=1,this};function Kg(l,p){Es(l),p=ii(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Qg(l,p){return Es(l),p=ii(l,p),l.g.has(p)}t.forEach=function(l,p){Es(this),this.g.forEach(function(g,N){g.forEach(function(M){l.call(p,M,N,this)},this)},this)};function Yg(l,p){Es(l);let g=[];if(typeof p=="string")Qg(l,p)&&(g=g.concat(l.g.get(ii(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)g=g.concat(l[p]);return g}t.set=function(l,p){return Es(this),this.i=null,l=ii(this,l),Qg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=Yg(this,l),l.length>0?String(l[0]):p):p};function Jg(l,p,g){Kg(l,p),g.length>0&&(l.i=null,l.g.set(ii(l,p),v(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(let N=0;N<p.length;N++){var g=p[N];const M=So(g);g=Yg(this,g);for(let O=0;O<g.length;O++){let B=M;g[O]!==""&&(B+="="+So(g[O])),l.push(B)}}return this.i=l.join("&")};function Xg(l){const p=new ko;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function ii(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function kE(l,p){p&&!l.j&&(Es(l),l.i=null,l.g.forEach(function(g,N){const M=N.toLowerCase();N!=M&&(Kg(this,N),Jg(this,M,g))},l)),l.j=p}function PE(l,p){const g=new No;if(o.Image){const N=new Image;N.onload=h(_r,g,"TestLoadImage: loaded",!0,p,N),N.onerror=h(_r,g,"TestLoadImage: error",!1,p,N),N.onabort=h(_r,g,"TestLoadImage: abort",!1,p,N),N.ontimeout=h(_r,g,"TestLoadImage: timeout",!1,p,N),o.setTimeout(function(){N.ontimeout&&N.ontimeout()},1e4),N.src=l}else p(!1)}function RE(l,p){const g=new No,N=new AbortController,M=setTimeout(()=>{N.abort(),_r(g,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:N.signal}).then(O=>{clearTimeout(M),O.ok?_r(g,"TestPingServer: ok",!0,p):_r(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),_r(g,"TestPingServer: error",!1,p)})}function _r(l,p,g,N,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),N(g)}catch{}}function DE(){this.g=new gE}function Ud(l){this.i=l.Sb||null,this.h=l.ab||!1}f(Ud,Ag),Ud.prototype.g=function(){return new xl(this.i,this.h)};function xl(l,p){bt.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(xl,bt),t=xl.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,Ro(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Po(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ro(this)),this.g&&(this.readyState=3,Ro(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Zg(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Zg(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Po(this):Ro(this),this.readyState==3&&Zg(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Po(this))},t.Na=function(l){this.g&&(this.response=l,Po(this))},t.ga=function(){this.g&&Po(this)};function Po(l){l.readyState=4,l.l=null,l.j=null,l.B=null,Ro(l)}t.setRequestHeader=function(l,p){this.A.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=p.next();return l.join(`\r
`)};function Ro(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(xl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function e0(l){let p="";return Y(l,function(g,N){p+=N,p+=":",p+=g,p+=`\r
`}),p}function $d(l,p,g){e:{for(N in g){var N=!1;break e}N=!0}N||(g=e0(g),typeof l=="string"?g!=null&&So(g):Ce(l,p,g))}function Ue(l){bt.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Ue,bt);var ME=/^https?$/i,LE=["POST","PUT"];t=Ue.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,p,g,N){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Mg.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(O){t0(this,O);return}if(l=g||"",g=new Map(this.headers),N)if(Object.getPrototypeOf(N)===Object.prototype)for(var M in N)g.set(M,N[M]);else if(typeof N.keys=="function"&&typeof N.get=="function")for(const O of N.keys())g.set(O,N.get(O));else throw Error("Unknown input type for opt_headers: "+String(N));N=Array.from(g.keys()).find(O=>O.toLowerCase()=="content-type"),M=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(LE,p,void 0)>=0)||N||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[O,B]of g)this.g.setRequestHeader(O,B);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(O){t0(this,O)}};function t0(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,n0(l),wl(l)}function n0(l){l.A||(l.A=!0,Rt(l,"complete"),Rt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,Rt(this,"complete"),Rt(this,"abort"),wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wl(this,!0)),Ue.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?r0(this):this.Xa())},t.Xa=function(){r0(this)};function r0(l){if(l.h&&typeof i<"u"){if(l.v&&br(l)==4)setTimeout(l.Ca.bind(l),0);else if(Rt(l,"readystatechange"),br(l)==4){l.h=!1;try{const O=l.ca();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var N;if(N=O===0){let B=String(l.D).match(qg)[1]||null;!B&&o.self&&o.self.location&&(B=o.self.location.protocol.slice(0,-1)),N=!ME.test(B?B.toLowerCase():"")}g=N}if(g)Rt(l,"complete"),Rt(l,"success");else{l.o=6;try{var M=br(l)>2?l.g.statusText:""}catch{M=""}l.l=M+" ["+l.ca()+"]",n0(l)}}finally{wl(l)}}}}function wl(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const g=l.g;l.g=null,p||Rt(l,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function br(l){return l.g?l.g.readyState:0}t.ca=function(){try{return br(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),pE(p)}};function s0(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function OE(l){const p={};l=(l.g&&br(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let N=0;N<l.length;N++){if(T(l[N]))continue;var g=_E(l[N]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const O=p[M]||[];p[M]=O,O.push(g)}J(p,function(N){return N.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Do(l,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||p}function i0(l){this.za=0,this.i=[],this.j=new No,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Do("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Do("baseRetryDelayMs",5e3,l),this.Za=Do("retryDelaySeedMs",1e4,l),this.Ta=Do("forwardChannelMaxRetries",2,l),this.va=Do("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new $g(l&&l.concurrentRequestLimit),this.Ba=new DE,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=i0.prototype,t.ka=8,t.I=1,t.connect=function(l,p,g,N){Dt(0),this.W=l,this.H=p||{},g&&N!==void 0&&(this.H.OSID=g,this.H.OAID=N),this.F=this.X,this.J=m0(this,null,this.W),bl(this)};function zd(l){if(o0(l),l.I==3){var p=l.V++,g=Rn(l.J);if(Ce(g,"SID",l.M),Ce(g,"RID",p),Ce(g,"TYPE","terminate"),Mo(l,g),p=new xr(l,l.j,p),p.M=2,p.A=vl(Rn(g)),g=!1,o.navigator&&o.navigator.sendBeacon)try{g=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&o.Image&&(new Image().src=p.A,g=!0),g||(p.g=p0(p.j,null),p.g.ea(p.A)),p.F=Date.now(),yl(p)}f0(l)}function _l(l){l.g&&(Wd(l),l.g.cancel(),l.g=null)}function o0(l){_l(l),l.v&&(o.clearTimeout(l.v),l.v=null),El(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function bl(l){if(!zg(l.h)&&!l.m){l.m=!0;var p=l.Ea;L||E(),F||(L(),F=!0),I.add(p,l),l.D=0}}function VE(l,p){return Bg(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=Eo(d(l.Ea,l,p),h0(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const M=new xr(this,this.j,l);let O=this.o;if(this.U&&(O?(O=X(O),te(O,this.U)):O=this.U),this.u!==null||this.R||(M.J=O,O=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var N=this.i[g];if("__data__"in N.map&&(N=N.map.__data__,typeof N=="string")){N=N.length;break t}N=void 0}if(N===void 0)break;if(p+=N,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=l0(this,M,p),g=Rn(this.J),Ce(g,"RID",l),Ce(g,"CVER",22),this.G&&Ce(g,"X-HTTP-Session-Id",this.G),Mo(this,g),O&&(this.R?p="headers="+So(e0(O))+"&"+p:this.u&&$d(g,this.u,O)),Vd(this.h,M),this.Ra&&Ce(g,"TYPE","init"),this.S?(Ce(g,"$req",p),Ce(g,"SID","null"),M.U=!0,Dd(M,g,null)):Dd(M,g,p),this.I=2}}else this.I==3&&(l?a0(this,l):this.i.length==0||zg(this.h)||a0(this))};function a0(l,p){var g;p?g=p.l:g=l.V++;const N=Rn(l.J);Ce(N,"SID",l.M),Ce(N,"RID",g),Ce(N,"AID",l.K),Mo(l,N),l.u&&l.o&&$d(N,l.u,l.o),g=new xr(l,l.j,g,l.D+1),l.u===null&&(g.J=l.o),p&&(l.i=p.G.concat(l.i)),p=l0(l,g,1e3),g.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),Vd(l.h,g),Dd(g,N,p)}function Mo(l,p){l.H&&Y(l.H,function(g,N){Ce(p,N,g)}),l.l&&Y({},function(g,N){Ce(p,N,g)})}function l0(l,p,g){g=Math.min(l.i.length,g);const N=l.l?d(l.l.Ka,l.l,l):null;e:{var M=l.i;let ce=-1;for(;;){const it=["count="+g];ce==-1?g>0?(ce=M[0].g,it.push("ofs="+ce)):ce=0:it.push("ofs="+ce);let Te=!0;for(let ct=0;ct<g;ct++){var O=M[ct].g;const Dn=M[ct].map;if(O-=ce,O<0)ce=Math.max(0,M[ct].g-100),Te=!1;else try{O="req"+O+"_"||"";try{var B=Dn instanceof Map?Dn:Object.entries(Dn);for(const[Ss,Er]of B){let Nr=Er;u(Er)&&(Nr=Cd(Er)),it.push(O+Ss+"="+encodeURIComponent(Nr))}}catch(Ss){throw it.push(O+"type="+encodeURIComponent("_badmap")),Ss}}catch{N&&N(Dn)}}if(Te){B=it.join("&");break e}}B=void 0}return l=l.i.splice(0,g),p.G=l,B}function c0(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;L||E(),F||(L(),F=!0),I.add(p,l),l.A=0}}function Bd(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=Eo(d(l.Da,l),h0(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,u0(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=Eo(d(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Dt(10),_l(this),u0(this))};function Wd(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function u0(l){l.g=new xr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=Rn(l.na);Ce(p,"RID","rpc"),Ce(p,"SID",l.M),Ce(p,"AID",l.K),Ce(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Ce(p,"TO",l.ia),Ce(p,"TYPE","xmlhttp"),Mo(l,p),l.u&&l.o&&$d(p,l.u,l.o),l.O&&(l.g.H=l.O);var g=l.g;l=l.ba,g.M=1,g.A=vl(Rn(p)),g.u=null,g.R=!0,Vg(g,l)}t.Va=function(){this.C!=null&&(this.C=null,_l(this),Bd(this),Dt(19))};function El(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function d0(l,p){var g=null;if(l.g==p){El(l),Wd(l),l.g=null;var N=2}else if(Od(l.h,p))g=p.G,Wg(l.h,p),N=1;else return;if(l.I!=0){if(p.o)if(N==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var M=l.D;N=pl(),Rt(N,new Rg(N,g)),bl(l)}else c0(l);else if(M=p.m,M==3||M==0&&p.X>0||!(N==1&&VE(l,p)||N==2&&Bd(l)))switch(g&&g.length>0&&(p=l.h,p.i=p.i.concat(g)),M){case 1:Ns(l,5);break;case 4:Ns(l,10);break;case 3:Ns(l,6);break;default:Ns(l,2)}}}function h0(l,p){let g=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(g*=2),g*p}function Ns(l,p){if(l.j.info("Error code "+p),p==2){var g=d(l.bb,l),N=l.Ua;const M=!N;N=new wr(N||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Io(N,"https"),vl(N),M?PE(N.toString(),g):RE(N.toString(),g)}else Dt(2);l.I=0,l.l&&l.l.pa(p),f0(l),o0(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Dt(2)):(this.j.info("Failed to ping google.com"),Dt(1))};function f0(l){if(l.I=0,l.ja=[],l.l){const p=Hg(l.h);(p.length!=0||l.i.length!=0)&&(y(l.ja,p),y(l.ja,l.i),l.h.i.length=0,v(l.i),l.i.length=0),l.l.oa()}}function m0(l,p,g){var N=g instanceof wr?Rn(g):new wr(g);if(N.g!="")p&&(N.g=p+"."+N.g),Ao(N,N.u);else{var M=o.location;N=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;const O=new wr(null);N&&Io(O,N),p&&(O.g=p),M&&Ao(O,M),g&&(O.h=g),N=O}return g=l.G,p=l.wa,g&&p&&Ce(N,g,p),Ce(N,"VER",l.ka),Mo(l,N),N}function p0(l,p,g){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new Ue(new Ud({ab:g})):new Ue(l.ma),p.Fa(l.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function g0(){}t=g0.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Nl(){}Nl.prototype.g=function(l,p){return new Yt(l,p)};function Yt(l,p){bt.call(this),this.g=new i0(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!T(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!T(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new oi(this)}f(Yt,bt),Yt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Yt.prototype.close=function(){zd(this.g)},Yt.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.v&&(g={},g.__data__=Cd(l),l=g);p.i.push(new NE(p.Ya++,l)),p.I==3&&bl(p)},Yt.prototype.N=function(){this.g.l=null,delete this.j,zd(this.g),delete this.g,Yt.Z.N.call(this)};function y0(l){jd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const g in p){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}f(y0,jd);function v0(){kd.call(this),this.status=1}f(v0,kd);function oi(l){this.g=l}f(oi,g0),oi.prototype.ra=function(){Rt(this.g,"a")},oi.prototype.qa=function(l){Rt(this.g,new y0(l))},oi.prototype.pa=function(l){Rt(this.g,new v0)},oi.prototype.oa=function(){Rt(this.g,"b")},Nl.prototype.createWebChannel=Nl.prototype.g,Yt.prototype.send=Yt.prototype.o,Yt.prototype.open=Yt.prototype.m,Yt.prototype.close=Yt.prototype.close,F_=function(){return new Nl},V_=function(){return pl()},O_=_s,Qf={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},gl.NO_ERROR=0,gl.TIMEOUT=8,gl.HTTP_ERROR=6,ac=gl,Dg.COMPLETE="complete",L_=Dg,Cg.EventType=_o,_o.OPEN="a",_o.CLOSE="b",_o.ERROR="c",_o.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Yo=Cg,Ue.prototype.listenOnce=Ue.prototype.K,Ue.prototype.getLastError=Ue.prototype.Ha,Ue.prototype.getLastErrorCode=Ue.prototype.ya,Ue.prototype.getStatus=Ue.prototype.ca,Ue.prototype.getResponseJson=Ue.prototype.La,Ue.prototype.getResponseText=Ue.prototype.la,Ue.prototype.send=Ue.prototype.ea,Ue.prototype.setWithCredentials=Ue.prototype.Fa,M_=Ue}).apply(typeof Bl<"u"?Bl:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let It=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};It.UNAUTHENTICATED=new It(null),It.GOOGLE_CREDENTIALS=new It("google-credentials-uid"),It.FIRST_PARTY=new It("first-party-uid"),It.MOCK_USER=new It("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fo="12.8.0";function DC(t){fo=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=new Cp("@firebase/firestore");function li(){return Ks.logLevel}function q(t,...e){if(Ks.logLevel<=me.DEBUG){const n=e.map(Pp);Ks.debug(`Firestore (${fo}): ${t}`,...n)}}function dr(t,...e){if(Ks.logLevel<=me.ERROR){const n=e.map(Pp);Ks.error(`Firestore (${fo}): ${t}`,...n)}}function Yi(t,...e){if(Ks.logLevel<=me.WARN){const n=e.map(Pp);Ks.warn(`Firestore (${fo}): ${t}`,...n)}}function Pp(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,U_(t,r,n)}function U_(t,e,n){let r=`FIRESTORE (${fo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw dr(r),new Error(r)}function we(t,e,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,t||U_(e,s,r)}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class H extends vr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class MC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(It.UNAUTHENTICATED))}shutdown(){}}class LC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class OC{constructor(e){this.t=e,this.currentUser=It.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){we(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string",31837,{l:r}),new $_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string",2055,{h:e}),new It(e)}}class VC{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=It.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class FC{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new VC(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(It.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class fv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class UC{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Fn(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){we(this.o===void 0,3512);const r=i=>{i.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.m;return this.m=i.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new fv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new fv(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=$C(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%62))}return r}}function pe(t,e){return t<e?-1:t>e?1:0}function Yf(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const s=t.charAt(r),i=e.charAt(r);if(s!==i)return Ph(s)===Ph(i)?pe(s,i):Ph(s)?1:-1}return pe(t.length,e.length)}const zC=55296,BC=57343;function Ph(t){const e=t.charCodeAt(0);return e>=zC&&e<=BC}function Ji(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mv="__name__";class On{constructor(e,n,r){n===void 0?n=0:n>e.length&&ne(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ne(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return On.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof On?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=On.compareSegments(e.get(s),n.get(s));if(i!==0)return i}return pe(e.length,n.length)}static compareSegments(e,n){const r=On.isNumericId(e),s=On.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?On.extractNumericId(e).compare(On.extractNumericId(n)):Yf(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ts.fromString(e.substring(4,e.length-2))}}class Ie extends On{construct(e,n,r){return new Ie(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new H(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new Ie(n)}static emptyPath(){return new Ie([])}}const WC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class yt extends On{construct(e,n,r){return new yt(e,n,r)}static isValidIdentifier(e){return WC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),yt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===mv}static keyField(){return new yt([mv])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new H(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new H(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new H(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new yt(n)}static emptyPath(){return new yt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Ie.fromString(e))}static fromName(e){return new ee(Ie.fromString(e).popFirst(5))}static empty(){return new ee(Ie.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ie.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ie.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Ie(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z_(t,e,n){if(!n)throw new H(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function HC(t,e,n,r){if(e===!0&&r===!0)throw new H(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function pv(t){if(!ee.isDocumentKey(t))throw new H(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function gv(t){if(ee.isDocumentKey(t))throw new H(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function B_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function od(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ne(12329,{type:typeof t})}function jn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new H(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=od(t);throw new H(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rt(t,e){const n={typeString:t};return e&&(n.value=e),n}function nl(t,e){if(!B_(t))throw new H(V.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const s=e[r].typeString,i="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(s&&typeof o!==s){n=`JSON field '${r}' must be a ${s}.`;break}if(i!==void 0&&o!==i.value){n=`Expected '${r}' field to equal '${i.value}'`;break}}if(n)throw new H(V.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yv=-62135596800,vv=1e6;class ke{static now(){return ke.fromMillis(Date.now())}static fromDate(e){return ke.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*vv);return new ke(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new H(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<yv)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new H(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/vv}_compareTo(e){return this.seconds===e.seconds?pe(this.nanoseconds,e.nanoseconds):pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ke._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(nl(e,ke._jsonSchema))return new ke(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-yv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ke._jsonSchemaVersion="firestore/timestamp/1.0",ke._jsonSchema={type:rt("string",ke._jsonSchemaVersion),seconds:rt("number"),nanoseconds:rt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{static fromTimestamp(e){return new oe(e)}static min(){return new oe(new ke(0,0))}static max(){return new oe(new ke(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ua=-1;function qC(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=oe.fromTimestamp(r===1e9?new ke(n+1,0):new ke(n,r));return new as(s,ee.empty(),e)}function GC(t){return new as(t.readTime,t.key,Ua)}class as{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new as(oe.min(),ee.empty(),Ua)}static max(){return new as(oe.max(),ee.empty(),Ua)}}function KC(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:pe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class YC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mo(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==QC)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ne(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(h=>{o[d]=h,++u,u===i&&r(o)},h=>s(h))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function JC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function po(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ad{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ad.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp=-1;function ld(t){return t==null}function nu(t){return t===0&&1/t==-1/0}function XC(t){return typeof t=="number"&&Number.isInteger(t)&&!nu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="";function ZC(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=xv(e)),e=ej(t.get(n),e);return xv(e)}function ej(t,e){let n=e;const r=t.length;for(let s=0;s<r;s++){const i=t.charAt(s);switch(i){case"\0":n+="";break;case W_:n+="";break;default:n+=i}}return n}function xv(t){return t+W_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function xs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function H_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fe{constructor(e,n){this.comparator=e,this.root=n||gt.EMPTY}insert(e,n){return new Fe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,gt.BLACK,null,null))}remove(e){return new Fe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Wl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Wl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Wl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Wl(this.root,e,this.comparator,!0)}}class Wl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gt{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??gt.RED,this.left=s??gt.EMPTY,this.right=i??gt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new gt(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return gt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return gt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ne(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ne(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ne(27949);return e+(this.isRed()?0:1)}}gt.EMPTY=null,gt.RED=!0,gt.BLACK=!1;gt.EMPTY=new class{constructor(){this.size=0}get key(){throw ne(57766)}get value(){throw ne(16141)}get color(){throw ne(16727)}get left(){throw ne(29726)}get right(){throw ne(36894)}copy(e,n,r,s,i){return this}insert(e,n,r){return new gt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(e){this.comparator=e,this.data=new Fe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new _v(this.data.getIterator())}getIteratorFrom(e){return new _v(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof lt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new lt(this.comparator);return n.data=e,n}}class _v{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e){this.fields=e,e.sort(yt.comparator)}static empty(){return new en([])}unionWith(e){let n=new lt(yt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new en(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new q_("Invalid base64 string: "+i):i}}(e);return new _t(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new _t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_t.EMPTY_BYTE_STRING=new _t("");const tj=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ls(t){if(we(!!t,39018),typeof t=="string"){let e=0;const n=tj.exec(t);if(we(!!n,46558,{timestamp:t}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ge(t.seconds),nanos:Ge(t.nanos)}}function Ge(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cs(t){return typeof t=="string"?_t.fromBase64String(t):_t.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="server_timestamp",K_="__type__",Q_="__previous_value__",Y_="__local_write_time__";function Mp(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[K_])==null?void 0:r.stringValue)===G_}function cd(t){const e=t.mapValue.fields[Q_];return Mp(e)?cd(e):e}function $a(t){const e=ls(t.mapValue.fields[Y_].timestampValue);return new ke(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e,n,r,s,i,o,u,c,d,h,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=f}}const ru="(default)";class za{constructor(e,n){this.projectId=e,this.database=n||ru}static empty(){return new za("","")}get isDefaultDatabase(){return this.database===ru}isEqual(e){return e instanceof za&&e.projectId===this.projectId&&e.database===this.database}}function rj(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new H(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new za(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="__type__",X_="__max__",Hl={mapValue:{fields:{__type__:{stringValue:X_}}}},Z_="__vector__",su="value";function us(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Mp(t)?4:ij(t)?9007199254740991:sj(t)?10:11:ne(28295,{value:t})}function Qn(t,e){if(t===e)return!0;const n=us(t);if(n!==us(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return $a(t).isEqual($a(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=ls(s.timestampValue),u=ls(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return cs(s.bytesValue).isEqual(cs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ge(s.geoPointValue.latitude)===Ge(i.geoPointValue.latitude)&&Ge(s.geoPointValue.longitude)===Ge(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ge(s.integerValue)===Ge(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ge(s.doubleValue),u=Ge(i.doubleValue);return o===u?nu(o)===nu(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Ji(t.arrayValue.values||[],e.arrayValue.values||[],Qn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(wv(o)!==wv(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Qn(o[c],u[c])))return!1;return!0}(t,e);default:return ne(52216,{left:t})}}function Ba(t,e){return(t.values||[]).find(n=>Qn(n,e))!==void 0}function Xi(t,e){if(t===e)return 0;const n=us(t),r=us(e);if(n!==r)return pe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return pe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Ge(i.integerValue||i.doubleValue),c=Ge(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return bv(t.timestampValue,e.timestampValue);case 4:return bv($a(t),$a(e));case 5:return Yf(t.stringValue,e.stringValue);case 6:return function(i,o){const u=cs(i),c=cs(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const h=pe(u[d],c[d]);if(h!==0)return h}return pe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=pe(Ge(i.latitude),Ge(o.latitude));return u!==0?u:pe(Ge(i.longitude),Ge(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Ev(t.arrayValue,e.arrayValue);case 10:return function(i,o){var m,v,y,w;const u=i.fields||{},c=o.fields||{},d=(m=u[su])==null?void 0:m.arrayValue,h=(v=c[su])==null?void 0:v.arrayValue,f=pe(((y=d==null?void 0:d.values)==null?void 0:y.length)||0,((w=h==null?void 0:h.values)==null?void 0:w.length)||0);return f!==0?f:Ev(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Hl.mapValue&&o===Hl.mapValue)return 0;if(i===Hl.mapValue)return 1;if(o===Hl.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=o.fields||{},h=Object.keys(d);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){const m=Yf(c[f],h[f]);if(m!==0)return m;const v=Xi(u[c[f]],d[h[f]]);if(v!==0)return v}return pe(c.length,h.length)}(t.mapValue,e.mapValue);default:throw ne(23264,{he:n})}}function bv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return pe(t,e);const n=ls(t),r=ls(e),s=pe(n.seconds,r.seconds);return s!==0?s:pe(n.nanos,r.nanos)}function Ev(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Xi(n[s],r[s]);if(i)return i}return pe(n.length,r.length)}function Zi(t){return Jf(t)}function Jf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ls(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Jf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Jf(n.fields[o])}`;return s+"}"}(t.mapValue):ne(61005,{value:t})}function lc(t){switch(us(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cd(t);return e?16+lc(e):16;case 5:return 2*t.stringValue.length;case 6:return cs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+lc(i),0)}(t.arrayValue);case 10:case 11:return function(r){let s=0;return xs(r.fields,(i,o)=>{s+=i.length+lc(o)}),s}(t.mapValue);default:throw ne(13486,{value:t})}}function Nv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Xf(t){return!!t&&"integerValue"in t}function Lp(t){return!!t&&"arrayValue"in t}function Sv(t){return!!t&&"nullValue"in t}function Tv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function cc(t){return!!t&&"mapValue"in t}function sj(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[J_])==null?void 0:r.stringValue)===Z_}function ua(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return xs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=ua(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ua(t.arrayValue.values[n]);return e}return{...t}}function ij(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===X_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(e){this.value=e}static empty(){return new Wt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!cc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ua(n)}setAll(e){let n=yt.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=ua(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());cc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Qn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];cc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){xs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Wt(ua(this.value))}}function e2(t){const e=[];return xs(t.fields,(n,r)=>{const s=new yt([n]);if(cc(r)){const i=e2(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new en(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new Ct(e,0,oe.min(),oe.min(),oe.min(),Wt.empty(),0)}static newFoundDocument(e,n,r,s){return new Ct(e,1,n,oe.min(),r,s,0)}static newNoDocument(e,n){return new Ct(e,2,n,oe.min(),oe.min(),Wt.empty(),0)}static newUnknownDocument(e,n){return new Ct(e,3,n,oe.min(),oe.min(),Wt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(oe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Wt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Wt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=oe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ct&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ct(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n){this.position=e,this.inclusive=n}}function Iv(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=Xi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Av(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Qn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(e,n="asc"){this.field=e,this.dir=n}}function oj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t2{}class nt extends t2{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new lj(e,n,r):n==="array-contains"?new dj(e,r):n==="in"?new hj(e,r):n==="not-in"?new fj(e,r):n==="array-contains-any"?new mj(e,r):new nt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new cj(e,r):new uj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Xi(n,this.value)):n!==null&&us(this.value)===us(n)&&this.matchesComparison(Xi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ne(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class kn extends t2{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new kn(e,n)}matches(e){return n2(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function n2(t){return t.op==="and"}function r2(t){return aj(t)&&n2(t)}function aj(t){for(const e of t.filters)if(e instanceof kn)return!1;return!0}function Zf(t){if(t instanceof nt)return t.field.canonicalString()+t.op.toString()+Zi(t.value);if(r2(t))return t.filters.map(e=>Zf(e)).join(",");{const e=t.filters.map(n=>Zf(n)).join(",");return`${t.op}(${e})`}}function s2(t,e){return t instanceof nt?function(r,s){return s instanceof nt&&r.op===s.op&&r.field.isEqual(s.field)&&Qn(r.value,s.value)}(t,e):t instanceof kn?function(r,s){return s instanceof kn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&s2(o,s.filters[u]),!0):!1}(t,e):void ne(19439)}function i2(t){return t instanceof nt?function(n){return`${n.field.canonicalString()} ${n.op} ${Zi(n.value)}`}(t):t instanceof kn?function(n){return n.op.toString()+" {"+n.getFilters().map(i2).join(" ,")+"}"}(t):"Filter"}class lj extends nt{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class cj extends nt{constructor(e,n){super(e,"in",n),this.keys=o2("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class uj extends nt{constructor(e,n){super(e,"not-in",n),this.keys=o2("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function o2(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class dj extends nt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Lp(n)&&Ba(n.arrayValue,this.value)}}class hj extends nt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ba(this.value.arrayValue,n)}}class fj extends nt{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ba(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Ba(this.value.arrayValue,n)}}class mj extends nt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ba(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.Te=null}}function Cv(t,e=null,n=[],r=[],s=null,i=null,o=null){return new pj(t,e,n,r,s,i,o)}function Op(t){const e=ae(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Zf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),ld(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Zi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Zi(r)).join(",")),e.Te=n}return e.Te}function Vp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!oj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!s2(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Av(t.startAt,e.startAt)&&Av(t.endAt,e.endAt)}function em(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function gj(t,e,n,r,s,i,o,u){return new rl(t,e,n,r,s,i,o,u)}function Fp(t){return new rl(t)}function jv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yj(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function a2(t){return t.collectionGroup!==null}function da(t){const e=ae(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new lt(yt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new ou(i,r))}),n.has(yt.keyField().canonicalString())||e.Ie.push(new ou(yt.keyField(),r))}return e.Ie}function Bn(t){const e=ae(t);return e.Ee||(e.Ee=vj(e,da(t))),e.Ee}function vj(t,e){if(t.limitType==="F")return Cv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ou(s.field,i)});const n=t.endAt?new iu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new iu(t.startAt.position,t.startAt.inclusive):null;return Cv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function tm(t,e){const n=t.filters.concat([e]);return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function nm(t,e,n){return new rl(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function ud(t,e){return Vp(Bn(t),Bn(e))&&t.limitType===e.limitType}function l2(t){return`${Op(Bn(t))}|lt:${t.limitType}`}function ci(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>i2(s)).join(", ")}]`),ld(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Zi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Zi(s)).join(",")),`Target(${r})`}(Bn(t))}; limitType=${t.limitType})`}function dd(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):ee.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of da(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const d=Iv(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,da(r),s)||r.endAt&&!function(o,u,c){const d=Iv(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,da(r),s))}(t,e)}function xj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function c2(t){return(e,n)=>{let r=!1;for(const s of da(t)){const i=wj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function wj(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),d=u.data.field(i);return c!==null&&d!==null?Xi(c,d):ne(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ne(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ei{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){xs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return H_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _j=new Fe(ee.comparator);function hr(){return _j}const u2=new Fe(ee.comparator);function Jo(...t){let e=u2;for(const n of t)e=e.insert(n.key,n);return e}function d2(t){let e=u2;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ds(){return ha()}function h2(){return ha()}function ha(){return new ei(t=>t.toString(),(t,e)=>t.isEqual(e))}const bj=new Fe(ee.comparator),Ej=new lt(ee.comparator);function ge(...t){let e=Ej;for(const n of t)e=e.add(n);return e}const Nj=new lt(pe);function Sj(){return Nj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:nu(e)?"-0":e}}function f2(t){return{integerValue:""+t}}function m2(t,e){return XC(e)?f2(e):Up(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hd{constructor(){this._=void 0}}function Tj(t,e,n){return t instanceof Wa?function(s,i){const o={fields:{[K_]:{stringValue:G_},[Y_]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Mp(i)&&(i=cd(i)),i&&(o.fields[Q_]=i),{mapValue:o}}(n,e):t instanceof Ha?g2(t,e):t instanceof qa?y2(t,e):function(s,i){const o=p2(s,i),u=kv(o)+kv(s.Ae);return Xf(o)&&Xf(s.Ae)?f2(u):Up(s.serializer,u)}(t,e)}function Ij(t,e,n){return t instanceof Ha?g2(t,e):t instanceof qa?y2(t,e):n}function p2(t,e){return t instanceof Ga?function(r){return Xf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Wa extends hd{}class Ha extends hd{constructor(e){super(),this.elements=e}}function g2(t,e){const n=v2(e);for(const r of t.elements)n.some(s=>Qn(s,r))||n.push(r);return{arrayValue:{values:n}}}class qa extends hd{constructor(e){super(),this.elements=e}}function y2(t,e){let n=v2(e);for(const r of t.elements)n=n.filter(s=>!Qn(s,r));return{arrayValue:{values:n}}}class Ga extends hd{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function kv(t){return Ge(t.integerValue||t.doubleValue)}function v2(t){return Lp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n){this.field=e,this.transform=n}}function Aj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ha&&s instanceof Ha||r instanceof qa&&s instanceof qa?Ji(r.elements,s.elements,Qn):r instanceof Ga&&s instanceof Ga?Qn(r.Ae,s.Ae):r instanceof Wa&&s instanceof Wa}(t.transform,e.transform)}class Cj{constructor(e,n){this.version=e,this.transformResults=n}}class Qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qt}static exists(e){return new Qt(void 0,e)}static updateTime(e){return new Qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function uc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class fd{}function w2(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new $p(t.key,Qt.none()):new sl(t.key,t.data,Qt.none());{const n=t.data,r=Wt.empty();let s=new lt(yt.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ws(t.key,r,new en(s.toArray()),Qt.none())}}function jj(t,e,n){t instanceof sl?function(s,i,o){const u=s.value.clone(),c=Rv(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof ws?function(s,i,o){if(!uc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=Rv(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(_2(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function fa(t,e,n,r){return t instanceof sl?function(i,o,u,c){if(!uc(i.precondition,o))return u;const d=i.value.clone(),h=Dv(i.fieldTransforms,c,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ws?function(i,o,u,c){if(!uc(i.precondition,o))return u;const d=Dv(i.fieldTransforms,c,o),h=o.data;return h.setAll(_2(i)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(i,o,u){return uc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function kj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=p2(r.transform,s||null);i!=null&&(n===null&&(n=Wt.empty()),n.set(r.field,i))}return n||null}function Pv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ji(r,s,(i,o)=>Aj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class sl extends fd{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ws extends fd{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function _2(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Rv(t,e,n){const r=new Map;we(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,Ij(o,u,n[s]))}return r}function Dv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,Tj(i,o,e))}return r}class $p extends fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Pj extends fd{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&jj(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=fa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=fa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=h2();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=w2(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(oe.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ge())}isEqual(e){return this.batchId===e.batchId&&Ji(this.mutations,e.mutations,(n,r)=>Pv(n,r))&&Ji(this.baseMutations,e.baseMutations,(n,r)=>Pv(n,r))}}class zp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){we(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let s=function(){return bj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new zp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et,ve;function Lj(t){switch(t){case V.OK:return ne(64938);case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0;default:return ne(15467,{code:t})}}function b2(t){if(t===void 0)return dr("GRPC error has no .code"),V.UNKNOWN;switch(t){case et.OK:return V.OK;case et.CANCELLED:return V.CANCELLED;case et.UNKNOWN:return V.UNKNOWN;case et.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case et.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case et.INTERNAL:return V.INTERNAL;case et.UNAVAILABLE:return V.UNAVAILABLE;case et.UNAUTHENTICATED:return V.UNAUTHENTICATED;case et.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case et.NOT_FOUND:return V.NOT_FOUND;case et.ALREADY_EXISTS:return V.ALREADY_EXISTS;case et.PERMISSION_DENIED:return V.PERMISSION_DENIED;case et.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case et.ABORTED:return V.ABORTED;case et.OUT_OF_RANGE:return V.OUT_OF_RANGE;case et.UNIMPLEMENTED:return V.UNIMPLEMENTED;case et.DATA_LOSS:return V.DATA_LOSS;default:return ne(39323,{code:t})}}(ve=et||(et={}))[ve.OK=0]="OK",ve[ve.CANCELLED=1]="CANCELLED",ve[ve.UNKNOWN=2]="UNKNOWN",ve[ve.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ve[ve.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ve[ve.NOT_FOUND=5]="NOT_FOUND",ve[ve.ALREADY_EXISTS=6]="ALREADY_EXISTS",ve[ve.PERMISSION_DENIED=7]="PERMISSION_DENIED",ve[ve.UNAUTHENTICATED=16]="UNAUTHENTICATED",ve[ve.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ve[ve.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ve[ve.ABORTED=10]="ABORTED",ve[ve.OUT_OF_RANGE=11]="OUT_OF_RANGE",ve[ve.UNIMPLEMENTED=12]="UNIMPLEMENTED",ve[ve.INTERNAL=13]="INTERNAL",ve[ve.UNAVAILABLE=14]="UNAVAILABLE",ve[ve.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vj=new ts([4294967295,4294967295],0);function Mv(t){const e=Oj().encode(t),n=new D_;return n.update(e),new Uint8Array(n.digest())}function Lv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ts([n,r],0),new ts([s,i],0)]}class Bp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xo(`Invalid padding: ${n}`);if(r<0)throw new Xo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Xo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Xo(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ts.fromNumber(this.ge)}ye(e,n,r){let s=e.add(n.multiply(ts.fromNumber(r)));return s.compare(Vj)===1&&(s=new ts([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Mv(e),[r,s]=Lv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);if(!this.we(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Bp(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.ge===0)return;const n=Mv(e),[r,s]=Lv(n);for(let i=0;i<this.hashCount;i++){const o=this.ye(r,s,i);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Xo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,il.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new md(oe.min(),s,new Fe(pe),hr(),ge())}}class il{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new il(r,n,ge(),ge(),ge())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(e,n,r,s){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=s}}class E2{constructor(e,n){this.targetId=e,this.Ce=n}}class N2{constructor(e,n,r=_t.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Ov{constructor(){this.ve=0,this.Fe=Vv(),this.Me=_t.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ge(),n=ge(),r=ge();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ne(38017,{changeType:i})}}),new il(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Vv()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,we(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Fj{constructor(e){this.Ge=e,this.ze=new Map,this.je=hr(),this.He=ql(),this.Je=ql(),this.Ze=new Fe(pe)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ne(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,s)=>{this.rt(s)&&n(s)})}st(e){const n=e.targetId,r=e.Ce.count,s=this.ot(n);if(s){const i=s.target;if(em(i))if(r===0){const o=new ee(i.path);this.et(n,o,Ct.newNoDocument(o,oe.min()))}else we(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const u=this.ut(e),c=u?this.ct(u,e,o):1;if(c!==0){this.it(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=cs(r).toUint8Array()}catch(c){if(c instanceof q_)return Yi("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new Bp(o,s,i)}catch(c){return Yi(c instanceof Xo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.ge===0?null:u}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Ge.ht(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.et(n,i,null),s++)}),s}Tt(e){const n=new Map;this.ze.forEach((i,o)=>{const u=this.ot(o);if(u){if(i.current&&em(u.target)){const c=new ee(u.target.path);this.It(c).has(o)||this.Et(o,c)||this.et(o,c,Ct.newNoDocument(c,e))}i.Be&&(n.set(o,i.ke()),i.Ke())}});let r=ge();this.Je.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.ot(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.je.forEach((i,o)=>o.setReadTime(e));const s=new md(e,n,this.Ze,this.je,r);return this.je=hr(),this.He=ql(),this.Je=ql(),this.Ze=new Fe(pe),s}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,n)?s.qe(n,1):s.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new Ov,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new lt(pe),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new lt(pe),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Ov),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function ql(){return new Fe(ee.comparator)}function Vv(){return new Fe(ee.comparator)}const Uj=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),$j=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),zj=(()=>({and:"AND",or:"OR"}))();class Bj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function rm(t,e){return t.useProto3Json||ld(e)?e:{value:e}}function au(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function S2(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Wj(t,e){return au(t,e.toTimestamp())}function Wn(t){return we(!!t,49232),oe.fromTimestamp(function(n){const r=ls(n);return new ke(r.seconds,r.nanos)}(t))}function Wp(t,e){return sm(t,e).canonicalString()}function sm(t,e){const n=function(s){return new Ie(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function T2(t){const e=Ie.fromString(t);return we(k2(e),10190,{key:e.toString()}),e}function im(t,e){return Wp(t.databaseId,e.path)}function Rh(t,e){const n=T2(e);if(n.get(1)!==t.databaseId.projectId)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new H(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(A2(n))}function I2(t,e){return Wp(t.databaseId,e)}function Hj(t){const e=T2(t);return e.length===4?Ie.emptyPath():A2(e)}function om(t){return new Ie(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function A2(t){return we(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Fv(t,e,n){return{name:im(t,e),fields:n.value.mapValue.fields}}function qj(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ne(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(we(h===void 0||typeof h=="string",58123),_t.fromBase64String(h||"")):(we(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),_t.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const h=d.code===void 0?V.UNKNOWN:b2(d.code);return new H(h,d.message||"")}(o);n=new N2(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Rh(t,r.document.name),i=Wn(r.document.updateTime),o=r.document.createTime?Wn(r.document.createTime):oe.min(),u=new Wt({mapValue:{fields:r.document.fields}}),c=Ct.newFoundDocument(s,i,o,u),d=r.targetIds||[],h=r.removedTargetIds||[];n=new dc(d,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Rh(t,r.document),i=r.readTime?Wn(r.readTime):oe.min(),o=Ct.newNoDocument(s,i),u=r.removedTargetIds||[];n=new dc([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Rh(t,r.document),i=r.removedTargetIds||[];n=new dc([],i,s,null)}else{if(!("filter"in e))return ne(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Mj(s,i),u=r.targetId;n=new E2(u,o)}}return n}function Gj(t,e){let n;if(e instanceof sl)n={update:Fv(t,e.key,e.value)};else if(e instanceof $p)n={delete:im(t,e.key)};else if(e instanceof ws)n={update:Fv(t,e.key,e.data),updateMask:nk(e.fieldMask)};else{if(!(e instanceof Pj))return ne(16599,{dt:e.type});n={verify:im(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Wa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ha)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof qa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Ga)return{fieldPath:o.field.canonicalString(),increment:u.Ae};throw ne(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Wj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ne(27497)}(t,e.precondition)),n}function Kj(t,e){return t&&t.length>0?(we(e!==void 0,14353),t.map(n=>function(s,i){let o=s.updateTime?Wn(s.updateTime):Wn(i);return o.isEqual(oe.min())&&(o=Wn(i)),new Cj(o,s.transformResults||[])}(n,e))):[]}function Qj(t,e){return{documents:[I2(t,e.path)]}}function Yj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=I2(t,s);const i=function(d){if(d.length!==0)return j2(kn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:ui(m.field),direction:Zj(m.dir)}}(h))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=rm(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:n,parent:s}}function Jj(t){let e=Hj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){we(r===1,65062);const h=n.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];n.where&&(i=function(f){const m=C2(f);return m instanceof kn&&r2(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(y){return new ou(di(y.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(n.orderBy));let u=null;n.limit&&(u=function(f){let m;return m=typeof f=="object"?f.value:f,ld(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(f){const m=!!f.before,v=f.values||[];return new iu(v,m)}(n.startAt));let d=null;return n.endAt&&(d=function(f){const m=!f.before,v=f.values||[];return new iu(v,m)}(n.endAt)),gj(e,s,o,i,u,"F",c,d)}function Xj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ne(28987,{purpose:s})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function C2(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=di(n.unaryFilter.field);return nt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=di(n.unaryFilter.field);return nt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=di(n.unaryFilter.field);return nt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=di(n.unaryFilter.field);return nt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ne(61313);default:return ne(60726)}}(t):t.fieldFilter!==void 0?function(n){return nt.create(di(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ne(58110);default:return ne(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return kn.create(n.compositeFilter.filters.map(r=>C2(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ne(1026)}}(n.compositeFilter.op))}(t):ne(30097,{filter:t})}function Zj(t){return Uj[t]}function ek(t){return $j[t]}function tk(t){return zj[t]}function ui(t){return{fieldPath:t.canonicalString()}}function di(t){return yt.fromServerFormat(t.fieldPath)}function j2(t){return t instanceof nt?function(n){if(n.op==="=="){if(Tv(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NAN"}};if(Sv(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Tv(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NOT_NAN"}};if(Sv(n.value))return{unaryFilter:{field:ui(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ui(n.field),op:ek(n.op),value:n.value}}}(t):t instanceof kn?function(n){const r=n.getFilters().map(s=>j2(s));return r.length===1?r[0]:{compositeFilter:{op:tk(n.op),filters:r}}}(t):ne(54877,{filter:t})}function nk(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function k2(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function P2(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ur{constructor(e,n,r,s,i=oe.min(),o=oe.min(),u=_t.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Ur(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Ur(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rk{constructor(e){this.yt=e}}function sk(t){const e=Jj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?nm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ik{constructor(){this.Sn=new ok}addToCollectionParentIndex(e,n){return this.Sn.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(as.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(as.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class ok{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new lt(Ie.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new lt(Ie.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},R2=41943040;class zt{static withCacheSize(e){return new zt(e,zt.DEFAULT_COLLECTION_PERCENTILE,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zt.DEFAULT_COLLECTION_PERCENTILE=10,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,zt.DEFAULT=new zt(R2,zt.DEFAULT_COLLECTION_PERCENTILE,zt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),zt.DISABLED=new zt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new eo(0)}static ar(){return new eo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="LruGarbageCollector",ak=1048576;function zv([t,e],[n,r]){const s=pe(t,n);return s===0?pe(e,r):s}class lk{constructor(e){this.Pr=e,this.buffer=new lt(zv),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();zv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class ck{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){q($v,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){po(n)?q($v,"Ignoring IndexedDB error during garbage collection: ",n):await mo(n)}await this.Ar(3e5)})}}class uk{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return U.resolve(ad.ce);const r=new lk(n);return this.Vr.forEachTarget(e,s=>r.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>r.Er(s))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(q("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Uv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(q("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Uv):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,s,i,o,u,c,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(q("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,o=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(r=f,u=Date.now(),this.removeTargets(e,r,n))).next(f=>(i=f,c=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(d=Date.now(),li()<=me.DEBUG&&q("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${s} in `+(u-o)+`ms
	Removed ${i} targets in `+(c-u)+`ms
	Removed ${f} documents in `+(d-c)+`ms
Total Duration: ${d-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function dk(t,e){return new uk(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(){this.changes=new ei(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Ct.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&fa(r.mutation,s,en.empty(),ke.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ge()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ge()){const s=Ds();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Jo();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Ds();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ge()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=hr();const o=ha(),u=function(){return ha()}();return n.forEach((c,d)=>{const h=r.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof ws)?i=i.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),fa(h.mutation,d,h.mutation.getFieldMask(),ke.now())):o.set(d.key,en.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,h)=>o.set(d,h)),n.forEach((d,h)=>u.set(d,new fk(h,o.get(d)??null))),u))}recalculateAndSaveOverlays(e,n){const r=ha();let s=new Fe((o,u)=>o-u),i=ge();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let h=r.get(c)||en.empty();h=u.applyToLocalView(d,h),r.set(c,h);const f=(s.get(u.batchId)||ge()).add(c);s=s.insert(u.batchId,f)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,h=c.value,f=h2();h.forEach(m=>{if(!i.has(m)){const v=w2(n.get(m),r.get(m));v!==null&&f.set(m,v),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,f))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return yj(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):a2(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(Ds());let u=Ua,c=i;return o.next(d=>U.forEach(d,(h,f)=>(u<f.largestBatchId&&(u=f.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{c=c.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ge())).next(h=>({batchId:u,changes:d2(h)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let s=Jo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Jo();return this.indexManager.getCollectionParents(e,i).next(u=>U.forEach(u,c=>{const d=function(f,m){return new rl(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(h=>{h.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,Ct.newInvalidDocument(h)))});let u=Jo();return o.forEach((c,d)=>{const h=i.get(c);h!==void 0&&fa(h.mutation,d,en.empty(),ke.now()),dd(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return U.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Wn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(s){return{name:s.name,query:sk(s.bundledQuery),readTime:Wn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(){this.overlays=new Fe(ee.comparator),this.Lr=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ds();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.bt(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Lr.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=Ds(),i=n.length+1,o=new ee(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Fe((d,h)=>d-h);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=i.get(d.largestBatchId);h===null&&(h=Ds(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const u=Ds(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,h)=>u.set(d,h)),!(u.size()>=s)););return U.resolve(u)}bt(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Lr.get(s.largestBatchId).delete(r.key);this.Lr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Dj(n,r));let i=this.Lr.get(n);i===void 0&&(i=ge(),this.Lr.set(n,i)),this.Lr.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(){this.sessionToken=_t.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hp{constructor(){this.kr=new lt(ut.Kr),this.qr=new lt(ut.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new ut(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new ut(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new ee(new Ie([])),r=new ut(n,e),s=new ut(n,e+1),i=[];return this.qr.forEachInRange([r,s],o=>{this.Wr(o),i.push(o.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new ee(new Ie([])),r=new ut(n,e),s=new ut(n,e+1);let i=ge();return this.qr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ut(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ut{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return ee.comparator(e.key,n.key)||pe(e.Hr,n.Hr)}static Ur(e,n){return pe(e.Hr,n.Hr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new lt(ut.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Rj(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.Jr=this.Jr.add(new ut(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.Xr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Dp:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ut(n,0),s=new ut(n,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([r,s],o=>{const u=this.Zr(o.Hr);i.push(u)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new lt(pe);return n.forEach(s=>{const i=new ut(s,0),o=new ut(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,o],u=>{r=r.add(u.Hr)})}),U.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;ee.isDocumentKey(i)||(i=i.child(""));const o=new ut(new ee(i),0);let u=new lt(pe);return this.Jr.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.Hr)),!0)},o),U.resolve(this.Yr(u))}Yr(e){const n=[];return e.forEach(r=>{const s=this.Zr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){we(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return U.forEach(n.mutations,s=>{const i=new ut(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new ut(n,0),s=this.Jr.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e){this.ti=e,this.docs=function(){return new Fe(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():Ct.newInvalidDocument(n))}getEntries(e,n){let r=hr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():Ct.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=hr();const o=n.path,u=new ee(o.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:h}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||KC(GC(h),r)<=0||(s.has(h.key)||dd(n,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){ne(9500)}ni(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new wk(this)}getSize(e){return U.resolve(this.size)}}class wk extends hk{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.persistence=e,this.ri=new ei(n=>Op(n),Vp),this.lastRemoteSnapshotVersion=oe.min(),this.highestTargetId=0,this.ii=0,this.si=new Hp,this.targetCount=0,this.oi=eo._r()}forEachTarget(e,n){return this.ri.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),U.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new eo(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.lr(n),U.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.ri.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.ri.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(e,n){this._i={},this.overlays={},this.ai=new ad(0),this.ui=!1,this.ui=!0,this.ci=new yk,this.referenceDelegate=e(this),this.li=new _k(this),this.indexManager=new ik,this.remoteDocumentCache=function(s){return new xk(s)}(r=>this.referenceDelegate.hi(r)),this.serializer=new rk(n),this.Pi=new pk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new vk(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const s=new bk(this.ai.next());return this.referenceDelegate.Ti(),r(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,n){return U.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class bk extends YC{constructor(e){super(),this.currentSequenceNumber=e}}class qp{constructor(e){this.persistence=e,this.Ri=new Hp,this.Ai=null}static Vi(e){return new qp(e)}get di(){if(this.Ai)return this.Ai;throw ne(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),U.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,r=>{const s=ee.fromPath(r);return this.mi(e,s).next(i=>{i||n.removeEntry(s,oe.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return U.or([()=>U.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class lu{constructor(e,n){this.persistence=e,this.fi=new ei(r=>ZC(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=dk(this,n)}static Vi(e,n){return new lu(e,n)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(s=>r+s))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return U.forEach(this.fi,(r,s)=>this.wr(e,r,s).next(i=>i?U.resolve():n(s)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,o=>this.wr(e,o,n).next(u=>{u||(r++,i.removeEntry(o,oe.min()))})).next(()=>i.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),U.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),U.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=lc(e.data.value)),n}wr(e,n,r){return U.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const s=this.fi.get(n);return U.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=s}static Es(e,n){let r=ge(),s=ge();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Gp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nk{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return gA()?8:JC(kt())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.gs(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.ps(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Ek;return this.ys(e,n,o).next(u=>{if(i.result=u,this.As)return this.ws(e,n,o,u.size)})}).next(()=>i.result)}ws(e,n,r,s){return r.documentReadCount<this.Vs?(li()<=me.DEBUG&&q("QueryEngine","SDK will not create cache indexes for query:",ci(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(li()<=me.DEBUG&&q("QueryEngine","Query:",ci(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(li()<=me.DEBUG&&q("QueryEngine","The SDK decides to create cache indexes for query:",ci(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Bn(n))):U.resolve())}gs(e,n){if(jv(n))return U.resolve(null);let r=Bn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=nm(n,null,"F"),r=Bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ge(...i);return this.fs.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.bs(n,u);return this.Ss(n,d,o,c.readTime)?this.gs(e,nm(n,null,"F")):this.Ds(e,d,n,c)}))})))}ps(e,n,r,s){return jv(n)||s.isEqual(oe.min())?U.resolve(null):this.fs.getDocuments(e,r).next(i=>{const o=this.bs(n,i);return this.Ss(n,o,r,s)?U.resolve(null):(li()<=me.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ci(n)),this.Ds(e,o,n,qC(s,Ua)).next(u=>u))})}bs(e,n){let r=new lt(c2(e));return n.forEach((s,i)=>{dd(e,i)&&(r=r.add(i))}),r}Ss(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,n,r){return li()<=me.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",ci(n)),this.fs.getDocumentsMatchingQuery(e,n,as.min(),r)}Ds(e,n,r,s){return this.fs.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kp="LocalStore",Sk=3e8;class Tk{constructor(e,n,r,s){this.persistence=e,this.Cs=n,this.serializer=s,this.vs=new Fe(pe),this.Fs=new ei(i=>Op(i),Vp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mk(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function Ik(t,e,n,r){return new Tk(t,e,n,r)}async function M2(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=ge();for(const d of s){o.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}for(const d of i){u.push(d.batchId);for(const h of d.mutations)c=c.add(h.key)}return n.localDocuments.getDocuments(r,c).next(d=>({Ns:d,removedBatchIds:o,addedBatchIds:u}))})})}function Ak(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.xs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,h){const f=d.batch,m=f.keys();let v=U.resolve();return m.forEach(y=>{v=v.next(()=>h.getEntry(c,y)).next(w=>{const A=d.docVersions.get(y);we(A!==null,48541),w.version.compareTo(A)<0&&(f.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),h.addEntry(w)))})}),v.next(()=>u.mutationQueue.removeMutationBatch(c,f))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ge();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function L2(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function Ck(t,e){const n=ae(t),r=e.snapshotVersion;let s=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});s=n.vs;const u=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;u.push(n.li.removeMatchingKeys(i,h.removedDocuments,f).next(()=>n.li.addMatchingKeys(i,h.addedDocuments,f)));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(_t.EMPTY_BYTE_STRING,oe.min()).withLastLimboFreeSnapshotVersion(oe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),s=s.insert(f,v),function(w,A,_){return w.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=Sk?!0:_.addedDocuments.size+_.modifiedDocuments.size+_.removedDocuments.size>0}(m,v,h)&&u.push(n.li.updateTargetData(i,v))});let c=hr(),d=ge();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,h))}),u.push(jk(i,o,e.documentUpdates).next(h=>{c=h.Bs,d=h.Ls})),!r.isEqual(oe.min())){const h=n.li.getLastRemoteSnapshotVersion(i).next(f=>n.li.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(h)}return U.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.vs=s,i))}function jk(t,e,n){let r=ge(),s=ge();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=hr();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(oe.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):q(Kp,"Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Bs:o,Ls:s}})}function kk(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Dp),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Pk(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.li.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.li.allocateTargetId(r).next(o=>(s=new Ur(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.vs.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function am(t,e,n){const r=ae(t),s=r.vs.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!po(o))throw o;q(Kp,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(s.target)}function Bv(t,e,n){const r=ae(t);let s=oe.min(),i=ge();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,h){const f=ae(c),m=f.Fs.get(h);return m!==void 0?U.resolve(f.vs.get(m)):f.li.getTargetData(d,h)}(r,o,Bn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?s:oe.min(),n?i:ge())).next(u=>(Rk(r,xj(e),u),{documents:u,ks:i})))}function Rk(t,e,n){let r=t.Ms.get(e)||oe.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.Ms.set(e,r)}class Wv{constructor(){this.activeTargetIds=Sj()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Dk{constructor(){this.vo=new Wv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Wv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv="ConnectivityMonitor";class qv{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){q(Hv,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){q(Hv,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl=null;function lm(){return Gl===null?Gl=function(){return 268435456+Math.round(2147483648*Math.random())}():Gl++,"0x"+Gl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dh="RestConnection",Lk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class Ok{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${s}`,this.$o=this.databaseId.database===ru?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Wo(e,n,r,s,i){const o=lm(),u=this.Qo(e,n.toUriEncodedString());q(Dh,`Sending RPC '${e}' ${o}:`,u,r);const c={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(c,s,i);const{host:d}=new URL(u),h=uo(d);return this.zo(e,u,c,r,h).then(f=>(q(Dh,`Received RPC '${e}' ${o}: `,f),f),f=>{throw Yi(Dh,`RPC '${e}' ${o} failed with error: `,f,"url: ",u,"request:",r),f})}jo(e,n,r,s,i,o){return this.Wo(e,n,r,s,i)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+fo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>e[i]=s),r&&r.headers.forEach((s,i)=>e[i]=s)}Qo(e,n){const r=Lk[e];let s=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection",Wo=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(s){setTimeout(()=>{throw s},0)}})};class Di extends Ok{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Di.c_){const e=V_();Wo(e,O_.STAT_EVENT,n=>{n.stat===Qf.PROXY?q(St,"STAT_EVENT: detected buffering proxy"):n.stat===Qf.NOPROXY&&q(St,"STAT_EVENT: detected no buffering proxy")}),Di.c_=!0}}zo(e,n,r,s,i){const o=lm();return new Promise((u,c)=>{const d=new M_;d.setWithCredentials(!0),d.listenOnce(L_.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case ac.NO_ERROR:const f=d.getResponseJson();q(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),u(f);break;case ac.TIMEOUT:q(St,`RPC '${e}' ${o} timed out`),c(new H(V.DEADLINE_EXCEEDED,"Request time out"));break;case ac.HTTP_ERROR:const m=d.getStatus();if(q(St,`RPC '${e}' ${o} failed with status:`,m,"response text:",d.getResponseText()),m>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const y=v==null?void 0:v.error;if(y&&y.status&&y.message){const w=function(_){const b=_.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(b)>=0?b:V.UNKNOWN}(y.status);c(new H(w,y.message))}else c(new H(V.UNKNOWN,"Server responded with status "+d.getStatus()))}else c(new H(V.UNAVAILABLE,"Connection failed."));break;default:ne(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{q(St,`RPC '${e}' ${o} completed.`)}});const h=JSON.stringify(s);q(St,`RPC '${e}' ${o} sending request:`,s),d.send(n,"POST",h,r,15)})}T_(e,n,r){const s=lm(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Go(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=i.join("");q(St,`Creating RPC '${e}' stream ${s}: ${d}`,u);const h=o.createWebChannel(d,u);this.I_(h);let f=!1,m=!1;const v=new Vk({Ho:y=>{m?q(St,`Not sending because RPC '${e}' stream ${s} is closed:`,y):(f||(q(St,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),q(St,`RPC '${e}' stream ${s} sending:`,y),h.send(y))},Jo:()=>h.close()});return Wo(h,Yo.EventType.OPEN,()=>{m||(q(St,`RPC '${e}' stream ${s} transport opened.`),v.i_())}),Wo(h,Yo.EventType.CLOSE,()=>{m||(m=!0,q(St,`RPC '${e}' stream ${s} transport closed`),v.o_(),this.E_(h))}),Wo(h,Yo.EventType.ERROR,y=>{m||(m=!0,Yi(St,`RPC '${e}' stream ${s} transport errored. Name:`,y.name,"Message:",y.message),v.o_(new H(V.UNAVAILABLE,"The operation could not be completed")))}),Wo(h,Yo.EventType.MESSAGE,y=>{var w;if(!m){const A=y.data[0];we(!!A,16349);const _=A,b=(_==null?void 0:_.error)||((w=_[0])==null?void 0:w.error);if(b){q(St,`RPC '${e}' stream ${s} received error:`,b);const S=b.status;let P=function(I){const E=et[I];if(E!==void 0)return b2(E)}(S),L=b.message;P===void 0&&(P=V.INTERNAL,L="Unknown error status: "+S+" with message "+b.message),m=!0,v.o_(new H(P,L)),h.close()}else q(St,`RPC '${e}' stream ${s} received:`,A),v.__(A)}}),Di.u_(),setTimeout(()=>{v.s_()},0),v}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return F_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fk(t){return new Di(t)}function Mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pd(t){return new Bj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Di.c_=!1;class O2{constructor(e,n,r=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),s=Math.max(0,n-r);s>0&&q("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="PersistentStream";class V2{constructor(e,n,r,s,i,o,u,c){this.Ci=e,this.b_=r,this.S_=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new O2(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(dr(n.toString()),dr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.D_===n&&this.G_(r,s)},r=>{e(()=>{const s=new H(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(s)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{r(()=>this.z_(s))}),this.stream.onMessage(s=>{r(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return q(Gv,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(q(Gv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Uk extends V2{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=qj(this.serializer,e),r=function(i){if(!("targetChange"in i))return oe.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?oe.min():o.readTime?Wn(o.readTime):oe.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=om(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=em(c)?{documents:Qj(i,c)}:{query:Yj(i,c).ft},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=S2(i,o.resumeToken);const d=rm(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(oe.min())>0){u.readTime=au(i,o.snapshotVersion.toTimestamp());const d=rm(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=Xj(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=om(this.serializer),n.removeTarget=e,this.K_(n)}}class $k extends V2{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return we(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,we(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){we(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=Kj(e.writeResults,e.commitTime),r=Wn(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=om(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Gj(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{}class Bk extends zk{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Wo(e,sm(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new H(V.UNKNOWN,i.toString())})}jo(e,n,r,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.jo(e,sm(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new H(V.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function Wk(t,e,n,r){return new Bk(t,e,n,r)}class Hk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(dr(n),this.aa=!1):q("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qs="RemoteStore";class qk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{ti(this)&&(q(Qs,"Restarting streams for network reachability change."),await async function(c){const d=ae(c);d.Ea.add(4),await ol(d),d.Va.set("Unknown"),d.Ea.delete(4),await gd(d)}(this))})}),this.Va=new Hk(r,s)}}async function gd(t){if(ti(t))for(const e of t.Ra)await e(!0)}async function ol(t){for(const e of t.Ra)await e(!1)}function F2(t,e){const n=ae(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Xp(n)?Jp(n):go(n).O_()&&Yp(n,e))}function Qp(t,e){const n=ae(t),r=go(n);n.Ia.delete(e),r.O_()&&U2(n,e),n.Ia.size===0&&(r.O_()?r.L_():ti(n)&&n.Va.set("Unknown"))}function Yp(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(oe.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}go(t).Z_(e)}function U2(t,e){t.da.$e(e),go(t).X_(e)}function Jp(t){t.da=new Fj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),go(t).start(),t.Va.ua()}function Xp(t){return ti(t)&&!go(t).x_()&&t.Ia.size>0}function ti(t){return ae(t).Ea.size===0}function $2(t){t.da=void 0}async function Gk(t){t.Va.set("Online")}async function Kk(t){t.Ia.forEach((e,n)=>{Yp(t,e)})}async function Qk(t,e){$2(t),Xp(t)?(t.Va.ha(e),Jp(t)):t.Va.set("Unknown")}async function Yk(t,e,n){if(t.Va.set("Online"),e instanceof N2&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.Ia.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.Ia.delete(u),s.da.removeTarget(u))}(t,e)}catch(r){q(Qs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await cu(t,r)}else if(e instanceof dc?t.da.Xe(e):e instanceof E2?t.da.st(e):t.da.tt(e),!n.isEqual(oe.min()))try{const r=await L2(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.da.Tt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const h=i.Ia.get(c);if(!h)return;i.Ia.set(c,h.withResumeToken(_t.EMPTY_BYTE_STRING,h.snapshotVersion)),U2(i,c);const f=new Ur(h.target,c,d,h.sequenceNumber);Yp(i,f)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){q(Qs,"Failed to raise snapshot:",r),await cu(t,r)}}async function cu(t,e,n){if(!po(e))throw e;t.Ea.add(1),await ol(t),t.Va.set("Offline"),n||(n=()=>L2(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q(Qs,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await gd(t)})}function z2(t,e){return e().catch(n=>cu(t,n,e))}async function yd(t){const e=ae(t),n=ds(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Dp;for(;Jk(e);)try{const s=await kk(e.localStore,r);if(s===null){e.Ta.length===0&&n.L_();break}r=s.batchId,Xk(e,s)}catch(s){await cu(e,s)}B2(e)&&W2(e)}function Jk(t){return ti(t)&&t.Ta.length<10}function Xk(t,e){t.Ta.push(e);const n=ds(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function B2(t){return ti(t)&&!ds(t).x_()&&t.Ta.length>0}function W2(t){ds(t).start()}async function Zk(t){ds(t).ra()}async function eP(t){const e=ds(t);for(const n of t.Ta)e.ea(n.mutations)}async function tP(t,e,n){const r=t.Ta.shift(),s=zp.from(r,e,n);await z2(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await yd(t)}async function nP(t,e){e&&ds(t).Y_&&await async function(r,s){if(function(o){return Lj(o)&&o!==V.ABORTED}(s.code)){const i=r.Ta.shift();ds(r).B_(),await z2(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await yd(r)}}(t,e),B2(t)&&W2(t)}async function Kv(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),q(Qs,"RemoteStore received new credentials");const r=ti(n);n.Ea.add(3),await ol(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await gd(n)}async function rP(t,e){const n=ae(t);e?(n.Ea.delete(2),await gd(n)):e||(n.Ea.add(2),await ol(n),n.Va.set("Unknown"))}function go(t){return t.ma||(t.ma=function(n,r,s){const i=ae(n);return i.sa(),new Uk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:Gk.bind(null,t),Yo:Kk.bind(null,t),t_:Qk.bind(null,t),J_:Yk.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),Xp(t)?Jp(t):t.Va.set("Unknown")):(await t.ma.stop(),$2(t))})),t.ma}function ds(t){return t.fa||(t.fa=function(n,r,s){const i=ae(n);return i.sa(),new $k(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:Zk.bind(null,t),t_:nP.bind(null,t),ta:eP.bind(null,t),na:tP.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await yd(t)):(await t.fa.stop(),t.Ta.length>0&&(q(Qs,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Zp(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new H(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function eg(t,e){if(dr("AsyncQueue",`${e}: ${t}`),po(t))return new H(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{static emptySet(e){return new Mi(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Jo(),this.sortedSet=new Fe(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Mi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Mi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qv{constructor(){this.ga=new Fe(ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ne(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class to{constructor(e,n,r,s,i,o,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new to(e,n,Mi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ud(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class iP{constructor(){this.queries=Yv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const s=ae(n),i=s.queries;s.queries=Yv(),i.forEach((o,u)=>{for(const c of u.ba)c.onError(r)})})(this,new H(V.ABORTED,"Firestore shutting down"))}}function Yv(){return new ei(t=>l2(t),ud)}async function H2(t,e){const n=ae(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.Sa()&&e.Da()&&(r=2):(i=new sP,r=e.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=eg(o,`Initialization of query '${ci(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.ba.push(e),e.va(n.onlineState),i.wa&&e.Fa(i.wa)&&tg(n)}async function q2(t,e){const n=ae(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.ba.indexOf(e);o>=0&&(i.ba.splice(o,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function oP(t,e){const n=ae(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.ba)u.Fa(s)&&(r=!0);o.wa=s}}r&&tg(n)}function aP(t,e,n){const r=ae(t),s=r.queries.get(e);if(s)for(const i of s.ba)i.onError(n);r.queries.delete(e)}function tg(t){t.Ca.forEach(e=>{e.next()})}var cm,Jv;(Jv=cm||(cm={})).Ma="default",Jv.Cache="cache";class G2{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new to(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=to.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==cm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e){this.key=e}}class Q2{constructor(e){this.key=e}}class lP{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=ge(),this.mutatedKeys=ge(),this.eu=c2(e),this.tu=new Mi(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Qv,s=n?n.tu:this.tu;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),v=dd(this.query,f)?f:null,y=!!m&&this.mutatedKeys.has(m.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let A=!1;m&&v?m.data.isEqual(v.data)?y!==w&&(r.track({type:3,doc:v}),A=!0):this.su(m,v)||(r.track({type:2,doc:v}),A=!0,(c&&this.eu(v,c)>0||d&&this.eu(v,d)<0)&&(u=!0)):!m&&v?(r.track({type:0,doc:v}),A=!0):m&&!v&&(r.track({type:1,doc:m}),A=!0,(c||d)&&(u=!0)),A&&(v?(o=o.add(v),i=w?i.add(h):i.delete(h)):(o=o.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),i=i.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:u,mutatedKeys:i}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((h,f)=>function(v,y){const w=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ne(20277,{Vt:A})}};return w(v)-w(y)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(r),s=s??!1;const u=n&&!s?this._u():[],c=this.Ya.size===0&&this.current&&!s?1:0,d=c!==this.Xa;return this.Xa=c,o.length!==0||d?{snapshot:new to(this.query,e.tu,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:u}:{au:u}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Qv,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=ge(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new Q2(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new K2(r))}),n}cu(e){this.Za=e.ks,this.Ya=ge();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return to.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const ng="SyncEngine";class cP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class uP{constructor(e){this.key=e,this.hu=!1}}class dP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new ei(u=>l2(u),ud),this.Iu=new Map,this.Eu=new Set,this.Ru=new Fe(ee.comparator),this.Au=new Map,this.Vu=new Hp,this.du={},this.mu=new Map,this.fu=eo.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function hP(t,e,n=!0){const r=tb(t);let s;const i=r.Tu.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await Y2(r,e,n,!0),s}async function fP(t,e){const n=tb(t);await Y2(n,e,!0,!1)}async function Y2(t,e,n,r){const s=await Pk(t.localStore,Bn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await mP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&F2(t.remoteStore,s),u}async function mP(t,e,n,r,s){t.pu=(f,m,v)=>async function(w,A,_,b){let S=A.view.ru(_);S.Ss&&(S=await Bv(w.localStore,A.query,!1).then(({documents:I})=>A.view.ru(I,S)));const P=b&&b.targetChanges.get(A.targetId),L=b&&b.targetMismatches.get(A.targetId)!=null,F=A.view.applyChanges(S,w.isPrimaryClient,P,L);return Zv(w,A.targetId,F.au),F.snapshot}(t,f,m,v);const i=await Bv(t.localStore,e,!0),o=new lP(e,i.ks),u=o.ru(i.documents),c=il.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,c);Zv(t,n,d.au);const h=new cP(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function pP(t,e,n){const r=ae(t),s=r.Tu.get(e),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(o=>!ud(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await am(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&Qp(r.remoteStore,s.targetId),um(r,s.targetId)}).catch(mo)):(um(r,s.targetId),await am(r.localStore,s.targetId,!0))}async function gP(t,e){const n=ae(t),r=n.Tu.get(e),s=n.Iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Qp(n.remoteStore,r.targetId))}async function yP(t,e,n){const r=NP(t);try{const s=await function(o,u){const c=ae(o),d=ke.now(),h=u.reduce((v,y)=>v.add(y.key),ge());let f,m;return c.persistence.runTransaction("Locally write mutations","readwrite",v=>{let y=hr(),w=ge();return c.xs.getEntries(v,h).next(A=>{y=A,y.forEach((_,b)=>{b.isValidDocument()||(w=w.add(_))})}).next(()=>c.localDocuments.getOverlayedDocuments(v,y)).next(A=>{f=A;const _=[];for(const b of u){const S=kj(b,f.get(b.key).overlayedDocument);S!=null&&_.push(new ws(b.key,S,e2(S.value.mapValue),Qt.exists(!0)))}return c.mutationQueue.addMutationBatch(v,d,_,u)}).next(A=>{m=A;const _=A.applyToLocalDocumentSet(f,w);return c.documentOverlayCache.saveOverlays(v,A.batchId,_)})}).then(()=>({batchId:m.batchId,changes:d2(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let d=o.du[o.currentUser.toKey()];d||(d=new Fe(pe)),d=d.insert(u,c),o.du[o.currentUser.toKey()]=d}(r,s.batchId,n),await al(r,s.changes),await yd(r.remoteStore)}catch(s){const i=eg(s,"Failed to persist write");n.reject(i)}}async function J2(t,e){const n=ae(t);try{const r=await Ck(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Au.get(i);o&&(we(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?we(o.hu,14607):s.removedDocuments.size>0&&(we(o.hu,42227),o.hu=!1))}),await al(n,r,e)}catch(r){await mo(r)}}function Xv(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Tu.forEach((i,o)=>{const u=o.view.va(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=ae(o);c.onlineState=u;let d=!1;c.queries.forEach((h,f)=>{for(const m of f.ba)m.va(u)&&(d=!0)}),d&&tg(c)}(r.eventManager,e),s.length&&r.Pu.J_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function vP(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Au.get(e),i=s&&s.key;if(i){let o=new Fe(ee.comparator);o=o.insert(i,Ct.newNoDocument(i,oe.min()));const u=ge().add(i),c=new md(oe.min(),new Map,new Fe(pe),o,u);await J2(r,c),r.Ru=r.Ru.remove(i),r.Au.delete(e),rg(r)}else await am(r.localStore,e,!1).then(()=>um(r,e,n)).catch(mo)}async function xP(t,e){const n=ae(t),r=e.batch.batchId;try{const s=await Ak(n.localStore,e);Z2(n,r,null),X2(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await al(n,s)}catch(s){await mo(s)}}async function wP(t,e,n){const r=ae(t);try{const s=await function(o,u){const c=ae(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return c.mutationQueue.lookupMutationBatch(d,u).next(f=>(we(f!==null,37113),h=f.keys(),c.mutationQueue.removeMutationBatch(d,f))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,h,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>c.localDocuments.getDocuments(d,h))})}(r.localStore,e);Z2(r,e,n),X2(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await al(r,s)}catch(s){await mo(s)}}function X2(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function Z2(t,e,n){const r=ae(t);let s=r.du[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.du[r.currentUser.toKey()]=s}}function um(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||eb(t,r)})}function eb(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(Qp(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),rg(t))}function Zv(t,e,n){for(const r of n)r instanceof K2?(t.Vu.addReference(r.key,e),_P(t,r)):r instanceof Q2?(q(ng,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||eb(t,r.key)):ne(19791,{wu:r})}function _P(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(q(ng,"New document in limbo: "+n),t.Eu.add(r),rg(t))}function rg(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ee(Ie.fromString(e)),r=t.fu.next();t.Au.set(r,new uP(n)),t.Ru=t.Ru.insert(n,r),F2(t.remoteStore,new Ur(Bn(Fp(n.path)),r,"TargetPurposeLimboResolution",ad.ce))}}async function al(t,e,n){const r=ae(t),s=[],i=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((u,c)=>{o.push(r.pu(c,e,n).then(d=>{var h;if((d||n)&&r.isPrimaryClient){const f=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(c.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(d){s.push(d);const f=Gp.Es(c.targetId,d);i.push(f)}}))}),await Promise.all(o),r.Pu.J_(s),await async function(c,d){const h=ae(c);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(d,m=>U.forEach(m.Ts,v=>h.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>U.forEach(m.Is,v=>h.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!po(f))throw f;q(Kp,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const v=h.vs.get(m),y=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(y);h.vs=h.vs.insert(m,w)}}}(r.localStore,i))}async function bP(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){q(ng,"User change. New user:",e.toKey());const r=await M2(n.localStore,e);n.currentUser=e,function(i,o){i.mu.forEach(u=>{u.forEach(c=>{c.reject(new H(V.CANCELLED,o))})}),i.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await al(n,r.Ns)}}function EP(t,e){const n=ae(t),r=n.Au.get(e);if(r&&r.hu)return ge().add(r.key);{let s=ge();const i=n.Iu.get(e);if(!i)return s;for(const o of i){const u=n.Tu.get(o);s=s.unionWith(u.view.nu)}return s}}function tb(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=J2.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=EP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=vP.bind(null,e),e.Pu.J_=oP.bind(null,e.eventManager),e.Pu.yu=aP.bind(null,e.eventManager),e}function NP(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=wP.bind(null,e),e}class uu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=pd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return Ik(this.persistence,new Nk,e.initialUser,this.serializer)}Cu(e){return new D2(qp.Vi,this.serializer)}Du(e){return new Dk}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}uu.provider={build:()=>new uu};class SP extends uu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){we(this.persistence.referenceDelegate instanceof lu,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new ck(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?zt.withCacheSize(this.cacheSizeBytes):zt.DEFAULT;return new D2(r=>lu.Vi(r,n),this.serializer)}}class dm{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Xv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=bP.bind(null,this.syncEngine),await rP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new iP}()}createDatastore(e){const n=pd(e.databaseInfo.databaseId),r=Fk(e.databaseInfo);return Wk(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new qk(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>Xv(this.syncEngine,n,0),function(){return qv.v()?new qv:new Mk}())}createSyncEngine(e,n){return function(s,i,o,u,c,d,h){const f=new dP(s,i,o,u,c,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=ae(s);q(Qs,"RemoteStore shutting down."),i.Ea.add(5),await ol(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}dm.provider={build:()=>new dm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):dr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs="FirestoreClient";class TP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=s,this.user=It.UNAUTHENTICATED,this.clientId=Rp.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{q(hs,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(q(hs,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=eg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Lh(t,e){t.asyncQueue.verifyOperationInProgress(),q(hs,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await M2(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function ex(t,e){t.asyncQueue.verifyOperationInProgress();const n=await IP(t);q(hs,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Kv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>Kv(e.remoteStore,s)),t._onlineComponents=e}async function IP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q(hs,"Using user provided OfflineComponentProvider");try{await Lh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Yi("Error using user provided cache. Falling back to memory cache: "+n),await Lh(t,new uu)}}else q(hs,"Using default OfflineComponentProvider"),await Lh(t,new SP(void 0));return t._offlineComponents}async function rb(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q(hs,"Using user provided OnlineComponentProvider"),await ex(t,t._uninitializedComponentsProvider._online)):(q(hs,"Using default OnlineComponentProvider"),await ex(t,new dm))),t._onlineComponents}function AP(t){return rb(t).then(e=>e.syncEngine)}async function sb(t){const e=await rb(t),n=e.eventManager;return n.onListen=hP.bind(null,e.syncEngine),n.onUnlisten=pP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=fP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=gP.bind(null,e.syncEngine),n}function CP(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const h=new nb({next:m=>{h.Nu(),o.enqueueAndForget(()=>q2(i,f));const v=m.docs.has(u);!v&&m.fromCache?d.reject(new H(V.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&c&&c.source==="server"?d.reject(new H(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new G2(Fp(u.path),h,{includeMetadataChanges:!0,Ka:!0});return H2(i,f)}(await sb(t),t.asyncQueue,e,n,r)),r.promise}function jP(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const h=new nb({next:m=>{h.Nu(),o.enqueueAndForget(()=>q2(i,f)),m.fromCache&&c.source==="server"?d.reject(new H(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new G2(u,h,{includeMetadataChanges:!0,Ka:!0});return H2(i,f)}(await sb(t),t.asyncQueue,e,n,r)),r.promise}function kP(t,e){const n=new rr;return t.asyncQueue.enqueueAndForget(async()=>yP(await AP(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP="ComponentProvider",tx=new Map;function RP(t,e,n,r,s){return new nj(t,e,n,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,ib(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob="firestore.googleapis.com",nx=!0;class rx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new H(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ob,this.ssl=nx}else this.host=e.host,this.ssl=e.ssl??nx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=R2;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<ak)throw new H(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}HC("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ib(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new H(V.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vd{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new H(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new H(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new MC;switch(r.type){case"firstParty":return new FC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new H(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=tx.get(n);r&&(q(PP,"Removing Datastore"),tx.delete(n),r.terminate())}(this),Promise.resolve()}}function DP(t,e,n,r={}){var d;t=jn(t,vd);const s=uo(e),i=t._getSettings(),o={...i,emulatorOptions:t._getEmulatorOptions()},u=`${e}:${n}`;s&&(T_(`https://${u}`),I_("Firestore",!0)),i.host!==ob&&i.host!==u&&Yi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const c={...i,host:u,ssl:s,emulatorOptions:r};if(!qs(c,o)&&(t._setSettings(c),r.mockUserToken)){let h,f;if(typeof r.mockUserToken=="string")h=r.mockUserToken,f=It.MOCK_USER;else{h=aA(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new H(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new It(m)}t._authCredentials=new LC(new $_(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new yo(this.firestore,e,this._query)}}class Qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ns(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Qe(this.firestore,e,this._key)}toJSON(){return{type:Qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(nl(n,Qe._jsonSchema))return new Qe(e,r||null,new ee(Ie.fromString(n.referencePath)))}}Qe._jsonSchemaVersion="firestore/documentReference/1.0",Qe._jsonSchema={type:rt("string",Qe._jsonSchemaVersion),referencePath:rt("string")};class ns extends yo{constructor(e,n,r){super(e,n,Fp(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Qe(this.firestore,null,new ee(e))}withConverter(e){return new ns(this.firestore,e,this._path)}}function We(t,e,...n){if(t=wt(t),z_("collection","path",e),t instanceof vd){const r=Ie.fromString(e,...n);return gv(r),new ns(t,null,r)}{if(!(t instanceof Qe||t instanceof ns))throw new H(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return gv(r),new ns(t.firestore,null,r)}}function ie(t,e,...n){if(t=wt(t),arguments.length===1&&(e=Rp.newId()),z_("doc","path",e),t instanceof vd){const r=Ie.fromString(e,...n);return pv(r),new Qe(t,null,new ee(r))}{if(!(t instanceof Qe||t instanceof ns))throw new H(V.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Ie.fromString(e,...n));return pv(r),new Qe(t.firestore,t instanceof ns?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sx="AsyncQueue";class ix{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new O2(this,"async_queue_retry"),this._c=()=>{const r=Mh();r&&q(sx,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Mh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Mh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new rr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!po(e))throw e;q(sx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,dr("INTERNAL UNHANDLED ERROR: ",ox(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const s=Zp.createAndSchedule(this,e,n,r,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ne(47125,{Pc:ox(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function ox(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class ni extends vd{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new ix,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new ix(e),this._firestoreClient=void 0,await e}}}function MP(t,e){const n=typeof t=="object"?t:k_(),r=typeof t=="string"?t:e||ru,s=kp(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=iA("firestore");i&&DP(s,...i)}return s}function xd(t){if(t._terminated)throw new H(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||LP(t),t._firestoreClient}function LP(t){var r,s,i,o;const e=t._freezeSettings(),n=RP(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new TP(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(c){const d=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hn(_t.fromBase64String(e))}catch(n){throw new H(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new hn(_t.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:hn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(nl(e,hn._jsonSchema))return hn.fromBase64String(e.bytes)}}hn._jsonSchemaVersion="firestore/bytes/1.0",hn._jsonSchema={type:rt("string",hn._jsonSchemaVersion),bytes:rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wd{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new H(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new yt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new H(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new H(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return pe(this._lat,e._lat)||pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Hn._jsonSchemaVersion}}static fromJSON(e){if(nl(e,Hn._jsonSchema))return new Hn(e.latitude,e.longitude)}}Hn._jsonSchemaVersion="firestore/geoPoint/1.0",Hn._jsonSchema={type:rt("string",Hn._jsonSchemaVersion),latitude:rt("number"),longitude:rt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class In{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:In._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(nl(e,In._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new In(e.vectorValues);throw new H(V.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}In._jsonSchemaVersion="firestore/vectorValue/1.0",In._jsonSchema={type:rt("string",In._jsonSchemaVersion),vectorValues:rt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OP=/^__.*__$/;class VP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ws(e,this.data,this.fieldMask,n,this.fieldTransforms):new sl(e,this.data,n,this.fieldTransforms)}}class ab{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ws(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lb(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ne(40011,{dataSource:t})}}class sg{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new sg({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var s;const n=(s=this.path)==null?void 0:s.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return du(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(lb(this.dataSource)&&OP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class FP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||pd(e)}createContext(e,n,r,s=!1){return new sg({dataSource:e,methodName:n,targetDoc:r,path:yt.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function cl(t){const e=t._freezeSettings(),n=pd(t._databaseId);return new FP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function ig(t,e,n,r,s,i={}){const o=t.createContext(i.merge||i.mergeFields?2:0,e,n,s);lg("Data must be an object, but it was:",o,r);const u=db(r,o);let c,d;if(i.merge)c=new en(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=no(e,f,n);if(!o.contains(m))throw new H(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);mb(h,m)||h.push(m)}c=new en(h),d=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,d=o.fieldTransforms;return new VP(new Wt(u),c,d)}class _d extends ll{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _d}}class og extends ll{_toFieldTransform(e){return new x2(e.path,new Wa)}isEqual(e){return e instanceof og}}class ag extends ll{constructor(e,n){super(e),this.Vc=n}_toFieldTransform(e){const n=new Ga(e.serializer,m2(e.serializer,this.Vc));return new x2(e.path,n)}isEqual(e){return e instanceof ag&&this.Vc===e.Vc}}function cb(t,e,n,r){const s=t.createContext(1,e,n);lg("Data must be an object, but it was:",s,r);const i=[],o=Wt.empty();xs(r,(c,d)=>{const h=fb(e,c,n);d=wt(d);const f=s.childContextForFieldPath(h);if(d instanceof _d)i.push(h);else{const m=ul(d,f);m!=null&&(i.push(h),o.set(h,m))}});const u=new en(i);return new ab(o,u,s.fieldTransforms)}function ub(t,e,n,r,s,i){const o=t.createContext(1,e,n),u=[no(e,r,n)],c=[s];if(i.length%2!=0)throw new H(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)u.push(no(e,i[m])),c.push(i[m+1]);const d=[],h=Wt.empty();for(let m=u.length-1;m>=0;--m)if(!mb(d,u[m])){const v=u[m];let y=c[m];y=wt(y);const w=o.childContextForFieldPath(v);if(y instanceof _d)d.push(v);else{const A=ul(y,w);A!=null&&(d.push(v),h.set(v,A))}}const f=new en(d);return new ab(h,f,o.fieldTransforms)}function UP(t,e,n,r=!1){return ul(n,t.createContext(r?4:3,e))}function ul(t,e){if(hb(t=wt(t)))return lg("Unsupported field value:",e,t),db(t,e);if(t instanceof ll)return function(r,s){if(!lb(s.dataSource))throw s.createError(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=ul(u,s.childContextForArray(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=wt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return m2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ke.fromDate(r);return{timestampValue:au(s.serializer,i)}}if(r instanceof ke){const i=new ke(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:au(s.serializer,i)}}if(r instanceof Hn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hn)return{bytesValue:S2(s.serializer,r._byteString)};if(r instanceof Qe){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof In)return function(o,u){const c=o instanceof In?o.toArray():o;return{mapValue:{fields:{[J_]:{stringValue:Z_},[su]:{arrayValue:{values:c.map(h=>{if(typeof h!="number")throw u.createError("VectorValues must only contain numeric values.");return Up(u.serializer,h)})}}}}}}(r,s);if(P2(r))return r._toProto(s.serializer);throw s.createError(`Unsupported field value: ${od(r)}`)}(t,e)}function db(t,e){const n={};return H_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):xs(t,(r,s)=>{const i=ul(s,e.childContextForField(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function hb(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ke||t instanceof Hn||t instanceof hn||t instanceof Qe||t instanceof ll||t instanceof In||P2(t))}function lg(t,e,n){if(!hb(n)||!B_(n)){const r=od(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function no(t,e,n){if((e=wt(e))instanceof wd)return e._internalPath;if(typeof e=="string")return fb(t,e);throw du("Field path arguments must be of type string or ",t,!1,void 0,n)}const $P=new RegExp("[~\\*/\\[\\]]");function fb(t,e,n){if(e.search($P)>=0)throw du(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new wd(...e.split("."))._internalPath}catch{throw du(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function du(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new H(V.INVALID_ARGUMENT,u+t+c)}function mb(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{convertValue(e,n="none"){switch(us(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ge(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ne(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return xs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var r,s,i;const n=(i=(s=(r=e.fields)==null?void 0:r[su].arrayValue)==null?void 0:s.values)==null?void 0:i.map(o=>Ge(o.doubleValue));return new In(n)}convertGeoPoint(e){return new Hn(Ge(e.latitude),Ge(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cd(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp($a(e));default:return null}}convertTimestamp(e){const n=ls(e);return new ke(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Ie.fromString(e);we(k2(r),9688,{name:e});const s=new za(r.get(1),r.get(3)),i=new ee(r.popFirst(5));return s.isEqual(n)||dr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pb extends zP{constructor(e){super(),this.firestore=e}convertBytes(e){return new hn(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Qe(this.firestore,null,n)}}function re(){return new og("serverTimestamp")}function Vt(t){return new ag("increment",t)}const ax="@firebase/firestore",lx="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gb{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new BP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(no("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class BP extends gb{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WP(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new H(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class cg{}class HP extends cg{}function Lt(t,e,...n){let r=[];e instanceof cg&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof ug).length,u=i.filter(c=>c instanceof bd).length;if(o>1||o>0&&u>0)throw new H(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class bd extends HP{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new bd(e,n,r)}_apply(e){const n=this._parse(e);return yb(e._query,n),new yo(e.firestore,e.converter,tm(e._query,n))}_parse(e){const n=cl(e.firestore);return function(i,o,u,c,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new H(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){ux(f,h);const y=[];for(const w of f)y.push(cx(c,i,w));m={arrayValue:{values:y}}}else m=cx(c,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||ux(f,h),m=UP(u,o,f,h==="in"||h==="not-in");return nt.create(d,h,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Ot(t,e,n){const r=e,s=no("where",t);return bd._create(s,r,n)}class ug extends cg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new ug(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:kn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)yb(o,c),o=tm(o,c)}(e._query,n),new yo(e.firestore,e.converter,tm(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function cx(t,e,n){if(typeof(n=wt(n))=="string"){if(n==="")throw new H(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!a2(e)&&n.indexOf("/")!==-1)throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Ie.fromString(n));if(!ee.isDocumentKey(r))throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Nv(t,new ee(r))}if(n instanceof Qe)return Nv(t,n._key);throw new H(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${od(n)}.`)}function ux(t,e){if(!Array.isArray(t)||t.length===0)throw new H(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function yb(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new H(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function dg(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Zo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Os extends gb{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new hc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(no("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new H(V.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=Os._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}Os._jsonSchemaVersion="firestore/documentSnapshot/1.0",Os._jsonSchema={type:rt("string",Os._jsonSchemaVersion),bundleSource:rt("string","DocumentSnapshot"),bundleName:rt("string"),bundle:rt("string")};class hc extends Os{data(e={}){return super.data(e)}}class Li{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Zo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new hc(this._firestore,this._userDataWriter,r.key,r,new Zo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new H(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new hc(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Zo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new hc(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Zo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),h=o.indexOf(u.doc.key)),{type:qP(u.type),doc:c,oldIndex:d,newIndex:h}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new H(V.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Li._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Rp.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(n.push(i._document),r.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function qP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ne(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Li._jsonSchemaVersion="firestore/querySnapshot/1.0",Li._jsonSchema={type:rt("string",Li._jsonSchemaVersion),bundleSource:rt("string","QuerySnapshot"),bundleName:rt("string"),bundle:rt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=cl(e)}set(e,n,r){this._verifyNotCommitted();const s=Oh(e,this._firestore),i=dg(s.converter,n,r),o=ig(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,r);return this._mutations.push(o.toMutation(s._key,Qt.none())),this}update(e,n,r,...s){this._verifyNotCommitted();const i=Oh(e,this._firestore);let o;return o=typeof(n=wt(n))=="string"||n instanceof wd?ub(this._dataReader,"WriteBatch.update",i._key,n,r,s):cb(this._dataReader,"WriteBatch.update",i._key,n),this._mutations.push(o.toMutation(i._key,Qt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Oh(e,this._firestore);return this._mutations=this._mutations.concat(new $p(n._key,Qt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new H(V.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Oh(t,e){if((t=wt(t)).firestore!==e)throw new H(V.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function be(t){t=jn(t,Qe);const e=jn(t.firestore,ni),n=xd(e);return CP(n,t._key).then(r=>KP(e,t,r))}function ht(t){t=jn(t,yo);const e=jn(t.firestore,ni),n=xd(e),r=new pb(e);return WP(t._query),jP(n,t._query).then(s=>new Li(e,r,t,s))}function sr(t,e,n){t=jn(t,Qe);const r=jn(t.firestore,ni),s=dg(t.converter,e,n),i=cl(r);return Ed(r,[ig(i,"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Qt.none())])}function Be(t,e,n,...r){t=jn(t,Qe);const s=jn(t.firestore,ni),i=cl(s);let o;return o=typeof(e=wt(e))=="string"||e instanceof wd?ub(i,"updateDoc",t._key,e,n,r):cb(i,"updateDoc",t._key,e),Ed(s,[o.toMutation(t._key,Qt.exists(!0))])}function Pr(t,e){const n=jn(t.firestore,ni),r=ie(t),s=dg(t.converter,e),i=cl(t.firestore);return Ed(n,[ig(i,"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then(()=>r)}function Ed(t,e){const n=xd(t);return kP(n,e)}function KP(t,e,n){const r=n.docs.get(e._key),s=new pb(t);return new Os(t,s,e._key,r,new Zo(n.hasPendingWrites,n.fromCache),e.converter)}function QP(t){return t=jn(t,ni),xd(t),new GP(t,e=>Ed(t,e))}(function(e,n=!0){DC(ho),Qi(new Gs("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new ni(new OC(r.getProvider("auth-internal")),new UC(o,r.getProvider("app-check-internal")),rj(o,s),o);return i={useFetchStreams:n,...i},u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),es(ax,lx,e),es(ax,lx,"esm2020")})();var YP="firebase",JP="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */es(YP,JP,"app");function vb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const XP=vb,xb=new el("auth","Firebase",vb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hu=new Cp("@firebase/auth");function ZP(t,...e){hu.logLevel<=me.WARN&&hu.warn(`Auth (${ho}): ${t}`,...e)}function fc(t,...e){hu.logLevel<=me.ERROR&&hu.error(`Auth (${ho}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fr(t,...e){throw hg(t,...e)}function qn(t,...e){return hg(t,...e)}function wb(t,e,n){const r={...XP(),[e]:n};return new el("auth","Firebase",r).create(e,{appName:t.name})}function Vs(t){return wb(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function hg(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return xb.create(t,...e)}function se(t,e,...n){if(!t)throw hg(e,...n)}function er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw fc(e),new Error(e)}function mr(t,e){t||er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function eR(){return dx()==="http:"||dx()==="https:"}function dx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eR()||fA()||"connection"in navigator)?navigator.onLine:!0}function nR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n){this.shortDelay=e,this.longDelay=n,mr(n>e,"Short delay should be less than long delay!"),this.isMobile=uA()||mA()}get(){return tR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fg(t,e){mr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],iR=new dl(3e4,6e4);function mg(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function vo(t,e,n,r,s={}){return bb(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=tl({key:t.config.apiKey,...o}).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:c,...i};return hA()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&uo(t.emulatorConfig.host)&&(d.credentials="include"),_b.fetch()(await Eb(t,t.config.apiHost,n,u),d)})}async function bb(t,e,n){t._canInitEmulator=!1;const r={...rR,...e};try{const s=new aR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Kl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Kl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Kl(t,"user-disabled",o);const h=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw wb(t,h,d);fr(t,h)}}catch(s){if(s instanceof vr)throw s;fr(t,"network-request-failed",{message:String(s)})}}async function oR(t,e,n,r,s={}){const i=await vo(t,e,n,r,s);return"mfaPendingCredential"in i&&fr(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function Eb(t,e,n,r){const s=`${e}${n}?${r}`,i=t,o=i.config.emulator?fg(t.config,s):`${t.config.apiScheme}://${s}`;return sR.includes(n)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(o).toString():o}class aR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(qn(this.auth,"network-request-failed")),iR.get())})}}function Kl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=qn(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lR(t,e){return vo(t,"POST","/v1/accounts:delete",e)}async function fu(t,e){return vo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ma(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function cR(t,e=!1){const n=wt(t),r=await n.getIdToken(e),s=pg(r);se(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ma(Vh(s.auth_time)),issuedAtTime:ma(Vh(s.iat)),expirationTime:ma(Vh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Vh(t){return Number(t)*1e3}function pg(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return fc("JWT malformed, contained fewer than 3 sections"),null;try{const s=b_(n);return s?JSON.parse(s):(fc("Failed to decode base64 JWT payload"),null)}catch(s){return fc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hx(t){const e=pg(t);return se(e,"internal-error"),se(typeof e.exp<"u","internal-error"),se(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ka(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof vr&&uR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function uR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ma(this.lastLoginAt),this.creationTime=ma(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mu(t){var f;const e=t.auth,n=await t.getIdToken(),r=await Ka(t,fu(e,{idToken:n}));se(r==null?void 0:r.users.length,e,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?Nb(s.providerUserInfo):[],o=fR(t.providerData,i),u=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(o!=null&&o.length),d=u?c:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new fm(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function hR(t){const e=wt(t);await mu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function fR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Nb(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mR(t,e){const n=await bb(t,{},async()=>{const r=tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=await Eb(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();u["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:u,body:r};return t.emulatorConfig&&uo(t.emulatorConfig.host)&&(c.credentials="include"),_b.fetch()(o,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pR(t,e){return vo(t,"POST","/v2/accounts:revokeToken",mg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){se(e.idToken,"internal-error"),se(typeof e.idToken<"u","internal-error"),se(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){se(e.length!==0,"internal-error");const n=hx(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(se(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await mR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Oi;return r&&(se(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(se(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(se(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Oi,this.toJSON())}_performRefresh(){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t,e){se(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Nn{constructor({uid:e,auth:n,stsTokenManager:r,...s}){this.providerId="firebase",this.proactiveRefresh=new dR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new fm(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await Ka(this,this.stsTokenManager.getToken(this.auth,e));return se(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return cR(this,e)}reload(){return hR(this)}_assign(e){this!==e&&(se(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Nn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){se(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await mu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Fn(this.auth.app))return Promise.reject(Vs(this.auth));const e=await this.getIdToken();return await Ka(this,lR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,s=n.email??void 0,i=n.phoneNumber??void 0,o=n.photoURL??void 0,u=n.tenantId??void 0,c=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:v,providerData:y,stsTokenManager:w}=n;se(f&&w,e,"internal-error");const A=Oi.fromJSON(this.name,w);se(typeof f=="string",e,"internal-error"),Tr(r,e.name),Tr(s,e.name),se(typeof m=="boolean",e,"internal-error"),se(typeof v=="boolean",e,"internal-error"),Tr(i,e.name),Tr(o,e.name),Tr(u,e.name),Tr(c,e.name),Tr(d,e.name),Tr(h,e.name);const _=new Nn({uid:f,auth:e,email:s,emailVerified:m,displayName:r,isAnonymous:v,photoURL:o,phoneNumber:i,tenantId:u,stsTokenManager:A,createdAt:d,lastLoginAt:h});return y&&Array.isArray(y)&&(_.providerData=y.map(b=>({...b}))),c&&(_._redirectEventId=c),_}static async _fromIdTokenResponse(e,n,r=!1){const s=new Oi;s.updateFromServerResponse(n);const i=new Nn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await mu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];se(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Nb(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new Oi;u.updateFromIdToken(r);const c=new Nn({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new fm(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new Map;function tr(t){mr(t instanceof Function,"Expected a class definition");let e=fx.get(t);return e?(mr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fx.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Sb.type="NONE";const mx=Sb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mc(t,e,n){return`firebase:${t}:${e}:${n}`}class Vi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=mc(this.userKey,s.apiKey,i),this.fullPersistenceKey=mc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await fu(this.auth,{idToken:e}).catch(()=>{});return n?Nn._fromGetAccountInfoResponse(this.auth,n,e):null}return Nn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Vi(tr(mx),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||tr(mx);const o=mc(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const h=await d._get(o);if(h){let f;if(typeof h=="string"){const m=await fu(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Nn._fromGetAccountInfoResponse(e,m,h)}else f=Nn._fromJSON(e,h);d!==i&&(u=f),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new Vi(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Vi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Cb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Tb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(kb(e))return"Blackberry";if(Pb(e))return"Webos";if(Ib(e))return"Safari";if((e.includes("chrome/")||Ab(e))&&!e.includes("edge/"))return"Chrome";if(jb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Tb(t=kt()){return/firefox\//i.test(t)}function Ib(t=kt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ab(t=kt()){return/crios\//i.test(t)}function Cb(t=kt()){return/iemobile/i.test(t)}function jb(t=kt()){return/android/i.test(t)}function kb(t=kt()){return/blackberry/i.test(t)}function Pb(t=kt()){return/webos/i.test(t)}function gg(t=kt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function gR(t=kt()){var e;return gg(t)&&!!((e=window.navigator)!=null&&e.standalone)}function yR(){return pA()&&document.documentMode===10}function Rb(t=kt()){return gg(t)||jb(t)||Pb(t)||kb(t)||/windows phone/i.test(t)||Cb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t,e=[]){let n;switch(t){case"Browser":n=px(kt());break;case"Worker":n=`${px(kt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ho}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xR(t,e={}){return vo(t,"GET","/v2/passwordPolicy",mg(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=6;class _R{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??wR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gx(this),this.idTokenSubscription=new gx(this),this.beforeStateQueue=new vR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xb,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=tr(n)),this._initializationPromise=this.queue(async()=>{var r,s,i;if(!this._deleted&&(this.persistenceManager=await Vi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await fu(this,{idToken:e}),r=await Nn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if(Fn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(i=this.redirectUser)==null?void 0:i._redirectEventId,u=r==null?void 0:r._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return se(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await mu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=nR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Fn(this.app))return Promise.reject(Vs(this));const n=e?wt(e):null;return n&&se(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&se(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Fn(this.app)?Promise.reject(Vs(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Fn(this.app)?Promise.reject(Vs(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xR(this),n=new _R(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new el("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&tr(e)||this._popupRedirectResolver;se(n,this,"argument-error"),this.redirectPersistenceManager=await Vi.create(this,[tr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(se(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return se(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Db(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(Fn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&ZP(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function yg(t){return wt(t)}class gx{constructor(e){this.auth=e,this.observer=null,this.addObserver=EA(n=>this.observer=n)}get next(){return se(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ER(t){vg=t}function NR(t){return vg.loadJS(t)}function SR(){return vg.gapiScript}function TR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IR(t,e){const n=kp(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(qs(i,e??{}))return s;fr(s,"already-initialized")}return n.initialize({options:e})}function AR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function CR(t,e,n){const r=yg(t);se(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!!(n!=null&&n.disableWarnings),i=Mb(e),{host:o,port:u}=jR(e),c=u===null?"":`:${u}`,d={url:`${i}//${o}${c}/`},h=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){se(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),se(qs(d,r.config.emulator)&&qs(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,uo(o)?(T_(`${i}//${o}${c}`),I_("Auth",!0)):s||kR()}function Mb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jR(t){const e=Mb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:yx(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:yx(o)}}}function yx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function kR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return er("not implemented")}_getIdTokenResponse(e){return er("not implemented")}_linkToIdToken(e,n){return er("not implemented")}_getReauthenticationResolver(e){return er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fi(t,e){return oR(t,"POST","/v1/accounts:signInWithIdp",mg(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="http://localhost";class Ys extends Lb{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ys(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):fr("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s,...i}=n;if(!r||!s)return null;const o=new Ys(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Fi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Fi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Fi(e,n)}buildRequest(){const e={requestUri:PR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=tl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ob{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl extends Ob{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends hl{constructor(){super("facebook.com")}static credential(e){return Ys._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Rr.credential(e.oauthAccessToken)}catch{return null}}}Rr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Rr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr extends hl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ys._fromParams({providerId:Dr.PROVIDER_ID,signInMethod:Dr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Dr.credentialFromTaggedObject(e)}static credentialFromError(e){return Dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Dr.credential(n,r)}catch{return null}}}Dr.GOOGLE_SIGN_IN_METHOD="google.com";Dr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mr extends hl{constructor(){super("github.com")}static credential(e){return Ys._fromParams({providerId:Mr.PROVIDER_ID,signInMethod:Mr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mr.credentialFromTaggedObject(e)}static credentialFromError(e){return Mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mr.credential(e.oauthAccessToken)}catch{return null}}}Mr.GITHUB_SIGN_IN_METHOD="github.com";Mr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr extends hl{constructor(){super("twitter.com")}static credential(e,n){return Ys._fromParams({providerId:Lr.PROVIDER_ID,signInMethod:Lr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Lr.credentialFromTaggedObject(e)}static credentialFromError(e){return Lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Lr.credential(n,r)}catch{return null}}}Lr.TWITTER_SIGN_IN_METHOD="twitter.com";Lr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Nn._fromIdTokenResponse(e,r,s),o=vx(r);return new ro({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=vx(r);return new ro({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function vx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu extends vr{constructor(e,n,r,s){super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,pu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new pu(e,n,r,s)}}function Vb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?pu._fromErrorAndOperation(t,i,e,r):i})}async function RR(t,e,n=!1){const r=await Ka(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return ro._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DR(t,e,n=!1){const{auth:r}=t;if(Fn(r.app))return Promise.reject(Vs(r));const s="reauthenticate";try{const i=await Ka(t,Vb(r,s,e,t),n);se(i.idToken,r,"internal-error");const o=pg(i.idToken);se(o,r,"internal-error");const{sub:u}=o;return se(t.uid===u,r,"user-mismatch"),ro._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&fr(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e,n=!1){if(Fn(t.app))return Promise.reject(Vs(t));const r="signIn",s=await Vb(t,r,e),i=await ro._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}function LR(t,e,n,r){return wt(t).onIdTokenChanged(e,n,r)}function OR(t,e,n){return wt(t).beforeAuthStateChanged(e,n)}const gu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fb{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(gu,"1"),this.storage.removeItem(gu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=1e3,FR=10;class Ub extends Fb{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Rb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);yR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FR):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},VR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ub.type="LOCAL";const UR=Ub;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $b extends Fb{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}$b.type="SESSION";const zb=$b;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $R(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Nd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async d=>d(n.origin,i)),c=await $R(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Nd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const d=xg("",20);s.port1.start();const h=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(m.data.response);break;default:clearTimeout(h),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(){return window}function BR(t){Gn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bb(){return typeof Gn().WorkerGlobalScope<"u"&&typeof Gn().importScripts=="function"}async function WR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function HR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function qR(){return Bb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="firebaseLocalStorageDb",GR=1,yu="firebaseLocalStorage",Hb="fbase_key";class fl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Sd(t,e){return t.transaction([yu],e?"readwrite":"readonly").objectStore(yu)}function KR(){const t=indexedDB.deleteDatabase(Wb);return new fl(t).toPromise()}function mm(){const t=indexedDB.open(Wb,GR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(yu,{keyPath:Hb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(yu)?e(r):(r.close(),await KR(),e(await mm()))})})}async function xx(t,e,n){const r=Sd(t,!0).put({[Hb]:e,value:n});return new fl(r).toPromise()}async function QR(t,e){const n=Sd(t,!1).get(e),r=await new fl(n).toPromise();return r===void 0?null:r.value}function wx(t,e){const n=Sd(t,!0).delete(e);return new fl(n).toPromise()}const YR=800,JR=3;class qb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await mm(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>JR)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Bb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Nd._getInstance(qR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await WR(),!this.activeServiceWorker)return;this.sender=new zR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||HR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await mm();return await xx(e,gu,"1"),await wx(e,gu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>xx(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>QR(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wx(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Sd(s,!1).getAll();return new fl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),YR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}qb.type="LOCAL";const XR=qb;new dl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZR(t,e){return e?tr(e):(se(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg extends Lb{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Fi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Fi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Fi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function e3(t){return MR(t.auth,new wg(t),t.bypassAuthState)}function t3(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),DR(n,new wg(t),t.bypassAuthState)}async function n3(t){const{auth:e,user:n}=t;return se(n,e,"internal-error"),RR(n,new wg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return e3;case"linkViaPopup":case"linkViaRedirect":return n3;case"reauthViaPopup":case"reauthViaRedirect":return t3;default:fr(this.auth,"internal-error")}}resolve(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3=new dl(2e3,1e4);class Ni extends Gb{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Ni.currentPopupAction&&Ni.currentPopupAction.cancel(),Ni.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return se(e,this.auth,"internal-error"),e}async onExecution(){mr(this.filter.length===1,"Popup operations only handle one event");const e=xg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(qn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(qn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ni.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(qn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,r3.get())};e()}}Ni.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s3="pendingRedirect",pc=new Map;class i3 extends Gb{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=pc.get(this.auth._key());if(!e){try{const r=await o3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}pc.set(this.auth._key(),e)}return this.bypassAuthState||pc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function o3(t,e){const n=c3(e),r=l3(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function a3(t,e){pc.set(t._key(),e)}function l3(t){return tr(t._redirectPersistence)}function c3(t){return mc(s3,t.config.apiKey,t.name)}async function u3(t,e,n=!1){if(Fn(t.app))return Promise.reject(Vs(t));const r=yg(t),s=ZR(r,e),o=await new i3(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d3=10*60*1e3;class h3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!f3(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Kb(e)){const s=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(qn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=d3&&this.cachedEventUids.clear(),this.cachedEventUids.has(_x(e))}saveEventToCache(e){this.cachedEventUids.add(_x(e)),this.lastProcessedEventTime=Date.now()}}function _x(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Kb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function f3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Kb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m3(t,e={}){return vo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,g3=/^https?/;async function y3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await m3(t);for(const n of e)try{if(v3(n))return}catch{}fr(t,"unauthorized-domain")}function v3(t){const e=hm(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!g3.test(n))return!1;if(p3.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x3=new dl(3e4,6e4);function bx(){const t=Gn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function w3(t){return new Promise((e,n)=>{var s,i,o;function r(){bx(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{bx(),n(qn(t,"network-request-failed"))},timeout:x3.get()})}if((i=(s=Gn().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((o=Gn().gapi)!=null&&o.load)r();else{const u=TR("iframefcb");return Gn()[u]=()=>{gapi.load?r():n(qn(t,"network-request-failed"))},NR(`${SR()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw gc=null,e})}let gc=null;function _3(t){return gc=gc||w3(t),gc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=new dl(5e3,15e3),E3="__/auth/iframe",N3="emulator/auth/iframe",S3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},T3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function I3(t){const e=t.config;se(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?fg(e,N3):`https://${t.config.authDomain}/${E3}`,r={apiKey:e.apiKey,appName:t.name,v:ho},s=T3.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${tl(r).slice(1)}`}async function A3(t){const e=await _3(t),n=Gn().gapi;return se(n,t,"internal-error"),e.open({where:document.body,url:I3(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:S3,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=qn(t,"network-request-failed"),u=Gn().setTimeout(()=>{i(o)},b3.get());function c(){Gn().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},j3=500,k3=600,P3="_blank",R3="http://localhost";class Ex{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function D3(t,e,n,r=j3,s=k3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c={...C3,width:r.toString(),height:s.toString(),top:i,left:o},d=kt().toLowerCase();n&&(u=Ab(d)?P3:n),Tb(d)&&(e=e||R3,c.scrollbars="yes");const h=Object.entries(c).reduce((m,[v,y])=>`${m}${v}=${y},`,"");if(gR(d)&&u!=="_self")return M3(e||"",u),new Ex(null);const f=window.open(e||"",u,h);se(f,t,"popup-blocked");try{f.focus()}catch{}return new Ex(f)}function M3(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L3="__/auth/handler",O3="emulator/auth/handler",V3=encodeURIComponent("fac");async function Nx(t,e,n,r,s,i){se(t.config.authDomain,t,"auth-domain-config-required"),se(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ho,eventId:s};if(e instanceof Ob){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(i||{}))o[h]=f}if(e instanceof hl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const h of Object.keys(u))u[h]===void 0&&delete u[h];const c=await t._getAppCheckToken(),d=c?`#${V3}=${encodeURIComponent(c)}`:"";return`${F3(t)}?${tl(u).slice(1)}${d}`}function F3({config:t}){return t.emulator?fg(t,O3):`https://${t.authDomain}/${L3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fh="webStorageSupport";class U3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zb,this._completeRedirectFn=u3,this._overrideRedirectResult=a3}async _openPopup(e,n,r,s){var o;mr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Nx(e,n,r,hm(),s);return D3(e,i,xg())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Nx(e,n,r,hm(),s);return BR(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(mr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await A3(e),r=new h3(e);return n.register("authEvent",s=>(se(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Fh,{type:Fh},s=>{var o;const i=(o=s==null?void 0:s[0])==null?void 0:o[Fh];i!==void 0&&n(!!i),fr(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=y3(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Rb()||Ib()||gg()}}const $3=U3;var Sx="@firebase/auth",Tx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){se(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function W3(t){Qi(new Gs("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;se(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Db(t)},d=new bR(r,s,i,c);return AR(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Qi(new Gs("auth-internal",e=>{const n=yg(e.getProvider("auth").getImmediate());return(r=>new z3(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),es(Sx,Tx,B3(t)),es(Sx,Tx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H3=5*60,q3=S_("authIdTokenMaxAge")||H3;let Ix=null;const G3=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>q3)return;const s=n==null?void 0:n.token;Ix!==s&&(Ix=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function K3(t=k_()){const e=kp(t,"auth");if(e.isInitialized())return e.getImmediate();const n=IR(t,{popupRedirectResolver:$3,persistence:[XR,UR,zb]}),r=S_("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=G3(i.toString());OR(n,o,()=>o(n.currentUser)),LR(n,u=>o(u))}}const s=E_("auth");return s&&CR(n,`http://${s}`),n}function Q3(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}ER({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=qn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Q3().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});W3("Browser");const Y3={apiKey:"AIzaSyBQ5JeGI0vdJvICTLhyraRsa9x19sF-CWM",authDomain:"hackchackpack.firebaseapp.com",projectId:"hackchackpack",storageBucket:"hackchackpack.firebasestorage.app",messagingSenderId:"1074792242415",appId:"1:1074792242415:web:5ab3a24d2ea75ba55e4f1a"},Qb=j_(Y3),K=MP(Qb);K3(Qb);const J3=t=>btoa(t),X3=(t,e)=>btoa(t)===e,Ax=()=>"token_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),_g={login:async(t,e,n="phone")=>{try{const r=We(K,"users");let s;if(n==="nid"){const d=Lt(r,Ot("nid","==",t));s=await ht(d)}else if(n==="passport"){const d=Lt(r,Ot("passport","==",t));s=await ht(d)}else{const d=Lt(r,Ot("phone","==",t));s=await ht(d)}if(s.empty)throw new Error("Invalid credentials");const i=s.docs[0],o=i.data();if(!X3(e,o.password))throw new Error("Invalid credentials");const u=o.isActive!==void 0?o.isActive:o.role==="admin";if(!u&&o.role!=="admin")throw new Error("Your account is not active. Please contact an administrator.");return await Be(ie(K,"users",i.id),{lastLogin:re()}),{success:!0,data:{token:Ax(),user:{id:i.id,phone:o.phone,name:o.name,role:o.role||"consumer",isActive:u}}}}catch(r){throw new Error(r.message||"Login failed")}},register:async(t,e,n,r,s=null,i=null)=>{try{const o=We(K,"users"),u=Lt(o,Ot("phone","==",e));if(!(await ht(u)).empty)throw new Error("Phone number already registered");if(r){const _=Lt(o,Ot("nid","==",r));if(!(await ht(_)).empty)throw new Error("NID already registered")}if(s){const _=Lt(o,Ot("passport","==",s));if(!(await ht(_)).empty)throw new Error("Passport already registered")}let h=(()=>{const _="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let b="";for(let S=0;S<8;S++)b+=_.charAt(Math.floor(Math.random()*_.length));return b})(),f=null;if(i){const _=Lt(o,Ot("referralCode","==",i)),b=await ht(_);if(!b.empty)f=b.docs[0].id;else{const S=await be(ie(K,"users",i));S.exists()&&(f=S.id)}}const m=J3(n),v=ie(We(K,"users"));await sr(v,{name:t,phone:e,password:m,nid:r||null,passport:s||null,role:"consumer",isActive:!1,referralCode:h,referredBy:f||null,totalReferrals:0,createdAt:re(),lastLogin:null});let y=200;try{const _=await be(ie(K,"settings","app"));_.exists()&&(y=_.data().referralBonus||200)}catch(_){console.error("Failed to fetch referral bonus from settings, using default:",_)}const w=f?y:0;if(await sr(ie(K,"wallets",v.id),{userId:v.id,rechargeWallet:0,balanceWallet:w,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()}),f){const _=ie(K,"users",f);if((await be(_)).exists()){await Be(_,{totalReferrals:Vt(1),updatedAt:re()});const S=ie(K,"wallets",f);(await be(S)).exists()?await Be(S,{balanceWallet:Vt(y),totalEarnings:Vt(y),incomeToday:Vt(y),updatedAt:re()}):await sr(S,{userId:f,rechargeWallet:0,balanceWallet:y,totalEarnings:y,totalWithdrawals:0,incomeToday:y,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()}),await Pr(We(K,"transactions"),{userId:f,type:"referral_bonus",amount:y,status:"completed",description:`Referral bonus for ${t} (${e})`,referredUserId:v.id,transactionId:"REF_"+Date.now()+"_"+f,createdAt:re()})}}return{success:!0,data:{token:Ax(),user:{id:v.id,phone:e,name:t,role:"consumer",isActive:!1},referralBonus:w>0?w:0}}}catch(o){throw new Error(o.message||"Registration failed")}},logout:async()=>(localStorage.removeItem("token"),localStorage.removeItem("user"),{success:!0})},Yb={getUserProfile:async t=>{try{const e=localStorage.getItem("user");if(!e)throw new Error("User not found");const n=JSON.parse(e),r=await be(ie(K,"users",n.id));if(!r.exists())throw new Error("User not found");const s=r.data();return{success:!0,data:{id:r.id,phone:s.phone,name:s.name,role:s.role||"user",isActive:s.isActive!==void 0?s.isActive:!1}}}catch(e){throw new Error(e.message||"Failed to fetch profile")}},updateProfile:async(t,e)=>{try{const n=localStorage.getItem("user");if(!n)throw new Error("User not found");const r=JSON.parse(n),s=ie(K,"users",r.id);await Be(s,{...e,updatedAt:re()});const i=await be(s);return{success:!0,data:{id:i.id,...i.data()}}}catch(n){throw new Error(n.message||"Failed to update profile")}}},bg={getWallet:async t=>{try{const e=localStorage.getItem("user");if(!e)throw new Error("User not found");const n=JSON.parse(e),r=await be(ie(K,"wallets",n.id));if(!r.exists())return await sr(ie(K,"wallets",n.id),{userId:n.id,rechargeWallet:0,balanceWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()}),{success:!0,data:{rechargeWallet:0,balanceWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0}};const s=r.data();console.log("Raw wallet data from Firebase:",s),console.log("User ID:",n.id);const i=s.rechargeWallet!=null?Number(s.rechargeWallet):0,o=s.balanceWallet!=null?Number(s.balanceWallet):0,u=s.totalEarnings!=null?Number(s.totalEarnings):0,c=s.totalWithdrawals!=null?Number(s.totalWithdrawals):0,d=s.incomeToday!=null?Number(s.incomeToday):0,h=s.incomeYesterday!=null?Number(s.incomeYesterday):0,f=s.lossToday!=null?Number(s.lossToday):0,m=s.lossTotal!=null?Number(s.lossTotal):0,v={success:!0,data:{rechargeWallet:isNaN(i)?0:i,balanceWallet:isNaN(o)?0:o,totalEarnings:isNaN(u)?0:u,totalWithdrawals:isNaN(c)?0:c,incomeToday:isNaN(d)?0:d,incomeYesterday:isNaN(h)?0:h,lossToday:isNaN(f)?0:f,lossTotal:isNaN(m)?0:m}};return console.log("Processed wallet response:",v),v}catch(e){throw new Error(e.message||"Failed to fetch wallet")}},recharge:async(t,e,n="")=>{try{const r=localStorage.getItem("user");if(!r)throw new Error("User not found");const s=JSON.parse(r),i=typeof e=="number"?e:parseFloat(e);if(isNaN(i)||i<=0)throw new Error("Invalid recharge amount");return{success:!0,data:{transactionId:(await Pr(We(K,"transactions"),{userId:s.id,type:"recharge",amount:i,status:"pending",proofImageUrl:n||"",transactionId:"TXN_"+Date.now(),createdAt:re(),updatedAt:re()})).id,status:"pending",message:"Recharge request submitted. Waiting for admin approval."}}}catch(r){throw new Error(r.message||"Recharge failed")}},withdraw:async(t,e,n=null,r=null,s=null,i=null)=>{try{const o=localStorage.getItem("user");if(!o)throw new Error("User not found");const u=JSON.parse(o),c=ie(K,"wallets",u.id),d=await be(c);if(!d.exists())throw new Error("Wallet not found");const h=d.data(),f=h.balanceWallet!=null?Number(h.balanceWallet):0,v=new Date().getDay();if(v!==0&&v!==6){const F=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];throw new Error(`Withdrawals are only available on Saturday and Sunday. Today is ${F[v]}.`)}const y=We(K,"userProducts"),w=Lt(y,Ot("userId","==",u.id));if((await ht(w)).empty)throw new Error("Account is locked. You must purchase at least one product before you can withdraw.");if(e>f)throw new Error(`Insufficient balance. Available balance: ${f.toFixed(2)}`);const _=s!==null?s:e*.1,b=i!==null?i:e-_,S=f-e;await Be(c,{balanceWallet:Vt(-e),totalWithdrawals:Vt(e),updatedAt:re()});const P={userId:u.id,type:"withdraw",amount:e,vatTax:_,netAmount:b,status:"pending",transactionId:"TXN_"+Date.now(),createdAt:re()};return n&&r&&(P.paymentMethod=n,P.paymentName=r.name,P.paymentNumber=r.number),{success:!0,data:{transactionId:(await Pr(We(K,"transactions"),P)).id,newBalance:S,status:"pending"}}}catch(o){throw new Error(o.message||"Withdrawal failed")}}},Z3={getTeam:async t=>{try{const e=localStorage.getItem("user");if(!e)throw new Error("User not found");const n=JSON.parse(e),r=await be(ie(K,"teams",n.id));if(r.exists())return{success:!0,data:r.data()};const s={userId:n.id,cumulativeRecharge:0,tiers:{B:{percentage:11,members:[]},C:{percentage:4,members:[]},D:{percentage:2,members:[]}},statistics:{todayNewMembers:0,yesterdayNewMembers:0,todayRechargeAmount:0,yesterdayRechargeAmount:0,currentMonthRechargeAmount:0,lastMonthRechargeAmount:0},validMembers:[],invalidMembers:[]};return await sr(ie(K,"teams",n.id),{...s,updatedAt:re()}),{success:!0,data:s}}catch(e){throw new Error(e.message||"Failed to fetch team data")}}},Kn={getProducts:async t=>{try{const e=We(K,"products"),n=await ht(e);if(n.empty){const s=[{name:"Product 1",price:100},{name:"Product 2",price:200}],i=[];for(const o of s){const u=await Pr(e,{...o,createdAt:re()});i.push({id:u.id,...o})}return{success:!0,data:{products:i}}}return{success:!0,data:{products:n.docs.map(s=>({id:s.id,...s.data()}))}}}catch(e){throw new Error(e.message||"Failed to fetch products")}},addProduct:async(t,e)=>{try{const n=We(K,"products"),r={name:e.name,price:e.price,description:e.description||"",imageUrl:e.imageUrl||"",validateDate:e.validateDate||null,earnAmount:e.earnAmount||0,totalEarning:e.totalEarning||0,createdAt:re(),updatedAt:re()};return{success:!0,data:{id:(await Pr(n,r)).id,...r}}}catch(n){throw new Error(n.message||"Failed to add product")}},updateProduct:async(t,e,n)=>{try{if(e&&e.startsWith("temp_"))throw new Error("Invalid product ID. Please refresh the page and try again.");const r=ie(K,"products",e);if(!(await be(r)).exists())throw new Error(`Product with ID "${e}" does not exist. Please refresh the page and try again.`);return await Be(r,{...n,updatedAt:re()}),{success:!0,data:{id:e,...n}}}catch(r){throw new Error(r.message||"Failed to update product")}},deleteProduct:async(t,e)=>{try{const n=ie(K,"products",e);return await Be(n,{deleted:!0,deletedAt:re()}),{success:!0}}catch(n){throw new Error(n.message||"Failed to delete product")}},purchaseProduct:async(t,e)=>{try{const n=localStorage.getItem("user");if(!n)throw new Error("User not found");const r=JSON.parse(n),s=await be(ie(K,"products",e));if(!s.exists())throw new Error("Product not found");const i=s.data();if(i.deleted)throw new Error("Product is no longer available");const o=await be(ie(K,"wallets",r.id));if(!o.exists())throw new Error("Wallet not found");if((o.data().rechargeWallet||0)<i.price)throw new Error("Insufficient balance in recharge wallet");const d=We(K,"userProducts"),h=Lt(d,Ot("userId","==",r.id)),m=(await ht(h)).empty;await Be(ie(K,"wallets",r.id),{rechargeWallet:Vt(-i.price),updatedAt:re()});let v=!1;if(m){const A=ie(K,"users",r.id),_=await be(A);if(_.exists()&&!_.data().isActive){await Be(A,{isActive:!0,activatedAt:re(),updatedAt:re()}),v=!0;const b={...r,isActive:!0};localStorage.setItem("user",JSON.stringify(b))}}let y=null;i.validateDate&&(y=i.validateDate);const w=await Pr(We(K,"userProducts"),{userId:r.id,productId:e,productName:i.name,productPrice:i.price,productDescription:i.description||"",imageUrl:i.imageUrl||"",purchaseDate:re(),status:"active",validateDate:y,earnAmount:i.earnAmount||0,lastEarnAttempt:null,totalEarnings:0,createdAt:re()});return await Pr(We(K,"transactions"),{userId:r.id,type:"purchase",amount:i.price,status:"completed",productId:e,purchaseId:w.id,transactionId:"TXN_"+Date.now(),createdAt:re()}),{success:!0,data:{purchaseId:w.id,product:{id:e,name:i.name,price:i.price},accountActivated:v}}}catch(n){throw new Error(n.message||"Failed to purchase product")}},getUserProducts:async t=>{try{const e=localStorage.getItem("user");if(!e)throw new Error("User not found");const n=JSON.parse(e),r=We(K,"userProducts"),s=Lt(r,Ot("userId","==",n.id)),o=(await ht(s)).docs.map(m=>({id:m.id,...m.data()})),u=o.filter(m=>!m.imageUrl&&m.productId).map(m=>m.productId),c={};if(u.length>0){const m=u.map(async v=>{try{const y=await be(ie(K,"products",v));if(y.exists()){const w=y.data();w.imageUrl&&(c[v]=w.imageUrl)}}catch(y){console.error(`Failed to fetch image for product ${v}:`,y)}});await Promise.all(m)}const d=new Date,h=[],f=[];return o.forEach(m=>{var y,w;!m.imageUrl&&m.productId&&c[m.productId]&&(m.imageUrl=c[m.productId],Be(ie(K,"userProducts",m.id),{imageUrl:c[m.productId],updatedAt:re()}).catch(A=>console.error("Failed to update product imageUrl:",A)));let v;if(m.validateDate)v=(y=m.validateDate)!=null&&y.toMillis?new Date(m.validateDate.toMillis()):new Date(m.validateDate);else{const A=(w=m.purchaseDate)!=null&&w.toMillis?new Date(m.purchaseDate.toMillis()):new Date(m.purchaseDate),_=m.validityDays||48;v=new Date(A),v.setDate(v.getDate()+_)}v>d&&m.status==="active"?h.push({...m,expiryDate:v,daysRemaining:Math.ceil((v-d)/(1e3*60*60*24))}):(v<=d&&m.status==="active"&&Be(ie(K,"userProducts",m.id),{status:"expired",updatedAt:re()}).catch(A=>console.error("Failed to update product status:",A)),f.push({...m,expiryDate:v}))}),{success:!0,data:{unexpired:h,expired:f}}}catch(e){throw new Error(e.message||"Failed to fetch user products")}},earnFromProduct:async(t,e)=>{var n,r,s;try{const i=localStorage.getItem("user");if(!i)throw new Error("User not found");const o=JSON.parse(i),u=Date.now(),c=ie(K,"userProducts",e),d=await be(c);if(!d.exists())throw new Error("Product not found");const h=d.data();let f;if(h.validateDate)f=(n=h.validateDate)!=null&&n.toMillis?new Date(h.validateDate.toMillis()):new Date(h.validateDate);else{const _=(r=h.purchaseDate)!=null&&r.toMillis?new Date(h.purchaseDate.toMillis()):new Date(h.purchaseDate),b=h.validityDays||48;f=new Date(_),f.setDate(f.getDate()+b)}if(f<=new Date)throw new Error("Product has expired");const m=h.earnAmount||0;if(m<=0)throw new Error("This product does not have an earn amount configured");const v=(s=h.lastEarnAttempt)!=null&&s.toMillis?h.lastEarnAttempt.toMillis():h.lastEarnAttempt?new Date(h.lastEarnAttempt).getTime():null;if(v){const _=u-v,b=24*60*60*1e3,S=5*60*1e3;if(_<b){const P=b-_,L=Math.floor(P/(60*60*1e3)),F=Math.floor(P%(60*60*1e3)/(60*1e3));throw new Error(`Please wait ${L}h ${F}m before earning again`)}if(_>b+S)throw await Be(c,{lastEarnAttempt:re(),updatedAt:re()}),new Error("You missed the 5-minute earning window. Please wait 24 hours for the next opportunity.")}const y=ie(K,"wallets",o.id),w=await be(y);if(!w.exists())throw new Error("Wallet not found");const A=w.data();return await Be(y,{balanceWallet:Vt(m),totalEarnings:Vt(m),incomeToday:Vt(m),updatedAt:re()}),await Be(c,{lastEarnAttempt:re(),totalEarnings:Vt(m),updatedAt:re()}),await Pr(We(K,"transactions"),{userId:o.id,type:"earn",amount:m,status:"completed",userProductId:e,productName:h.productName,transactionId:"EARN_"+Date.now(),createdAt:re()}),{success:!0,data:{amount:m,message:`Successfully earned ${m}`}}}catch(i){throw new Error(i.message||"Failed to earn from product")}}},Ts={getAllMembers:async t=>{try{const e=We(K,"users"),n=Lt(e,Ot("role","==","consumer"));return{success:!0,data:{members:(await ht(n)).docs.map(i=>({id:i.id,...i.data()}))}}}catch(e){throw new Error(e.message||"Failed to fetch members")}},toggleMemberStatus:async(t,e,n)=>{try{const r=ie(K,"users",e);return await Be(r,{isActive:n,updatedAt:re()}),{success:!0,data:{id:e,isActive:n}}}catch(r){throw new Error(r.message||"Failed to update member status")}},getAllTransactions:async(t,e=100)=>{try{const n=We(K,"transactions"),r=Lt(n);let i=(await ht(r)).docs.map(u=>({id:u.id,...u.data()}));return i.sort((u,c)=>{var f,m,v,y;const d=((m=(f=u.createdAt)==null?void 0:f.toMillis)==null?void 0:m.call(f))||0;return(((y=(v=c.createdAt)==null?void 0:v.toMillis)==null?void 0:y.call(v))||0)-d}),i=i.slice(0,e),{success:!0,data:{transactions:await Promise.all(i.map(async u=>{try{const c=await be(ie(K,"users",u.userId)),d=c.exists()?c.data():null;return{...u,userName:(d==null?void 0:d.name)||"Unknown",userPhone:(d==null?void 0:d.phone)||"Unknown"}}catch{return{...u,userName:"Unknown",userPhone:"Unknown"}}}))}}}catch(n){throw new Error(n.message||"Failed to fetch transactions")}},getAllWithdrawals:async t=>{try{const e=We(K,"transactions"),n=Lt(e,Ot("type","==","withdraw"));let s=(await ht(n)).docs.map(o=>({id:o.id,...o.data()}));return s.sort((o,u)=>{var h,f,m,v;const c=((f=(h=o.createdAt)==null?void 0:h.toMillis)==null?void 0:f.call(h))||0;return(((v=(m=u.createdAt)==null?void 0:m.toMillis)==null?void 0:v.call(m))||0)-c}),{success:!0,data:{withdrawals:await Promise.all(s.map(async o=>{try{const u=await be(ie(K,"users",o.userId)),c=u.exists()?u.data():null;return{...o,userName:(c==null?void 0:c.name)||"Unknown",userPhone:(c==null?void 0:c.phone)||"Unknown"}}catch{return{...o,userName:"Unknown",userPhone:"Unknown"}}}))}}}catch(e){throw new Error(e.message||"Failed to fetch withdrawals")}},updateWithdrawalStatus:async(t,e,n,r="")=>{try{const s=ie(K,"transactions",e),i=await be(s);if(!i.exists())throw new Error("Withdrawal not found");const o=i.data();if(n==="rejected"&&o.status==="pending"){const u=ie(K,"wallets",o.userId);(await be(u)).exists()&&await Be(u,{balanceWallet:Vt(o.amount),totalWithdrawals:Vt(-o.amount),updatedAt:re()})}return n==="approved"&&o.status,await Be(s,{status:n,adminNote:r,processedAt:re(),updatedAt:re()}),{success:!0,data:{id:e,status:n}}}catch(s){throw new Error(s.message||"Failed to update withdrawal status")}},getAllPendingRecharges:async t=>{try{const e=We(K,"transactions"),n=Lt(e,Ot("type","==","recharge"),Ot("status","==","pending"));let s=(await ht(n)).docs.map(o=>({id:o.id,...o.data()}));return s.sort((o,u)=>{var h,f,m,v;const c=((f=(h=o.createdAt)==null?void 0:h.toMillis)==null?void 0:f.call(h))||0;return(((v=(m=u.createdAt)==null?void 0:m.toMillis)==null?void 0:v.call(m))||0)-c}),{success:!0,data:{recharges:await Promise.all(s.map(async o=>{try{const u=await be(ie(K,"users",o.userId)),c=u.exists()?u.data():null;return{...o,userName:(c==null?void 0:c.name)||"Unknown",userPhone:(c==null?void 0:c.phone)||"Unknown"}}catch{return{...o,userName:"Unknown",userPhone:"Unknown"}}}))}}}catch(e){throw new Error(e.message||"Failed to fetch pending recharges")}},updateRechargeStatus:async(t,e,n,r="")=>{try{const s=ie(K,"transactions",e),i=await be(s);if(!i.exists())throw new Error("Recharge request not found");const o=i.data();if(o.type!=="recharge")throw new Error("Transaction is not a recharge");if(n==="approved"&&o.status==="pending"){const u=ie(K,"wallets",o.userId),c=await be(u),d=typeof o.amount=="number"?o.amount:parseFloat(o.amount)||0;if(isNaN(d)||d<=0)throw new Error("Invalid recharge amount: "+o.amount);c.exists()?await Be(u,{rechargeWallet:Vt(d),balanceWallet:Vt(d),updatedAt:re()}):await sr(u,{userId:o.userId,rechargeWallet:d,balanceWallet:d,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()})}return await Be(s,{status:n,adminNote:r,processedAt:re(),updatedAt:re()}),{success:!0,data:{id:e,status:n}}}catch(s){throw new Error(s.message||"Failed to update recharge status")}}},Eg={getSettings:async()=>{try{const t=await be(ie(K,"settings","app"));return t.exists()?{success:!0,data:t.data()}:{success:!0,data:{bKashNumber:"",totalSystemCurrency:0,currency:"USD",referralBonus:200,supportNumber:""}}}catch(t){throw new Error(t.message||"Failed to fetch settings")}},updateSettings:async(t,e)=>{try{return await sr(ie(K,"settings","app"),{...e,updatedAt:re()},{merge:!0}),{success:!0,data:e}}catch(n){throw new Error(n.message||"Failed to update settings")}}},yc=yr("auth/login",async({identifier:t,password:e,loginType:n="phone"},{rejectWithValue:r})=>{try{const s=await _g.login(t,e,n);return s.success?(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),s.data):r("Login failed")}catch(s){return r(s.message||"Login failed")}}),vc=yr("auth/register",async({name:t,phone:e,password:n,nid:r,passport:s=null,referralCode:i=null},{rejectWithValue:o})=>{try{const u=await _g.register(t,e,n,r,s,i);return u.success?(localStorage.setItem("token",u.data.token),localStorage.setItem("user",JSON.stringify(u.data.user)),u.data):o("Registration failed")}catch(u){return o(u.message||"Registration failed")}}),Fs=yr("auth/logout",async(t,{rejectWithValue:e})=>{try{return localStorage.removeItem("token"),localStorage.removeItem("user"),await _g.logout(),{success:!0}}catch{return localStorage.removeItem("token"),localStorage.removeItem("user"),{success:!0}}}),e6=()=>{const t=localStorage.getItem("token"),e=localStorage.getItem("user"),n=e?JSON.parse(e):null;return{token:t||null,user:n||null,isAuthenticated:!!t,loading:!1,error:null}},Jb=sd({name:"auth",initialState:e6(),reducers:{clearError:t=>{t.error=null},setCredentials:(t,e)=>{t.token=e.payload.token,t.user=e.payload.user,t.isAuthenticated=!0},updateUserStatus:(t,e)=>{t.user&&(t.user={...t.user,...e.payload},localStorage.setItem("user",JSON.stringify(t.user)))}},extraReducers:t=>{t.addCase(yc.pending,e=>{e.loading=!0,e.error=null}).addCase(yc.fulfilled,(e,n)=>{e.loading=!1,e.token=n.payload.token,e.user=n.payload.user,e.isAuthenticated=!0,e.error=null}).addCase(yc.rejected,(e,n)=>{e.loading=!1,e.error=n.payload,e.isAuthenticated=!1}),t.addCase(vc.pending,e=>{e.loading=!0,e.error=null}).addCase(vc.fulfilled,(e,n)=>{e.loading=!1,e.token=n.payload.token,e.user=n.payload.user,e.isAuthenticated=!0,e.error=null}).addCase(vc.rejected,(e,n)=>{e.loading=!1,e.error=n.payload,e.isAuthenticated=!1}),t.addCase(Fs.pending,e=>{e.loading=!0}).addCase(Fs.fulfilled,e=>{e.loading=!1,e.token=null,e.user=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("user")}).addCase(Fs.rejected,e=>{e.loading=!1,e.token=null,e.user=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("user")})}}),{clearError:vu,setCredentials:e5,updateUserStatus:Xb}=Jb.actions,t6=Jb.reducer,n6=[{label:"Home",path:"/",icon:s6},{label:"Product",path:"/product",icon:i6},{label:"Prize",path:"/prize",icon:o6},{label:"Me",path:"/user",icon:a6}];function r6({currentPath:t}){return a.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-sm z-50",children:a.jsx("ul",{className:"flex justify-around text-xs",children:n6.map(e=>{const n=t===e.path||e.path!=="/"&&t.startsWith(e.path);return a.jsx("li",{className:"flex-1",children:a.jsxs(Ma,{to:e.path,className:"flex flex-col items-center py-2 "+(n?"text-primary font-medium":"text-gray-500 hover:text-primary"),children:[a.jsx(e.icon,{active:n}),a.jsx("span",{className:"mt-1 text-[10px] capitalize",children:e.label})]})},e.path)})})})}function s6({active:t}){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10l9-7 9 7v10a1 1 0 01-1 1h-5a1 1 0 01-1-1V14H9v6a1 1 0 01-1 1H3a1 1 0 01-1-1V10z"})})}function i6({active:t}){return a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16"})]})}function o6({active:t}){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v13M5 8v13m14-13v13M3 8h18M4 4h16l-2 4H6L4 4z"})})}function a6({active:t}){return a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 14a4 4 0 01-8 0M12 8a4 4 0 110-8 4 4 0 010 8zM8 14h8"})})}const l6=()=>{const t=Pn();return a.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[a.jsxs("header",{className:"bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white py-4 px-4 relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-30",children:[a.jsx("div",{className:"absolute top-2 left-4 w-1 h-1 bg-white rounded-full"}),a.jsx("div",{className:"absolute top-6 left-12 w-1 h-1 bg-white rounded-full"}),a.jsx("div",{className:"absolute top-4 left-20 w-1 h-1 bg-white rounded-full"}),a.jsx("div",{className:"absolute top-8 left-32 w-1 h-1 bg-white rounded-full"}),a.jsx("div",{className:"absolute top-3 left-48 w-1 h-1 bg-white rounded-full"}),a.jsx("div",{className:"absolute top-7 left-64 w-1 h-1 bg-white rounded-full"}),a.jsx("div",{className:"absolute top-5 left-80 w-1 h-1 bg-white rounded-full"})]}),a.jsx("div",{className:"relative z-10 text-center",children:a.jsx("h1",{className:"text-2xl font-bold tracking-wider",children:"ADDI"})})]}),a.jsx("main",{className:"flex-1 overflow-y-auto pb-16",children:a.jsx(KI,{})}),a.jsx(r6,{currentPath:t.pathname})]})},Jt=({children:t})=>{const{isAuthenticated:e,user:n}=He(s=>s.auth),r=Pn();return e?(n==null?void 0:n.role)!=="admin"&&!(n!=null&&n.isActive)?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-lg max-w-md",children:[a.jsx("div",{className:"text-red-500 mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Account Not Activated"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Your account is pending activation by an administrator. Please contact support."})]})}):t:a.jsx(Kc,{to:"/login",state:{from:r},replace:!0})},c6=({images:t=[],interval:e=5e3})=>{const[n,r]=R.useState(0);return R.useEffect(()=>{if(t.length<=1)return;const s=setInterval(()=>{r(i=>(i+1)%t.length)},e);return()=>clearInterval(s)},[t,e]),a.jsxs("div",{className:"relative w-full overflow-hidden h-52 md:h-80 rounded-b-3xl shadow-2xl",children:[t.map((s,i)=>a.jsx("div",{className:`absolute inset-0 transition-opacity duration-1000 ease-in-out ${n===i?"opacity-100 z-10":"opacity-0 z-0"}`,children:a.jsx("img",{src:s,alt:`Slide ${i+1}`,className:"w-full h-full object-cover"})},i)),t.length>1&&a.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-20 flex gap-2",children:t.map((s,i)=>a.jsx("button",{onClick:()=>r(i),className:`transition-all duration-300 rounded-full ${n===i?"w-8 h-2 bg-white shadow-lg":"w-2 h-2 bg-white/60 hover:bg-white/80"}`,"aria-label":`Go to slide ${i+1}`},i))})]})},Zb=R.createContext(),cn=()=>{const t=R.useContext(Zb);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t},u6=({children:t})=>{const[e,n]=R.useState({bKashNumber:"",totalSystemCurrency:0,currency:"USD",referralBonus:200,supportNumber:""}),[r,s]=R.useState(!0),i=async()=>{try{s(!0);const o=await Eg.getSettings();o.success&&n({bKashNumber:o.data.bKashNumber||"",totalSystemCurrency:o.data.totalSystemCurrency||0,currency:o.data.currency||"USD",referralBonus:o.data.referralBonus||200,supportNumber:o.data.supportNumber||""})}catch(o){console.error("Failed to load settings:",o),n({bKashNumber:"",totalSystemCurrency:0,currency:"USD",referralBonus:200,supportNumber:""})}finally{s(!1)}};return R.useEffect(()=>{i()},[]),a.jsx(Zb.Provider,{value:{settings:e,loadSettings:i,loading:r},children:t})},fs=t=>({USD:"$",BDT:"",MYR:"RM"})[t]||"$",Q=(t,e="USD")=>((t==null||isNaN(t))&&(t=0),`${fs(e)}${parseFloat(t).toFixed(2)}`),d6=()=>{const t=ln(),{settings:e}=cn(),{user:n}=He(h=>h.auth),[r,s]=R.useState(!1),[i,o]=R.useState(!1);R.useEffect(()=>{n&&u()},[n]);const u=async()=>{var h,f;try{o(!0);const m=await Kn.getUserProducts(null);if(m.success){const v=(((h=m.data.unexpired)==null?void 0:h.length)||0)+(((f=m.data.expired)==null?void 0:f.length)||0);s(v>0)}}catch(m){console.error("Failed to check user purchases:",m),s(!1)}finally{o(!1)}},c=["https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?auto=format&fit=crop&w=700&q=80","https://images.pexels.com/photos/5665384/pexels-photo-5665384.jpeg","https://images.pexels.com/photos/27919253/pexels-photo-27919253.jpeg","https://images.pexels.com/photos/27919272/pexels-photo-27919272.jpeg","https://images.pexels.com/photos/27992044/pexels-photo-27992044.jpeg","https://images.pexels.com/photos/18108801/pexels-photo-18108801.jpeg","https://images.pexels.com/photos/27603695/pexels-photo-27603695.jpeg","https://images.pexels.com/photos/14409995/pexels-photo-14409995.jpeg","https://images.pexels.com/photos/27523254/pexels-photo-27523254.jpeg","https://images.pexels.com/photos/27523299/pexels-photo-27523299.jpeg","https://images.pexels.com/photos/27661934/pexels-photo-27661934.jpeg","https://images.pexels.com/photos/27603571/pexels-photo-27603571.jpeg"],d=[{label:"My product",onClick:()=>t("/my-product"),icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 11V7a4 4 0 10-8 0v4M12 14v5m-3 0h6"})})},{label:"Invitation",onClick:()=>t("/invitation"),icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c2.28 0 4-1.79 4-4s-1.72-4-4-4-4 1.79-4 4 1.72 4 4 4zM6 21v-2a4 4 0 014-4h0a4 4 0 014 4v2"})})},{label:"App Download",onClick:()=>t("/app-download"),icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v16h16V4H4zm8 11l-4-4h3V8h2v3h3l-4 4z"})})},{label:"My teams",onClick:()=>t("/my-teams"),icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5V9H2v11h5M12 13.01V13"})})},{label:"Online",onClick:()=>t("/online"),icon:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12.79A9 9 0 1111.21 3H21z"})})}];return a.jsxs("div",{className:"flex flex-col gap-6 pb-6",children:[a.jsxs("div",{className:"relative",children:[a.jsx(c6,{images:c}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 via-transparent to-transparent pointer-events-none"})]}),a.jsxs("div",{className:"mx-4 bg-gradient-to-r from-primary/10 via-primary/5 to-primary/10 rounded-xl p-4 shadow-lg border border-primary/20 overflow-hidden",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),a.jsx("h2",{className:"text-sm font-semibold text-gray-800",children:"Latest News"})]}),a.jsx("div",{className:"animate-marquee text-sm text-gray-700 leading-relaxed",children:"Welcome to ADDI! Today we gather to celebrate the fusion of fashion and beauty. As a luxury brand with a long history, ADDI remains committed to innovation and elegance."})]}),a.jsxs("div",{className:"mx-4 grid grid-cols-2 gap-4",children:[a.jsxs("button",{onClick:()=>t("/recharge"),className:"group flex items-center justify-center gap-3 py-4 bg-gradient-to-br from-primary to-accent rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 text-white font-medium",children:[a.jsx("span",{className:"inline-block transform group-hover:rotate-180 transition-transform duration-500",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m0 0-3-3h-3"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})]})}),a.jsx("span",{className:"text-base",children:"Recharge"})]}),a.jsxs("button",{onClick:()=>t("/withdraw"),className:"group flex items-center justify-center gap-3 py-4 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 text-white font-medium",children:[a.jsx("span",{className:"inline-block transform group-hover:rotate-180 transition-transform duration-500",children:a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16V12l-3-3m0 0 3 3h3"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})]})}),a.jsx("span",{className:"text-base",children:"Withdraw"})]})]}),a.jsxs("div",{className:"mx-4 bg-gradient-to-br from-amber-400 via-orange-400 to-pink-400 rounded-2xl p-6 text-white shadow-2xl relative overflow-hidden transform hover:scale-[1.02] transition-transform duration-300",children:[a.jsxs("div",{className:"absolute inset-0 opacity-10",children:[a.jsx("div",{className:"absolute top-4 left-4 w-16 h-16 border-2 border-white rounded-full"}),a.jsx("div",{className:"absolute bottom-4 right-4 w-12 h-12 border-2 border-white rounded-full"}),a.jsx("div",{className:"absolute top-1/2 left-1/4 w-8 h-8 border-2 border-white rounded-full"})]}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4",children:[a.jsxs("h3",{className:"font-bold text-lg tracking-wide flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""}),"Smash Golden Egg"]}),a.jsx("button",{onClick:()=>alert("Rules: Smashing eggs is for fun only!"),className:"text-xs underline hover:text-yellow-100 transition-colors font-medium",children:"Rules"})]}),a.jsx("div",{className:"flex justify-around mb-4",children:Array.from({length:3}).map((h,f)=>a.jsx("div",{className:"transform hover:scale-110 transition-transform duration-300 cursor-pointer",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 filter drop-shadow-lg",fill:"currentColor",viewBox:"0 0 24 24",stroke:"none",children:a.jsx("path",{d:"M12 2C7.031 2 3 7.03 3 12s4.031 10 9 10 9-5.03 9-10S16.969 2 12 2zm0 18c-4.411 0-8-4.037-8-8s3.589-8 8-8 8 4.037 8 8-3.589 8-8 8z"})})},f))}),a.jsxs("div",{className:"text-center bg-white/20 backdrop-blur-sm rounded-xl p-3",children:[a.jsxs("p",{className:"text-sm mb-1 font-semibold",children:["Remaining amount: ",a.jsx("span",{className:"text-2xl font-bold text-yellow-100",children:"0"})]}),a.jsxs("p",{className:"text-xs leading-relaxed font-medium",children:["Participate in the Golden Egg Smash to Win ",Q(1e5,e.currency)," Grand Prize"]})]})]})]}),a.jsxs("div",{className:"mx-4 bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})}),"Quick Access"]}),a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-6 gap-4",children:d.map((h,f)=>a.jsxs("button",{onClick:h.onClick,className:"group flex flex-col items-center justify-center gap-2 p-3 rounded-xl text-xs text-gray-700 hover:bg-gradient-to-br hover:from-primary/10 hover:to-accent/10 hover:text-primary focus:outline-none transform hover:scale-110 transition-all duration-300 border border-transparent hover:border-primary/30",children:[a.jsx("span",{className:"text-primary transform group-hover:scale-125 transition-transform duration-300 filter drop-shadow-sm",children:h.icon}),a.jsx("span",{className:"font-medium group-hover:font-semibold transition-all",children:h.label})]},f))})]})]})},An=yr("wallet/fetchWallet",async(t,{rejectWithValue:e,getState:n})=>{try{const r=n().auth.token;if(!r)return e("No authentication token");const s=await bg.getWallet(r);return s.success?s.data:e("Failed to fetch wallet")}catch(r){return e(r.message||"Failed to fetch wallet")}}),xc=yr("wallet/recharge",async(t,{rejectWithValue:e,getState:n})=>{try{const r=n().auth.token;if(!r)return e("No authentication token");const s=typeof t=="number"?t:t.amount,i=typeof t=="object"?t.proofImageUrl:"",o=await bg.recharge(r,s,i);return o.success?{transactionId:o.data.transactionId,status:o.data.status,message:o.data.message}:e("Recharge failed")}catch(r){return e(r.message||"Recharge failed")}}),wc=yr("wallet/withdraw",async(t,{rejectWithValue:e,getState:n})=>{try{const r=n().auth.token;if(!r)return e("No authentication token");const s=typeof t=="number"?t:t.amount,i=typeof t=="object"?t.paymentMethod:void 0,o=typeof t=="object"?{name:t.name,number:t.number}:void 0,u=typeof t=="object"?t.vatTax:void 0,c=typeof t=="object"?t.netAmount:void 0,d=await bg.withdraw(r,s,i,o,u,c);return d.success?{amount:s,newBalance:d.data.newBalance}:e("Withdrawal failed")}catch(r){return e(r.message||"Withdrawal failed")}}),h6={rechargeWallet:0,balanceWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,loading:!1,error:null},f6=sd({name:"wallet",initialState:h6,reducers:{setWallet(t,e){return{...t,...e.payload}},updateBalance(t,e){t.balanceWallet+=e.payload.amount},addEarnings(t,e){const{amount:n}=e.payload;t.totalEarnings+=n,t.incomeToday+=n},addWithdrawal(t,e){const{amount:n}=e.payload;t.totalWithdrawals+=n,t.balanceWallet-=n},clearError(t){t.error=null}},extraReducers:t=>{t.addCase(An.pending,e=>{e.loading=!0,e.error=null}).addCase(An.fulfilled,(e,n)=>{e.loading=!1,console.log("Wallet slice - received payload:",n.payload),n.payload&&(e.rechargeWallet=n.payload.rechargeWallet??0,e.balanceWallet=n.payload.balanceWallet??0,e.totalEarnings=n.payload.totalEarnings??0,e.totalWithdrawals=n.payload.totalWithdrawals??0,e.incomeToday=n.payload.incomeToday??0,e.incomeYesterday=n.payload.incomeYesterday??0,e.lossToday=n.payload.lossToday??0,e.lossTotal=n.payload.lossTotal??0),e.error=null}).addCase(An.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}),t.addCase(xc.pending,e=>{e.loading=!0,e.error=null}).addCase(xc.fulfilled,(e,n)=>{e.loading=!1,e.error=null}).addCase(xc.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}),t.addCase(wc.pending,e=>{e.loading=!0,e.error=null}).addCase(wc.fulfilled,(e,n)=>{e.loading=!1,e.totalWithdrawals+=n.payload.amount,e.balanceWallet=n.payload.newBalance,e.error=null}).addCase(wc.rejected,(e,n)=>{e.loading=!1,e.error=n.payload})}}),m6=f6.reducer,pa=yr("user/fetchProfile",async(t,{rejectWithValue:e,getState:n})=>{try{const r=n().auth.token;if(!r)return e("No authentication token");const s=await Yb.getUserProfile(r);return s.success?s.data:e("Failed to fetch profile")}catch(r){return e(r.message||"Failed to fetch profile")}}),Uh=yr("user/updateProfile",async(t,{rejectWithValue:e,getState:n})=>{try{const r=n().auth.token;if(!r)return e("No authentication token");const s=await Yb.updateProfile(r,t);return s.success?s.data:e("Failed to update profile")}catch(r){return e(r.message||"Failed to update profile")}}),p6={id:"368041",phone:"6017****4706",name:"Guest User",loading:!1,error:null},g6=sd({name:"user",initialState:p6,reducers:{updateUser(t,e){return{...t,...e.payload}},clearError(t){t.error=null}},extraReducers:t=>{t.addCase(pa.pending,e=>{e.loading=!0,e.error=null}).addCase(pa.fulfilled,(e,n)=>{e.loading=!1,e.id=n.payload.id,e.phone=n.payload.phone,e.name=n.payload.name,e.isActive=n.payload.isActive!==void 0?n.payload.isActive:!1,e.error=null}).addCase(pa.rejected,(e,n)=>{e.loading=!1,e.error=n.payload}),t.addCase(Uh.pending,e=>{e.loading=!0,e.error=null}).addCase(Uh.fulfilled,(e,n)=>(e.loading=!1,{...e,...n.payload,error:null})).addCase(Uh.rejected,(e,n)=>{e.loading=!1,e.error=n.payload})}}),y6=g6.reducer,v6=()=>{const t=ys(),{user:e}=He(y=>y.auth),n=He(y=>y.wallet),{settings:r}=cn(),[s,i]=R.useState([]),[o,u]=R.useState(!0),[c,d]=R.useState(null),[h,f]=R.useState({});R.useEffect(()=>{m(),e&&t(An())},[e,t]),R.useEffect(()=>{const y=()=>{document.visibilityState==="visible"&&e&&t(An())};return document.addEventListener("visibilitychange",y),()=>document.removeEventListener("visibilitychange",y)},[e,t]);const m=async()=>{try{u(!0),d(null);const y=await Kn.getProducts();if(y.success){console.log(y.data.products);const w=y.data.products.filter(A=>!A.deleted);i(w)}}catch(y){d(y.message||"Failed to load products"),console.error("Error loading products:",y)}finally{u(!1)}},v=async y=>{if(!e){alert("Please login to purchase products");return}if(confirm("Are you sure you want to purchase this product?"))try{f(A=>({...A,[y]:!0}));const w=await Kn.purchaseProduct(null,y);w.success&&(w.data.accountActivated?(alert("Product purchased successfully! Your account has been activated."),t(Xb({isActive:!0})),await t(pa()).unwrap()):alert("Product purchased successfully!"),m(),t(An()))}catch(w){alert(w.message||"Failed to purchase product"),console.error("Purchase error:",w)}finally{f(w=>({...w,[y]:!1}))}};return o?a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Loading exclusive products..."})]})}):c?a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Products"}),a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:c}),a.jsx("button",{onClick:m,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:"Retry"})]}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-primary via-accent to-primary text-white py-6 px-4 shadow-lg",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-wide",children:"Exclusive Collection"}),a.jsx("p",{className:"text-sm text-white/90 mt-1",children:"Premium Products"})]}),e&&a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[a.jsx("div",{className:"text-xs text-white/80",children:"Wallet Balance"}),a.jsx("div",{className:"text-lg font-bold",children:Q(n.rechargeWallet||0,r.currency)})]})]})}),a.jsx("div",{className:"p-4 pb-20",children:s.length===0?a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-100 rounded-full mb-4",children:a.jsx("svg",{className:"h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),a.jsx("p",{className:"text-gray-500 text-lg",children:"No products available"}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Check back later for exclusive offers"})]}):a.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:s.map(y=>a.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden flex flex-col transform hover:-translate-y-1 border border-gray-100",children:[a.jsxs("div",{className:"relative h-48 w-full bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden",children:[y.imageUrl?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:y.imageUrl,alt:y.name,className:"h-full w-full object-cover group-hover:scale-110 transition-transform duration-500"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}):a.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gradient-to-br from-primary/10 to-accent/10",children:a.jsx("svg",{className:"h-16 w-16 text-primary/30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsx("div",{className:"absolute top-3 right-3",children:a.jsx("div",{className:"bg-gradient-to-r from-primary to-accent text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg",children:"EXCLUSIVE"})})]}),a.jsxs("div",{className:"p-4 flex-1 flex flex-col justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2 line-clamp-1",children:y.name}),y.description&&a.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2 leading-relaxed",children:y.description}),a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-baseline gap-1",children:[a.jsx("span",{className:"text-xs text-gray-500",children:fs(r.currency)}),a.jsx("span",{className:"text-2xl font-bold text-primary",children:Q(y.price||0,r.currency).replace(fs(r.currency),"")})]})})]}),a.jsx("button",{onClick:()=>v(y.id),disabled:h[y.id]||(n.rechargeWallet||0)<(y.price||0),className:"w-full bg-gradient-to-r from-primary to-accent text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-md flex items-center justify-center gap-2 group/btn",children:h[y.id]?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsx("span",{children:"Processing..."})]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"h-5 w-5 group-hover/btn:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),a.jsx("span",{children:"Purchase Now"})]})}),e&&(n.rechargeWallet||0)<(y.price||0)&&!h[y.id]&&a.jsx("p",{className:"text-xs text-red-500 text-center mt-2",children:"Insufficient balance"})]})]},y.id))})})]})},x6=()=>{const{settings:t}=cn(),e=[{id:1,date:"2026-01-01",description:"Purchase ABC",amount:100,cashback:10},{id:2,date:"2026-01-05",description:"Purchase XYZ",amount:50,cashback:5}],n=e.reduce((r,s)=>r+s.cashback,0);return a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"Cashback"}),a.jsx("p",{className:"text-sm text-gray-700",children:"Earn cashback on every purchase. Your cashback will be added to your balance wallet automatically."}),a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[a.jsx("h2",{className:"font-medium mb-2",children:"Cashback Transactions"}),a.jsxs("table",{className:"w-full text-sm",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"text-left border-b",children:[a.jsx("th",{className:"py-1",children:"Date"}),a.jsx("th",{className:"py-1",children:"Description"}),a.jsxs("th",{className:"py-1",children:["Amount (",fs(t.currency),")"]}),a.jsxs("th",{className:"py-1",children:["Cashback (",fs(t.currency),")"]})]})}),a.jsx("tbody",{children:e.map(r=>a.jsxs("tr",{className:"border-b last:border-0",children:[a.jsx("td",{className:"py-1",children:r.date}),a.jsx("td",{className:"py-1",children:r.description}),a.jsx("td",{className:"py-1",children:Q(r.amount,t.currency)}),a.jsx("td",{className:"py-1",children:Q(r.cashback,t.currency)})]},r.id))})]}),a.jsxs("div",{className:"mt-3 text-right font-medium",children:["Total cashback: ",Q(n,t.currency)]})]})]})},w6=()=>{const{settings:t}=cn(),{user:e}=He(k=>k.auth),[n,r]=R.useState(null),[s,i]=R.useState(!1),[o,u]=R.useState({hours:0,minutes:0,seconds:0}),[c,d]=R.useState(!1),[h,f]=R.useState(null),[m,v]=R.useState(null),[y,w]=R.useState(!1),[A,_]=R.useState(!0),[b,S]=R.useState(0),[P,L]=R.useState(!1),F=[{amount:5,type:"bonus",probability:30},{amount:10,type:"bonus",probability:25},{amount:20,type:"bonus",probability:20},{amount:50,type:"bonus",probability:15},{amount:100,type:"mega bonus",probability:5},{amount:0,type:"try again",probability:5}];R.useEffect(()=>{I()},[e]),R.useEffect(()=>{if(P!==void 0){E();const k=setInterval(()=>{E()},1e3);return()=>clearInterval(k)}},[n,P]);const I=async()=>{if(!e){_(!1);return}try{const k=await be(ie(K,"users",e.id));if(k.exists()){const T=k.data(),W=T.lastEggSmash;r(W?W.toMillis():null);const Z=T.totalReferrals||0;S(Z),L(Z>=3)}}catch(k){console.error("Failed to load last smash time:",k)}finally{_(!1)}},E=()=>{if(!P){i(!1),u({hours:0,minutes:0,seconds:0});return}if(!n){i(!0);return}const k=Date.now(),T=new Date(n),W=new Date,Z=new Date(T.getFullYear(),T.getMonth(),T.getDate()),ue=new Date(W.getFullYear(),W.getMonth(),W.getDate());if(Z.getTime()<ue.getTime())i(!0),u({hours:0,minutes:0,seconds:0});else{const le=new Date(ue);le.setDate(le.getDate()+1);const $=le.getTime()-k;if($<=0)i(!0),u({hours:0,minutes:0,seconds:0});else{i(!1);const Y=Math.floor($/(1e3*60*60)),J=Math.floor($%(1e3*60*60)/(1e3*60)),X=Math.floor($%(1e3*60)/1e3);u({hours:Y,minutes:J,seconds:X})}}},j=()=>{const k=Math.random()*100;let T=0;for(const W of F)if(T+=W.probability,k<=T)return W;return F[0]},x=async k=>{!s||c||!e||(d(!0),f(k),w(!1),v(null),setTimeout(async()=>{const T=j();v(T),w(!0);try{const W=new Date;await Be(ie(K,"users",e.id),{lastEggSmash:re()}),r(W.getTime()),i(!1)}catch(W){console.error("Failed to update last smash time:",W)}setTimeout(()=>{d(!1),f(null)},3e3)},1500))},C=k=>String(k).padStart(2,"0");return A?a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-amber-50 via-yellow-50 to-orange-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-amber-400 border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-amber-700 font-medium",children:"Loading Golden Eggs..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-100 via-yellow-100 to-orange-100 pb-20",children:[a.jsxs("div",{className:"bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-500 text-white py-8 px-4 shadow-2xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-30",children:[...Array(20)].map((k,T)=>a.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},T))}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[a.jsx("span",{className:"text-4xl animate-bounce",children:""}),a.jsx("h1",{className:"text-3xl font-bold tracking-wide",children:"Golden Egg Smash"}),a.jsx("span",{className:"text-4xl animate-bounce",style:{animationDelay:"0.3s"},children:""})]}),a.jsx("p",{className:"text-yellow-100 text-sm mt-2",children:"Break the golden eggs and win amazing prizes!"})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[P?a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 shadow-xl text-white border-2 border-green-400",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-3xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-bold text-lg mb-1",children:"VIP Status Unlocked!"}),a.jsxs("div",{className:"text-sm text-green-100",children:["You have ",b," referrals! You can smash eggs ",a.jsx("strong",{children:"once daily"}),"."]})]})]})}):a.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl p-4 shadow-xl text-white border-2 border-orange-400",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"text-3xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"font-bold text-lg mb-1",children:"Egg Smashing Locked"}),a.jsxs("div",{className:"text-sm text-orange-100",children:["You have ",b," referrals. You need ",a.jsxs("strong",{children:[3-b," more successful referrals"]})," to unlock daily egg smashing!"]})]})]})}),!s&&P&&a.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-6 shadow-2xl text-white border-2 border-yellow-400/30",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-yellow-400 text-sm mb-2 font-semibold",children:" Next Smash Available In"}),a.jsxs("div",{className:"flex items-center justify-center gap-3 text-3xl font-bold text-yellow-400",children:[a.jsxs("div",{className:"bg-gray-700 rounded-lg px-4 py-2 min-w-[80px]",children:[C(o.hours),a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Hours"})]}),a.jsx("div",{className:"text-yellow-500",children:":"}),a.jsxs("div",{className:"bg-gray-700 rounded-lg px-4 py-2 min-w-[80px]",children:[C(o.minutes),a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Minutes"})]}),a.jsx("div",{className:"text-yellow-500",children:":"}),a.jsxs("div",{className:"bg-gray-700 rounded-lg px-4 py-2 min-w-[80px]",children:[C(o.seconds),a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Seconds"})]})]}),a.jsx("p",{className:"text-gray-400 text-xs mt-4",children:"Come back tomorrow for another daily chance!"})]})}),s&&P&&a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 shadow-2xl text-white border-2 border-yellow-400 animate-pulse",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-3xl mb-2",children:""}),a.jsx("div",{className:"text-xl font-bold mb-1",children:"Ready to Smash!"}),a.jsx("div",{className:"text-sm text-green-100",children:"Tap an egg below to reveal your prize (Daily limit: 1 per day)"})]})}),a.jsx("div",{className:"flex justify-center items-center gap-4 md:gap-8 flex-wrap",children:Array.from({length:3}).map((k,T)=>{const Z=c&&h===T,ue=s&&!c;return a.jsx("button",{onClick:()=>x(T),disabled:!ue||!P,className:`relative focus:outline-none transition-all duration-300 transform ${ue&&P?"hover:scale-110 hover:-translate-y-2 cursor-pointer":"opacity-50 cursor-not-allowed"} ${Z?"scale-125 rotate-12":""}`,"aria-label":"Smash egg",children:a.jsxs("div",{className:`relative ${ue?"animate-bounce filter drop-shadow-2xl":""}`,style:{animationDelay:`${T*.2}s`},children:[ue&&a.jsx("div",{className:"absolute inset-0 bg-yellow-400 rounded-full blur-xl opacity-50 animate-pulse"}),a.jsxs("div",{className:"relative",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-28 w-28 md:h-36 md:w-36 transition-all duration-300 ${Z?"animate-spin text-orange-600":"text-yellow-400"}`,fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M12 2C7.031 2 3 7.03 3 12s4.031 10 9 10 9-5.03 9-10S16.969 2 12 2zm0 18c-4.411 0-8-4.037-8-8s3.589-8 8-8 8 4.037 8 8-3.589 8-8 8z"})}),ue&&a.jsx("div",{className:"absolute inset-0",children:[...Array(6)].map((le,$)=>a.jsx("div",{className:"absolute w-1 h-1 bg-yellow-300 rounded-full animate-ping",style:{left:`${30+$%3*20}%`,top:`${20+Math.floor($/3)*30}%`,animationDelay:`${$*.3}s`}},$))})]}),Z&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsx("div",{className:"text-6xl animate-spin",children:""})})]})},T)})}),y&&m&&a.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fadeIn",children:a.jsx("div",{className:"bg-gradient-to-br from-yellow-400 via-amber-500 to-orange-500 rounded-3xl p-8 max-w-md w-full shadow-2xl border-4 border-white transform animate-bounce",children:a.jsx("div",{className:"text-center text-white",children:m.amount===0?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),a.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Try Again!"}),a.jsx("p",{className:"text-lg",children:"Better luck next time!"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),a.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Congratulations!"}),a.jsx("div",{className:"text-4xl font-extrabold mb-2 text-yellow-100",children:Q(m.amount,t.currency)}),a.jsx("p",{className:"text-xl font-semibold",children:m.type.toUpperCase()}),a.jsx("p",{className:"text-sm text-yellow-100 mt-2",children:"Prize has been added to your wallet!"})]})})})}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-yellow-200",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-3 text-center flex items-center justify-center gap-2",children:[a.jsx("span",{children:""})," How It Works"]}),a.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-yellow-500 font-bold",children:""}),a.jsx("span",{children:"Tap any golden egg to reveal your prize"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-yellow-500 font-bold",children:""}),a.jsxs("span",{children:["Win amazing bonuses ranging from ",Q(5,t.currency)," to ",Q(100,t.currency)]})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-yellow-500 font-bold",children:""}),a.jsx("span",{children:P?"VIP users (3+ referrals) can smash eggs once daily":"You need 3 successful referrals to unlock daily egg smashing"})]}),!P&&a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-yellow-500 font-bold",children:""}),a.jsx("span",{children:"Share your referral code and get 3 people to sign up to unlock this feature!"})]}),a.jsxs("li",{className:"flex items-start gap-2",children:[a.jsx("span",{className:"text-yellow-500 font-bold",children:""}),a.jsx("span",{children:"Prizes are automatically added to your balance wallet"})]})]})]})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fadeIn {
          animation: fadeIn 0.3s ease-in;
        }
      `})]})},_c=yr("team/fetchTeam",async(t,{rejectWithValue:e,getState:n})=>{try{const r=n().auth.token;if(!r)return e("No authentication token");const s=await Z3.getTeam(r);return s.success?s.data:e("Failed to fetch team data")}catch(r){return e(r.message||"Failed to fetch team data")}}),_6={cumulativeRecharge:32453,tiers:{B:{percentage:11,members:[{account:"60116****891",level:"B",product:"--",tier:"B"},{account:"60117****215",level:"B",product:"--",tier:"B"},{account:"60112****213",level:"B",product:"--",tier:"B"},{account:"60111****066",level:"B",product:"--",tier:"B"},{account:"60113****123",level:"B",product:"--",tier:"B"}]},C:{percentage:4,members:Array.from({length:14},(t,e)=>({account:`6011${e}****${String(e).padStart(3,"0")}`,level:"C",product:"--",tier:"C"}))},D:{percentage:2,members:Array.from({length:10},(t,e)=>({account:`6012${e}****${String(e).padStart(3,"0")}`,level:"D",product:"--",tier:"D"}))}},statistics:{todayNewMembers:0,yesterdayNewMembers:0,todayRechargeAmount:0,yesterdayRechargeAmount:1163,currentMonthRechargeAmount:14713,lastMonthRechargeAmount:16740},validMembers:[{account:"60116****891",level:"B",product:"--",tier:"B"},{account:"60117****215",level:"B",product:"--",tier:"B"},{account:"60112****213",level:"B",product:"--",tier:"B"},{account:"60111****066",level:"B",product:"--",tier:"B"}],invalidMembers:[],loading:!1,error:null},b6=sd({name:"team",initialState:_6,reducers:{setTeam(t,e){return{...t,...e.payload}},addMember(t,e){const{tier:n,member:r}=e.payload;t.tiers[n].members.push(r),t.validMembers.push(r)},clearError(t){t.error=null}},extraReducers:t=>{t.addCase(_c.pending,e=>{e.loading=!0,e.error=null}).addCase(_c.fulfilled,(e,n)=>(e.loading=!1,{...e,...n.payload,error:null})).addCase(_c.rejected,(e,n)=>{e.loading=!1,e.error=n.payload})}}),E6=b6.reducer,N6=()=>{var F,I,E,j;const t=ys(),e=He(x=>x.user),n=He(x=>x.wallet);He(x=>x.team);const r=He(x=>x.auth),s=ln(),{settings:i}=cn(),[o,u]=R.useState(!1),[c,d]=R.useState(!0),[h,f]=R.useState(!1),[m,v]=R.useState(!1),y=R.useCallback(async()=>{var x,C;if(!r.isAuthenticated||!((x=r.user)!=null&&x.id)){d(!1);return}try{d(!0);const k=await be(ie(K,"users",r.user.id));if(k.exists()){const T=k.data(),W=T.isActive!==void 0?T.isActive:!1;u(W),((C=r.user)==null?void 0:C.isActive)!==W&&t(Xb({isActive:W}))}}catch(k){console.error("Error fetching account status:",k)}finally{d(!1)}},[r.isAuthenticated,(F=r.user)==null?void 0:F.id,(I=r.user)==null?void 0:I.isActive,t]),w=R.useCallback(async()=>{var x,C,k;if(!(!r.isAuthenticated||!((x=r.user)!=null&&x.id)))try{v(!0);const T=await Kn.getUserProducts(null);if(T.success){const W=(((C=T.data.unexpired)==null?void 0:C.length)||0)+(((k=T.data.expired)==null?void 0:k.length)||0);f(W>0)}}catch(T){console.error("Failed to check user purchases:",T),f(!1)}finally{v(!1)}},[r.isAuthenticated,(E=r.user)==null?void 0:E.id]);R.useEffect(()=>{r.isAuthenticated&&(t(pa()),t(An()).then(x=>{console.log("Wallet fetch result:",x),x.error&&console.error("Wallet fetch error:",x.error)}),t(_c()),y(),w())},[r.isAuthenticated,t,y,w]),R.useEffect(()=>{console.log("Wallet state:",n),console.log("Wallet loading:",n.loading),console.log("Wallet error:",n.error)},[n]),R.useEffect(()=>{const x=()=>{document.visibilityState==="visible"&&r.isAuthenticated&&(t(An()),y())};return document.addEventListener("visibilitychange",x),()=>document.removeEventListener("visibilitychange",x)},[r.isAuthenticated,t,y]);const A=async()=>{if(confirm("Are you sure you want to logout?"))try{await t(Fs()).unwrap(),window.location.href="/login"}catch(x){console.error("Logout failed:",x),window.location.href="/login"}},_=x=>{const C=Number(x);return isNaN(C)?0:C},b=[{label:"Recharge wallet (for purchases)",value:_(n.rechargeWallet)},{label:"Balance wallet",value:_(n.balanceWallet)},{label:"Total earnings",value:_(n.totalEarnings)},{label:"Total withdrawals",value:_(n.totalWithdrawals)},{label:"Income today",value:_(n.incomeToday)},{label:"Yesterday's earnings",value:_(n.incomeYesterday)},{label:"Today's loss",value:_(n.lossToday)},{label:"Total loss",value:_(n.lossTotal)}],S=()=>{t(An()).then(x=>{x.error?alert("Failed to refresh wallet: "+x.error):alert("Wallet refreshed successfully")})},P=_(n.totalEarnings)-_(n.totalWithdrawals),L=_(n.totalEarnings)-_(n.lossTotal);return a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-blue-50 to-indigo-50 pb-20",children:[a.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white py-10 px-4 shadow-2xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-20",children:[...Array(12)].map((x,C)=>a.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`}},C))}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsxs("h1",{className:"text-4xl font-extrabold tracking-wide mb-2 flex items-center gap-3",children:[a.jsx("span",{className:"text-5xl",children:""}),"My Account"]}),a.jsx("p",{className:"text-white/90 text-sm",children:"Manage your profile and wallet"})]}),a.jsx("button",{onClick:S,disabled:n.loading,className:"bg-white/20 backdrop-blur-sm hover:bg-white/30 px-4 py-2 rounded-xl font-semibold text-sm transition-colors disabled:opacity-50 flex items-center gap-2",children:n.loading?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})})]}),a.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-5 border border-white/20",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("div",{className:"bg-white/20 rounded-full p-4",children:a.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"text-lg font-bold",children:e.name||"User"}),o?a.jsxs("span",{className:"bg-green-500 text-white text-xs font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[a.jsx("span",{children:""})," Active"]}):a.jsxs("span",{className:"bg-orange-500 text-white text-xs font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[a.jsx("span",{children:""})," Pending"]})]}),a.jsx("div",{className:"text-white/80 text-sm mb-1",children:e.phone}),a.jsxs("div",{className:"text-white/60 text-xs",children:["ID: ",(j=e.id)==null?void 0:j.substring(0,8),"..."]})]})]})})]})]}),n.error&&a.jsx("div",{className:"mx-4 mt-4 bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm shadow-lg",children:a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:""}),a.jsxs("span",{children:["Error: ",n.error]})]})}),r.isAuthenticated&&!m&&!h&&a.jsx("div",{className:"mx-4 mt-4 bg-gradient-to-r from-red-500 to-orange-500 rounded-xl p-4 shadow-lg text-white border-2 border-red-400",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"text-3xl flex-shrink-0",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-lg mb-1",children:"Account Locked for Withdrawal"}),a.jsx("p",{className:"text-sm text-white/90 mb-3",children:"You must purchase at least one product before you can withdraw funds."}),a.jsx("button",{onClick:()=>s("/product"),className:"bg-white text-red-600 px-4 py-2 rounded-lg text-sm font-semibold hover:bg-gray-100 transition-colors",children:"Browse Products "})]})]})}),a.jsxs("div",{className:"px-4 pt-6 space-y-6",children:[a.jsx("div",{className:`rounded-2xl p-6 shadow-xl text-white transform hover:scale-[1.02] transition-transform duration-300 ${o?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-orange-500 to-red-600"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"text-sm opacity-90 mb-2 flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:o?"":""}),a.jsx("span",{className:"font-semibold",children:"Account Status"})]}),a.jsx("div",{className:"text-3xl font-extrabold mb-2",children:o?"Active":"Pending Activation"}),!o&&a.jsx("div",{className:"text-sm text-white/90",children:"Purchase your first product to activate your account automatically"}),o&&a.jsx("div",{className:"text-sm text-white/90",children:"Your account is fully active and ready to use"})]}),a.jsx("div",{className:"text-6xl opacity-30",children:o?"":""})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-5 shadow-xl text-white transform hover:scale-105 transition-transform duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-2xl",children:""}),a.jsx("div",{className:"bg-white/20 rounded-full px-2 py-1 text-xs font-semibold",children:"Balance"})]}),a.jsx("div",{className:"text-2xl font-black mb-1",children:Q(_(n.balanceWallet),i.currency)}),a.jsx("div",{className:"text-blue-100 text-xs",children:"Available for withdrawal"})]}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-5 shadow-xl text-white transform hover:scale-105 transition-transform duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("div",{className:"text-2xl",children:""}),a.jsx("div",{className:"bg-white/20 rounded-full px-2 py-1 text-xs font-semibold",children:"Earnings"})]}),a.jsx("div",{className:"text-2xl font-black mb-1",children:Q(P,i.currency)}),a.jsx("div",{className:"text-green-100 text-xs",children:"Available to withdraw"})]})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""}),"Wallet Summary"]}),a.jsx("div",{className:"grid grid-cols-2 gap-3",children:b.map((x,C)=>{const k=x.label.includes("earnings")||x.label.includes("Income"),T=x.label.includes("loss")||x.label.includes("Loss"),W=x.label.includes("withdrawal");let Z="from-gray-100 to-gray-200",ue="text-gray-800",le="";return k?(Z="from-green-100 to-emerald-200",ue="text-green-800",le=""):T?(Z="from-red-100 to-rose-200",ue="text-red-800",le=""):W?(Z="from-orange-100 to-amber-200",ue="text-orange-800",le=""):x.label.includes("Recharge")?(Z="from-blue-100 to-indigo-200",ue="text-blue-800",le=""):x.label.includes("Balance")&&(Z="from-purple-100 to-pink-200",ue="text-purple-800",le=""),a.jsxs("div",{className:`bg-gradient-to-br ${Z} rounded-xl p-4 shadow-md transform hover:scale-105 transition-transform duration-300`,children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"text-xl",children:le}),a.jsx("div",{className:`text-xs font-semibold ${ue} flex-1 line-clamp-2`,children:x.label})]}),a.jsx("div",{className:`text-lg font-black ${ue}`,children:Q(x.value,i.currency)})]},C)})})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:""}),"Quick Actions"]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>s("/my-teams"),className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-xl p-4 shadow-lg flex flex-col items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5V9H2v11h5M12 13.01V13"})}),a.jsx("span",{className:"text-xs font-semibold",children:"My Teams"})]}),a.jsxs("button",{onClick:()=>s("/invitation"),className:"bg-gradient-to-br from-purple-500 to-pink-600 text-white rounded-xl p-4 shadow-lg flex flex-col items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c2.28 0 4-1.79 4-4s-1.72-4-4-4-4 1.79-4 4 1.72 4 4 4zM6 21v-2a4 4 0 014-4h0a4 4 0 014 4v2"})}),a.jsx("span",{className:"text-xs font-semibold",children:"Invite"})]}),a.jsxs("button",{onClick:()=>s("/my-product"),className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white rounded-xl p-4 shadow-lg flex flex-col items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 11V7a4 4 0 10-8 0v4M12 14v5m-3 0h6"})}),a.jsx("span",{className:"text-xs font-semibold",children:"Products"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 shadow-xl text-white border border-slate-700",children:[a.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-xl",children:""}),"Performance Summary"]}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[a.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Net Profit"}),a.jsx("div",{className:`text-2xl font-bold ${L>=0?"text-green-400":"text-red-400"}`,children:Q(L,i.currency)}),a.jsx("div",{className:"text-xs text-white/50 mt-1",children:"Earnings - Losses"})]})})]}),a.jsxs("button",{onClick:A,className:"w-full bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white py-4 rounded-2xl font-bold shadow-xl transform hover:scale-[1.02] transition-all duration-300 flex items-center justify-center gap-2",children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})};var S6=Object.defineProperty,xu=Object.getOwnPropertySymbols,eE=Object.prototype.hasOwnProperty,tE=Object.prototype.propertyIsEnumerable,Cx=(t,e,n)=>e in t?S6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,pm=(t,e)=>{for(var n in e||(e={}))eE.call(e,n)&&Cx(t,n,e[n]);if(xu)for(var n of xu(e))tE.call(e,n)&&Cx(t,n,e[n]);return t},gm=(t,e)=>{var n={};for(var r in t)eE.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&xu)for(var r of xu(t))e.indexOf(r)<0&&tE.call(t,r)&&(n[r]=t[r]);return n};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var Js;(t=>{const e=class he{constructor(c,d,h,f){if(this.version=c,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],c<he.MIN_VERSION||c>he.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=c*4+17;let m=[];for(let y=0;y<this.size;y++)m.push(!1);for(let y=0;y<this.size;y++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(h);if(this.drawCodewords(v),f==-1){let y=1e9;for(let w=0;w<8;w++){this.applyMask(w),this.drawFormatBits(w);const A=this.getPenaltyScore();A<y&&(f=w,y=A),this.applyMask(w)}}s(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(c,d){const h=t.QrSegment.makeSegments(c);return he.encodeSegments(h,d)}static encodeBinary(c,d){const h=t.QrSegment.makeBytes(c);return he.encodeSegments([h],d)}static encodeSegments(c,d,h=1,f=40,m=-1,v=!0){if(!(he.MIN_VERSION<=h&&h<=f&&f<=he.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let y,w;for(y=h;;y++){const S=he.getNumDataCodewords(y,d)*8,P=o.getTotalBits(c,y);if(P<=S){w=P;break}if(y>=f)throw new RangeError("Data too long")}for(const S of[he.Ecc.MEDIUM,he.Ecc.QUARTILE,he.Ecc.HIGH])v&&w<=he.getNumDataCodewords(y,S)*8&&(d=S);let A=[];for(const S of c){n(S.mode.modeBits,4,A),n(S.numChars,S.mode.numCharCountBits(y),A);for(const P of S.getData())A.push(P)}s(A.length==w);const _=he.getNumDataCodewords(y,d)*8;s(A.length<=_),n(0,Math.min(4,_-A.length),A),n(0,(8-A.length%8)%8,A),s(A.length%8==0);for(let S=236;A.length<_;S^=253)n(S,8,A);let b=[];for(;b.length*8<A.length;)b.push(0);return A.forEach((S,P)=>b[P>>>3]|=S<<7-(P&7)),new he(y,d,b,m)}getModule(c,d){return 0<=c&&c<this.size&&0<=d&&d<this.size&&this.modules[d][c]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const c=this.getAlignmentPatternPositions(),d=c.length;for(let h=0;h<d;h++)for(let f=0;f<d;f++)h==0&&f==0||h==0&&f==d-1||h==d-1&&f==0||this.drawAlignmentPattern(c[h],c[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(c){const d=this.errorCorrectionLevel.formatBits<<3|c;let h=d;for(let m=0;m<10;m++)h=h<<1^(h>>>9)*1335;const f=(d<<10|h)^21522;s(f>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,r(f,m));this.setFunctionModule(8,7,r(f,6)),this.setFunctionModule(8,8,r(f,7)),this.setFunctionModule(7,8,r(f,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,r(f,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,r(f,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,r(f,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let c=this.version;for(let h=0;h<12;h++)c=c<<1^(c>>>11)*7973;const d=this.version<<12|c;s(d>>>18==0);for(let h=0;h<18;h++){const f=r(d,h),m=this.size-11+h%3,v=Math.floor(h/3);this.setFunctionModule(m,v,f),this.setFunctionModule(v,m,f)}}drawFinderPattern(c,d){for(let h=-4;h<=4;h++)for(let f=-4;f<=4;f++){const m=Math.max(Math.abs(f),Math.abs(h)),v=c+f,y=d+h;0<=v&&v<this.size&&0<=y&&y<this.size&&this.setFunctionModule(v,y,m!=2&&m!=4)}}drawAlignmentPattern(c,d){for(let h=-2;h<=2;h++)for(let f=-2;f<=2;f++)this.setFunctionModule(c+f,d+h,Math.max(Math.abs(f),Math.abs(h))!=1)}setFunctionModule(c,d,h){this.modules[d][c]=h,this.isFunction[d][c]=!0}addEccAndInterleave(c){const d=this.version,h=this.errorCorrectionLevel;if(c.length!=he.getNumDataCodewords(d,h))throw new RangeError("Invalid argument");const f=he.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][d],m=he.ECC_CODEWORDS_PER_BLOCK[h.ordinal][d],v=Math.floor(he.getNumRawDataModules(d)/8),y=f-v%f,w=Math.floor(v/f);let A=[];const _=he.reedSolomonComputeDivisor(m);for(let S=0,P=0;S<f;S++){let L=c.slice(P,P+w-m+(S<y?0:1));P+=L.length;const F=he.reedSolomonComputeRemainder(L,_);S<y&&L.push(0),A.push(L.concat(F))}let b=[];for(let S=0;S<A[0].length;S++)A.forEach((P,L)=>{(S!=w-m||L>=y)&&b.push(P[S])});return s(b.length==v),b}drawCodewords(c){if(c.length!=Math.floor(he.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let f=0;f<this.size;f++)for(let m=0;m<2;m++){const v=h-m,w=(h+1&2)==0?this.size-1-f:f;!this.isFunction[w][v]&&d<c.length*8&&(this.modules[w][v]=r(c[d>>>3],7-(d&7)),d++)}}s(d==c.length*8)}applyMask(c){if(c<0||c>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let h=0;h<this.size;h++){let f;switch(c){case 0:f=(h+d)%2==0;break;case 1:f=d%2==0;break;case 2:f=h%3==0;break;case 3:f=(h+d)%3==0;break;case 4:f=(Math.floor(h/3)+Math.floor(d/2))%2==0;break;case 5:f=h*d%2+h*d%3==0;break;case 6:f=(h*d%2+h*d%3)%2==0;break;case 7:f=((h+d)%2+h*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][h]&&f&&(this.modules[d][h]=!this.modules[d][h])}}getPenaltyScore(){let c=0;for(let m=0;m<this.size;m++){let v=!1,y=0,w=[0,0,0,0,0,0,0];for(let A=0;A<this.size;A++)this.modules[m][A]==v?(y++,y==5?c+=he.PENALTY_N1:y>5&&c++):(this.finderPenaltyAddHistory(y,w),v||(c+=this.finderPenaltyCountPatterns(w)*he.PENALTY_N3),v=this.modules[m][A],y=1);c+=this.finderPenaltyTerminateAndCount(v,y,w)*he.PENALTY_N3}for(let m=0;m<this.size;m++){let v=!1,y=0,w=[0,0,0,0,0,0,0];for(let A=0;A<this.size;A++)this.modules[A][m]==v?(y++,y==5?c+=he.PENALTY_N1:y>5&&c++):(this.finderPenaltyAddHistory(y,w),v||(c+=this.finderPenaltyCountPatterns(w)*he.PENALTY_N3),v=this.modules[A][m],y=1);c+=this.finderPenaltyTerminateAndCount(v,y,w)*he.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let v=0;v<this.size-1;v++){const y=this.modules[m][v];y==this.modules[m][v+1]&&y==this.modules[m+1][v]&&y==this.modules[m+1][v+1]&&(c+=he.PENALTY_N2)}let d=0;for(const m of this.modules)d=m.reduce((v,y)=>v+(y?1:0),d);const h=this.size*this.size,f=Math.ceil(Math.abs(d*20-h*10)/h)-1;return s(0<=f&&f<=9),c+=f*he.PENALTY_N4,s(0<=c&&c<=2568888),c}getAlignmentPatternPositions(){if(this.version==1)return[];{const c=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(c*2-2))*2;let h=[6];for(let f=this.size-7;h.length<c;f-=d)h.splice(1,0,f);return h}}static getNumRawDataModules(c){if(c<he.MIN_VERSION||c>he.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*c+128)*c+64;if(c>=2){const h=Math.floor(c/7)+2;d-=(25*h-10)*h-55,c>=7&&(d-=36)}return s(208<=d&&d<=29648),d}static getNumDataCodewords(c,d){return Math.floor(he.getNumRawDataModules(c)/8)-he.ECC_CODEWORDS_PER_BLOCK[d.ordinal][c]*he.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][c]}static reedSolomonComputeDivisor(c){if(c<1||c>255)throw new RangeError("Degree out of range");let d=[];for(let f=0;f<c-1;f++)d.push(0);d.push(1);let h=1;for(let f=0;f<c;f++){for(let m=0;m<d.length;m++)d[m]=he.reedSolomonMultiply(d[m],h),m+1<d.length&&(d[m]^=d[m+1]);h=he.reedSolomonMultiply(h,2)}return d}static reedSolomonComputeRemainder(c,d){let h=d.map(f=>0);for(const f of c){const m=f^h.shift();h.push(0),d.forEach((v,y)=>h[y]^=he.reedSolomonMultiply(v,m))}return h}static reedSolomonMultiply(c,d){if(c>>>8||d>>>8)throw new RangeError("Byte out of range");let h=0;for(let f=7;f>=0;f--)h=h<<1^(h>>>7)*285,h^=(d>>>f&1)*c;return s(h>>>8==0),h}finderPenaltyCountPatterns(c){const d=c[1];s(d<=this.size*3);const h=d>0&&c[2]==d&&c[3]==d*3&&c[4]==d&&c[5]==d;return(h&&c[0]>=d*4&&c[6]>=d?1:0)+(h&&c[6]>=d*4&&c[0]>=d?1:0)}finderPenaltyTerminateAndCount(c,d,h){return c&&(this.finderPenaltyAddHistory(d,h),d=0),d+=this.size,this.finderPenaltyAddHistory(d,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(c,d){d[0]==0&&(c+=this.size),d.pop(),d.unshift(c)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function n(u,c,d){if(c<0||c>31||u>>>c)throw new RangeError("Value out of range");for(let h=c-1;h>=0;h--)d.push(u>>>h&1)}function r(u,c){return(u>>>c&1)!=0}function s(u){if(!u)throw new Error("Assertion error")}const i=class $e{constructor(c,d,h){if(this.mode=c,this.numChars=d,this.bitData=h,d<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(c){let d=[];for(const h of c)n(h,8,d);return new $e($e.Mode.BYTE,c.length,d)}static makeNumeric(c){if(!$e.isNumeric(c))throw new RangeError("String contains non-numeric characters");let d=[];for(let h=0;h<c.length;){const f=Math.min(c.length-h,3);n(parseInt(c.substring(h,h+f),10),f*3+1,d),h+=f}return new $e($e.Mode.NUMERIC,c.length,d)}static makeAlphanumeric(c){if(!$e.isAlphanumeric(c))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],h;for(h=0;h+2<=c.length;h+=2){let f=$e.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h))*45;f+=$e.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h+1)),n(f,11,d)}return h<c.length&&n($e.ALPHANUMERIC_CHARSET.indexOf(c.charAt(h)),6,d),new $e($e.Mode.ALPHANUMERIC,c.length,d)}static makeSegments(c){return c==""?[]:$e.isNumeric(c)?[$e.makeNumeric(c)]:$e.isAlphanumeric(c)?[$e.makeAlphanumeric(c)]:[$e.makeBytes($e.toUtf8ByteArray(c))]}static makeEci(c){let d=[];if(c<0)throw new RangeError("ECI assignment value out of range");if(c<128)n(c,8,d);else if(c<16384)n(2,2,d),n(c,14,d);else if(c<1e6)n(6,3,d),n(c,21,d);else throw new RangeError("ECI assignment value out of range");return new $e($e.Mode.ECI,0,d)}static isNumeric(c){return $e.NUMERIC_REGEX.test(c)}static isAlphanumeric(c){return $e.ALPHANUMERIC_REGEX.test(c)}getData(){return this.bitData.slice()}static getTotalBits(c,d){let h=0;for(const f of c){const m=f.mode.numCharCountBits(d);if(f.numChars>=1<<m)return 1/0;h+=4+m+f.bitData.length}return h}static toUtf8ByteArray(c){c=encodeURI(c);let d=[];for(let h=0;h<c.length;h++)c.charAt(h)!="%"?d.push(c.charCodeAt(h)):(d.push(parseInt(c.substring(h+1,h+3),16)),h+=2);return d}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let o=i;t.QrSegment=i})(Js||(Js={}));(t=>{(e=>{const n=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};n.LOW=new n(0,1),n.MEDIUM=new n(1,0),n.QUARTILE=new n(2,3),n.HIGH=new n(3,2),e.Ecc=n})(t.QrCode||(t.QrCode={}))})(Js||(Js={}));(t=>{(e=>{const n=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};n.NUMERIC=new n(1,[10,12,14]),n.ALPHANUMERIC=new n(2,[9,11,13]),n.BYTE=new n(4,[8,16,16]),n.KANJI=new n(8,[8,10,12]),n.ECI=new n(7,[0,0,0]),e.Mode=n})(t.QrSegment||(t.QrSegment={}))})(Js||(Js={}));var Si=Js;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var T6={L:Si.QrCode.Ecc.LOW,M:Si.QrCode.Ecc.MEDIUM,Q:Si.QrCode.Ecc.QUARTILE,H:Si.QrCode.Ecc.HIGH},nE=128,rE="L",sE="#FFFFFF",iE="#000000",oE=!1,aE=1,I6=4,A6=0,C6=.1;function lE(t,e=0){const n=[];return t.forEach(function(r,s){let i=null;r.forEach(function(o,u){if(!o&&i!==null){n.push(`M${i+e} ${s+e}h${u-i}v1H${i+e}z`),i=null;return}if(u===r.length-1){if(!o)return;i===null?n.push(`M${u+e},${s+e} h1v1H${u+e}z`):n.push(`M${i+e},${s+e} h${u+1-i}v1H${i+e}z`);return}o&&i===null&&(i=u)})}),n.join("")}function cE(t,e){return t.slice().map((n,r)=>r<e.y||r>=e.y+e.h?n:n.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function j6(t,e,n,r){if(r==null)return null;const s=t.length+n*2,i=Math.floor(e*C6),o=s/e,u=(r.width||i)*o,c=(r.height||i)*o,d=r.x==null?t.length/2-u/2:r.x*o,h=r.y==null?t.length/2-c/2:r.y*o,f=r.opacity==null?1:r.opacity;let m=null;if(r.excavate){let y=Math.floor(d),w=Math.floor(h),A=Math.ceil(u+d-y),_=Math.ceil(c+h-w);m={x:y,y:w,w:A,h:_}}const v=r.crossOrigin;return{x:d,y:h,h:c,w:u,excavation:m,opacity:f,crossOrigin:v}}function k6(t,e){return e!=null?Math.max(Math.floor(e),0):t?I6:A6}function uE({value:t,level:e,minVersion:n,includeMargin:r,marginSize:s,imageSettings:i,size:o,boostLevel:u}){let c=qe.useMemo(()=>{const y=(Array.isArray(t)?t:[t]).reduce((w,A)=>(w.push(...Si.QrSegment.makeSegments(A)),w),[]);return Si.QrCode.encodeSegments(y,T6[e],n,void 0,void 0,u)},[t,e,n,u]);const{cells:d,margin:h,numCells:f,calculatedImageSettings:m}=qe.useMemo(()=>{let v=c.getModules();const y=k6(r,s),w=v.length+y*2,A=j6(v,o,y,i);return{cells:v,margin:y,numCells:w,calculatedImageSettings:A}},[c,o,i,r,s]);return{qrcode:c,margin:h,cells:d,numCells:f,calculatedImageSettings:m}}var P6=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),R6=qe.forwardRef(function(e,n){const r=e,{value:s,size:i=nE,level:o=rE,bgColor:u=sE,fgColor:c=iE,includeMargin:d=oE,minVersion:h=aE,boostLevel:f,marginSize:m,imageSettings:v}=r,w=gm(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:A}=w,_=gm(w,["style"]),b=v==null?void 0:v.src,S=qe.useRef(null),P=qe.useRef(null),L=qe.useCallback(W=>{S.current=W,typeof n=="function"?n(W):n&&(n.current=W)},[n]),[F,I]=qe.useState(!1),{margin:E,cells:j,numCells:x,calculatedImageSettings:C}=uE({value:s,level:o,minVersion:h,boostLevel:f,includeMargin:d,marginSize:m,imageSettings:v,size:i});qe.useEffect(()=>{if(S.current!=null){const W=S.current,Z=W.getContext("2d");if(!Z)return;let ue=j;const le=P.current,$=C!=null&&le!==null&&le.complete&&le.naturalHeight!==0&&le.naturalWidth!==0;$&&C.excavation!=null&&(ue=cE(j,C.excavation));const Y=window.devicePixelRatio||1;W.height=W.width=i*Y;const J=i/x*Y;Z.scale(J,J),Z.fillStyle=u,Z.fillRect(0,0,x,x),Z.fillStyle=c,P6?Z.fill(new Path2D(lE(ue,E))):j.forEach(function(X,ye){X.forEach(function(te,de){te&&Z.fillRect(de+E,ye+E,1,1)})}),C&&(Z.globalAlpha=C.opacity),$&&Z.drawImage(le,C.x+E,C.y+E,C.w,C.h)}}),qe.useEffect(()=>{I(!1)},[b]);const k=pm({height:i,width:i},A);let T=null;return b!=null&&(T=qe.createElement("img",{src:b,key:b,style:{display:"none"},onLoad:()=>{I(!0)},ref:P,crossOrigin:C==null?void 0:C.crossOrigin})),qe.createElement(qe.Fragment,null,qe.createElement("canvas",pm({style:k,height:i,width:i,ref:L,role:"img"},_)),T)});R6.displayName="QRCodeCanvas";var dE=qe.forwardRef(function(e,n){const r=e,{value:s,size:i=nE,level:o=rE,bgColor:u=sE,fgColor:c=iE,includeMargin:d=oE,minVersion:h=aE,boostLevel:f,title:m,marginSize:v,imageSettings:y}=r,w=gm(r,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:A,cells:_,numCells:b,calculatedImageSettings:S}=uE({value:s,level:o,minVersion:h,boostLevel:f,includeMargin:d,marginSize:v,imageSettings:y,size:i});let P=_,L=null;y!=null&&S!=null&&(S.excavation!=null&&(P=cE(_,S.excavation)),L=qe.createElement("image",{href:y.src,height:S.h,width:S.w,x:S.x+A,y:S.y+A,preserveAspectRatio:"none",opacity:S.opacity,crossOrigin:S.crossOrigin}));const F=lE(P,A);return qe.createElement("svg",pm({height:i,width:i,viewBox:`0 0 ${b} ${b}`,ref:n,role:"img"},w),!!m&&qe.createElement("title",null,m),qe.createElement("path",{fill:u,d:`M0,0 h${b}v${b}H0z`,shapeRendering:"crispEdges"}),qe.createElement("path",{fill:c,d:F,shapeRendering:"crispEdges"}),L)});dE.displayName="QRCodeSVG";const D6=()=>{const t=ys(),e=ln(),{loading:n,error:r}=He(x=>x.wallet),{settings:s}=cn(),[i,o]=R.useState("60"),[u,c]=R.useState(!1),[d,h]=R.useState(""),[f,m]=R.useState(""),[v,y]=R.useState(null),[w,A]=R.useState(""),[_,b]=R.useState(!1),S=["60","300","800","1600","3000","5000"],P="1ErJTfAu21KXcqwRvFSGun79D_t-b0SyY";R.useEffect(()=>{L()},[]);const L=async()=>{try{const x=await Eg.getSettings();x.success&&x.data.bKashNumber&&h(x.data.bKashNumber)}catch(x){console.error("Failed to load settings:",x)}},F=async x=>{x.preventDefault();const C=parseFloat(i);if(isNaN(C)||C<=0){alert("Please enter a valid amount");return}if(!d){alert("bKash number is not configured. Please contact admin.");return}c(!0)},I=x=>{const C=x.target.files[0];if(C){if(!C.type.startsWith("image/")){alert("Please select an image file (JPG, PNG, etc.)");return}if(C.size>10*1024*1024){alert("Image size should be less than 10MB");return}y(C);const k=new FileReader;k.onloadend=()=>{A(k.result)},k.readAsDataURL(C)}},E=()=>{if(!v){alert("Please select an image first");return}const x=`https://drive.google.com/drive/folders/${P}`;window.open(x,"_blank"),alert("Please upload your image to the opened Google Drive folder, then copy the shareable link and paste it below.")},j=async()=>{if(f.trim()&&!f.includes("drive.google.com")&&!f.includes("docs.google.com")&&!confirm("The URL does not appear to be a Google Drive link. Continue anyway?"))return;const x=parseFloat(i);b(!0);try{await t(xc({amount:x,proofImageUrl:f})).unwrap(),alert("Recharge request submitted! Waiting for admin approval."),c(!1),m(""),y(null),A(""),e("/")}catch(C){alert(`Recharge failed: ${C}`)}finally{b(!1)}};return a.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-green-50 via-white to-blue-50 pb-6",children:[a.jsxs("div",{className:"relative bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 p-6 text-white mb-6 rounded-b-3xl shadow-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-b-3xl"}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-full transform hover:rotate-12 transition-transform duration-300",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Recharge Wallet"}),a.jsx("p",{className:"text-white/90 text-sm",children:"Add funds to your account"})]})]})})]}),a.jsxs("div",{className:"px-4 space-y-6",children:[a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:a.jsxs("form",{onSubmit:F,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Enter Amount (",fs(s.currency),")"]}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"number",value:i,onChange:x=>o(x.target.value),className:"w-full px-4 py-4 pl-12 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-lg font-semibold transition-all duration-200",placeholder:"0.00",required:!0,min:"1"}),a.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Quick Select"}),a.jsx("div",{className:"grid grid-cols-3 gap-3",children:S.map(x=>a.jsxs("button",{type:"button",className:`relative py-4 rounded-xl text-sm font-bold transition-all duration-300 transform hover:scale-105 ${i===x?"bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow-lg shadow-green-500/50 scale-105":"bg-gradient-to-br from-gray-50 to-gray-100 text-gray-700 hover:from-green-50 hover:to-emerald-50 hover:text-green-600 border-2 border-transparent hover:border-green-200"}`,onClick:()=>o(x),children:[i===x&&a.jsx("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsx("span",{className:"text-lg",children:Q(parseFloat(x),s.currency)})]},x))})]}),r&&a.jsxs("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm flex items-center gap-2 animate-shake",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsx("span",{children:r})]}),a.jsx("button",{type:"submit",disabled:n||!d,className:"w-full py-4 bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white rounded-xl font-bold text-lg shadow-lg shadow-green-500/50 hover:shadow-xl hover:shadow-green-500/60 transform hover:scale-[1.02] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:n?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Show QR Code"]})})]})}),a.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-5 border border-blue-100",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"bg-blue-500 p-2 rounded-lg flex-shrink-0",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-bold text-gray-800 mb-1",children:"How it works"}),a.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Select your recharge amount, scan the QR code or use the bKash number to send payment. Upload proof of payment (optional) and wait for admin approval."})]})]})})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto animate-fadeIn",children:a.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-md w-full my-8 max-h-[90vh] overflow-y-auto shadow-2xl border-4 border-green-100 animate-scaleIn",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-2 rounded-lg",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Payment QR Code"})]}),a.jsx("button",{onClick:()=>{c(!1),m(""),y(null),A("")},className:"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-full",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),a.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 mb-6 border-2 border-green-100",children:a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("div",{className:"bg-white p-5 rounded-2xl shadow-lg mb-4 border-4 border-green-200",children:a.jsx(dE,{value:d,size:220})}),a.jsxs("div",{className:"text-center space-y-2",children:[a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl px-4 py-3 border border-green-200",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Send money to bKash number:"}),a.jsx("p",{className:"text-xl font-bold text-green-600",children:d})]}),a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl px-4 py-3 border border-green-200",children:[a.jsx("p",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Amount to send:"}),a.jsx("p",{className:"text-2xl font-bold text-gray-800",children:Q(parseFloat(i)||0,s.currency)})]})]})]})}),a.jsxs("div",{className:"mb-6",children:[a.jsxs("label",{className:"block text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Payment Proof (Optional)"]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Step 1: Select Payment Screenshot"}),a.jsxs("label",{className:"block w-full",children:[a.jsx("input",{type:"file",accept:"image/*",onChange:I,className:"hidden",disabled:_}),a.jsxs("div",{className:"w-full px-4 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-green-500 hover:bg-green-50 transition-all duration-200 cursor-pointer text-center",children:[a.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Click to upload image"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Max size: 10MB (JPG, PNG)"})]})]})]}),w&&a.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-xl border-2 border-gray-200",children:[a.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-3",children:"Preview:"}),a.jsx("div",{className:"relative",children:a.jsx("img",{src:w,alt:"Payment proof preview",className:"max-w-full h-48 object-contain border-2 border-gray-300 rounded-xl mx-auto bg-white p-2"})})]}),v&&a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Step 2: Upload to Google Drive"}),a.jsxs("button",{type:"button",onClick:E,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl text-sm font-semibold flex items-center justify-center gap-2 shadow-lg transform hover:scale-[1.02] transition-all duration-200",children:[a.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:a.jsx("path",{d:"M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"})}),"Open Google Drive Upload Folder"]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Upload your image to the Google Drive folder, then make it shareable"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Step 3: Paste Google Drive Link (Optional)"}),a.jsx("input",{type:"url",value:f,onChange:x=>m(x.target.value),placeholder:"https://drive.google.com/file/d/... (Optional)",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm transition-all duration-200",disabled:_}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"After uploading, right-click the file  Get link  Copy link and paste here"})]}),a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl",children:[a.jsxs("p",{className:"text-sm text-blue-800 font-bold mb-2 flex items-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Note"]}),a.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:"Proof of payment is optional. You can submit without it, but admin approval may take longer without verification."})]})]}),a.jsxs("div",{className:"flex gap-3",children:[a.jsx("button",{onClick:j,disabled:_,className:"flex-1 px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl font-bold text-base shadow-lg shadow-green-500/50 hover:shadow-xl hover:shadow-green-500/60 transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:_?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Submit Request"]})}),a.jsx("button",{onClick:()=>{c(!1),m(""),y(null),A("")},className:"px-6 py-4 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-xl font-semibold transition-colors duration-200",children:"Cancel"})]})]})})]})},M6=()=>{var ye;const t=ys(),e=ln(),n=He(te=>te.wallet),{loading:r,error:s}=He(te=>te.wallet),{user:i}=He(te=>te.auth),{settings:o}=cn(),[u,c]=R.useState(""),[d,h]=R.useState("bikash"),[f,m]=R.useState(!1),[v,y]=R.useState(null),[w,A]=R.useState({bikash:{number:"",name:""},nagad:{number:"",name:""}}),[_,b]=R.useState({number:"",name:""}),[S,P]=R.useState(!0),[L,F]=R.useState(!1),[I,E]=R.useState(!0);R.useEffect(()=>{j(),x()},[i]);const j=async()=>{if(!i){P(!1);return}try{P(!0);const te=await be(ie(K,"users",i.id));if(te.exists()){const de=te.data();A({bikash:de.bikash||{number:"",name:""},nagad:de.nagad||{number:"",name:""}})}}catch(te){console.error("Failed to load payment details:",te)}finally{P(!1)}},x=async()=>{var te,de;if(!i){E(!1);return}try{E(!0);const st=await Kn.getUserProducts(null);if(st.success){const Je=(((te=st.data.unexpired)==null?void 0:te.length)||0)+(((de=st.data.expired)==null?void 0:de.length)||0);F(Je>0)}}catch(st){console.error("Failed to check user purchases:",st),F(!1)}finally{E(!1)}},C=()=>{b({number:"",name:""}),y(null),m(!0)},k=te=>{b(w[te]||{number:"",name:""}),y(te),m(!0)},T=async()=>{if(!_.number||!_.name){alert("Please fill in all fields");return}try{const te=v||d,de={...w,[te]:{number:_.number,name:_.name}};await Be(ie(K,"users",i.id),{[te]:de[te],updatedAt:re()}),A(de),m(!1),y(null),b({number:"",name:""}),alert(`${te.toUpperCase()} details saved successfully!`)}catch(te){alert(`Failed to save ${v||d} details: ${te.message}`)}},W=async te=>{te.preventDefault();const de=parseFloat(u);if(isNaN(de)||de<=0){alert("Please enter a valid amount");return}const st=n.balanceWallet||0;if(de>st){alert(`Insufficient balance. Available balance: ${Q(st,o.currency)}`);return}const Je=de*.1,Pt=de-Je,Me=w[d];if(!(Me!=null&&Me.number)||!(Me!=null&&Me.name)){alert(`Please add your ${d.toUpperCase()} details first`),m(!0),y(d);return}const ri=`Withdrawal Details:

Withdrawal Amount: ${Q(de,o.currency)}
VAT Tax (10%): ${Q(Je,o.currency)}
You will receive: ${Q(Pt,o.currency)}

Proceed with withdrawal?`;if(confirm(ri))try{await t(wc({amount:de,paymentMethod:d,vatTax:Je,netAmount:Pt,...Me})).unwrap(),alert(`Withdrawal request submitted!

Amount: ${Q(de,o.currency)}
VAT (10%): ${Q(Je,o.currency)}
You will receive: ${Q(Pt,o.currency)}`),c(""),e("/")}catch(D){alert(`Withdrawal failed: ${D}`)}},Z=n.balanceWallet||0,le=new Date().getDay(),$=le===0||le===6,J=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][le],X=w[d];return S?a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Loading payment details..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 via-indigo-50 to-purple-50 pb-20",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white py-8 px-4 shadow-2xl relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-20",children:[a.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 bg-white rounded-full animate-pulse"}),a.jsx("div",{className:"absolute top-8 right-12 w-1 h-1 bg-white rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),a.jsx("div",{className:"absolute bottom-4 left-1/4 w-1.5 h-1.5 bg-white rounded-full animate-pulse",style:{animationDelay:"1s"}})]}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx("div",{className:"text-4xl mb-2",children:""}),a.jsx("h1",{className:"text-3xl font-bold tracking-wide",children:"Withdraw Funds"}),a.jsx("p",{className:"text-white/90 text-sm mt-2",children:"Withdraw to NAGAD or BIKASH"})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[!$&&a.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl p-6 shadow-2xl text-white border-2 border-orange-400",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"text-4xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Withdrawals Not Available"}),a.jsxs("p",{className:"text-white/90 text-sm mb-2",children:["Withdrawals are only available on ",a.jsx("strong",{children:"Saturday"})," and ",a.jsx("strong",{children:"Sunday"}),"."]}),a.jsxs("p",{className:"text-white/80 text-xs",children:["Today is ",J,". Please come back on the weekend to withdraw."]})]})]})}),!I&&!L&&a.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 rounded-2xl p-6 shadow-2xl text-white border-2 border-red-400",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"text-4xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:"Account Locked"}),a.jsx("p",{className:"text-white/90 text-sm mb-3",children:"You must purchase at least one product before you can withdraw funds."}),a.jsx("button",{onClick:()=>e("/product"),className:"bg-white text-red-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"Go to Products"})]})]})}),a.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent rounded-2xl p-6 shadow-2xl text-white transform hover:scale-[1.02] transition-transform duration-300",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm opacity-90",children:"Available Balance"}),a.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),a.jsx("div",{className:"text-3xl font-bold",children:Q(Z,o.currency)}),a.jsx("div",{className:"text-xs opacity-80 mt-2",children:"You can withdraw from your balance wallet"})]}),a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Select Payment Method"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{type:"button",onClick:()=>h("bikash"),className:`p-4 rounded-xl border-2 transition-all duration-300 ${d==="bikash"?"border-green-500 bg-green-50 shadow-lg transform scale-105":"border-gray-200 hover:border-green-300 hover:bg-green-50/50"}`,children:[a.jsx("div",{className:"text-3xl mb-2",children:""}),a.jsx("div",{className:`font-semibold ${d==="bikash"?"text-green-600":"text-gray-700"}`,children:"BIKASH"}),(X==null?void 0:X.number)&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:X.number})]}),a.jsxs("button",{type:"button",onClick:()=>h("nagad"),className:`p-4 rounded-xl border-2 transition-all duration-300 ${d==="nagad"?"border-orange-500 bg-orange-50 shadow-lg transform scale-105":"border-gray-200 hover:border-orange-300 hover:bg-orange-50/50"}`,children:[a.jsx("div",{className:"text-3xl mb-2",children:""}),a.jsx("div",{className:`font-semibold ${d==="nagad"?"text-orange-600":"text-gray-700"}`,children:"NAGAD"}),((ye=w.nagad)==null?void 0:ye.number)&&a.jsx("div",{className:"text-xs text-gray-500 mt-1",children:w.nagad.number})]})]})]}),X!=null&&X.number&&(X!=null&&X.name)?a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[a.jsx("span",{children:""})," ",d.toUpperCase()," Details"]}),a.jsx("button",{onClick:()=>k(d),className:"text-primary text-sm font-medium hover:underline",children:"Edit"})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"Account Name:"}),a.jsx("span",{className:"font-semibold text-gray-800",children:X.name})]}),a.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"text-gray-600 text-sm",children:"Account Number:"}),a.jsx("span",{className:"font-semibold text-gray-800",children:X.number})]})]})]}):a.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-2xl p-6",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h3",{className:"font-bold text-yellow-800 mb-1",children:["No ",d.toUpperCase()," Details"]}),a.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:["Please add your ",d.toUpperCase()," account details to withdraw."]}),a.jsxs("button",{onClick:()=>C(),className:"bg-yellow-500 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-yellow-600 transition-colors",children:["Add ",d.toUpperCase()," Details"]})]})]})}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl animate-fadeIn",children:[a.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:[v?"Edit":"Add"," ",d.toUpperCase()," Details"]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Name"}),a.jsx("input",{type:"text",value:_.name,onChange:te=>b({..._,name:te.target.value}),placeholder:"Enter your name",className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary text-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),a.jsx("input",{type:"text",value:_.number,onChange:te=>b({..._,number:te.target.value}),placeholder:`Enter ${d.toUpperCase()} number`,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary text-sm"})]}),a.jsxs("div",{className:"flex gap-3 pt-2",children:[a.jsx("button",{onClick:T,className:"flex-1 bg-primary text-white py-3 rounded-lg font-semibold hover:bg-primary/90 transition-colors",children:"Save"}),a.jsx("button",{onClick:()=>{m(!1),y(null),b({number:"",name:""})},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}),a.jsxs("form",{onSubmit:W,className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100 space-y-4",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Withdrawal Amount"]}),a.jsxs("div",{children:[a.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Enter Amount (",fs(o.currency),")"]}),a.jsx("input",{type:"number",step:"0.01",value:u,onChange:te=>c(te.target.value),placeholder:"0.00",className:"w-full p-4 text-lg border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"}),a.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a.jsxs("p",{className:"text-xs text-gray-500",children:["Available Balance: ",Q(Z,o.currency)]}),a.jsx("button",{type:"button",onClick:()=>c(Z>0?Z.toFixed(2):"0"),className:"text-xs text-primary font-medium hover:underline",children:"Use Max"})]}),u&&parseFloat(u)>0&&a.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Withdrawal Amount:"}),a.jsx("span",{className:"text-sm font-semibold text-gray-800",children:Q(parseFloat(u)||0,o.currency)})]}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-sm font-medium text-gray-700",children:"VAT Tax (10%):"}),a.jsxs("span",{className:"text-sm font-semibold text-red-600",children:["-",Q((parseFloat(u)||0)*.1,o.currency)]})]}),a.jsxs("div",{className:"pt-2 border-t-2 border-blue-300 flex justify-between items-center",children:[a.jsx("span",{className:"text-base font-bold text-gray-800",children:"You will receive:"}),a.jsx("span",{className:"text-base font-bold text-green-600",children:Q((parseFloat(u)||0)*.9,o.currency)})]}),a.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"* 10% VAT tax will be deducted from your withdrawal amount"})]})]}),a.jsx("div",{className:"grid grid-cols-4 gap-2",children:[100,500,1e3,5e3].map(te=>a.jsx("button",{type:"button",onClick:()=>{c(Math.min(te,Z).toFixed(2))},className:"py-2 text-sm rounded-lg bg-gray-100 hover:bg-primary hover:text-white transition-colors font-medium",children:Q(te,o.currency)},te))}),s&&a.jsx("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:s}),a.jsx("button",{type:"submit",disabled:r||!(X!=null&&X.number)||!(X!=null&&X.name)||Z<=0||!L||I||!$,className:"w-full py-4 bg-gradient-to-r from-primary to-accent text-white rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-md",children:r?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):`Withdraw to ${d.toUpperCase()}`})]})]}),a.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.3s ease-out;
        }
      `})]})},L6=()=>{const t=ln(),e=ys(),n=He(x=>x.wallet),{user:r}=He(x=>x.auth),{settings:s}=cn(),[i,o]=R.useState("unexpired"),[u,c]=R.useState({unexpired:[],expired:[]}),[d,h]=R.useState(!0),[f,m]=R.useState(null),[v,y]=R.useState({}),[w,A]=R.useState({}),[_,b]=R.useState({});R.useEffect(()=>{r&&(S(),e(An()))},[r,e]),R.useEffect(()=>{if(u.unexpired.length===0)return;const x=setInterval(()=>{const C={},k={},T=Date.now();u.unexpired.forEach(W=>{var Z;if(W.expiryDate){const le=new Date(W.expiryDate)-T;if(le>0){const $=Math.floor(le/36e5),Y=Math.floor(le%(1e3*60*60)/(1e3*60)),J=Math.floor(le%(1e3*60)/1e3);C[W.id]={hours:$,minutes:Y,seconds:J}}else C[W.id]={hours:0,minutes:0,seconds:0}}if(W.earnAmount>0){const ue=(Z=W.lastEarnAttempt)!=null&&Z.toMillis?W.lastEarnAttempt.toMillis():W.lastEarnAttempt?new Date(W.lastEarnAttempt).getTime():null;if(ue){const le=T-ue,$=24*60*60*1e3,Y=5*60*1e3;if(le<$){const J=$-le,X=Math.floor(J/(60*60*1e3)),ye=Math.floor(J%(60*60*1e3)/(60*1e3)),te=Math.floor(J%(60*1e3)/1e3);k[W.id]={status:"cooldown",hours:X,minutes:ye,seconds:te,canEarn:!1}}else if(le<=$+Y){const J=$+Y-le,X=Math.floor(J/(60*1e3)),ye=Math.floor(J%(60*1e3)/1e3);k[W.id]={status:"window",minutes:X,seconds:ye,canEarn:!0}}else{const X=ue+$*2-T,ye=Math.floor(X/(60*60*1e3)),te=Math.floor(X%(60*60*1e3)/(60*1e3)),de=Math.floor(X%(60*1e3)/1e3);k[W.id]={status:"missed",canEarn:!1,hours:ye,minutes:te,seconds:de}}}else k[W.id]={status:"available",canEarn:!0}}}),y(C),A(k)},1e3);return()=>clearInterval(x)},[u.unexpired]);const S=async()=>{try{h(!0),m(null);const x=await Kn.getUserProducts();x.success&&c({unexpired:x.data.unexpired||[],expired:x.data.expired||[]})}catch(x){m(x.message||"Failed to load products"),console.error("Error loading user products:",x)}finally{h(!1)}},P=x=>String(x||0).padStart(2,"0"),L=x=>x.daysRemaining!==void 0&&x.validityDays?`${x.validityDays-x.daysRemaining}/${x.validityDays}`:"0/48",F=async x=>{if(_[x])return;const C=u.unexpired.find(T=>T.id===x);if(!C)return;const k=w[x];if(!k||!k.canEarn){alert("Earning opportunity is not available. Please wait for the next 24-hour window.");return}if(confirm(`Are you sure you want to earn ${Q(C.earnAmount||0,s.currency)} from this product?`))try{b(W=>({...W,[x]:!0}));const T=await Kn.earnFromProduct(null,x);T.success&&(alert(`Successfully earned ${Q(T.data.amount,s.currency)}!`),await S(),e(An()))}catch(T){alert(T.message||"Failed to earn from product"),console.error("Earn error:",T)}finally{b(T=>({...T,[x]:!1}))}},I=u[i]||[];console.log(I);const E=n.incomeToday>0?n.incomeToday:0,j=n.totalEarnings>0?n.totalEarnings:0;return a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50",children:[a.jsxs("div",{className:"bg-gradient-to-r from-primary via-accent to-primary text-white py-6 px-4 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("button",{onClick:()=>t(-1),className:"flex items-center text-white hover:text-white/80 transition-colors mr-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-2xl font-bold tracking-wide",children:"My Products"}),a.jsx("p",{className:"text-sm text-white/90 mt-1",children:"Your Exclusive Collection"})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 border border-white/30",children:[a.jsx("div",{className:"text-xs text-white/80 mb-1",children:"Today's Earnings"}),a.jsx("div",{className:"text-2xl font-bold",children:Q(E,s.currency)})]}),a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 border border-white/30",children:[a.jsx("div",{className:"text-xs text-white/80 mb-1",children:"Total Earnings"}),a.jsx("div",{className:"text-2xl font-bold",children:Q(j,s.currency)})]})]})]}),a.jsxs("div",{className:"p-4 pb-20",children:[a.jsx("div",{className:"bg-white rounded-2xl mb-6 shadow-lg overflow-hidden border border-gray-100",children:a.jsxs("div",{className:"flex",children:[a.jsxs("button",{onClick:()=>o("unexpired"),className:`flex-1 py-4 text-sm font-semibold relative transition-all ${i==="unexpired"?"text-primary bg-primary/10":"text-gray-600 hover:text-primary"}`,children:[a.jsx("span",{className:"relative z-10",children:"Active Products"}),i==="unexpired"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-accent"})]}),a.jsxs("button",{onClick:()=>o("expired"),className:`flex-1 py-4 text-sm font-semibold relative transition-all ${i==="expired"?"text-primary bg-primary/10":"text-gray-600 hover:text-primary"}`,children:[a.jsx("span",{className:"relative z-10",children:"Expired Products"}),i==="expired"&&a.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-accent"})]})]})}),d&&a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your products..."})]}),f&&!d&&a.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm mb-4",children:[f,a.jsx("button",{onClick:S,className:"ml-2 text-red-800 underline font-medium",children:"Retry"})]}),!d&&!f&&a.jsxs("div",{className:"space-y-4",children:[I.length===0?a.jsxs("div",{className:"text-center py-16",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-100 rounded-full mb-4",children:a.jsx("svg",{className:"h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),a.jsxs("p",{className:"text-gray-600 text-lg font-medium",children:["No ",i==="unexpired"?"active":"expired"," products"]}),a.jsx("p",{className:"text-gray-400 text-sm mt-2",children:i==="unexpired"?"Purchase products to see them here":"No expired products yet"})]}):I.map(x=>{var T,W,Z,ue;const C=v[x.id]||{hours:0,minutes:0,seconds:0},k=i==="expired";return a.jsx("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 transform hover:-translate-y-1",children:a.jsxs("div",{className:"flex",children:[a.jsxs("div",{className:"w-32 h-32 sm:w-40 sm:h-40 flex-shrink-0 bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden",children:[x.imageUrl?a.jsxs(a.Fragment,{children:[a.jsx("img",{src:x.imageUrl,alt:x.productName,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),a.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary/10 to-accent/10",children:a.jsx("svg",{className:"h-12 w-12 text-primary/30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),!k&&a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg",children:"ACTIVE"})}),k&&a.jsx("div",{className:"absolute top-2 left-2",children:a.jsx("div",{className:"bg-gradient-to-r from-gray-500 to-gray-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg",children:"EXPIRED"})})]}),a.jsxs("div",{className:"flex-1 p-4 sm:p-5 flex flex-col justify-between min-w-0",children:[a.jsxs("div",{className:"space-y-2",children:[a.jsx("h3",{className:"text-base font-bold text-gray-900 line-clamp-1",children:x.productName}),a.jsxs("div",{className:"flex items-baseline gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Price:"}),a.jsx("span",{className:"text-lg font-bold text-primary",children:Q(x.productPrice||0,s.currency)})]}),a.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[a.jsxs("div",{children:[a.jsx("span",{className:"text-gray-500",children:"Validity: "}),a.jsxs("span",{className:"font-semibold text-gray-900",children:[L(x)," days"]})]}),x.daysRemaining!==void 0&&!k&&a.jsxs("div",{className:"text-primary font-semibold",children:[x.daysRemaining," days left"]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Total Earnings:"}),a.jsx("span",{className:"text-sm font-bold text-green-600",children:Q(x.totalEarnings||0,s.currency)}),x.totalEarning>0&&a.jsxs("span",{className:"text-xs text-gray-400",children:["/ ",Q(x.totalEarning,s.currency)," max"]})]}),x.totalEarning>0&&x.totalEarnings>=x.totalEarning&&a.jsx("div",{className:"flex items-center gap-2 mt-1",children:a.jsx("span",{className:"text-xs font-semibold text-orange-600",children:" Maximum earning limit reached"})}),x.totalEarning>0&&x.totalEarnings<x.totalEarning&&a.jsxs("div",{className:"mt-1",children:[a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(x.totalEarnings/x.totalEarning*100,100)}%`}})}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[(x.totalEarnings/x.totalEarning*100).toFixed(1),"% of maximum earned"]})]}),x.validateDate&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Valid Until:"}),a.jsx("span",{className:"text-xs font-semibold text-gray-900",children:new Date((T=x.validateDate)!=null&&T.toMillis?x.validateDate.toMillis():x.validateDate).toLocaleDateString()})]}),x.earnAmount>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Daily Earn:"}),a.jsx("span",{className:"text-sm font-bold text-blue-600",children:Q(x.earnAmount,s.currency)})]}),x.totalEarning>0&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("span",{className:"text-xs text-gray-500",children:"Max Total Earning:"}),a.jsx("span",{className:"text-sm font-bold text-purple-600",children:Q(x.totalEarning,s.currency)})]}),!k&&x.earnAmount>0&&w[x.id]&&a.jsxs("div",{className:"mt-3 p-3 rounded-xl border-2 shadow-md",style:{backgroundColor:w[x.id].status==="available"||w[x.id].status==="window"?"rgba(34, 197, 94, 0.1)":w[x.id].status==="missed"?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)",borderColor:w[x.id].status==="available"||w[x.id].status==="window"?"rgb(34, 197, 94)":w[x.id].status==="missed"?"rgb(239, 68, 68)":"rgb(59, 130, 246)"},children:[w[x.id].status==="available"&&a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-bold text-green-700",children:"Earning Available Now!"}),a.jsxs("div",{className:"text-xs text-green-600 mt-0.5",children:["You can earn ",Q(x.earnAmount,s.currency)," right away"]})]})]}),w[x.id].status==="window"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-bold text-orange-700",children:" 5-Minute Window Open!"}),a.jsx("div",{className:"text-xs text-orange-600 mt-0.5",children:"Act fast - window closing soon"})]})]}),a.jsxs("div",{className:"bg-white/50 rounded-lg p-2 text-center",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Time Remaining:"}),a.jsxs("div",{className:"text-lg font-bold text-orange-700",children:[P(w[x.id].minutes),":",P(w[x.id].seconds)]})]})]}),w[x.id].status==="cooldown"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-bold text-blue-700",children:"Next Earning Opportunity"}),a.jsxs("div",{className:"text-xs text-blue-600 mt-0.5",children:["You can earn ",Q(x.earnAmount,s.currency)," in:"]})]})]}),a.jsxs("div",{className:"bg-white/50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Time Until Next Earn:"}),a.jsxs("div",{className:"text-2xl font-bold text-blue-700 tracking-wider",children:[P(w[x.id].hours),":",P(w[x.id].minutes),":",P(w[x.id].seconds)]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[w[x.id].hours>0&&`${w[x.id].hours} hour${w[x.id].hours>1?"s":""}, `,w[x.id].minutes," minute",w[x.id].minutes!==1?"s":"",", ",w[x.id].seconds," second",w[x.id].seconds!==1?"s":""]})]})]}),w[x.id].status==="missed"&&a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:a.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:"text-sm font-bold text-red-700",children:" Window Missed"}),a.jsx("div",{className:"text-xs text-red-600 mt-0.5",children:"Next earning opportunity in:"})]})]}),a.jsxs("div",{className:"bg-white/50 rounded-lg p-3 text-center",children:[a.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Time Until Next Earn:"}),a.jsxs("div",{className:"text-2xl font-bold text-red-700 tracking-wider",children:[P(w[x.id].hours),":",P(w[x.id].minutes),":",P(w[x.id].seconds)]}),a.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[w[x.id].hours>0&&`${w[x.id].hours} hour${w[x.id].hours>1?"s":""}, `,w[x.id].minutes," minute",w[x.id].minutes!==1?"s":"",", ",w[x.id].seconds," second",w[x.id].seconds!==1?"s":""]})]})]})]})]}),!k&&x.earnAmount>0&&a.jsx("button",{className:`w-full font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform transition-all duration-200 mt-4 flex items-center justify-center gap-2 group/btn ${(W=w[x.id])!=null&&W.canEarn&&!_[x.id]?"bg-gradient-to-r from-primary to-accent text-white hover:scale-[1.02]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:()=>F(x.id),disabled:!((Z=w[x.id])!=null&&Z.canEarn)||_[x.id],children:_[x.id]?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),a.jsx("span",{children:"Processing..."})]}):(ue=w[x.id])!=null&&ue.canEarn?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"h-5 w-5 group-hover/btn:rotate-12 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("span",{className:"font-bold",children:["Earn ",Q(x.earnAmount,s.currency)]})]}):a.jsx(a.Fragment,{children:a.jsx("span",{children:"Earn Unavailable"})})}),!k&&(!x.earnAmount||x.earnAmount===0)&&a.jsxs("div",{className:"mt-4 text-center",children:[a.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Expires in:"}),a.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[P(C.hours),":",P(C.minutes),":",P(C.seconds)]})]})]})]})},x.id)}),I.length>0&&a.jsx("div",{className:"text-center py-6",children:a.jsxs("div",{className:"inline-flex items-center gap-2 text-gray-400 text-sm",children:[a.jsx("div",{className:"h-px w-12 bg-gray-300"}),a.jsx("span",{children:"End of list"}),a.jsx("div",{className:"h-px w-12 bg-gray-300"})]})})]})]})]})},O6=()=>{const t=He(w=>w.user),{settings:e}=cn(),[n,r]=R.useState(""),[s,i]=R.useState(0),[o,u]=R.useState(!1),[c,d]=R.useState(!0);R.useEffect(()=>{h()},[t]);const h=async()=>{if(!(t!=null&&t.id)){d(!1);return}try{d(!0);const w=await be(ie(K,"users",t.id));if(w.exists()){const A=w.data();let _=A.referralCode;_||(_=f(),await Be(ie(K,"users",t.id),{referralCode:_,updatedAt:re()})),r(_);const b=A.totalReferrals||0;i(b)}}catch(w){console.error("Failed to load referral code:",w),r(t.id.substring(0,8).toUpperCase())}finally{d(!1)}},f=()=>{const w="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let A="";for(let _=0;_<8;_++)A+=w.charAt(Math.floor(Math.random()*w.length));return A},m=`${window.location.origin}/register?ref=${n}`,v=()=>{navigator.clipboard.writeText(n),u(!0),setTimeout(()=>u(!1),2e3)},y=()=>{navigator.clipboard.writeText(m),u(!0),setTimeout(()=>u(!1),2e3)};return c?a.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 via-pink-50 to-orange-50 flex items-center justify-center pb-20",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),a.jsx("p",{className:"text-gray-600 font-medium",children:"Loading referral information..."})]})}):a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 via-pink-50 to-orange-50 pb-20",children:[a.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 text-white py-10 px-4 shadow-2xl relative overflow-hidden",children:[a.jsxs("div",{className:"absolute inset-0 opacity-20",children:[a.jsx("div",{className:"absolute top-4 left-4 w-3 h-3 bg-white rounded-full animate-pulse"}),a.jsx("div",{className:"absolute top-8 right-12 w-2 h-2 bg-white rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),a.jsx("div",{className:"absolute bottom-4 left-1/4 w-2.5 h-2.5 bg-white rounded-full animate-pulse",style:{animationDelay:"1s"}})]}),a.jsxs("div",{className:"relative z-10 text-center",children:[a.jsx("div",{className:"text-5xl mb-3 animate-bounce",children:""}),a.jsx("h1",{className:"text-3xl font-bold tracking-wide mb-2",children:"Invite & Earn"}),a.jsx("p",{className:"text-white/90 text-sm",children:"Share your referral code and get rewards!"})]})]}),a.jsxs("div",{className:"p-4 space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 shadow-2xl text-white border-2 border-green-400",children:a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-2xl font-bold mb-1",children:" Referral Rewards"}),a.jsxs("div",{className:"text-sm text-green-100",children:["New users get ",Q(e.referralBonus||200,e.currency)," bonus, and you get ",Q(e.referralBonus||200,e.currency)," too!"]})]}),a.jsx("div",{className:"text-4xl font-extrabold text-yellow-200",children:Q(e.referralBonus||200,e.currency)})]})}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-xl border border-gray-100 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:s}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Referrals"})]}),a.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-xl border border-gray-100 text-center",children:[a.jsx("div",{className:"text-3xl font-bold text-green-600 mb-1",children:Q(s*(e.referralBonus||200),e.currency)}),a.jsx("div",{className:"text-sm text-gray-600",children:"Total Rewards Earned"}),a.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"You earned this from referrals"})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-primary/30",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Your Unique Referral Code"]}),a.jsx("div",{className:"bg-gradient-to-r from-primary/10 to-accent/10 rounded-xl p-6 border-2 border-dashed border-primary/50 relative",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"text-4xl font-black text-primary tracking-widest mb-3 select-all",children:n||t.id.substring(0,8).toUpperCase()}),a.jsx("button",{onClick:v,className:"px-6 py-2 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition-colors text-sm flex items-center gap-2 mx-auto",children:o?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Code"]})})]})})]}),a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Share Referral Link"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 break-all select-all text-sm text-gray-700 font-mono",children:m}),a.jsx("button",{onClick:y,className:"w-full px-4 py-3 bg-gradient-to-r from-primary to-accent text-white rounded-lg font-semibold hover:shadow-lg transform hover:scale-[1.02] transition-all duration-300 flex items-center justify-center gap-2",children:o?a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Link Copied!"]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Referral Link"]})})]})]}),a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[a.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," Share Via"]}),a.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[a.jsxs("button",{onClick:()=>{const w=`Join using my referral code: ${n} and get ${Q(e.referralBonus||200,e.currency)} bonus! ${m}`;window.open(`https://wa.me/?text=${encodeURIComponent(w)}`,"_blank")},className:"p-4 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 transition-colors flex flex-col items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("span",{className:"text-xs",children:"WhatsApp"})]}),a.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(`Join using my referral code: ${n} and get ${Q(e.referralBonus||200,e.currency)} bonus! ${m}`),u(!0),setTimeout(()=>u(!1),2e3)},className:"p-4 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors flex flex-col items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("span",{className:"text-xs",children:"Message"})]}),a.jsxs("button",{onClick:()=>{navigator.share?navigator.share({title:"Join with my referral code!",text:`Join using my referral code: ${n} and get ${Q(e.referralBonus||200,e.currency)} bonus!`,url:m}):y()},className:"p-4 bg-purple-500 text-white rounded-xl font-semibold hover:bg-purple-600 transition-colors flex flex-col items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("span",{className:"text-xs",children:"Share"})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[a.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("span",{children:""})," How It Works"]}),a.jsxs("ul",{className:"space-y-3 text-sm text-gray-700",children:[a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-primary font-bold text-lg",children:"1."}),a.jsx("span",{children:"Share your unique referral code with friends"})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-primary font-bold text-lg",children:"2."}),a.jsx("span",{children:"They sign up using your referral code"})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-primary font-bold text-lg",children:"3."}),a.jsxs("span",{children:["They receive ",Q(e.referralBonus||200,e.currency)," welcome bonus, and you get ",Q(e.referralBonus||200,e.currency)," too!"]})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"text-primary font-bold text-lg",children:"4."}),a.jsx("span",{children:"Your referral count increases and bonus is added to your wallet automatically!"})]})]})]})]})]})},V6=()=>a.jsxs("div",{className:"p-4 space-y-4",children:[a.jsx("h1",{className:"text-xl font-semibold",children:"App Download"}),a.jsx("p",{className:"text-sm text-gray-700",children:"Get the full ADDI experience by downloading our mobile app."}),a.jsxs("div",{className:"bg-white p-4 rounded-md shadow-sm text-sm space-y-3 text-center",children:[a.jsx("div",{className:"text-gray-700",children:"Scan the QR code below with your phone camera to download:"}),a.jsx("div",{className:"flex justify-center",children:a.jsx("img",{alt:"QR code",className:"h-32 w-32",src:"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://example.com/download"})}),a.jsx("div",{className:"text-gray-500 text-xs",children:"Or visit: https://example.com/download"})]})]}),F6=()=>{var o,u,c,d,h,f,m,v,y;const t=He(w=>w.team),e=ln(),{settings:n}=cn(),r=(o=t.statistics)!=null&&o.yesterdayNewMembers?((t.statistics.todayNewMembers-t.statistics.yesterdayNewMembers)/t.statistics.yesterdayNewMembers*100).toFixed(1):0,s=(u=t.statistics)!=null&&u.yesterdayRechargeAmount?((t.statistics.todayRechargeAmount-t.statistics.yesterdayRechargeAmount)/t.statistics.yesterdayRechargeAmount*100).toFixed(1):0,i=(c=t.statistics)!=null&&c.lastMonthRechargeAmount?((t.statistics.currentMonthRechargeAmount-t.statistics.lastMonthRechargeAmount)/t.statistics.lastMonthRechargeAmount*100).toFixed(1):0;return a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-blue-900 to-indigo-900 text-white pb-20",children:[a.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white py-10 px-4 shadow-2xl relative overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 opacity-30",children:[...Array(15)].map((w,A)=>a.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*2}s`}},A))}),a.jsxs("div",{className:"relative z-10 flex items-center",children:[a.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors mr-3 backdrop-blur-sm",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("h1",{className:"text-4xl font-extrabold tracking-wide mb-2 flex items-center gap-3",children:[a.jsx("span",{className:"text-5xl",children:""}),"My Teams"]}),a.jsx("p",{className:"text-white/90 text-sm",children:"Track your team performance and earnings"})]})]})]}),a.jsxs("div",{className:"px-4 pt-6 space-y-6",children:[a.jsxs("div",{className:"relative bg-gradient-to-br from-yellow-400 via-orange-500 to-pink-500 rounded-3xl p-8 shadow-2xl text-white transform hover:scale-[1.02] transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/20 rounded-full -mr-16 -mt-16"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-2",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm opacity-90 font-medium",children:"Team Cumulative Recharge"}),a.jsx("div",{className:"text-xs opacity-70",children:"Total from all team members"})]})]}),a.jsx("div",{className:"text-5xl font-black mb-2 tracking-tight",children:Q(t.cumulativeRecharge||0,n.currency)})]}),a.jsx("div",{className:"text-7xl opacity-20",children:""})]}),a.jsx("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-white/20",children:a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-1.5 text-xs font-semibold",children:[i>0?"":i<0?"":""," ",i>0?"+":"",i,"% vs last month"]})})]})]}),a.jsxs("button",{onClick:()=>alert("Daily commission details feature coming soon"),className:"w-full bg-gradient-to-r from-purple-600 via-pink-600 to-rose-600 hover:from-purple-700 hover:via-pink-700 hover:to-rose-700 text-white py-5 rounded-2xl font-bold shadow-2xl transform hover:scale-[1.02] hover:shadow-purple-500/50 transition-all duration-300 flex items-center justify-center gap-3 text-lg",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsx("span",{children:"Daily Commission Details"}),a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),a.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-3xl p-6 shadow-2xl border border-white/10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl p-2",children:a.jsx("span",{className:"text-2xl",children:""})}),a.jsx("span",{children:"Team Statistics"})]}),a.jsx("div",{className:"text-xs text-white/60 bg-white/10 px-3 py-1 rounded-full",children:"Real-time data"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-blue-500/50 transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-3xl",children:""}),r!==0&&a.jsxs("div",{className:`text-xs font-bold px-2 py-1 rounded-full ${r>0?"bg-green-500/30 text-green-200":"bg-red-500/30 text-red-200"}`,children:[r>0?"":""," ",Math.abs(r),"%"]})]}),a.jsx("div",{className:"text-4xl font-black text-white mb-2",children:((d=t.statistics)==null?void 0:d.todayNewMembers)||0}),a.jsx("div",{className:"text-blue-200 text-xs font-semibold",children:"Today's New Members"})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-800 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-purple-500/50 transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsx("div",{className:"text-3xl",children:""})}),a.jsx("div",{className:"text-4xl font-black text-white mb-2",children:((h=t.statistics)==null?void 0:h.yesterdayNewMembers)||0}),a.jsx("div",{className:"text-indigo-200 text-xs font-semibold",children:"Yesterday's New Members"})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-green-500 via-emerald-600 to-teal-700 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-green-500/50 transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-3xl",children:""}),s!==0&&a.jsxs("div",{className:`text-xs font-bold px-2 py-1 rounded-full ${s>0?"bg-green-500/30 text-green-200":"bg-red-500/30 text-red-200"}`,children:[s>0?"":""," ",Math.abs(s),"%"]})]}),a.jsx("div",{className:"text-2xl font-black text-white mb-2 leading-tight",children:Q(((f=t.statistics)==null?void 0:f.todayRechargeAmount)||0,n.currency)}),a.jsx("div",{className:"text-green-200 text-xs font-semibold",children:"Today Recharge Amount"})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-teal-500 via-cyan-600 to-blue-700 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-cyan-500/50 transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsx("div",{className:"text-3xl",children:""})}),a.jsx("div",{className:"text-2xl font-black text-white mb-2 leading-tight",children:Q(((m=t.statistics)==null?void 0:m.yesterdayRechargeAmount)||0,n.currency)}),a.jsx("div",{className:"text-teal-200 text-xs font-semibold",children:"Yesterday Recharge Amount"})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500 via-red-600 to-pink-700 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-orange-500/50 transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),a.jsxs("div",{className:"relative z-10",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsx("div",{className:"text-3xl",children:""}),i!==0&&a.jsxs("div",{className:`text-xs font-bold px-2 py-1 rounded-full ${i>0?"bg-green-500/30 text-green-200":"bg-red-500/30 text-red-200"}`,children:[i>0?"":""," ",Math.abs(i),"%"]})]}),a.jsx("div",{className:"text-2xl font-black text-white mb-2 leading-tight",children:Q(((v=t.statistics)==null?void 0:v.currentMonthRechargeAmount)||0,n.currency)}),a.jsx("div",{className:"text-orange-200 text-xs font-semibold",children:"Current Month Recharge"})]})]}),a.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500 via-pink-600 to-rose-700 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-pink-500/50 transition-all duration-300 overflow-hidden",children:[a.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),a.jsxs("div",{className:"relative z-10",children:[a.jsx("div",{className:"flex items-center justify-between mb-3",children:a.jsx("div",{className:"text-3xl",children:""})}),a.jsx("div",{className:"text-2xl font-black text-white mb-2 leading-tight",children:Q(((y=t.statistics)==null?void 0:y.lastMonthRechargeAmount)||0,n.currency)}),a.jsx("div",{className:"text-purple-200 text-xs font-semibold",children:"Last Month Recharge"})]})]})]})]}),a.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-md rounded-3xl p-6 shadow-xl border border-white/10",children:[a.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[a.jsx("span",{className:"text-2xl",children:""}),"Quick Insights"]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[a.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Member Growth"}),a.jsxs("div",{className:`text-lg font-bold ${r>0?"text-green-400":r<0?"text-red-400":"text-gray-400"}`,children:[r>0?"+":"",r,"%"]})]}),a.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[a.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Recharge Growth"}),a.jsxs("div",{className:`text-lg font-bold ${s>0?"text-green-400":s<0?"text-red-400":"text-gray-400"}`,children:[s>0?"+":"",s,"%"]})]})]})]})]})]})},U6=()=>{const{settings:t,loading:e}=cn(),n=s=>s?s.replace(/[^\d+]/g,""):"",r=()=>{const s=n(t.supportNumber);if(!s){alert("Support number is not configured. Please contact admin.");return}const i=encodeURIComponent("Hello! I need support.");window.open(`https://wa.me/${s}?text=${i}`,"_blank")};return a.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 pb-6",children:[a.jsxs("div",{className:"relative bg-gradient-to-r from-primary to-accent p-6 text-white mb-6 rounded-b-3xl shadow-lg",children:[a.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-b-3xl"}),a.jsx("div",{className:"relative z-10",children:a.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[a.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-full",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold",children:"Online Support"}),a.jsx("p",{className:"text-white/90 text-sm",children:"We're here to help you 24/7"})]})]})})]}),a.jsxs("div",{className:"px-4 space-y-6",children:[a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0 bg-gradient-to-br from-blue-500 to-purple-500 p-3 rounded-xl",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-2",children:"Need Help?"}),a.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Our customer support team is ready to assist you with any questions or concerns. Contact us through WhatsApp for instant support and quick responses."})]})]})}),a.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 shadow-2xl text-white transform hover:scale-[1.02] transition-transform duration-300",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-full",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-xl font-bold",children:"WhatsApp Support"}),a.jsx("p",{className:"text-white/90 text-sm",children:"Tap to chat with us instantly"})]})]})}),e?a.jsx("div",{className:"flex items-center justify-center py-4",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"})}):t.supportNumber?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 mb-4",children:[a.jsx("p",{className:"text-sm text-white/80 mb-1",children:"Support Number"}),a.jsx("p",{className:"text-xl font-bold",children:t.supportNumber})]}),a.jsxs("button",{onClick:r,className:"w-full bg-white text-green-600 font-bold py-4 rounded-xl hover:bg-gray-100 transition-colors duration-200 flex items-center justify-center gap-2 shadow-lg",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),a.jsx("span",{children:"Open WhatsApp"})]})]}):a.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 text-center",children:a.jsx("p",{className:"text-white/90",children:"Support number is not configured yet. Please contact administrator."})})]}),a.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[a.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Support Information"]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-xl",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"24/7 Availability"}),a.jsx("p",{className:"text-gray-600 text-xs",children:"Our support team is available around the clock"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-xl",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"Quick Response"}),a.jsx("p",{className:"text-gray-600 text-xs",children:"Get instant help through WhatsApp messaging"})]})]}),a.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-xl",children:[a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"Secure Communication"}),a.jsx("p",{className:"text-gray-600 text-xs",children:"Your conversations are encrypted and private"})]})]})]})]})]})]})},$6=()=>{const t=ln(),e=Pn(),n=ys(),{isAuthenticated:r,loading:s,error:i}=He(w=>w.auth),[o,u]=R.useState({phone:"",password:""}),[c,d]=R.useState(!1),[h,f]=R.useState({});R.useEffect(()=>{var w,A;if(r){const _=((A=(w=e.state)==null?void 0:w.from)==null?void 0:A.pathname)||"/";t(_,{replace:!0})}},[r,t,e]),R.useEffect(()=>()=>{n(vu())},[n]);const m=w=>{const{name:A,value:_}=w.target;u(b=>({...b,[A]:_})),h[A]&&f(b=>({...b,[A]:""})),i&&n(vu())},v=()=>{const w={};return o.phone.trim()?/^[0-9]{10,15}$/.test(o.phone.replace(/\s+/g,""))||(w.phone="Please enter a valid phone number (10-15 digits)"):w.phone="Phone number is required",o.password?o.password.length<6&&(w.password="Password must be at least 6 characters"):w.password="Password is required",f(w),Object.keys(w).length===0},y=async w=>{var A,_;if(w.preventDefault(),v())try{if((await n(yc({identifier:o.phone.trim(),password:o.password,loginType:"phone"})).unwrap()).user.role==="admin")t("/admin",{replace:!0});else{const S=((_=(A=e.state)==null?void 0:A.from)==null?void 0:_.pathname)||"/";t(S,{replace:!0})}}catch(b){console.error("Login failed:",b)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 px-4 py-8",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-primary to-accent rounded-2xl shadow-lg mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Sign in to your account to continue"})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[a.jsxs("form",{onSubmit:y,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:o.phone,onChange:m,placeholder:"Enter your phone number",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${h.phone?"border-red-500":"border-gray-300"}`})]}),h.phone&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.phone})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),a.jsx("input",{type:c?"text":"password",id:"password",name:"password",value:o.password,onChange:m,placeholder:"Enter your password",className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${h.password?"border-red-500":"border-gray-300"}`}),a.jsx("button",{type:"button",onClick:()=>d(!c),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:c?a.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[a.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),a.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):a.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[a.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.906 1.28L3.707 2.293zM14.95 6.05a3 3 0 014.242 4.242L14.95 6.05zm-4.95 4.95l-4.242-4.242a3 3 0 014.242 4.242L10 11z",clipRule:"evenodd"}),a.jsx("path",{d:"M12.316 13.757l-1.415-1.415a3 3 0 01-4.242-4.242L3.05 6.05a10 10 0 00-.542 3.95c0 4.478 2.943 8.268 7 9.542a9.98 9.98 0 003.808-.795z"})]})})]}),h.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password})]}),a.jsx("div",{className:"flex items-center justify-end",children:a.jsx("button",{type:"button",onClick:()=>alert("Forgot password feature coming soon"),className:"text-sm text-primary hover:text-accent transition-colors",children:"Forgot password?"})}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:i}),a.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary to-accent text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:s?"Signing In...":"Sign In"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",a.jsx(Ma,{to:"/register",className:"text-primary font-semibold hover:text-accent transition-colors",children:"Sign Up"})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs(Ma,{to:"/",className:"text-sm text-gray-600 hover:text-primary transition-colors inline-flex items-center gap-1",children:[a.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]})})]})})},z6=()=>{const t=ln(),e=ys(),[n]=l4(),{isAuthenticated:r,loading:s,error:i}=He(L=>L.auth),{settings:o}=cn(),[u,c]=R.useState("nid"),[d,h]=R.useState({name:"",phone:"",password:"",nid:"",passport:""}),[f,m]=R.useState(!1),[v,y]=R.useState({}),[w,A]=R.useState("");R.useState(""),R.useEffect(()=>{const L=n.get("ref");L&&A(L)},[n]),R.useEffect(()=>{r&&t("/",{replace:!0})},[r,t]),R.useEffect(()=>()=>{e(vu())},[e]);const _=L=>{const{name:F,value:I}=L.target;h(E=>({...E,[F]:I})),v[F]&&y(E=>({...E,[F]:""})),i&&e(vu())},b=L=>{const F=L.target.value;c(F),F==="nid"?(h(I=>({...I,passport:""})),y(I=>({...I,passport:"",idNumber:""}))):(h(I=>({...I,nid:""})),y(I=>({...I,nid:"",idNumber:""})))},S=()=>{const L={};return d.name.trim()?d.name.trim().length<2&&(L.name="Name must be at least 2 characters"):L.name="Name is required",d.phone.trim()?/^[0-9]{10,15}$/.test(d.phone.replace(/\s+/g,""))||(L.phone="Please enter a valid phone number"):L.phone="Phone number is required",d.password?d.password.length<6&&(L.password="Password must be at least 6 characters"):L.password="Password is required",(u==="nid"?d.nid:d.passport).trim()||(L.idNumber=`${u==="nid"?"NID":"Passport"} is required`),y(L),Object.keys(L).length===0},P=async L=>{if(L.preventDefault(),S())try{await e(vc({name:d.name,phone:d.phone,password:d.password,nid:d.nid||null,passport:d.passport||null,referralCode:w||null})).unwrap(),t("/",{replace:!0})}catch(F){console.error("Registration failed:",F)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 px-4 py-8",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-primary to-accent rounded-2xl shadow-lg mb-4",children:a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Create Account"}),a.jsx("p",{className:"text-gray-600 text-sm",children:"Sign up to get started"}),w&&a.jsx("div",{className:"mt-4 bg-gradient-to-r from-green-100 to-emerald-100 border-2 border-green-400 rounded-xl p-4",children:a.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[a.jsx("span",{className:"text-2xl",children:""}),a.jsxs("div",{children:[a.jsx("div",{className:"font-bold text-sm",children:"Welcome Bonus!"}),a.jsxs("div",{className:"text-xs",children:["You'll receive ",Q(o.referralBonus||200,o.currency)," when you sign up"]})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[a.jsxs("form",{onSubmit:P,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),a.jsx("input",{type:"text",id:"name",name:"name",value:d.name,onChange:_,placeholder:"Enter your full name",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${v.name?"border-red-500":"border-gray-300"}`})]}),v.name&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.name})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})}),a.jsx("input",{type:"tel",id:"phone",name:"phone",value:d.phone,onChange:_,placeholder:"Enter your phone number",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${v.phone?"border-red-500":"border-gray-300"}`})]}),v.phone&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.phone})]}),a.jsxs("div",{children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),a.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:d.password,onChange:_,placeholder:"Create a password",className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${v.password?"border-red-500":"border-gray-300"}`}),a.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:f?a.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[a.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),a.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):a.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[a.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.906 1.28L3.707 2.293zM14.95 6.05a3 3 0 014.242 4.242L14.95 6.05zm-4.95 4.95l-4.242-4.242a3 3 0 014.242 4.242L10 11z",clipRule:"evenodd"}),a.jsx("path",{d:"M12.316 13.757l-1.415-1.415a3 3 0 01-4.242-4.242L3.05 6.05a10 10 0 00-.542 3.95c0 4.478 2.943 8.268 7 9.542a9.98 9.98 0 003.808-.795z"})]})})]}),v.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.password})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"idType",className:"block text-sm font-medium text-gray-700 mb-2",children:["ID Type ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-10",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})}),a.jsxs("select",{id:"idType",name:"idType",value:u,onChange:b,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all appearance-none bg-white",children:[a.jsx("option",{value:"nid",children:"NID (National ID)"}),a.jsx("option",{value:"passport",children:"Passport Number"})]}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),a.jsxs("div",{children:[a.jsxs("label",{htmlFor:"idNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:[u==="nid"?"NID Number":"Passport Number"," ",a.jsx("span",{className:"text-red-500",children:"*"})]}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:u==="nid"?a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}):a.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"})})}),a.jsx("input",{type:"text",id:"idNumber",name:u,value:u==="nid"?d.nid:d.passport,onChange:_,placeholder:u==="nid"?"Enter your NID number":"Enter your Passport number",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${v.idNumber?"border-red-500":"border-gray-300"}`,required:!0})]}),v.idNumber&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.idNumber})]})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:i}),a.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary to-accent text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 mt-6 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:s?"Creating Account...":"Create Account"})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",a.jsx(Ma,{to:"/login",className:"text-primary font-semibold hover:text-accent transition-colors",children:"Sign In"})]})})]}),a.jsx("div",{className:"mt-6 text-center",children:a.jsxs(Ma,{to:"/",className:"text-sm text-gray-600 hover:text-primary transition-colors inline-flex items-center gap-1",children:[a.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]})})]})})},B6=()=>{const t=ln(),{user:e}=He(D=>D.auth),[n,r]=R.useState("members"),[s,i]=R.useState(!1),[o,u]=R.useState([]),[c,d]=R.useState([]),[h,f]=R.useState(!1),[m,v]=R.useState(null),[y,w]=R.useState({name:"",price:"",description:"",imageUrl:"",validateDate:"",earnAmount:"",totalEarning:""}),[A,_]=R.useState([]),[b,S]=R.useState([]),[P,L]=R.useState([]),{settings:F,loadSettings:I}=cn(),[E,j]=R.useState({bKashNumber:"",totalSystemCurrency:0,currency:"USD",referralBonus:200,supportNumber:""}),[x,C]=R.useState(!1);R.useEffect(()=>{F&&j(F)},[F]);const k=async()=>{i(!0);try{const D=await Ts.getAllMembers();D.success&&u(D.data.members||[])}catch(D){alert("Failed to load members: "+D.message)}finally{i(!1)}},T=async()=>{i(!0);try{const D=await Kn.getProducts();D.success&&d(D.data.products||[])}catch(D){alert("Failed to load products: "+D.message)}finally{i(!1)}},W=async()=>{i(!0);try{const D=await Ts.getAllTransactions();D.success&&_(D.data.transactions||[])}catch(D){alert("Failed to load transactions: "+D.message)}finally{i(!1)}},Z=async()=>{i(!0);try{const D=await Ts.getAllWithdrawals();D.success&&S(D.data.withdrawals||[])}catch(D){alert("Failed to load withdrawals: "+D.message)}finally{i(!1)}},ue=async()=>{i(!0);try{const D=await Ts.getAllPendingRecharges();D.success&&L(D.data.recharges||[])}catch(D){alert("Failed to load pending recharges: "+D.message)}finally{i(!1)}},le=async()=>{try{await I()}catch(D){console.error("Failed to load settings:",D)}},$=async()=>{i(!0);try{await Eg.updateSettings(null,E),alert("Settings saved successfully"),C(!1),await le()}catch(D){alert("Failed to save settings: "+D.message)}finally{i(!1)}},Y=async(D,_e)=>{const Xe=_e==="approved"?"approve":"reject";if(confirm(`Are you sure you want to ${Xe} this recharge request?`)){i(!0);try{(await Ts.updateRechargeStatus(null,D,_e)).success&&(await ue(),alert(`Recharge ${Xe}d successfully`))}catch(vn){alert("Failed to update recharge status: "+vn.message)}finally{i(!1)}}};R.useEffect(()=>{W(),Z(),le()},[]),R.useEffect(()=>{n==="members"&&k(),n==="products"&&T(),n==="transactions"&&W(),n==="withdrawals"&&Z(),n==="recharges"&&ue(),n==="settings"&&le()},[n]);const J=async(D,_e)=>{if(confirm(`Are you sure you want to ${_e?"deactivate":"activate"} this member?`)){i(!0);try{(await Ts.toggleMemberStatus(null,D,!_e)).success&&(await k(),alert(`Member ${_e?"deactivated":"activated"} successfully`))}catch(Xe){alert("Failed to update member: "+Xe.message)}finally{i(!1)}}},X=async D=>{D.preventDefault(),i(!0);try{m?(await Kn.updateProduct(null,m.id,{name:y.name,price:parseFloat(y.price),description:y.description,imageUrl:y.imageUrl,validateDate:y.validateDate?new Date(y.validateDate):null,earnAmount:y.earnAmount?parseFloat(y.earnAmount):0,totalEarning:y.totalEarning?parseFloat(y.totalEarning):0}),alert("Product updated successfully")):(await Kn.addProduct(null,{name:y.name,price:parseFloat(y.price),description:y.description,imageUrl:y.imageUrl,validateDate:y.validateDate?new Date(y.validateDate):null,earnAmount:y.earnAmount?parseFloat(y.earnAmount):0,totalEarning:y.totalEarning?parseFloat(y.totalEarning):0}),alert("Product added successfully")),f(!1),v(null),w({name:"",price:"",description:"",imageUrl:"",validateDate:"",earnAmount:"",totalEarning:""}),await T()}catch(_e){alert("Failed to save product: "+_e.message)}finally{i(!1)}},ye=async(D,_e)=>{const Xe=_e==="approved"?"approve":"reject";if(confirm(`Are you sure you want to ${Xe} this withdrawal?`)){i(!0);try{(await Ts.updateWithdrawalStatus(null,D,_e)).success&&(await Z(),alert(`Withdrawal ${Xe}d successfully`))}catch(vn){alert("Failed to update withdrawal: "+vn.message)}finally{i(!1)}}},te=D=>{if(!D)return"N/A";try{return D.toMillis?new Date(D.toMillis()).toLocaleString():new Date(D).toLocaleString()}catch{return"N/A"}},de=A.filter(D=>D.type==="recharge"&&(D.status==="approved"||D.status==="completed")).reduce((D,_e)=>{const Xe=typeof _e.amount=="number"?_e.amount:parseFloat(_e.amount)||0;return D+Xe},0),st=b.filter(D=>D.status==="approved").reduce((D,_e)=>{const Xe=typeof _e.amount=="number"?_e.amount:parseFloat(_e.amount)||0;return D+Xe},0),Je=de-st,Pt=()=>{const _e=new Date().getDate();return _e>=1&&_e<=5},Me={totalMembers:o.length,activeMembers:o.filter(D=>D.isActive).length,inactiveMembers:o.filter(D=>!D.isActive).length,totalProducts:c.length,pendingWithdrawals:b.filter(D=>D.status==="pending").length,totalTransactions:A.length,totalRecharge:de,totalWithdraw:st,totalBalance:Je,totalSystemCurrency:E.totalSystemCurrency||0},ri=async()=>{if(!Pt()){alert("Reset is only available from 1st to 5th of each month");return}if(confirm("Are you sure you want to reset all Balance, Recharge, and Withdraw data? This action cannot be undone!")){i(!0);try{const D=We(K,"wallets"),_e=await ht(D),Xe=QP(K);let vn=0;_e.forEach(xo=>{Xe.update(xo.ref,{balanceWallet:0,rechargeWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()}),vn++}),await Xe.commit(),alert(`Successfully reset ${vn} wallets. Please note: Transaction history remains but balances are reset.`),await W(),await Z()}catch(D){alert(`Failed to reset data: ${D.message}`)}finally{i(!1)}}};return a.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white",children:[a.jsx("header",{className:"bg-gray-900 border-b border-gray-700 py-4 px-4 sticky top-0 z-10",children:a.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold tracking-wider",children:"Admin Panel"}),a.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Welcome, ",(e==null?void 0:e.name)||"Admin"]})]}),a.jsx("button",{onClick:()=>t("/"),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md text-sm transition-colors",children:"Back to App"})]})}),a.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:[a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Members"}),a.jsx("div",{className:"text-2xl font-bold",children:Me.totalMembers})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Active Members"}),a.jsx("div",{className:"text-2xl font-bold text-green-400",children:Me.activeMembers})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Inactive Members"}),a.jsx("div",{className:"text-2xl font-bold text-red-400",children:Me.inactiveMembers})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Products"}),a.jsx("div",{className:"text-2xl font-bold",children:Me.totalProducts})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Pending Withdrawals"}),a.jsx("div",{className:"text-2xl font-bold text-orange-400",children:Me.pendingWithdrawals})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Transactions"}),a.jsx("div",{className:"text-2xl font-bold",children:Me.totalTransactions})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Recharge"}),a.jsx("div",{className:"text-2xl font-bold text-green-400",children:Q(Me.totalRecharge)})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Withdraw"}),a.jsx("div",{className:"text-2xl font-bold text-red-400",children:Q(Me.totalWithdraw)})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 border-yellow-500/50",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"System Currency"}),a.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:Q(Me.totalSystemCurrency)})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 border-blue-500/50",children:[a.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Balance"}),a.jsx("div",{className:`text-2xl font-bold ${Me.totalBalance>=0?"text-blue-400":"text-red-400"}`,children:Q(Me.totalBalance)}),a.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"Recharge - Withdraw"})]})]}),Pt()&&a.jsx("div",{className:"mb-6 bg-gradient-to-r from-red-900 to-orange-900 rounded-lg p-4 border-2 border-red-500/50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"font-bold text-red-200 mb-1",children:" Monthly Reset Available"}),a.jsx("p",{className:"text-xs text-red-300",children:"Reset all wallet balances (1st to 5th only)"})]}),a.jsx("button",{onClick:ri,disabled:s,className:"px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?"Resetting...":"Reset All Balances"})]})}),a.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 mb-6",children:[a.jsx("div",{className:"flex border-b border-gray-700 overflow-x-auto",children:[{id:"members",label:"Members"},{id:"products",label:"Products"},{id:"transactions",label:"All Transactions"},{id:"withdrawals",label:"Withdrawals"},{id:"recharges",label:"Pending Recharges"},{id:"settings",label:"Settings"}].map(D=>a.jsx("button",{onClick:()=>r(D.id),className:`px-6 py-3 text-sm font-medium transition-colors ${n===D.id?"text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white"}`,children:D.label},D.id))}),a.jsxs("div",{className:"p-6",children:[s&&a.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}),n==="members"&&!s&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Member Management"}),a.jsx("button",{onClick:k,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-sm",children:"Refresh"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3",children:"Name"}),a.jsx("th",{className:"p-3",children:"Phone"}),a.jsx("th",{className:"p-3",children:"Status"}),a.jsx("th",{className:"p-3",children:"Joined"}),a.jsx("th",{className:"p-3",children:"Actions"})]})}),a.jsxs("tbody",{children:[o.map(D=>a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsx("td",{className:"p-3",children:D.name}),a.jsx("td",{className:"p-3",children:D.phone}),a.jsx("td",{className:"p-3",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.isActive?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:D.isActive?"Active":"Inactive"})}),a.jsx("td",{className:"p-3 text-sm text-gray-400",children:te(D.createdAt)}),a.jsx("td",{className:"p-3",children:a.jsx("button",{onClick:()=>J(D.id,D.isActive),className:`px-3 py-1 rounded text-xs ${D.isActive?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:D.isActive?"Deactivate":"Activate"})})]},D.id)),o.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-6 text-center text-gray-400",children:"No members found"})})]})]})})]}),n==="products"&&!s&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Product Management"}),a.jsx("button",{onClick:()=>{v(null),w({name:"",price:"",description:"",imageUrl:"",validateDate:"",earnAmount:"",totalEarning:""}),f(!0)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-md text-sm",children:"Add Product"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[c.map(D=>a.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg border border-gray-600",children:[a.jsx("h3",{className:"font-semibold mb-2",children:D.name}),a.jsxs("p",{className:"text-green-400 text-lg font-bold mb-2",children:["$",D.price]}),D.description&&a.jsx("p",{className:"text-gray-400 text-sm mb-3",children:D.description}),a.jsx("button",{onClick:()=>{v(D);const _e=D.validateDate?D.validateDate.toDate?D.validateDate.toDate():new Date(D.validateDate):null,Xe=_e?_e.toISOString().split("T")[0]:"";w({name:D.name,price:D.price.toString(),description:D.description||"",imageUrl:D.imageUrl||"",validateDate:Xe,earnAmount:(D.earnAmount||0).toString(),totalEarning:(D.totalEarning||0).toString()}),f(!0)},className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm",children:"Edit"})]},D.id)),c.length===0&&a.jsx("div",{className:"col-span-full text-center py-8 text-gray-400",children:"No products found"})]})]}),n==="transactions"&&!s&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"All Transactions"}),a.jsx("button",{onClick:W,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-sm",children:"Refresh"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3",children:"User"}),a.jsx("th",{className:"p-3",children:"Type"}),a.jsx("th",{className:"p-3",children:"Amount"}),a.jsx("th",{className:"p-3",children:"Status"}),a.jsx("th",{className:"p-3",children:"Date"})]})}),a.jsxs("tbody",{children:[A.map(D=>a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsxs("td",{className:"p-3",children:[a.jsx("div",{children:D.userName}),a.jsx("div",{className:"text-xs text-gray-400",children:D.userPhone})]}),a.jsx("td",{className:"p-3",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.type==="recharge"?"bg-blue-900 text-blue-300":"bg-purple-900 text-purple-300"}`,children:D.type})}),a.jsx("td",{className:"p-3 font-semibold",children:Q(D.amount)}),a.jsx("td",{className:"p-3",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.status==="completed"?"bg-green-900 text-green-300":D.status==="pending"?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"}`,children:D.status})}),a.jsx("td",{className:"p-3 text-sm text-gray-400",children:te(D.createdAt)})]},D.id)),A.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-6 text-center text-gray-400",children:"No transactions found"})})]})]})})]}),n==="withdrawals"&&!s&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Withdrawal Management"}),a.jsx("button",{onClick:Z,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-sm",children:"Refresh"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3",children:"User"}),a.jsx("th",{className:"p-3",children:"Amount"}),a.jsx("th",{className:"p-3",children:"Payment Method"}),a.jsx("th",{className:"p-3",children:"Account Number"}),a.jsx("th",{className:"p-3",children:"Status"}),a.jsx("th",{className:"p-3",children:"Date"}),a.jsx("th",{className:"p-3",children:"Actions"})]})}),a.jsxs("tbody",{children:[b.map(D=>a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsxs("td",{className:"p-3",children:[a.jsx("div",{children:D.userName}),a.jsx("div",{className:"text-xs text-gray-400",children:D.userPhone})]}),a.jsx("td",{className:"p-3 font-semibold text-red-400",children:a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold",children:Q(D.amount)}),D.vatTax&&a.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["VAT (10%): ",Q(D.vatTax)," | Net: ",Q(D.netAmount||D.amount-D.vatTax)]})]})}),a.jsx("td",{className:"p-3",children:D.paymentMethod?a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${D.paymentMethod==="bikash"?"bg-green-900 text-green-300":"bg-orange-900 text-orange-300"}`,children:D.paymentMethod.toUpperCase()}):a.jsx("span",{className:"text-gray-500 text-xs",children:"N/A"})}),a.jsx("td",{className:"p-3",children:D.paymentNumber?a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-300",children:D.paymentNumber}),D.paymentName&&a.jsx("div",{className:"text-xs text-gray-500",children:D.paymentName})]}):a.jsx("span",{className:"text-gray-500 text-xs",children:"N/A"})}),a.jsx("td",{className:"p-3",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.status==="approved"?"bg-green-900 text-green-300":D.status==="pending"?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"}`,children:D.status})}),a.jsx("td",{className:"p-3 text-sm text-gray-400",children:te(D.createdAt)}),a.jsx("td",{className:"p-3",children:D.status==="pending"&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>ye(D.id,"approved"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-xs",children:"Approve"}),a.jsx("button",{onClick:()=>ye(D.id,"rejected"),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:"Reject"})]})})]},D.id)),b.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"7",className:"p-6 text-center text-gray-400",children:"No withdrawals found"})})]})]})})]}),n==="recharges"&&!s&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Pending Recharge Requests"}),a.jsx("button",{onClick:ue,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-sm",children:"Refresh"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full text-left",children:[a.jsx("thead",{className:"bg-gray-700",children:a.jsxs("tr",{children:[a.jsx("th",{className:"p-3",children:"User"}),a.jsx("th",{className:"p-3",children:"Amount"}),a.jsx("th",{className:"p-3",children:"Proof"}),a.jsx("th",{className:"p-3",children:"Date"}),a.jsx("th",{className:"p-3",children:"Actions"})]})}),a.jsxs("tbody",{children:[P.map(D=>a.jsxs("tr",{className:"border-b border-gray-700",children:[a.jsxs("td",{className:"p-3",children:[a.jsx("div",{children:D.userName}),a.jsx("div",{className:"text-xs text-gray-400",children:D.userPhone})]}),a.jsx("td",{className:"p-3 font-semibold text-green-400",children:Q(D.amount)}),a.jsx("td",{className:"p-3",children:D.proofImageUrl?a.jsx("a",{href:D.proofImageUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View Proof"}):a.jsx("span",{className:"text-gray-500 text-sm",children:"No proof"})}),a.jsx("td",{className:"p-3 text-sm text-gray-400",children:te(D.createdAt)}),a.jsx("td",{className:"p-3",children:a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>Y(D.id,"approved"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-xs",children:"Approve"}),a.jsx("button",{onClick:()=>Y(D.id,"rejected"),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:"Reject"})]})})]},D.id)),P.length===0&&a.jsx("tr",{children:a.jsx("td",{colSpan:"5",className:"p-6 text-center text-gray-400",children:"No pending recharge requests"})})]})]})})]}),n==="settings"&&!s&&a.jsxs("div",{children:[a.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"App Settings"}),a.jsx("button",{onClick:()=>C(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-md text-sm",children:"Edit Settings"})]}),a.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"bKash Number"}),a.jsx("p",{className:"text-white",children:E.bKashNumber||"Not set"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),a.jsxs("p",{className:"text-white",children:[E.currency||"USD"," (",fs(E.currency||"USD"),")"]})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total System Currency"}),a.jsx("p",{className:"text-white text-lg font-semibold",children:Q(E.totalSystemCurrency||0)})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Invitation Bonus"}),a.jsx("p",{className:"text-white text-lg font-semibold",children:Q(E.referralBonus||200,E.currency)}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Bonus amount new users get when signing up with referral code"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Support Number (WhatsApp)"}),a.jsx("p",{className:"text-white",children:E.supportNumber||"Not set"})]})]})]})]})]})]}),x&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Settings"}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"bKash Number"}),a.jsx("input",{type:"text",value:E.bKashNumber,onChange:D=>j({...E,bKashNumber:D.target.value}),placeholder:"Enter bKash number",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),a.jsxs("select",{value:E.currency||"USD",onChange:D=>j({...E,currency:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",children:[a.jsx("option",{value:"USD",children:"USD ($) - US Dollar"}),a.jsx("option",{value:"BDT",children:"BDT () - Bangladeshi Taka"}),a.jsx("option",{value:"MYR",children:"MYR (RM) - Malaysian Ringgit"})]}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select the currency for the system"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Total System Currency"}),a.jsx("input",{type:"number",step:"0.01",value:E.totalSystemCurrency||0,onChange:D=>j({...E,totalSystemCurrency:parseFloat(D.target.value)||0}),placeholder:"Enter total system currency",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Total amount of currency in the system"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Invitation Bonus"}),a.jsx("input",{type:"number",step:"0.01",value:E.referralBonus||200,onChange:D=>j({...E,referralBonus:parseFloat(D.target.value)||200}),placeholder:"Enter invitation bonus amount",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Bonus amount new users get when signing up with referral code"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Support Number (WhatsApp)"}),a.jsx("input",{type:"text",value:E.supportNumber||"",onChange:D=>j({...E,supportNumber:D.target.value}),placeholder:"Enter WhatsApp support number (e.g., +601112345678)",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Support number that users can click to contact via WhatsApp"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:$,disabled:s,className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 rounded disabled:opacity-50",children:"Save Settings"}),a.jsx("button",{onClick:()=>{C(!1),le()},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"})]})]})}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:a.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:m?"Edit Product":"Add Product"}),a.jsxs("form",{onSubmit:X,children:[a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Name"}),a.jsx("input",{type:"text",value:y.name,onChange:D=>w({...y,name:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",required:!0})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price"}),a.jsx("input",{type:"number",step:"0.01",value:y.price,onChange:D=>w({...y,price:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",required:!0})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),a.jsx("textarea",{value:y.description,onChange:D=>w({...y,description:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",rows:"3"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Image URL"}),a.jsx("input",{type:"url",value:y.imageUrl,onChange:D=>w({...y,imageUrl:D.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Validation Date (Product Expiry)"}),a.jsx("input",{type:"date",value:y.validateDate,onChange:D=>w({...y,validateDate:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",required:!0}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Product will expire after this date"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Earn Amount (Daily)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:y.earnAmount,onChange:D=>w({...y,earnAmount:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",required:!0}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Amount user can earn daily from this product"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Total Earning (Maximum)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",value:y.totalEarning,onChange:D=>w({...y,totalEarning:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),a.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Maximum total amount user can earn from this product (0 = unlimited)"})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 rounded",disabled:s,children:[m?"Update":"Add"," Product"]}),a.jsx("button",{type:"button",onClick:()=>{f(!1),v(null),w({name:"",price:"",description:"",imageUrl:"",validateDate:"",earnAmount:"",totalEarning:""})},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"})]})]})]})})]})},W6=({children:t})=>{const{isAuthenticated:e,user:n}=He(i=>i.auth),r=Pn();return e?(n==null?void 0:n.role)==="admin"||(n==null?void 0:n.isAdmin)===!0?t:a.jsx(Kc,{to:"/",replace:!0}):a.jsx(Kc,{to:"/login",state:{from:r},replace:!0})},H6=t=>btoa(t),q6=async()=>{try{const t=We(K,"users");return{success:!0,message:"Firebase connection successful",userCount:(await ht(t)).size}}catch(t){return{success:!1,message:`Connection failed: ${t.message}`,error:t}}},G6=async(t={})=>{const{name:e="Admin User",phone:n="1234567890",password:r="admin123",nid:s="ADMIN001"}=t;try{const i=We(K,"users"),o=Lt(i,Ot("phone","==",n)),u=await ht(o);if(!u.empty)return{success:!0,message:"Admin user already exists",isNew:!1,userId:u.docs[0].id,credentials:{phone:n,password:r}};const c=H6(r),d=ie(We(K,"users"));await sr(d,{name:e,phone:n,password:c,nid:s,role:"admin",isActive:!0,createdAt:re(),lastLogin:null});const h=d.id;return await sr(ie(K,"wallets",h),{userId:h,rechargeWallet:0,balanceWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()}),{success:!0,message:"Admin user seeded successfully",isNew:!0,userId:h,credentials:{phone:n,password:r}}}catch(i){return{success:!1,message:`Failed to seed admin: ${i.message}`,error:i}}},K6=()=>{const[t,e]=R.useState(null),[n,r]=R.useState(null),[s,i]=R.useState(!1),[o,u]=R.useState({name:"Admin User",phone:"1234567890",password:"admin123",nid:"ADMIN001"});R.useEffect(()=>{c()},[]);const c=async()=>{i(!0);const h=await q6();e(h),i(!1)},d=async()=>{i(!0);const h=await G6(o);r(h),i(!1)};return a.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:a.jsxs("div",{className:"max-w-2xl mx-auto",children:[a.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Firebase Admin Seeding"}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6 border border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Connection Test"}),a.jsx("button",{onClick:c,disabled:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded disabled:opacity-50 mb-4",children:"Test Firebase Connection"}),t&&a.jsxs("div",{className:`p-4 rounded ${t.success?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:[a.jsx("p",{className:"font-semibold",children:t.message}),t.userCount!==void 0&&a.jsxs("p",{className:"text-sm mt-2",children:["Users in database: ",t.userCount]}),t.error&&a.jsxs("p",{className:"text-sm mt-2",children:["Error: ",t.error.message]})]})]}),a.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[a.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Seed Admin User"}),a.jsxs("div",{className:"space-y-4 mb-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name"}),a.jsx("input",{type:"text",value:o.name,onChange:h=>u({...o,name:h.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),a.jsx("input",{type:"text",value:o.phone,onChange:h=>u({...o,phone:h.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),a.jsx("input",{type:"password",value:o.password,onChange:h=>u({...o,password:h.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium mb-2",children:"NID"}),a.jsx("input",{type:"text",value:o.nid,onChange:h=>u({...o,nid:h.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]})]}),a.jsx("button",{onClick:d,disabled:s||!(t!=null&&t.success),className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Seeding...":"Seed Admin User"}),n&&a.jsxs("div",{className:`mt-4 p-4 rounded ${n.success?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:[a.jsx("p",{className:"font-semibold",children:n.message}),n.credentials&&a.jsxs("div",{className:"mt-2 text-sm",children:[a.jsx("p",{children:"Login credentials:"}),a.jsxs("p",{children:["Phone: ",n.credentials.phone]}),a.jsxs("p",{children:["Password: ",n.credentials.password]})]})]})]}),a.jsxs("div",{className:"mt-6 p-4 bg-blue-900 rounded text-blue-200 text-sm",children:[a.jsx("p",{className:"font-semibold mb-2",children:"Instructions:"}),a.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[a.jsx("li",{children:"First, test the Firebase connection"}),a.jsx("li",{children:"If connection is successful, fill in admin details"}),a.jsx("li",{children:'Click "Seed Admin User" to create the admin account'}),a.jsx("li",{children:"Use the credentials to login as admin"}),a.jsx("li",{children:"Remove this component from your app after seeding"})]})]})]})})},Q6=()=>{const t=ys(),e=ln(),n=Pn(),{isAuthenticated:r,user:s}=He(i=>i.auth);return R.useEffect(()=>{(async()=>{if(r&&s&&!["/login","/register"].includes(n.pathname))try{const o=await be(ie(K,"users",s.id));if(o.exists()){const u=o.data();u.role!=="admin"&&!u.isActive&&(await t(Fs()).unwrap(),e("/login",{replace:!0}))}else await t(Fs()).unwrap(),e("/login",{replace:!0})}catch(o){console.error("Error checking user status:",o),await t(Fs()).unwrap(),e("/login",{replace:!0})}})()},[r,s,t,e,n.pathname]),null},Y6=()=>a.jsxs(a.Fragment,{children:[a.jsx(Q6,{}),a.jsxs(YI,{children:[a.jsx(Ze,{path:"/login",element:a.jsx($6,{})}),a.jsx(Ze,{path:"/register",element:a.jsx(z6,{})}),a.jsx(Ze,{path:"/seed-admin",element:a.jsx(K6,{})}),a.jsx(Ze,{path:"/admin",element:a.jsx(W6,{children:a.jsx(B6,{})})}),a.jsxs(Ze,{path:"/",element:a.jsx(l6,{}),children:[a.jsx(Ze,{index:!0,element:a.jsx(Jt,{children:a.jsx(d6,{})})}),a.jsx(Ze,{path:"product",element:a.jsx(Jt,{children:a.jsx(v6,{})})}),a.jsx(Ze,{path:"cashback",element:a.jsx(Jt,{children:a.jsx(x6,{})})}),a.jsx(Ze,{path:"prize",element:a.jsx(Jt,{children:a.jsx(w6,{})})}),a.jsx(Ze,{path:"user",element:a.jsx(Jt,{children:a.jsx(N6,{})})}),a.jsx(Ze,{path:"recharge",element:a.jsx(Jt,{children:a.jsx(D6,{})})}),a.jsx(Ze,{path:"withdraw",element:a.jsx(Jt,{children:a.jsx(M6,{})})}),a.jsx(Ze,{path:"my-product",element:a.jsx(Jt,{children:a.jsx(L6,{})})}),a.jsx(Ze,{path:"invitation",element:a.jsx(Jt,{children:a.jsx(O6,{})})}),a.jsx(Ze,{path:"app-download",element:a.jsx(Jt,{children:a.jsx(V6,{})})}),a.jsx(Ze,{path:"redeem-bonus",element:a.jsx(Jt,{children:a.jsx(RedeemBonus,{})})}),a.jsx(Ze,{path:"my-teams",element:a.jsx(Jt,{children:a.jsx(F6,{})})}),a.jsx(Ze,{path:"online",element:a.jsx(Jt,{children:a.jsx(U6,{})})}),a.jsx(Ze,{path:"*",element:a.jsx(Kc,{to:"/",replace:!0})})]})]})]});const J6=$4({reducer:{auth:t6,user:y6,wallet:m6,team:E6}});$h.createRoot(document.getElementById("root")).render(a.jsx(qe.StrictMode,{children:a.jsx(eI,{store:J6,children:a.jsx(s4,{children:a.jsx(u6,{children:a.jsx(Y6,{})})})})}));
