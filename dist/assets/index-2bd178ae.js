function GN(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();function KN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var zx={exports:{}},Tu={},Bx={exports:{}},ye={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Za=Symbol.for("react.element"),QN=Symbol.for("react.portal"),YN=Symbol.for("react.fragment"),JN=Symbol.for("react.strict_mode"),XN=Symbol.for("react.profiler"),ZN=Symbol.for("react.provider"),eE=Symbol.for("react.context"),tE=Symbol.for("react.forward_ref"),rE=Symbol.for("react.suspense"),nE=Symbol.for("react.memo"),sE=Symbol.for("react.lazy"),Tg=Symbol.iterator;function iE(t){return t===null||typeof t!="object"?null:(t=Tg&&t[Tg]||t["@@iterator"],typeof t=="function"?t:null)}var $x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Wx=Object.assign,Hx={};function co(t,e,r){this.props=t,this.context=e,this.refs=Hx,this.updater=r||$x}co.prototype.isReactComponent={};co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qx(){}qx.prototype=co.prototype;function Tm(t,e,r){this.props=t,this.context=e,this.refs=Hx,this.updater=r||$x}var Im=Tm.prototype=new qx;Im.constructor=Tm;Wx(Im,co.prototype);Im.isPureReactComponent=!0;var Ig=Array.isArray,Gx=Object.prototype.hasOwnProperty,Cm={current:null},Kx={key:!0,ref:!0,__self:!0,__source:!0};function Qx(t,e,r){var n,s={},i=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(i=""+e.key),e)Gx.call(e,n)&&!Kx.hasOwnProperty(n)&&(s[n]=e[n]);var l=arguments.length-2;if(l===1)s.children=r;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)s[n]===void 0&&(s[n]=l[n]);return{$$typeof:Za,type:t,key:i,ref:a,props:s,_owner:Cm.current}}function oE(t,e){return{$$typeof:Za,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function km(t){return typeof t=="object"&&t!==null&&t.$$typeof===Za}function aE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Cg=/\/+/g;function Zd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?aE(""+t.key):e.toString(36)}function tc(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var a=!1;if(t===null)a=!0;else switch(i){case"string":case"number":a=!0;break;case"object":switch(t.$$typeof){case Za:case QN:a=!0}}if(a)return a=t,s=s(a),t=n===""?"."+Zd(a,0):n,Ig(s)?(r="",t!=null&&(r=t.replace(Cg,"$&/")+"/"),tc(s,e,r,"",function(d){return d})):s!=null&&(km(s)&&(s=oE(s,r+(!s.key||a&&a.key===s.key?"":(""+s.key).replace(Cg,"$&/")+"/")+t)),e.push(s)),1;if(a=0,n=n===""?".":n+":",Ig(t))for(var l=0;l<t.length;l++){i=t[l];var u=n+Zd(i,l);a+=tc(i,e,r,u,s)}else if(u=iE(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=n+Zd(i,l++),a+=tc(i,e,r,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function Pl(t,e,r){if(t==null)return t;var n=[],s=0;return tc(t,n,"","",function(i){return e.call(r,i,s++)}),n}function lE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Bt={current:null},rc={transition:null},cE={ReactCurrentDispatcher:Bt,ReactCurrentBatchConfig:rc,ReactCurrentOwner:Cm};function Yx(){throw Error("act(...) is not supported in production builds of React.")}ye.Children={map:Pl,forEach:function(t,e,r){Pl(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return Pl(t,function(){e++}),e},toArray:function(t){return Pl(t,function(e){return e})||[]},only:function(t){if(!km(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ye.Component=co;ye.Fragment=YN;ye.Profiler=XN;ye.PureComponent=Tm;ye.StrictMode=JN;ye.Suspense=rE;ye.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cE;ye.act=Yx;ye.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=Wx({},t.props),s=t.key,i=t.ref,a=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,a=Cm.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Gx.call(e,u)&&!Kx.hasOwnProperty(u)&&(n[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)n.children=r;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Za,type:t.type,key:s,ref:i,props:n,_owner:a}};ye.createContext=function(t){return t={$$typeof:eE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:ZN,_context:t},t.Consumer=t};ye.createElement=Qx;ye.createFactory=function(t){var e=Qx.bind(null,t);return e.type=t,e};ye.createRef=function(){return{current:null}};ye.forwardRef=function(t){return{$$typeof:tE,render:t}};ye.isValidElement=km;ye.lazy=function(t){return{$$typeof:sE,_payload:{_status:-1,_result:t},_init:lE}};ye.memo=function(t,e){return{$$typeof:nE,type:t,compare:e===void 0?null:e}};ye.startTransition=function(t){var e=rc.transition;rc.transition={};try{t()}finally{rc.transition=e}};ye.unstable_act=Yx;ye.useCallback=function(t,e){return Bt.current.useCallback(t,e)};ye.useContext=function(t){return Bt.current.useContext(t)};ye.useDebugValue=function(){};ye.useDeferredValue=function(t){return Bt.current.useDeferredValue(t)};ye.useEffect=function(t,e){return Bt.current.useEffect(t,e)};ye.useId=function(){return Bt.current.useId()};ye.useImperativeHandle=function(t,e,r){return Bt.current.useImperativeHandle(t,e,r)};ye.useInsertionEffect=function(t,e){return Bt.current.useInsertionEffect(t,e)};ye.useLayoutEffect=function(t,e){return Bt.current.useLayoutEffect(t,e)};ye.useMemo=function(t,e){return Bt.current.useMemo(t,e)};ye.useReducer=function(t,e,r){return Bt.current.useReducer(t,e,r)};ye.useRef=function(t){return Bt.current.useRef(t)};ye.useState=function(t){return Bt.current.useState(t)};ye.useSyncExternalStore=function(t,e,r){return Bt.current.useSyncExternalStore(t,e,r)};ye.useTransition=function(){return Bt.current.useTransition()};ye.version="18.3.1";Bx.exports=ye;var R=Bx.exports;const Xe=KN(R),uE=GN({__proto__:null,default:Xe},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dE=R,hE=Symbol.for("react.element"),fE=Symbol.for("react.fragment"),mE=Object.prototype.hasOwnProperty,pE=dE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,gE={key:!0,ref:!0,__self:!0,__source:!0};function Jx(t,e,r){var n,s={},i=null,a=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)mE.call(e,n)&&!gE.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:hE,type:t,key:i,ref:a,props:s,_owner:pE.current}}Tu.Fragment=fE;Tu.jsx=Jx;Tu.jsxs=Jx;zx.exports=Tu;var o=zx.exports,Qh={},Xx={exports:{}},ar={},Zx={exports:{}},e1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Y){var te=z.length;z.push(Y);e:for(;0<te;){var X=te-1>>>1,J=z[X];if(0<s(J,Y))z[X]=Y,z[te]=J,te=X;else break e}}function r(z){return z.length===0?null:z[0]}function n(z){if(z.length===0)return null;var Y=z[0],te=z.pop();if(te!==Y){z[0]=te;e:for(var X=0,J=z.length,se=J>>>1;X<se;){var de=2*(X+1)-1,K=z[de],ie=de+1,ve=z[ie];if(0>s(K,te))ie<J&&0>s(ve,K)?(z[X]=ve,z[ie]=te,X=ie):(z[X]=K,z[de]=te,X=de);else if(ie<J&&0>s(ve,te))z[X]=ve,z[ie]=te,X=ie;else break e}}return Y}function s(z,Y){var te=z.sortIndex-Y.sortIndex;return te!==0?te:z.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var u=[],d=[],h=1,f=null,m=3,v=!1,x=!1,y=!1,j=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(z){for(var Y=r(d);Y!==null;){if(Y.callback===null)n(d);else if(Y.startTime<=z)n(d),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=r(d)}}function A(z){if(y=!1,S(z),!x)if(r(u)!==null)x=!0,ue(L);else{var Y=r(d);Y!==null&&oe(A,Y.startTime-z)}}function L(z,Y){x=!1,y&&(y=!1,N(b),b=-1),v=!0;var te=m;try{for(S(Y),f=r(u);f!==null&&(!(f.expirationTime>Y)||z&&!k());){var X=f.callback;if(typeof X=="function"){f.callback=null,m=f.priorityLevel;var J=X(f.expirationTime<=Y);Y=t.unstable_now(),typeof J=="function"?f.callback=J:f===r(u)&&n(u),S(Y)}else n(u);f=r(u)}if(f!==null)var se=!0;else{var de=r(d);de!==null&&oe(A,de.startTime-Y),se=!1}return se}finally{f=null,m=te,v=!1}}var O=!1,T=null,b=-1,C=5,w=-1;function k(){return!(t.unstable_now()-w<C)}function P(){if(T!==null){var z=t.unstable_now();w=z;var Y=!0;try{Y=T(!0,z)}finally{Y?I():(O=!1,T=null)}}else O=!1}var I;if(typeof _=="function")I=function(){_(P)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,H=$.port2;$.port1.onmessage=P,I=function(){H.postMessage(null)}}else I=function(){j(P,0)};function ue(z){T=z,O||(O=!0,I())}function oe(z,Y){b=j(function(){z(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){x||v||(x=!0,ue(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return r(u)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var te=m;m=Y;try{return z()}finally{m=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Y){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var te=m;m=z;try{return Y()}finally{m=te}},t.unstable_scheduleCallback=function(z,Y,te){var X=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?X+te:X):te=X,z){case 1:var J=-1;break;case 2:J=250;break;case 5:J=1073741823;break;case 4:J=1e4;break;default:J=5e3}return J=te+J,z={id:h++,callback:Y,priorityLevel:z,startTime:te,expirationTime:J,sortIndex:-1},te>X?(z.sortIndex=te,e(d,z),r(u)===null&&z===r(d)&&(y?(N(b),b=-1):y=!0,oe(A,te-X))):(z.sortIndex=J,e(u,z),x||v||(x=!0,ue(L))),z},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(z){var Y=m;return function(){var te=m;m=Y;try{return z.apply(this,arguments)}finally{m=te}}}})(e1);Zx.exports=e1;var yE=Zx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vE=R,ir=yE;function B(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var t1=new Set,ba={};function si(t,e){Hi(t,e),Hi(t+"Capture",e)}function Hi(t,e){for(ba[t]=e,t=0;t<e.length;t++)t1.add(e[t])}var un=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yh=Object.prototype.hasOwnProperty,xE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,kg={},Ag={};function wE(t){return Yh.call(Ag,t)?!0:Yh.call(kg,t)?!1:xE.test(t)?Ag[t]=!0:(kg[t]=!0,!1)}function bE(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function _E(t,e,r,n){if(e===null||typeof e>"u"||bE(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function $t(t,e,r,n,s,i,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=a}var Et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Et[t]=new $t(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Et[e]=new $t(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Et[t]=new $t(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Et[t]=new $t(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Et[t]=new $t(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Et[t]=new $t(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Et[t]=new $t(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Et[t]=new $t(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Et[t]=new $t(t,5,!1,t.toLowerCase(),null,!1,!1)});var Am=/[\-:]([a-z])/g;function Pm(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Am,Pm);Et[e]=new $t(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Am,Pm);Et[e]=new $t(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Am,Pm);Et[e]=new $t(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Et[t]=new $t(t,1,!1,t.toLowerCase(),null,!1,!1)});Et.xlinkHref=new $t("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Et[t]=new $t(t,1,!1,t.toLowerCase(),null,!0,!0)});function Rm(t,e,r,n){var s=Et.hasOwnProperty(e)?Et[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(_E(e,r,s,n)&&(r=null),n||s===null?wE(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var bn=vE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Rl=Symbol.for("react.element"),yi=Symbol.for("react.portal"),vi=Symbol.for("react.fragment"),Dm=Symbol.for("react.strict_mode"),Jh=Symbol.for("react.profiler"),r1=Symbol.for("react.provider"),n1=Symbol.for("react.context"),Mm=Symbol.for("react.forward_ref"),Xh=Symbol.for("react.suspense"),Zh=Symbol.for("react.suspense_list"),Lm=Symbol.for("react.memo"),Pn=Symbol.for("react.lazy"),s1=Symbol.for("react.offscreen"),Pg=Symbol.iterator;function Uo(t){return t===null||typeof t!="object"?null:(t=Pg&&t[Pg]||t["@@iterator"],typeof t=="function"?t:null)}var Ge=Object.assign,eh;function Qo(t){if(eh===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);eh=e&&e[1]||""}return`
`+eh+t}var th=!1;function rh(t,e){if(!t||th)return"";th=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=n.stack.split(`
`),a=s.length-1,l=i.length-1;1<=a&&0<=l&&s[a]!==i[l];)l--;for(;1<=a&&0<=l;a--,l--)if(s[a]!==i[l]){if(a!==1||l!==1)do if(a--,l--,0>l||s[a]!==i[l]){var u=`
`+s[a].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=a&&0<=l);break}}}finally{th=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?Qo(t):""}function NE(t){switch(t.tag){case 5:return Qo(t.type);case 16:return Qo("Lazy");case 13:return Qo("Suspense");case 19:return Qo("SuspenseList");case 0:case 2:case 15:return t=rh(t.type,!1),t;case 11:return t=rh(t.type.render,!1),t;case 1:return t=rh(t.type,!0),t;default:return""}}function ef(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vi:return"Fragment";case yi:return"Portal";case Jh:return"Profiler";case Dm:return"StrictMode";case Xh:return"Suspense";case Zh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case n1:return(t.displayName||"Context")+".Consumer";case r1:return(t._context.displayName||"Context")+".Provider";case Mm:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Lm:return e=t.displayName||null,e!==null?e:ef(t.type)||"Memo";case Pn:e=t._payload,t=t._init;try{return ef(t(e))}catch{}}return null}function EE(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ef(e);case 8:return e===Dm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function us(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function i1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SE(t){var e=i1(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(a){n=""+a,i.call(this,a)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Dl(t){t._valueTracker||(t._valueTracker=SE(t))}function o1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=i1(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function kc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function tf(t,e){var r=e.checked;return Ge({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Rg(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=us(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function a1(t,e){e=e.checked,e!=null&&Rm(t,"checked",e,!1)}function rf(t,e){a1(t,e);var r=us(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nf(t,e.type,r):e.hasOwnProperty("defaultValue")&&nf(t,e.type,us(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Dg(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function nf(t,e,r){(e!=="number"||kc(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var Yo=Array.isArray;function Ai(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+us(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function sf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(B(91));return Ge({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Mg(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(B(92));if(Yo(r)){if(1<r.length)throw Error(B(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:us(r)}}function l1(t,e){var r=us(e.value),n=us(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Lg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function c1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function of(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?c1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ml,u1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ml=Ml||document.createElement("div"),Ml.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ml.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _a(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var sa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jE=["Webkit","ms","Moz","O"];Object.keys(sa).forEach(function(t){jE.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),sa[e]=sa[t]})});function d1(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||sa.hasOwnProperty(t)&&sa[t]?(""+e).trim():e+"px"}function h1(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=d1(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var TE=Ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function af(t,e){if(e){if(TE[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(B(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(B(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(B(61))}if(e.style!=null&&typeof e.style!="object")throw Error(B(62))}}function lf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var cf=null;function Vm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var uf=null,Pi=null,Ri=null;function Vg(t){if(t=rl(t)){if(typeof uf!="function")throw Error(B(280));var e=t.stateNode;e&&(e=Pu(e),uf(t.stateNode,t.type,e))}}function f1(t){Pi?Ri?Ri.push(t):Ri=[t]:Pi=t}function m1(){if(Pi){var t=Pi,e=Ri;if(Ri=Pi=null,Vg(t),e)for(t=0;t<e.length;t++)Vg(e[t])}}function p1(t,e){return t(e)}function g1(){}var nh=!1;function y1(t,e,r){if(nh)return t(e,r);nh=!0;try{return p1(t,e,r)}finally{nh=!1,(Pi!==null||Ri!==null)&&(g1(),m1())}}function Na(t,e){var r=t.stateNode;if(r===null)return null;var n=Pu(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(B(231,e,typeof r));return r}var df=!1;if(un)try{var zo={};Object.defineProperty(zo,"passive",{get:function(){df=!0}}),window.addEventListener("test",zo,zo),window.removeEventListener("test",zo,zo)}catch{df=!1}function IE(t,e,r,n,s,i,a,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(r,d)}catch(h){this.onError(h)}}var ia=!1,Ac=null,Pc=!1,hf=null,CE={onError:function(t){ia=!0,Ac=t}};function kE(t,e,r,n,s,i,a,l,u){ia=!1,Ac=null,IE.apply(CE,arguments)}function AE(t,e,r,n,s,i,a,l,u){if(kE.apply(this,arguments),ia){if(ia){var d=Ac;ia=!1,Ac=null}else throw Error(B(198));Pc||(Pc=!0,hf=d)}}function ii(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function v1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Og(t){if(ii(t)!==t)throw Error(B(188))}function PE(t){var e=t.alternate;if(!e){if(e=ii(t),e===null)throw Error(B(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Og(s),t;if(i===n)return Og(s),e;i=i.sibling}throw Error(B(188))}if(r.return!==n.return)r=s,n=i;else{for(var a=!1,l=s.child;l;){if(l===r){a=!0,r=s,n=i;break}if(l===n){a=!0,n=s,r=i;break}l=l.sibling}if(!a){for(l=i.child;l;){if(l===r){a=!0,r=i,n=s;break}if(l===n){a=!0,n=i,r=s;break}l=l.sibling}if(!a)throw Error(B(189))}}if(r.alternate!==n)throw Error(B(190))}if(r.tag!==3)throw Error(B(188));return r.stateNode.current===r?t:e}function x1(t){return t=PE(t),t!==null?w1(t):null}function w1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=w1(t);if(e!==null)return e;t=t.sibling}return null}var b1=ir.unstable_scheduleCallback,Fg=ir.unstable_cancelCallback,RE=ir.unstable_shouldYield,DE=ir.unstable_requestPaint,tt=ir.unstable_now,ME=ir.unstable_getCurrentPriorityLevel,Om=ir.unstable_ImmediatePriority,_1=ir.unstable_UserBlockingPriority,Rc=ir.unstable_NormalPriority,LE=ir.unstable_LowPriority,N1=ir.unstable_IdlePriority,Iu=null,Wr=null;function VE(t){if(Wr&&typeof Wr.onCommitFiberRoot=="function")try{Wr.onCommitFiberRoot(Iu,t,void 0,(t.current.flags&128)===128)}catch{}}var Ir=Math.clz32?Math.clz32:UE,OE=Math.log,FE=Math.LN2;function UE(t){return t>>>=0,t===0?32:31-(OE(t)/FE|0)|0}var Ll=64,Vl=4194304;function Jo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Dc(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,a=r&268435455;if(a!==0){var l=a&~s;l!==0?n=Jo(l):(i&=a,i!==0&&(n=Jo(i)))}else a=r&~s,a!==0?n=Jo(a):i!==0&&(n=Jo(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ir(e),s=1<<r,n|=t[r],e&=~s;return n}function zE(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BE(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var a=31-Ir(i),l=1<<a,u=s[a];u===-1?(!(l&r)||l&n)&&(s[a]=zE(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function ff(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E1(){var t=Ll;return Ll<<=1,!(Ll&4194240)&&(Ll=64),t}function sh(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function el(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ir(e),t[e]=r}function $E(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-Ir(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function Fm(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ir(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var Te=0;function S1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var j1,Um,T1,I1,C1,mf=!1,Ol=[],Gn=null,Kn=null,Qn=null,Ea=new Map,Sa=new Map,Mn=[],WE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ug(t,e){switch(t){case"focusin":case"focusout":Gn=null;break;case"dragenter":case"dragleave":Kn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":Ea.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sa.delete(e.pointerId)}}function Bo(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=rl(e),e!==null&&Um(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function HE(t,e,r,n,s){switch(e){case"focusin":return Gn=Bo(Gn,t,e,r,n,s),!0;case"dragenter":return Kn=Bo(Kn,t,e,r,n,s),!0;case"mouseover":return Qn=Bo(Qn,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Ea.set(i,Bo(Ea.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Sa.set(i,Bo(Sa.get(i)||null,t,e,r,n,s)),!0}return!1}function k1(t){var e=Vs(t.target);if(e!==null){var r=ii(e);if(r!==null){if(e=r.tag,e===13){if(e=v1(r),e!==null){t.blockedOn=e,C1(t.priority,function(){T1(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function nc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=pf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);cf=n,r.target.dispatchEvent(n),cf=null}else return e=rl(r),e!==null&&Um(e),t.blockedOn=r,!1;e.shift()}return!0}function zg(t,e,r){nc(t)&&r.delete(e)}function qE(){mf=!1,Gn!==null&&nc(Gn)&&(Gn=null),Kn!==null&&nc(Kn)&&(Kn=null),Qn!==null&&nc(Qn)&&(Qn=null),Ea.forEach(zg),Sa.forEach(zg)}function $o(t,e){t.blockedOn===e&&(t.blockedOn=null,mf||(mf=!0,ir.unstable_scheduleCallback(ir.unstable_NormalPriority,qE)))}function ja(t){function e(s){return $o(s,t)}if(0<Ol.length){$o(Ol[0],t);for(var r=1;r<Ol.length;r++){var n=Ol[r];n.blockedOn===t&&(n.blockedOn=null)}}for(Gn!==null&&$o(Gn,t),Kn!==null&&$o(Kn,t),Qn!==null&&$o(Qn,t),Ea.forEach(e),Sa.forEach(e),r=0;r<Mn.length;r++)n=Mn[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<Mn.length&&(r=Mn[0],r.blockedOn===null);)k1(r),r.blockedOn===null&&Mn.shift()}var Di=bn.ReactCurrentBatchConfig,Mc=!0;function GE(t,e,r,n){var s=Te,i=Di.transition;Di.transition=null;try{Te=1,zm(t,e,r,n)}finally{Te=s,Di.transition=i}}function KE(t,e,r,n){var s=Te,i=Di.transition;Di.transition=null;try{Te=4,zm(t,e,r,n)}finally{Te=s,Di.transition=i}}function zm(t,e,r,n){if(Mc){var s=pf(t,e,r,n);if(s===null)mh(t,e,n,Lc,r),Ug(t,n);else if(HE(s,t,e,r,n))n.stopPropagation();else if(Ug(t,n),e&4&&-1<WE.indexOf(t)){for(;s!==null;){var i=rl(s);if(i!==null&&j1(i),i=pf(t,e,r,n),i===null&&mh(t,e,n,Lc,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else mh(t,e,n,null,r)}}var Lc=null;function pf(t,e,r,n){if(Lc=null,t=Vm(n),t=Vs(t),t!==null)if(e=ii(t),e===null)t=null;else if(r=e.tag,r===13){if(t=v1(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Lc=t,null}function A1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ME()){case Om:return 1;case _1:return 4;case Rc:case LE:return 16;case N1:return 536870912;default:return 16}default:return 16}}var Bn=null,Bm=null,sc=null;function P1(){if(sc)return sc;var t,e=Bm,r=e.length,n,s="value"in Bn?Bn.value:Bn.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var a=r-t;for(n=1;n<=a&&e[r-n]===s[i-n];n++);return sc=s.slice(t,1<n?1-n:void 0)}function ic(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Fl(){return!0}function Bg(){return!1}function lr(t){function e(r,n,s,i,a){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(r=t[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Fl:Bg,this.isPropagationStopped=Bg,this}return Ge(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Fl)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Fl)},persist:function(){},isPersistent:Fl}),e}var uo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},$m=lr(uo),tl=Ge({},uo,{view:0,detail:0}),QE=lr(tl),ih,oh,Wo,Cu=Ge({},tl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wo&&(Wo&&t.type==="mousemove"?(ih=t.screenX-Wo.screenX,oh=t.screenY-Wo.screenY):oh=ih=0,Wo=t),ih)},movementY:function(t){return"movementY"in t?t.movementY:oh}}),$g=lr(Cu),YE=Ge({},Cu,{dataTransfer:0}),JE=lr(YE),XE=Ge({},tl,{relatedTarget:0}),ah=lr(XE),ZE=Ge({},uo,{animationName:0,elapsedTime:0,pseudoElement:0}),eS=lr(ZE),tS=Ge({},uo,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rS=lr(tS),nS=Ge({},uo,{data:0}),Wg=lr(nS),sS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},oS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=oS[t])?!!e[t]:!1}function Wm(){return aS}var lS=Ge({},tl,{key:function(t){if(t.key){var e=sS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ic(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wm,charCode:function(t){return t.type==="keypress"?ic(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ic(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cS=lr(lS),uS=Ge({},Cu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Hg=lr(uS),dS=Ge({},tl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wm}),hS=lr(dS),fS=Ge({},uo,{propertyName:0,elapsedTime:0,pseudoElement:0}),mS=lr(fS),pS=Ge({},Cu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),gS=lr(pS),yS=[9,13,27,32],Hm=un&&"CompositionEvent"in window,oa=null;un&&"documentMode"in document&&(oa=document.documentMode);var vS=un&&"TextEvent"in window&&!oa,R1=un&&(!Hm||oa&&8<oa&&11>=oa),qg=String.fromCharCode(32),Gg=!1;function D1(t,e){switch(t){case"keyup":return yS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function M1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xi=!1;function xS(t,e){switch(t){case"compositionend":return M1(e);case"keypress":return e.which!==32?null:(Gg=!0,qg);case"textInput":return t=e.data,t===qg&&Gg?null:t;default:return null}}function wS(t,e){if(xi)return t==="compositionend"||!Hm&&D1(t,e)?(t=P1(),sc=Bm=Bn=null,xi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return R1&&e.locale!=="ko"?null:e.data;default:return null}}var bS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!bS[t.type]:e==="textarea"}function L1(t,e,r,n){f1(n),e=Vc(e,"onChange"),0<e.length&&(r=new $m("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var aa=null,Ta=null;function _S(t){G1(t,0)}function ku(t){var e=_i(t);if(o1(e))return t}function NS(t,e){if(t==="change")return e}var V1=!1;if(un){var lh;if(un){var ch="oninput"in document;if(!ch){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),ch=typeof Qg.oninput=="function"}lh=ch}else lh=!1;V1=lh&&(!document.documentMode||9<document.documentMode)}function Yg(){aa&&(aa.detachEvent("onpropertychange",O1),Ta=aa=null)}function O1(t){if(t.propertyName==="value"&&ku(Ta)){var e=[];L1(e,Ta,t,Vm(t)),y1(_S,e)}}function ES(t,e,r){t==="focusin"?(Yg(),aa=e,Ta=r,aa.attachEvent("onpropertychange",O1)):t==="focusout"&&Yg()}function SS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ku(Ta)}function jS(t,e){if(t==="click")return ku(e)}function TS(t,e){if(t==="input"||t==="change")return ku(e)}function IS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Ar=typeof Object.is=="function"?Object.is:IS;function Ia(t,e){if(Ar(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!Yh.call(e,s)||!Ar(t[s],e[s]))return!1}return!0}function Jg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Xg(t,e){var r=Jg(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jg(r)}}function F1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?F1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function U1(){for(var t=window,e=kc();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=kc(t.document)}return e}function qm(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function CS(t){var e=U1(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&F1(r.ownerDocument.documentElement,r)){if(n!==null&&qm(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Xg(r,i);var a=Xg(r,n);s&&a&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==a.node||t.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var kS=un&&"documentMode"in document&&11>=document.documentMode,wi=null,gf=null,la=null,yf=!1;function Zg(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;yf||wi==null||wi!==kc(n)||(n=wi,"selectionStart"in n&&qm(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),la&&Ia(la,n)||(la=n,n=Vc(gf,"onSelect"),0<n.length&&(e=new $m("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=wi)))}function Ul(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var bi={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},uh={},z1={};un&&(z1=document.createElement("div").style,"AnimationEvent"in window||(delete bi.animationend.animation,delete bi.animationiteration.animation,delete bi.animationstart.animation),"TransitionEvent"in window||delete bi.transitionend.transition);function Au(t){if(uh[t])return uh[t];if(!bi[t])return t;var e=bi[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in z1)return uh[t]=e[r];return t}var B1=Au("animationend"),$1=Au("animationiteration"),W1=Au("animationstart"),H1=Au("transitionend"),q1=new Map,ey="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ws(t,e){q1.set(t,e),si(e,[t])}for(var dh=0;dh<ey.length;dh++){var hh=ey[dh],AS=hh.toLowerCase(),PS=hh[0].toUpperCase()+hh.slice(1);ws(AS,"on"+PS)}ws(B1,"onAnimationEnd");ws($1,"onAnimationIteration");ws(W1,"onAnimationStart");ws("dblclick","onDoubleClick");ws("focusin","onFocus");ws("focusout","onBlur");ws(H1,"onTransitionEnd");Hi("onMouseEnter",["mouseout","mouseover"]);Hi("onMouseLeave",["mouseout","mouseover"]);Hi("onPointerEnter",["pointerout","pointerover"]);Hi("onPointerLeave",["pointerout","pointerover"]);si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));si("onBeforeInput",["compositionend","keypress","textInput","paste"]);si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xo));function ty(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,AE(n,e,void 0,t),t.currentTarget=null}function G1(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var a=n.length-1;0<=a;a--){var l=n[a],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;ty(s,l,d),i=u}else for(a=0;a<n.length;a++){if(l=n[a],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;ty(s,l,d),i=u}}}if(Pc)throw t=hf,Pc=!1,hf=null,t}function Ve(t,e){var r=e[_f];r===void 0&&(r=e[_f]=new Set);var n=t+"__bubble";r.has(n)||(K1(e,t,2,!1),r.add(n))}function fh(t,e,r){var n=0;e&&(n|=4),K1(r,t,n,e)}var zl="_reactListening"+Math.random().toString(36).slice(2);function Ca(t){if(!t[zl]){t[zl]=!0,t1.forEach(function(r){r!=="selectionchange"&&(RS.has(r)||fh(r,!1,t),fh(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[zl]||(e[zl]=!0,fh("selectionchange",!1,e))}}function K1(t,e,r,n){switch(A1(e)){case 1:var s=GE;break;case 4:s=KE;break;default:s=zm}r=s.bind(null,e,r,t),s=void 0,!df||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function mh(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var l=n.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(a===4)for(a=n.return;a!==null;){var u=a.tag;if((u===3||u===4)&&(u=a.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;a=a.return}for(;l!==null;){if(a=Vs(l),a===null)return;if(u=a.tag,u===5||u===6){n=i=a;continue e}l=l.parentNode}}n=n.return}y1(function(){var d=i,h=Vm(r),f=[];e:{var m=q1.get(t);if(m!==void 0){var v=$m,x=t;switch(t){case"keypress":if(ic(r)===0)break e;case"keydown":case"keyup":v=cS;break;case"focusin":x="focus",v=ah;break;case"focusout":x="blur",v=ah;break;case"beforeblur":case"afterblur":v=ah;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=$g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=JE;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=hS;break;case B1:case $1:case W1:v=eS;break;case H1:v=mS;break;case"scroll":v=QE;break;case"wheel":v=gS;break;case"copy":case"cut":case"paste":v=rS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=Hg}var y=(e&4)!==0,j=!y&&t==="scroll",N=y?m!==null?m+"Capture":null:m;y=[];for(var _=d,S;_!==null;){S=_;var A=S.stateNode;if(S.tag===5&&A!==null&&(S=A,N!==null&&(A=Na(_,N),A!=null&&y.push(ka(_,A,S)))),j)break;_=_.return}0<y.length&&(m=new v(m,x,null,r,h),f.push({event:m,listeners:y}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",m&&r!==cf&&(x=r.relatedTarget||r.fromElement)&&(Vs(x)||x[dn]))break e;if((v||m)&&(m=h.window===h?h:(m=h.ownerDocument)?m.defaultView||m.parentWindow:window,v?(x=r.relatedTarget||r.toElement,v=d,x=x?Vs(x):null,x!==null&&(j=ii(x),x!==j||x.tag!==5&&x.tag!==6)&&(x=null)):(v=null,x=d),v!==x)){if(y=$g,A="onMouseLeave",N="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=Hg,A="onPointerLeave",N="onPointerEnter",_="pointer"),j=v==null?m:_i(v),S=x==null?m:_i(x),m=new y(A,_+"leave",v,r,h),m.target=j,m.relatedTarget=S,A=null,Vs(h)===d&&(y=new y(N,_+"enter",x,r,h),y.target=S,y.relatedTarget=j,A=y),j=A,v&&x)t:{for(y=v,N=x,_=0,S=y;S;S=hi(S))_++;for(S=0,A=N;A;A=hi(A))S++;for(;0<_-S;)y=hi(y),_--;for(;0<S-_;)N=hi(N),S--;for(;_--;){if(y===N||N!==null&&y===N.alternate)break t;y=hi(y),N=hi(N)}y=null}else y=null;v!==null&&ry(f,m,v,y,!1),x!==null&&j!==null&&ry(f,j,x,y,!0)}}e:{if(m=d?_i(d):window,v=m.nodeName&&m.nodeName.toLowerCase(),v==="select"||v==="input"&&m.type==="file")var L=NS;else if(Kg(m))if(V1)L=TS;else{L=SS;var O=ES}else(v=m.nodeName)&&v.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=jS);if(L&&(L=L(t,d))){L1(f,L,r,h);break e}O&&O(t,m,d),t==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&nf(m,"number",m.value)}switch(O=d?_i(d):window,t){case"focusin":(Kg(O)||O.contentEditable==="true")&&(wi=O,gf=d,la=null);break;case"focusout":la=gf=wi=null;break;case"mousedown":yf=!0;break;case"contextmenu":case"mouseup":case"dragend":yf=!1,Zg(f,r,h);break;case"selectionchange":if(kS)break;case"keydown":case"keyup":Zg(f,r,h)}var T;if(Hm)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else xi?D1(t,r)&&(b="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(b="onCompositionStart");b&&(R1&&r.locale!=="ko"&&(xi||b!=="onCompositionStart"?b==="onCompositionEnd"&&xi&&(T=P1()):(Bn=h,Bm="value"in Bn?Bn.value:Bn.textContent,xi=!0)),O=Vc(d,b),0<O.length&&(b=new Wg(b,t,null,r,h),f.push({event:b,listeners:O}),T?b.data=T:(T=M1(r),T!==null&&(b.data=T)))),(T=vS?xS(t,r):wS(t,r))&&(d=Vc(d,"onBeforeInput"),0<d.length&&(h=new Wg("onBeforeInput","beforeinput",null,r,h),f.push({event:h,listeners:d}),h.data=T))}G1(f,e)})}function ka(t,e,r){return{instance:t,listener:e,currentTarget:r}}function Vc(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Na(t,r),i!=null&&n.unshift(ka(t,i,s)),i=Na(t,e),i!=null&&n.push(ka(t,i,s))),t=t.return}return n}function hi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ry(t,e,r,n,s){for(var i=e._reactName,a=[];r!==null&&r!==n;){var l=r,u=l.alternate,d=l.stateNode;if(u!==null&&u===n)break;l.tag===5&&d!==null&&(l=d,s?(u=Na(r,i),u!=null&&a.unshift(ka(r,u,l))):s||(u=Na(r,i),u!=null&&a.push(ka(r,u,l)))),r=r.return}a.length!==0&&t.push({event:e,listeners:a})}var DS=/\r\n?/g,MS=/\u0000|\uFFFD/g;function ny(t){return(typeof t=="string"?t:""+t).replace(DS,`
`).replace(MS,"")}function Bl(t,e,r){if(e=ny(e),ny(t)!==e&&r)throw Error(B(425))}function Oc(){}var vf=null,xf=null;function wf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bf=typeof setTimeout=="function"?setTimeout:void 0,LS=typeof clearTimeout=="function"?clearTimeout:void 0,sy=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof sy<"u"?function(t){return sy.resolve(null).then(t).catch(OS)}:bf;function OS(t){setTimeout(function(){throw t})}function ph(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),ja(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);ja(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function iy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var ho=Math.random().toString(36).slice(2),Br="__reactFiber$"+ho,Aa="__reactProps$"+ho,dn="__reactContainer$"+ho,_f="__reactEvents$"+ho,FS="__reactListeners$"+ho,US="__reactHandles$"+ho;function Vs(t){var e=t[Br];if(e)return e;for(var r=t.parentNode;r;){if(e=r[dn]||r[Br]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=iy(t);t!==null;){if(r=t[Br])return r;t=iy(t)}return e}t=r,r=t.parentNode}return null}function rl(t){return t=t[Br]||t[dn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function _i(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(B(33))}function Pu(t){return t[Aa]||null}var Nf=[],Ni=-1;function bs(t){return{current:t}}function Fe(t){0>Ni||(t.current=Nf[Ni],Nf[Ni]=null,Ni--)}function De(t,e){Ni++,Nf[Ni]=t.current,t.current=e}var ds={},Mt=bs(ds),Kt=bs(!1),qs=ds;function qi(t,e){var r=t.type.contextTypes;if(!r)return ds;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Qt(t){return t=t.childContextTypes,t!=null}function Fc(){Fe(Kt),Fe(Mt)}function oy(t,e,r){if(Mt.current!==ds)throw Error(B(168));De(Mt,e),De(Kt,r)}function Q1(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(B(108,EE(t)||"Unknown",s));return Ge({},r,n)}function Uc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ds,qs=Mt.current,De(Mt,t),De(Kt,Kt.current),!0}function ay(t,e,r){var n=t.stateNode;if(!n)throw Error(B(169));r?(t=Q1(t,e,qs),n.__reactInternalMemoizedMergedChildContext=t,Fe(Kt),Fe(Mt),De(Mt,t)):Fe(Kt),De(Kt,r)}var rn=null,Ru=!1,gh=!1;function Y1(t){rn===null?rn=[t]:rn.push(t)}function zS(t){Ru=!0,Y1(t)}function _s(){if(!gh&&rn!==null){gh=!0;var t=0,e=Te;try{var r=rn;for(Te=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}rn=null,Ru=!1}catch(s){throw rn!==null&&(rn=rn.slice(t+1)),b1(Om,_s),s}finally{Te=e,gh=!1}}return null}var Ei=[],Si=0,zc=null,Bc=0,hr=[],fr=0,Gs=null,nn=1,sn="";function Rs(t,e){Ei[Si++]=Bc,Ei[Si++]=zc,zc=t,Bc=e}function J1(t,e,r){hr[fr++]=nn,hr[fr++]=sn,hr[fr++]=Gs,Gs=t;var n=nn;t=sn;var s=32-Ir(n)-1;n&=~(1<<s),r+=1;var i=32-Ir(e)+s;if(30<i){var a=s-s%5;i=(n&(1<<a)-1).toString(32),n>>=a,s-=a,nn=1<<32-Ir(e)+s|r<<s|n,sn=i+t}else nn=1<<i|r<<s|n,sn=t}function Gm(t){t.return!==null&&(Rs(t,1),J1(t,1,0))}function Km(t){for(;t===zc;)zc=Ei[--Si],Ei[Si]=null,Bc=Ei[--Si],Ei[Si]=null;for(;t===Gs;)Gs=hr[--fr],hr[fr]=null,sn=hr[--fr],hr[fr]=null,nn=hr[--fr],hr[fr]=null}var sr=null,rr=null,Be=!1,Sr=null;function X1(t,e){var r=gr(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function ly(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,sr=t,rr=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,sr=t,rr=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=Gs!==null?{id:nn,overflow:sn}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=gr(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,sr=t,rr=null,!0):!1;default:return!1}}function Ef(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Sf(t){if(Be){var e=rr;if(e){var r=e;if(!ly(t,e)){if(Ef(t))throw Error(B(418));e=Yn(r.nextSibling);var n=sr;e&&ly(t,e)?X1(n,r):(t.flags=t.flags&-4097|2,Be=!1,sr=t)}}else{if(Ef(t))throw Error(B(418));t.flags=t.flags&-4097|2,Be=!1,sr=t}}}function cy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;sr=t}function $l(t){if(t!==sr)return!1;if(!Be)return cy(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wf(t.type,t.memoizedProps)),e&&(e=rr)){if(Ef(t))throw Z1(),Error(B(418));for(;e;)X1(t,e),e=Yn(e.nextSibling)}if(cy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(B(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){rr=Yn(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}rr=null}}else rr=sr?Yn(t.stateNode.nextSibling):null;return!0}function Z1(){for(var t=rr;t;)t=Yn(t.nextSibling)}function Gi(){rr=sr=null,Be=!1}function Qm(t){Sr===null?Sr=[t]:Sr.push(t)}var BS=bn.ReactCurrentBatchConfig;function Ho(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(B(309));var n=r.stateNode}if(!n)throw Error(B(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(a){var l=s.refs;a===null?delete l[i]:l[i]=a},e._stringRef=i,e)}if(typeof t!="string")throw Error(B(284));if(!r._owner)throw Error(B(290,t))}return t}function Wl(t,e){throw t=Object.prototype.toString.call(e),Error(B(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function uy(t){var e=t._init;return e(t._payload)}function ew(t){function e(N,_){if(t){var S=N.deletions;S===null?(N.deletions=[_],N.flags|=16):S.push(_)}}function r(N,_){if(!t)return null;for(;_!==null;)e(N,_),_=_.sibling;return null}function n(N,_){for(N=new Map;_!==null;)_.key!==null?N.set(_.key,_):N.set(_.index,_),_=_.sibling;return N}function s(N,_){return N=es(N,_),N.index=0,N.sibling=null,N}function i(N,_,S){return N.index=S,t?(S=N.alternate,S!==null?(S=S.index,S<_?(N.flags|=2,_):S):(N.flags|=2,_)):(N.flags|=1048576,_)}function a(N){return t&&N.alternate===null&&(N.flags|=2),N}function l(N,_,S,A){return _===null||_.tag!==6?(_=Nh(S,N.mode,A),_.return=N,_):(_=s(_,S),_.return=N,_)}function u(N,_,S,A){var L=S.type;return L===vi?h(N,_,S.props.children,A,S.key):_!==null&&(_.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Pn&&uy(L)===_.type)?(A=s(_,S.props),A.ref=Ho(N,_,S),A.return=N,A):(A=hc(S.type,S.key,S.props,null,N.mode,A),A.ref=Ho(N,_,S),A.return=N,A)}function d(N,_,S,A){return _===null||_.tag!==4||_.stateNode.containerInfo!==S.containerInfo||_.stateNode.implementation!==S.implementation?(_=Eh(S,N.mode,A),_.return=N,_):(_=s(_,S.children||[]),_.return=N,_)}function h(N,_,S,A,L){return _===null||_.tag!==7?(_=Bs(S,N.mode,A,L),_.return=N,_):(_=s(_,S),_.return=N,_)}function f(N,_,S){if(typeof _=="string"&&_!==""||typeof _=="number")return _=Nh(""+_,N.mode,S),_.return=N,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Rl:return S=hc(_.type,_.key,_.props,null,N.mode,S),S.ref=Ho(N,null,_),S.return=N,S;case yi:return _=Eh(_,N.mode,S),_.return=N,_;case Pn:var A=_._init;return f(N,A(_._payload),S)}if(Yo(_)||Uo(_))return _=Bs(_,N.mode,S,null),_.return=N,_;Wl(N,_)}return null}function m(N,_,S,A){var L=_!==null?_.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return L!==null?null:l(N,_,""+S,A);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Rl:return S.key===L?u(N,_,S,A):null;case yi:return S.key===L?d(N,_,S,A):null;case Pn:return L=S._init,m(N,_,L(S._payload),A)}if(Yo(S)||Uo(S))return L!==null?null:h(N,_,S,A,null);Wl(N,S)}return null}function v(N,_,S,A,L){if(typeof A=="string"&&A!==""||typeof A=="number")return N=N.get(S)||null,l(_,N,""+A,L);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case Rl:return N=N.get(A.key===null?S:A.key)||null,u(_,N,A,L);case yi:return N=N.get(A.key===null?S:A.key)||null,d(_,N,A,L);case Pn:var O=A._init;return v(N,_,S,O(A._payload),L)}if(Yo(A)||Uo(A))return N=N.get(S)||null,h(_,N,A,L,null);Wl(_,A)}return null}function x(N,_,S,A){for(var L=null,O=null,T=_,b=_=0,C=null;T!==null&&b<S.length;b++){T.index>b?(C=T,T=null):C=T.sibling;var w=m(N,T,S[b],A);if(w===null){T===null&&(T=C);break}t&&T&&w.alternate===null&&e(N,T),_=i(w,_,b),O===null?L=w:O.sibling=w,O=w,T=C}if(b===S.length)return r(N,T),Be&&Rs(N,b),L;if(T===null){for(;b<S.length;b++)T=f(N,S[b],A),T!==null&&(_=i(T,_,b),O===null?L=T:O.sibling=T,O=T);return Be&&Rs(N,b),L}for(T=n(N,T);b<S.length;b++)C=v(T,N,b,S[b],A),C!==null&&(t&&C.alternate!==null&&T.delete(C.key===null?b:C.key),_=i(C,_,b),O===null?L=C:O.sibling=C,O=C);return t&&T.forEach(function(k){return e(N,k)}),Be&&Rs(N,b),L}function y(N,_,S,A){var L=Uo(S);if(typeof L!="function")throw Error(B(150));if(S=L.call(S),S==null)throw Error(B(151));for(var O=L=null,T=_,b=_=0,C=null,w=S.next();T!==null&&!w.done;b++,w=S.next()){T.index>b?(C=T,T=null):C=T.sibling;var k=m(N,T,w.value,A);if(k===null){T===null&&(T=C);break}t&&T&&k.alternate===null&&e(N,T),_=i(k,_,b),O===null?L=k:O.sibling=k,O=k,T=C}if(w.done)return r(N,T),Be&&Rs(N,b),L;if(T===null){for(;!w.done;b++,w=S.next())w=f(N,w.value,A),w!==null&&(_=i(w,_,b),O===null?L=w:O.sibling=w,O=w);return Be&&Rs(N,b),L}for(T=n(N,T);!w.done;b++,w=S.next())w=v(T,N,b,w.value,A),w!==null&&(t&&w.alternate!==null&&T.delete(w.key===null?b:w.key),_=i(w,_,b),O===null?L=w:O.sibling=w,O=w);return t&&T.forEach(function(P){return e(N,P)}),Be&&Rs(N,b),L}function j(N,_,S,A){if(typeof S=="object"&&S!==null&&S.type===vi&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Rl:e:{for(var L=S.key,O=_;O!==null;){if(O.key===L){if(L=S.type,L===vi){if(O.tag===7){r(N,O.sibling),_=s(O,S.props.children),_.return=N,N=_;break e}}else if(O.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===Pn&&uy(L)===O.type){r(N,O.sibling),_=s(O,S.props),_.ref=Ho(N,O,S),_.return=N,N=_;break e}r(N,O);break}else e(N,O);O=O.sibling}S.type===vi?(_=Bs(S.props.children,N.mode,A,S.key),_.return=N,N=_):(A=hc(S.type,S.key,S.props,null,N.mode,A),A.ref=Ho(N,_,S),A.return=N,N=A)}return a(N);case yi:e:{for(O=S.key;_!==null;){if(_.key===O)if(_.tag===4&&_.stateNode.containerInfo===S.containerInfo&&_.stateNode.implementation===S.implementation){r(N,_.sibling),_=s(_,S.children||[]),_.return=N,N=_;break e}else{r(N,_);break}else e(N,_);_=_.sibling}_=Eh(S,N.mode,A),_.return=N,N=_}return a(N);case Pn:return O=S._init,j(N,_,O(S._payload),A)}if(Yo(S))return x(N,_,S,A);if(Uo(S))return y(N,_,S,A);Wl(N,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,_!==null&&_.tag===6?(r(N,_.sibling),_=s(_,S),_.return=N,N=_):(r(N,_),_=Nh(S,N.mode,A),_.return=N,N=_),a(N)):r(N,_)}return j}var Ki=ew(!0),tw=ew(!1),$c=bs(null),Wc=null,ji=null,Ym=null;function Jm(){Ym=ji=Wc=null}function Xm(t){var e=$c.current;Fe($c),t._currentValue=e}function jf(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Mi(t,e){Wc=t,Ym=ji=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Gt=!0),t.firstContext=null)}function vr(t){var e=t._currentValue;if(Ym!==t)if(t={context:t,memoizedValue:e,next:null},ji===null){if(Wc===null)throw Error(B(308));ji=t,Wc.dependencies={lanes:0,firstContext:t}}else ji=ji.next=t;return e}var Os=null;function Zm(t){Os===null?Os=[t]:Os.push(t)}function rw(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,Zm(e)):(r.next=s.next,s.next=r),e.interleaved=r,hn(t,n)}function hn(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Rn=!1;function ep(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function nw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function ln(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Ee&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,hn(t,r)}return s=n.interleaved,s===null?(e.next=e,Zm(n)):(e.next=s.next,s.next=e),n.interleaved=e,hn(t,r)}function oc(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Fm(t,r)}}function dy(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var a={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=a:i=i.next=a,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Hc(t,e,r,n){var s=t.updateQueue;Rn=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,a===null?i=d:a.next=d,a=u;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==a&&(l===null?h.firstBaseUpdate=d:l.next=d,h.lastBaseUpdate=u))}if(i!==null){var f=s.baseState;a=0,h=d=u=null,l=i;do{var m=l.lane,v=l.eventTime;if((n&m)===m){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var x=t,y=l;switch(m=e,v=r,y.tag){case 1:if(x=y.payload,typeof x=="function"){f=x.call(v,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,m=typeof x=="function"?x.call(v,f,m):x,m==null)break e;f=Ge({},f,m);break e;case 2:Rn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else v={eventTime:v,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(d=h=v,u=f):h=h.next=v,a|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(1);if(h===null&&(u=f),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=h,e=s.shared.interleaved,e!==null){s=e;do a|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Qs|=a,t.lanes=a,t.memoizedState=f}}function hy(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(B(191,s));s.call(n)}}}var nl={},Hr=bs(nl),Pa=bs(nl),Ra=bs(nl);function Fs(t){if(t===nl)throw Error(B(174));return t}function tp(t,e){switch(De(Ra,e),De(Pa,t),De(Hr,nl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:of(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=of(e,t)}Fe(Hr),De(Hr,e)}function Qi(){Fe(Hr),Fe(Pa),Fe(Ra)}function sw(t){Fs(Ra.current);var e=Fs(Hr.current),r=of(e,t.type);e!==r&&(De(Pa,t),De(Hr,r))}function rp(t){Pa.current===t&&(Fe(Hr),Fe(Pa))}var He=bs(0);function qc(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var yh=[];function np(){for(var t=0;t<yh.length;t++)yh[t]._workInProgressVersionPrimary=null;yh.length=0}var ac=bn.ReactCurrentDispatcher,vh=bn.ReactCurrentBatchConfig,Ks=0,qe=null,dt=null,yt=null,Gc=!1,ca=!1,Da=0,$S=0;function It(){throw Error(B(321))}function sp(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Ar(t[r],e[r]))return!1;return!0}function ip(t,e,r,n,s,i){if(Ks=i,qe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ac.current=t===null||t.memoizedState===null?GS:KS,t=r(n,s),ca){i=0;do{if(ca=!1,Da=0,25<=i)throw Error(B(301));i+=1,yt=dt=null,e.updateQueue=null,ac.current=QS,t=r(n,s)}while(ca)}if(ac.current=Kc,e=dt!==null&&dt.next!==null,Ks=0,yt=dt=qe=null,Gc=!1,e)throw Error(B(300));return t}function op(){var t=Da!==0;return Da=0,t}function Ur(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?qe.memoizedState=yt=t:yt=yt.next=t,yt}function xr(){if(dt===null){var t=qe.alternate;t=t!==null?t.memoizedState:null}else t=dt.next;var e=yt===null?qe.memoizedState:yt.next;if(e!==null)yt=e,dt=t;else{if(t===null)throw Error(B(310));dt=t,t={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},yt===null?qe.memoizedState=yt=t:yt=yt.next=t}return yt}function Ma(t,e){return typeof e=="function"?e(t):e}function xh(t){var e=xr(),r=e.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=t;var n=dt,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var a=s.next;s.next=i.next,i.next=a}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var l=a=null,u=null,d=i;do{var h=d.lane;if((Ks&h)===h)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var f={lane:h,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=f,a=n):u=u.next=f,qe.lanes|=h,Qs|=h}d=d.next}while(d!==null&&d!==i);u===null?a=n:u.next=l,Ar(n,e.memoizedState)||(Gt=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=u,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,qe.lanes|=i,Qs|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function wh(t){var e=xr(),r=e.queue;if(r===null)throw Error(B(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var a=s=s.next;do i=t(i,a.action),a=a.next;while(a!==s);Ar(i,e.memoizedState)||(Gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function iw(){}function ow(t,e){var r=qe,n=xr(),s=e(),i=!Ar(n.memoizedState,s);if(i&&(n.memoizedState=s,Gt=!0),n=n.queue,ap(cw.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||yt!==null&&yt.memoizedState.tag&1){if(r.flags|=2048,La(9,lw.bind(null,r,n,s,e),void 0,null),vt===null)throw Error(B(349));Ks&30||aw(r,e,s)}return s}function aw(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function lw(t,e,r,n){e.value=r,e.getSnapshot=n,uw(e)&&dw(t)}function cw(t,e,r){return r(function(){uw(e)&&dw(t)})}function uw(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Ar(t,r)}catch{return!0}}function dw(t){var e=hn(t,1);e!==null&&Cr(e,t,1,-1)}function fy(t){var e=Ur();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ma,lastRenderedState:t},e.queue=t,t=t.dispatch=qS.bind(null,qe,t),[e.memoizedState,t]}function La(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=qe.updateQueue,e===null?(e={lastEffect:null,stores:null},qe.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function hw(){return xr().memoizedState}function lc(t,e,r,n){var s=Ur();qe.flags|=t,s.memoizedState=La(1|e,r,void 0,n===void 0?null:n)}function Du(t,e,r,n){var s=xr();n=n===void 0?null:n;var i=void 0;if(dt!==null){var a=dt.memoizedState;if(i=a.destroy,n!==null&&sp(n,a.deps)){s.memoizedState=La(e,r,i,n);return}}qe.flags|=t,s.memoizedState=La(1|e,r,i,n)}function my(t,e){return lc(8390656,8,t,e)}function ap(t,e){return Du(2048,8,t,e)}function fw(t,e){return Du(4,2,t,e)}function mw(t,e){return Du(4,4,t,e)}function pw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function gw(t,e,r){return r=r!=null?r.concat([t]):null,Du(4,4,pw.bind(null,e,t),r)}function lp(){}function yw(t,e){var r=xr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&sp(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function vw(t,e){var r=xr();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&sp(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function xw(t,e,r){return Ks&21?(Ar(r,e)||(r=E1(),qe.lanes|=r,Qs|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Gt=!0),t.memoizedState=r)}function WS(t,e){var r=Te;Te=r!==0&&4>r?r:4,t(!0);var n=vh.transition;vh.transition={};try{t(!1),e()}finally{Te=r,vh.transition=n}}function ww(){return xr().memoizedState}function HS(t,e,r){var n=Zn(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},bw(t))_w(e,r);else if(r=rw(t,e,r,n),r!==null){var s=zt();Cr(r,t,n,s),Nw(r,e,n)}}function qS(t,e,r){var n=Zn(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(bw(t))_w(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var a=e.lastRenderedState,l=i(a,r);if(s.hasEagerState=!0,s.eagerState=l,Ar(l,a)){var u=e.interleaved;u===null?(s.next=s,Zm(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}r=rw(t,e,s,n),r!==null&&(s=zt(),Cr(r,t,n,s),Nw(r,e,n))}}function bw(t){var e=t.alternate;return t===qe||e!==null&&e===qe}function _w(t,e){ca=Gc=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function Nw(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Fm(t,r)}}var Kc={readContext:vr,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},GS={readContext:vr,useCallback:function(t,e){return Ur().memoizedState=[t,e===void 0?null:e],t},useContext:vr,useEffect:my,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,lc(4194308,4,pw.bind(null,e,t),r)},useLayoutEffect:function(t,e){return lc(4194308,4,t,e)},useInsertionEffect:function(t,e){return lc(4,2,t,e)},useMemo:function(t,e){var r=Ur();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Ur();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=HS.bind(null,qe,t),[n.memoizedState,t]},useRef:function(t){var e=Ur();return t={current:t},e.memoizedState=t},useState:fy,useDebugValue:lp,useDeferredValue:function(t){return Ur().memoizedState=t},useTransition:function(){var t=fy(!1),e=t[0];return t=WS.bind(null,t[1]),Ur().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=qe,s=Ur();if(Be){if(r===void 0)throw Error(B(407));r=r()}else{if(r=e(),vt===null)throw Error(B(349));Ks&30||aw(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,my(cw.bind(null,n,i,t),[t]),n.flags|=2048,La(9,lw.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Ur(),e=vt.identifierPrefix;if(Be){var r=sn,n=nn;r=(n&~(1<<32-Ir(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Da++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=$S++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},KS={readContext:vr,useCallback:yw,useContext:vr,useEffect:ap,useImperativeHandle:gw,useInsertionEffect:fw,useLayoutEffect:mw,useMemo:vw,useReducer:xh,useRef:hw,useState:function(){return xh(Ma)},useDebugValue:lp,useDeferredValue:function(t){var e=xr();return xw(e,dt.memoizedState,t)},useTransition:function(){var t=xh(Ma)[0],e=xr().memoizedState;return[t,e]},useMutableSource:iw,useSyncExternalStore:ow,useId:ww,unstable_isNewReconciler:!1},QS={readContext:vr,useCallback:yw,useContext:vr,useEffect:ap,useImperativeHandle:gw,useInsertionEffect:fw,useLayoutEffect:mw,useMemo:vw,useReducer:wh,useRef:hw,useState:function(){return wh(Ma)},useDebugValue:lp,useDeferredValue:function(t){var e=xr();return dt===null?e.memoizedState=t:xw(e,dt.memoizedState,t)},useTransition:function(){var t=wh(Ma)[0],e=xr().memoizedState;return[t,e]},useMutableSource:iw,useSyncExternalStore:ow,useId:ww,unstable_isNewReconciler:!1};function Nr(t,e){if(t&&t.defaultProps){e=Ge({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function Tf(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ge({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var Mu={isMounted:function(t){return(t=t._reactInternals)?ii(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=zt(),s=Zn(t),i=ln(n,s);i.payload=e,r!=null&&(i.callback=r),e=Jn(t,i,s),e!==null&&(Cr(e,t,s,n),oc(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=zt(),s=Zn(t),i=ln(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=Jn(t,i,s),e!==null&&(Cr(e,t,s,n),oc(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=zt(),n=Zn(t),s=ln(r,n);s.tag=2,e!=null&&(s.callback=e),e=Jn(t,s,n),e!==null&&(Cr(e,t,n,r),oc(e,t,n))}};function py(t,e,r,n,s,i,a){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,a):e.prototype&&e.prototype.isPureReactComponent?!Ia(r,n)||!Ia(s,i):!0}function Ew(t,e,r){var n=!1,s=ds,i=e.contextType;return typeof i=="object"&&i!==null?i=vr(i):(s=Qt(e)?qs:Mt.current,n=e.contextTypes,i=(n=n!=null)?qi(t,s):ds),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Mu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function gy(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&Mu.enqueueReplaceState(e,e.state,null)}function If(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},ep(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=vr(i):(i=Qt(e)?qs:Mt.current,s.context=qi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Tf(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Mu.enqueueReplaceState(s,s.state,null),Hc(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Yi(t,e){try{var r="",n=e;do r+=NE(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function bh(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function Cf(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var YS=typeof WeakMap=="function"?WeakMap:Map;function Sw(t,e,r){r=ln(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Yc||(Yc=!0,Ff=n),Cf(t,e)},r}function jw(t,e,r){r=ln(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){Cf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){Cf(t,e),typeof n!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),r}function yy(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new YS;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=u4.bind(null,t,e,r),e.then(t,t))}function vy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xy(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=ln(-1,1),e.tag=2,Jn(r,e,1))),r.lanes|=1),t)}var JS=bn.ReactCurrentOwner,Gt=!1;function Ft(t,e,r,n){e.child=t===null?tw(e,null,r,n):Ki(e,t.child,r,n)}function wy(t,e,r,n,s){r=r.render;var i=e.ref;return Mi(e,s),n=ip(t,e,r,n,i,s),r=op(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fn(t,e,s)):(Be&&r&&Gm(e),e.flags|=1,Ft(t,e,n,s),e.child)}function by(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!gp(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,Tw(t,e,i,n,s)):(t=hc(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var a=i.memoizedProps;if(r=r.compare,r=r!==null?r:Ia,r(a,n)&&t.ref===e.ref)return fn(t,e,s)}return e.flags|=1,t=es(i,n),t.ref=e.ref,t.return=e,e.child=t}function Tw(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Ia(i,n)&&t.ref===e.ref)if(Gt=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Gt=!0);else return e.lanes=t.lanes,fn(t,e,s)}return kf(t,e,r,n,s)}function Iw(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Ii,er),er|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,De(Ii,er),er|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,De(Ii,er),er|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,De(Ii,er),er|=n;return Ft(t,e,s,r),e.child}function Cw(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function kf(t,e,r,n,s){var i=Qt(r)?qs:Mt.current;return i=qi(e,i),Mi(e,s),r=ip(t,e,r,n,i,s),n=op(),t!==null&&!Gt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,fn(t,e,s)):(Be&&n&&Gm(e),e.flags|=1,Ft(t,e,r,s),e.child)}function _y(t,e,r,n,s){if(Qt(r)){var i=!0;Uc(e)}else i=!1;if(Mi(e,s),e.stateNode===null)cc(t,e),Ew(e,r,n),If(e,r,n,s),n=!0;else if(t===null){var a=e.stateNode,l=e.memoizedProps;a.props=l;var u=a.context,d=r.contextType;typeof d=="object"&&d!==null?d=vr(d):(d=Qt(r)?qs:Mt.current,d=qi(e,d));var h=r.getDerivedStateFromProps,f=typeof h=="function"||typeof a.getSnapshotBeforeUpdate=="function";f||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==n||u!==d)&&gy(e,a,n,d),Rn=!1;var m=e.memoizedState;a.state=m,Hc(e,n,a,s),u=e.memoizedState,l!==n||m!==u||Kt.current||Rn?(typeof h=="function"&&(Tf(e,r,h,n),u=e.memoizedState),(l=Rn||py(e,r,l,n,m,u,d))?(f||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=u),a.props=n,a.state=u,a.context=d,n=l):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,nw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Nr(e.type,l),a.props=d,f=e.pendingProps,m=a.context,u=r.contextType,typeof u=="object"&&u!==null?u=vr(u):(u=Qt(r)?qs:Mt.current,u=qi(e,u));var v=r.getDerivedStateFromProps;(h=typeof v=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(l!==f||m!==u)&&gy(e,a,n,u),Rn=!1,m=e.memoizedState,a.state=m,Hc(e,n,a,s);var x=e.memoizedState;l!==f||m!==x||Kt.current||Rn?(typeof v=="function"&&(Tf(e,r,v,n),x=e.memoizedState),(d=Rn||py(e,r,d,n,m,x,u)||!1)?(h||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,x,u),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,x,u)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=x),a.props=n,a.state=x,a.context=u,n=d):(typeof a.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),n=!1)}return Af(t,e,r,n,i,s)}function Af(t,e,r,n,s,i){Cw(t,e);var a=(e.flags&128)!==0;if(!n&&!a)return s&&ay(e,r,!1),fn(t,e,i);n=e.stateNode,JS.current=e;var l=a&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&a?(e.child=Ki(e,t.child,null,i),e.child=Ki(e,null,l,i)):Ft(t,e,l,i),e.memoizedState=n.state,s&&ay(e,r,!0),e.child}function kw(t){var e=t.stateNode;e.pendingContext?oy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&oy(t,e.context,!1),tp(t,e.containerInfo)}function Ny(t,e,r,n,s){return Gi(),Qm(s),e.flags|=256,Ft(t,e,r,n),e.child}var Pf={dehydrated:null,treeContext:null,retryLane:0};function Rf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Aw(t,e,r){var n=e.pendingProps,s=He.current,i=!1,a=(e.flags&128)!==0,l;if((l=a)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),De(He,s&1),t===null)return Sf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,t=n.fallback,i?(n=e.mode,i=e.child,a={mode:"hidden",children:a},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=a):i=Ou(a,n,0,null),t=Bs(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Rf(r),e.memoizedState=Pf,t):cp(e,a));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return XS(t,e,a,n,l,s,r);if(i){i=n.fallback,a=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:n.children};return!(a&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=u,e.deletions=null):(n=es(s,u),n.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=es(l,i):(i=Bs(i,a,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,a=t.child.memoizedState,a=a===null?Rf(r):{baseLanes:a.baseLanes|r,cachePool:null,transitions:a.transitions},i.memoizedState=a,i.childLanes=t.childLanes&~r,e.memoizedState=Pf,n}return i=t.child,t=i.sibling,n=es(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function cp(t,e){return e=Ou({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Hl(t,e,r,n){return n!==null&&Qm(n),Ki(e,t.child,null,r),t=cp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XS(t,e,r,n,s,i,a){if(r)return e.flags&256?(e.flags&=-257,n=bh(Error(B(422))),Hl(t,e,a,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=Ou({mode:"visible",children:n.children},s,0,null),i=Bs(i,s,a,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Ki(e,t.child,null,a),e.child.memoizedState=Rf(a),e.memoizedState=Pf,i);if(!(e.mode&1))return Hl(t,e,a,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(B(419)),n=bh(i,n,void 0),Hl(t,e,a,n)}if(l=(a&t.childLanes)!==0,Gt||l){if(n=vt,n!==null){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|a)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,hn(t,s),Cr(n,t,s,-1))}return pp(),n=bh(Error(B(421))),Hl(t,e,a,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=d4.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,rr=Yn(s.nextSibling),sr=e,Be=!0,Sr=null,t!==null&&(hr[fr++]=nn,hr[fr++]=sn,hr[fr++]=Gs,nn=t.id,sn=t.overflow,Gs=e),e=cp(e,n.children),e.flags|=4096,e)}function Ey(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),jf(t.return,e,r)}function _h(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function Pw(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Ft(t,e,n.children,r),n=He.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ey(t,r,e);else if(t.tag===19)Ey(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(De(He,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&qc(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),_h(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&qc(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}_h(e,!0,r,null,i);break;case"together":_h(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function fn(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Qs|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(B(153));if(e.child!==null){for(t=e.child,r=es(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=es(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function ZS(t,e,r){switch(e.tag){case 3:kw(e),Gi();break;case 5:sw(e);break;case 1:Qt(e.type)&&Uc(e);break;case 4:tp(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;De($c,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(De(He,He.current&1),e.flags|=128,null):r&e.child.childLanes?Aw(t,e,r):(De(He,He.current&1),t=fn(t,e,r),t!==null?t.sibling:null);De(He,He.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return Pw(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),De(He,He.current),n)break;return null;case 22:case 23:return e.lanes=0,Iw(t,e,r)}return fn(t,e,r)}var Rw,Df,Dw,Mw;Rw=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Df=function(){};Dw=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,Fs(Hr.current);var i=null;switch(r){case"input":s=tf(t,s),n=tf(t,n),i=[];break;case"select":s=Ge({},s,{value:void 0}),n=Ge({},n,{value:void 0}),i=[];break;case"textarea":s=sf(t,s),n=sf(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Oc)}af(r,n);var a;r=null;for(d in s)if(!n.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(a in l)l.hasOwnProperty(a)&&(r||(r={}),r[a]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ba.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var u=n[d];if(l=s!=null?s[d]:void 0,n.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(a in l)!l.hasOwnProperty(a)||u&&u.hasOwnProperty(a)||(r||(r={}),r[a]="");for(a in u)u.hasOwnProperty(a)&&l[a]!==u[a]&&(r||(r={}),r[a]=u[a])}else r||(i||(i=[]),i.push(d,r)),r=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ba.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&Ve("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}r&&(i=i||[]).push("style",r);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Mw=function(t,e,r,n){r!==n&&(e.flags|=4)};function qo(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Ct(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function e4(t,e,r){var n=e.pendingProps;switch(Km(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ct(e),null;case 1:return Qt(e.type)&&Fc(),Ct(e),null;case 3:return n=e.stateNode,Qi(),Fe(Kt),Fe(Mt),np(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&($l(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Sr!==null&&(Bf(Sr),Sr=null))),Df(t,e),Ct(e),null;case 5:rp(e);var s=Fs(Ra.current);if(r=e.type,t!==null&&e.stateNode!=null)Dw(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(B(166));return Ct(e),null}if(t=Fs(Hr.current),$l(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[Br]=e,n[Aa]=i,t=(e.mode&1)!==0,r){case"dialog":Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":case"embed":Ve("load",n);break;case"video":case"audio":for(s=0;s<Xo.length;s++)Ve(Xo[s],n);break;case"source":Ve("error",n);break;case"img":case"image":case"link":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"input":Rg(n,i),Ve("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ve("invalid",n);break;case"textarea":Mg(n,i),Ve("invalid",n)}af(r,i),s=null;for(var a in i)if(i.hasOwnProperty(a)){var l=i[a];a==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Bl(n.textContent,l,t),s=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Bl(n.textContent,l,t),s=["children",""+l]):ba.hasOwnProperty(a)&&l!=null&&a==="onScroll"&&Ve("scroll",n)}switch(r){case"input":Dl(n),Dg(n,i,!0);break;case"textarea":Dl(n),Lg(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Oc)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=c1(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=a.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=a.createElement(r,{is:n.is}):(t=a.createElement(r),r==="select"&&(a=t,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):t=a.createElementNS(t,r),t[Br]=e,t[Aa]=n,Rw(t,e,!1,!1),e.stateNode=t;e:{switch(a=lf(r,n),r){case"dialog":Ve("cancel",t),Ve("close",t),s=n;break;case"iframe":case"object":case"embed":Ve("load",t),s=n;break;case"video":case"audio":for(s=0;s<Xo.length;s++)Ve(Xo[s],t);s=n;break;case"source":Ve("error",t),s=n;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),s=n;break;case"details":Ve("toggle",t),s=n;break;case"input":Rg(t,n),s=tf(t,n),Ve("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Ge({},n,{value:void 0}),Ve("invalid",t);break;case"textarea":Mg(t,n),s=sf(t,n),Ve("invalid",t);break;default:s=n}af(r,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?h1(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&u1(t,u)):i==="children"?typeof u=="string"?(r!=="textarea"||u!=="")&&_a(t,u):typeof u=="number"&&_a(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ba.hasOwnProperty(i)?u!=null&&i==="onScroll"&&Ve("scroll",t):u!=null&&Rm(t,i,u,a))}switch(r){case"input":Dl(t),Dg(t,n,!1);break;case"textarea":Dl(t),Lg(t);break;case"option":n.value!=null&&t.setAttribute("value",""+us(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Ai(t,!!n.multiple,i,!1):n.defaultValue!=null&&Ai(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Oc)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ct(e),null;case 6:if(t&&e.stateNode!=null)Mw(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(B(166));if(r=Fs(Ra.current),Fs(Hr.current),$l(e)){if(n=e.stateNode,r=e.memoizedProps,n[Br]=e,(i=n.nodeValue!==r)&&(t=sr,t!==null))switch(t.tag){case 3:Bl(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Bl(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Br]=e,e.stateNode=n}return Ct(e),null;case 13:if(Fe(He),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&rr!==null&&e.mode&1&&!(e.flags&128))Z1(),Gi(),e.flags|=98560,i=!1;else if(i=$l(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(B(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(B(317));i[Br]=e}else Gi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ct(e),i=!1}else Sr!==null&&(Bf(Sr),Sr=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||He.current&1?ht===0&&(ht=3):pp())),e.updateQueue!==null&&(e.flags|=4),Ct(e),null);case 4:return Qi(),Df(t,e),t===null&&Ca(e.stateNode.containerInfo),Ct(e),null;case 10:return Xm(e.type._context),Ct(e),null;case 17:return Qt(e.type)&&Fc(),Ct(e),null;case 19:if(Fe(He),i=e.memoizedState,i===null)return Ct(e),null;if(n=(e.flags&128)!==0,a=i.rendering,a===null)if(n)qo(i,!1);else{if(ht!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(a=qc(t),a!==null){for(e.flags|=128,qo(i,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,a=i.alternate,a===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=a.childLanes,i.lanes=a.lanes,i.child=a.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=a.memoizedProps,i.memoizedState=a.memoizedState,i.updateQueue=a.updateQueue,i.type=a.type,t=a.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return De(He,He.current&1|2),e.child}t=t.sibling}i.tail!==null&&tt()>Ji&&(e.flags|=128,n=!0,qo(i,!1),e.lanes=4194304)}else{if(!n)if(t=qc(a),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),qo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!Be)return Ct(e),null}else 2*tt()-i.renderingStartTime>Ji&&r!==1073741824&&(e.flags|=128,n=!0,qo(i,!1),e.lanes=4194304);i.isBackwards?(a.sibling=e.child,e.child=a):(r=i.last,r!==null?r.sibling=a:e.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=tt(),e.sibling=null,r=He.current,De(He,n?r&1|2:r&1),e):(Ct(e),null);case 22:case 23:return mp(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?er&1073741824&&(Ct(e),e.subtreeFlags&6&&(e.flags|=8192)):Ct(e),null;case 24:return null;case 25:return null}throw Error(B(156,e.tag))}function t4(t,e){switch(Km(e),e.tag){case 1:return Qt(e.type)&&Fc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Qi(),Fe(Kt),Fe(Mt),np(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return rp(e),null;case 13:if(Fe(He),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(B(340));Gi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(He),null;case 4:return Qi(),null;case 10:return Xm(e.type._context),null;case 22:case 23:return mp(),null;case 24:return null;default:return null}}var ql=!1,Rt=!1,r4=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Ti(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Je(t,e,n)}else r.current=null}function Mf(t,e,r){try{r()}catch(n){Je(t,e,n)}}var Sy=!1;function n4(t,e){if(vf=Mc,t=U1(),qm(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var a=0,l=-1,u=-1,d=0,h=0,f=t,m=null;t:for(;;){for(var v;f!==r||s!==0&&f.nodeType!==3||(l=a+s),f!==i||n!==0&&f.nodeType!==3||(u=a+n),f.nodeType===3&&(a+=f.nodeValue.length),(v=f.firstChild)!==null;)m=f,f=v;for(;;){if(f===t)break t;if(m===r&&++d===s&&(l=a),m===i&&++h===n&&(u=a),(v=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=v}r=l===-1||u===-1?null:{start:l,end:u}}else r=null}r=r||{start:0,end:0}}else r=null;for(xf={focusedElem:t,selectionRange:r},Mc=!1,ee=e;ee!==null;)if(e=ee,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ee=t;else for(;ee!==null;){e=ee;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,j=x.memoizedState,N=e.stateNode,_=N.getSnapshotBeforeUpdate(e.elementType===e.type?y:Nr(e.type,y),j);N.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(B(163))}}catch(A){Je(e,e.return,A)}if(t=e.sibling,t!==null){t.return=e.return,ee=t;break}ee=e.return}return x=Sy,Sy=!1,x}function ua(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Mf(e,r,i)}s=s.next}while(s!==n)}}function Lu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Lf(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function Lw(t){var e=t.alternate;e!==null&&(t.alternate=null,Lw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Br],delete e[Aa],delete e[_f],delete e[FS],delete e[US])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Vw(t){return t.tag===5||t.tag===3||t.tag===4}function jy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Vw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Vf(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=Oc));else if(n!==4&&(t=t.child,t!==null))for(Vf(t,e,r),t=t.sibling;t!==null;)Vf(t,e,r),t=t.sibling}function Of(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Of(t,e,r),t=t.sibling;t!==null;)Of(t,e,r),t=t.sibling}var wt=null,Er=!1;function kn(t,e,r){for(r=r.child;r!==null;)Ow(t,e,r),r=r.sibling}function Ow(t,e,r){if(Wr&&typeof Wr.onCommitFiberUnmount=="function")try{Wr.onCommitFiberUnmount(Iu,r)}catch{}switch(r.tag){case 5:Rt||Ti(r,e);case 6:var n=wt,s=Er;wt=null,kn(t,e,r),wt=n,Er=s,wt!==null&&(Er?(t=wt,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):wt.removeChild(r.stateNode));break;case 18:wt!==null&&(Er?(t=wt,r=r.stateNode,t.nodeType===8?ph(t.parentNode,r):t.nodeType===1&&ph(t,r),ja(t)):ph(wt,r.stateNode));break;case 4:n=wt,s=Er,wt=r.stateNode.containerInfo,Er=!0,kn(t,e,r),wt=n,Er=s;break;case 0:case 11:case 14:case 15:if(!Rt&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,a=i.destroy;i=i.tag,a!==void 0&&(i&2||i&4)&&Mf(r,e,a),s=s.next}while(s!==n)}kn(t,e,r);break;case 1:if(!Rt&&(Ti(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Je(r,e,l)}kn(t,e,r);break;case 21:kn(t,e,r);break;case 22:r.mode&1?(Rt=(n=Rt)||r.memoizedState!==null,kn(t,e,r),Rt=n):kn(t,e,r);break;default:kn(t,e,r)}}function Ty(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new r4),e.forEach(function(n){var s=h4.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function _r(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,a=e,l=a;e:for(;l!==null;){switch(l.tag){case 5:wt=l.stateNode,Er=!1;break e;case 3:wt=l.stateNode.containerInfo,Er=!0;break e;case 4:wt=l.stateNode.containerInfo,Er=!0;break e}l=l.return}if(wt===null)throw Error(B(160));Ow(i,a,s),wt=null,Er=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Je(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Fw(e,t),e=e.sibling}function Fw(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(_r(e,t),Fr(t),n&4){try{ua(3,t,t.return),Lu(3,t)}catch(y){Je(t,t.return,y)}try{ua(5,t,t.return)}catch(y){Je(t,t.return,y)}}break;case 1:_r(e,t),Fr(t),n&512&&r!==null&&Ti(r,r.return);break;case 5:if(_r(e,t),Fr(t),n&512&&r!==null&&Ti(r,r.return),t.flags&32){var s=t.stateNode;try{_a(s,"")}catch(y){Je(t,t.return,y)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,a=r!==null?r.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&a1(s,i),lf(l,a);var d=lf(l,i);for(a=0;a<u.length;a+=2){var h=u[a],f=u[a+1];h==="style"?h1(s,f):h==="dangerouslySetInnerHTML"?u1(s,f):h==="children"?_a(s,f):Rm(s,h,f,d)}switch(l){case"input":rf(s,i);break;case"textarea":l1(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var v=i.value;v!=null?Ai(s,!!i.multiple,v,!1):m!==!!i.multiple&&(i.defaultValue!=null?Ai(s,!!i.multiple,i.defaultValue,!0):Ai(s,!!i.multiple,i.multiple?[]:"",!1))}s[Aa]=i}catch(y){Je(t,t.return,y)}}break;case 6:if(_r(e,t),Fr(t),n&4){if(t.stateNode===null)throw Error(B(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(y){Je(t,t.return,y)}}break;case 3:if(_r(e,t),Fr(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ja(e.containerInfo)}catch(y){Je(t,t.return,y)}break;case 4:_r(e,t),Fr(t);break;case 13:_r(e,t),Fr(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hp=tt())),n&4&&Ty(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(Rt=(d=Rt)||h,_r(e,t),Rt=d):_r(e,t),Fr(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!h&&t.mode&1)for(ee=t,h=t.child;h!==null;){for(f=ee=h;ee!==null;){switch(m=ee,v=m.child,m.tag){case 0:case 11:case 14:case 15:ua(4,m,m.return);break;case 1:Ti(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){n=m,r=m.return;try{e=n,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){Je(n,r,y)}}break;case 5:Ti(m,m.return);break;case 22:if(m.memoizedState!==null){Cy(f);continue}}v!==null?(v.return=m,ee=v):Cy(f)}h=h.sibling}e:for(h=null,f=t;;){if(f.tag===5){if(h===null){h=f;try{s=f.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,u=f.memoizedProps.style,a=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=d1("display",a))}catch(y){Je(t,t.return,y)}}}else if(f.tag===6){if(h===null)try{f.stateNode.nodeValue=d?"":f.memoizedProps}catch(y){Je(t,t.return,y)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;h===f&&(h=null),f=f.return}h===f&&(h=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:_r(e,t),Fr(t),n&4&&Ty(t);break;case 21:break;default:_r(e,t),Fr(t)}}function Fr(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(Vw(r)){var n=r;break e}r=r.return}throw Error(B(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(_a(s,""),n.flags&=-33);var i=jy(t);Of(t,i,s);break;case 3:case 4:var a=n.stateNode.containerInfo,l=jy(t);Vf(t,l,a);break;default:throw Error(B(161))}}catch(u){Je(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function s4(t,e,r){ee=t,Uw(t)}function Uw(t,e,r){for(var n=(t.mode&1)!==0;ee!==null;){var s=ee,i=s.child;if(s.tag===22&&n){var a=s.memoizedState!==null||ql;if(!a){var l=s.alternate,u=l!==null&&l.memoizedState!==null||Rt;l=ql;var d=Rt;if(ql=a,(Rt=u)&&!d)for(ee=s;ee!==null;)a=ee,u=a.child,a.tag===22&&a.memoizedState!==null?ky(s):u!==null?(u.return=a,ee=u):ky(s);for(;i!==null;)ee=i,Uw(i),i=i.sibling;ee=s,ql=l,Rt=d}Iy(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,ee=i):Iy(t)}}function Iy(t){for(;ee!==null;){var e=ee;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Rt||Lu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Rt)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Nr(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&hy(e,i,n);break;case 3:var a=e.updateQueue;if(a!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}hy(e,a,r)}break;case 5:var l=e.stateNode;if(r===null&&e.flags&4){r=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&r.focus();break;case"img":u.src&&(r.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var h=d.memoizedState;if(h!==null){var f=h.dehydrated;f!==null&&ja(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(B(163))}Rt||e.flags&512&&Lf(e)}catch(m){Je(e,e.return,m)}}if(e===t){ee=null;break}if(r=e.sibling,r!==null){r.return=e.return,ee=r;break}ee=e.return}}function Cy(t){for(;ee!==null;){var e=ee;if(e===t){ee=null;break}var r=e.sibling;if(r!==null){r.return=e.return,ee=r;break}ee=e.return}}function ky(t){for(;ee!==null;){var e=ee;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{Lu(4,e)}catch(u){Je(e,r,u)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(u){Je(e,s,u)}}var i=e.return;try{Lf(e)}catch(u){Je(e,i,u)}break;case 5:var a=e.return;try{Lf(e)}catch(u){Je(e,a,u)}}}catch(u){Je(e,e.return,u)}if(e===t){ee=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ee=l;break}ee=e.return}}var i4=Math.ceil,Qc=bn.ReactCurrentDispatcher,up=bn.ReactCurrentOwner,yr=bn.ReactCurrentBatchConfig,Ee=0,vt=null,at=null,Nt=0,er=0,Ii=bs(0),ht=0,Va=null,Qs=0,Vu=0,dp=0,da=null,Ht=null,hp=0,Ji=1/0,tn=null,Yc=!1,Ff=null,Xn=null,Gl=!1,$n=null,Jc=0,ha=0,Uf=null,uc=-1,dc=0;function zt(){return Ee&6?tt():uc!==-1?uc:uc=tt()}function Zn(t){return t.mode&1?Ee&2&&Nt!==0?Nt&-Nt:BS.transition!==null?(dc===0&&(dc=E1()),dc):(t=Te,t!==0||(t=window.event,t=t===void 0?16:A1(t.type)),t):1}function Cr(t,e,r,n){if(50<ha)throw ha=0,Uf=null,Error(B(185));el(t,r,n),(!(Ee&2)||t!==vt)&&(t===vt&&(!(Ee&2)&&(Vu|=r),ht===4&&Ln(t,Nt)),Yt(t,n),r===1&&Ee===0&&!(e.mode&1)&&(Ji=tt()+500,Ru&&_s()))}function Yt(t,e){var r=t.callbackNode;BE(t,e);var n=Dc(t,t===vt?Nt:0);if(n===0)r!==null&&Fg(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Fg(r),e===1)t.tag===0?zS(Ay.bind(null,t)):Y1(Ay.bind(null,t)),VS(function(){!(Ee&6)&&_s()}),r=null;else{switch(S1(n)){case 1:r=Om;break;case 4:r=_1;break;case 16:r=Rc;break;case 536870912:r=N1;break;default:r=Rc}r=Kw(r,zw.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function zw(t,e){if(uc=-1,dc=0,Ee&6)throw Error(B(327));var r=t.callbackNode;if(Li()&&t.callbackNode!==r)return null;var n=Dc(t,t===vt?Nt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Xc(t,n);else{e=n;var s=Ee;Ee|=2;var i=$w();(vt!==t||Nt!==e)&&(tn=null,Ji=tt()+500,zs(t,e));do try{l4();break}catch(l){Bw(t,l)}while(1);Jm(),Qc.current=i,Ee=s,at!==null?e=0:(vt=null,Nt=0,e=ht)}if(e!==0){if(e===2&&(s=ff(t),s!==0&&(n=s,e=zf(t,s))),e===1)throw r=Va,zs(t,0),Ln(t,n),Yt(t,tt()),r;if(e===6)Ln(t,n);else{if(s=t.current.alternate,!(n&30)&&!o4(s)&&(e=Xc(t,n),e===2&&(i=ff(t),i!==0&&(n=i,e=zf(t,i))),e===1))throw r=Va,zs(t,0),Ln(t,n),Yt(t,tt()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(B(345));case 2:Ds(t,Ht,tn);break;case 3:if(Ln(t,n),(n&130023424)===n&&(e=hp+500-tt(),10<e)){if(Dc(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){zt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=bf(Ds.bind(null,t,Ht,tn),e);break}Ds(t,Ht,tn);break;case 4:if(Ln(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var a=31-Ir(n);i=1<<a,a=e[a],a>s&&(s=a),n&=~i}if(n=s,n=tt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*i4(n/1960))-n,10<n){t.timeoutHandle=bf(Ds.bind(null,t,Ht,tn),n);break}Ds(t,Ht,tn);break;case 5:Ds(t,Ht,tn);break;default:throw Error(B(329))}}}return Yt(t,tt()),t.callbackNode===r?zw.bind(null,t):null}function zf(t,e){var r=da;return t.current.memoizedState.isDehydrated&&(zs(t,e).flags|=256),t=Xc(t,e),t!==2&&(e=Ht,Ht=r,e!==null&&Bf(e)),t}function Bf(t){Ht===null?Ht=t:Ht.push.apply(Ht,t)}function o4(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!Ar(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ln(t,e){for(e&=~dp,e&=~Vu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ir(e),n=1<<r;t[r]=-1,e&=~n}}function Ay(t){if(Ee&6)throw Error(B(327));Li();var e=Dc(t,0);if(!(e&1))return Yt(t,tt()),null;var r=Xc(t,e);if(t.tag!==0&&r===2){var n=ff(t);n!==0&&(e=n,r=zf(t,n))}if(r===1)throw r=Va,zs(t,0),Ln(t,e),Yt(t,tt()),r;if(r===6)throw Error(B(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Ds(t,Ht,tn),Yt(t,tt()),null}function fp(t,e){var r=Ee;Ee|=1;try{return t(e)}finally{Ee=r,Ee===0&&(Ji=tt()+500,Ru&&_s())}}function Ys(t){$n!==null&&$n.tag===0&&!(Ee&6)&&Li();var e=Ee;Ee|=1;var r=yr.transition,n=Te;try{if(yr.transition=null,Te=1,t)return t()}finally{Te=n,yr.transition=r,Ee=e,!(Ee&6)&&_s()}}function mp(){er=Ii.current,Fe(Ii)}function zs(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,LS(r)),at!==null)for(r=at.return;r!==null;){var n=r;switch(Km(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Fc();break;case 3:Qi(),Fe(Kt),Fe(Mt),np();break;case 5:rp(n);break;case 4:Qi();break;case 13:Fe(He);break;case 19:Fe(He);break;case 10:Xm(n.type._context);break;case 22:case 23:mp()}r=r.return}if(vt=t,at=t=es(t.current,null),Nt=er=e,ht=0,Va=null,dp=Vu=Qs=0,Ht=da=null,Os!==null){for(e=0;e<Os.length;e++)if(r=Os[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var a=i.next;i.next=s,n.next=a}r.pending=n}Os=null}return t}function Bw(t,e){do{var r=at;try{if(Jm(),ac.current=Kc,Gc){for(var n=qe.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Gc=!1}if(Ks=0,yt=dt=qe=null,ca=!1,Da=0,up.current=null,r===null||r.return===null){ht=1,Va=e,at=null;break}e:{var i=t,a=r.return,l=r,u=e;if(e=Nt,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,h=l,f=h.tag;if(!(h.mode&1)&&(f===0||f===11||f===15)){var m=h.alternate;m?(h.updateQueue=m.updateQueue,h.memoizedState=m.memoizedState,h.lanes=m.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=vy(a);if(v!==null){v.flags&=-257,xy(v,a,l,i,e),v.mode&1&&yy(i,d,e),e=v,u=d;var x=e.updateQueue;if(x===null){var y=new Set;y.add(u),e.updateQueue=y}else x.add(u);break e}else{if(!(e&1)){yy(i,d,e),pp();break e}u=Error(B(426))}}else if(Be&&l.mode&1){var j=vy(a);if(j!==null){!(j.flags&65536)&&(j.flags|=256),xy(j,a,l,i,e),Qm(Yi(u,l));break e}}i=u=Yi(u,l),ht!==4&&(ht=2),da===null?da=[i]:da.push(i),i=a;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var N=Sw(i,u,e);dy(i,N);break e;case 1:l=u;var _=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Xn===null||!Xn.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var A=jw(i,l,e);dy(i,A);break e}}i=i.return}while(i!==null)}Hw(r)}catch(L){e=L,at===r&&r!==null&&(at=r=r.return);continue}break}while(1)}function $w(){var t=Qc.current;return Qc.current=Kc,t===null?Kc:t}function pp(){(ht===0||ht===3||ht===2)&&(ht=4),vt===null||!(Qs&268435455)&&!(Vu&268435455)||Ln(vt,Nt)}function Xc(t,e){var r=Ee;Ee|=2;var n=$w();(vt!==t||Nt!==e)&&(tn=null,zs(t,e));do try{a4();break}catch(s){Bw(t,s)}while(1);if(Jm(),Ee=r,Qc.current=n,at!==null)throw Error(B(261));return vt=null,Nt=0,ht}function a4(){for(;at!==null;)Ww(at)}function l4(){for(;at!==null&&!RE();)Ww(at)}function Ww(t){var e=Gw(t.alternate,t,er);t.memoizedProps=t.pendingProps,e===null?Hw(t):at=e,up.current=null}function Hw(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=t4(r,e),r!==null){r.flags&=32767,at=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ht=6,at=null;return}}else if(r=e4(r,e,er),r!==null){at=r;return}if(e=e.sibling,e!==null){at=e;return}at=e=t}while(e!==null);ht===0&&(ht=5)}function Ds(t,e,r){var n=Te,s=yr.transition;try{yr.transition=null,Te=1,c4(t,e,r,n)}finally{yr.transition=s,Te=n}return null}function c4(t,e,r,n){do Li();while($n!==null);if(Ee&6)throw Error(B(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(B(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if($E(t,i),t===vt&&(at=vt=null,Nt=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Gl||(Gl=!0,Kw(Rc,function(){return Li(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=yr.transition,yr.transition=null;var a=Te;Te=1;var l=Ee;Ee|=4,up.current=null,n4(t,r),Fw(r,t),CS(xf),Mc=!!vf,xf=vf=null,t.current=r,s4(r),DE(),Ee=l,Te=a,yr.transition=i}else t.current=r;if(Gl&&(Gl=!1,$n=t,Jc=s),i=t.pendingLanes,i===0&&(Xn=null),VE(r.stateNode),Yt(t,tt()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Yc)throw Yc=!1,t=Ff,Ff=null,t;return Jc&1&&t.tag!==0&&Li(),i=t.pendingLanes,i&1?t===Uf?ha++:(ha=0,Uf=t):ha=0,_s(),null}function Li(){if($n!==null){var t=S1(Jc),e=yr.transition,r=Te;try{if(yr.transition=null,Te=16>t?16:t,$n===null)var n=!1;else{if(t=$n,$n=null,Jc=0,Ee&6)throw Error(B(331));var s=Ee;for(Ee|=4,ee=t.current;ee!==null;){var i=ee,a=i.child;if(ee.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(ee=d;ee!==null;){var h=ee;switch(h.tag){case 0:case 11:case 15:ua(8,h,i)}var f=h.child;if(f!==null)f.return=h,ee=f;else for(;ee!==null;){h=ee;var m=h.sibling,v=h.return;if(Lw(h),h===d){ee=null;break}if(m!==null){m.return=v,ee=m;break}ee=v}}}var x=i.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var j=y.sibling;y.sibling=null,y=j}while(y!==null)}}ee=i}}if(i.subtreeFlags&2064&&a!==null)a.return=i,ee=a;else e:for(;ee!==null;){if(i=ee,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ua(9,i,i.return)}var N=i.sibling;if(N!==null){N.return=i.return,ee=N;break e}ee=i.return}}var _=t.current;for(ee=_;ee!==null;){a=ee;var S=a.child;if(a.subtreeFlags&2064&&S!==null)S.return=a,ee=S;else e:for(a=_;ee!==null;){if(l=ee,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Lu(9,l)}}catch(L){Je(l,l.return,L)}if(l===a){ee=null;break e}var A=l.sibling;if(A!==null){A.return=l.return,ee=A;break e}ee=l.return}}if(Ee=s,_s(),Wr&&typeof Wr.onPostCommitFiberRoot=="function")try{Wr.onPostCommitFiberRoot(Iu,t)}catch{}n=!0}return n}finally{Te=r,yr.transition=e}}return!1}function Py(t,e,r){e=Yi(r,e),e=Sw(t,e,1),t=Jn(t,e,1),e=zt(),t!==null&&(el(t,1,e),Yt(t,e))}function Je(t,e,r){if(t.tag===3)Py(t,t,r);else for(;e!==null;){if(e.tag===3){Py(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Xn===null||!Xn.has(n))){t=Yi(r,t),t=jw(e,t,1),e=Jn(e,t,1),t=zt(),e!==null&&(el(e,1,t),Yt(e,t));break}}e=e.return}}function u4(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=zt(),t.pingedLanes|=t.suspendedLanes&r,vt===t&&(Nt&r)===r&&(ht===4||ht===3&&(Nt&130023424)===Nt&&500>tt()-hp?zs(t,0):dp|=r),Yt(t,e)}function qw(t,e){e===0&&(t.mode&1?(e=Vl,Vl<<=1,!(Vl&130023424)&&(Vl=4194304)):e=1);var r=zt();t=hn(t,e),t!==null&&(el(t,e,r),Yt(t,r))}function d4(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),qw(t,r)}function h4(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(B(314))}n!==null&&n.delete(e),qw(t,r)}var Gw;Gw=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Kt.current)Gt=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Gt=!1,ZS(t,e,r);Gt=!!(t.flags&131072)}else Gt=!1,Be&&e.flags&1048576&&J1(e,Bc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;cc(t,e),t=e.pendingProps;var s=qi(e,Mt.current);Mi(e,r),s=ip(null,e,n,t,s,r);var i=op();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Qt(n)?(i=!0,Uc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,ep(e),s.updater=Mu,e.stateNode=s,s._reactInternals=e,If(e,n,t,r),e=Af(null,e,n,!0,i,r)):(e.tag=0,Be&&i&&Gm(e),Ft(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch(cc(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=m4(n),t=Nr(n,t),s){case 0:e=kf(null,e,n,t,r);break e;case 1:e=_y(null,e,n,t,r);break e;case 11:e=wy(null,e,n,t,r);break e;case 14:e=by(null,e,n,Nr(n.type,t),r);break e}throw Error(B(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Nr(n,s),kf(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Nr(n,s),_y(t,e,n,s,r);case 3:e:{if(kw(e),t===null)throw Error(B(387));n=e.pendingProps,i=e.memoizedState,s=i.element,nw(t,e),Hc(e,n,null,r);var a=e.memoizedState;if(n=a.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Yi(Error(B(423)),e),e=Ny(t,e,n,r,s);break e}else if(n!==s){s=Yi(Error(B(424)),e),e=Ny(t,e,n,r,s);break e}else for(rr=Yn(e.stateNode.containerInfo.firstChild),sr=e,Be=!0,Sr=null,r=tw(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Gi(),n===s){e=fn(t,e,r);break e}Ft(t,e,n,r)}e=e.child}return e;case 5:return sw(e),t===null&&Sf(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,a=s.children,wf(n,s)?a=null:i!==null&&wf(n,i)&&(e.flags|=32),Cw(t,e),Ft(t,e,a,r),e.child;case 6:return t===null&&Sf(e),null;case 13:return Aw(t,e,r);case 4:return tp(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ki(e,null,n,r):Ft(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Nr(n,s),wy(t,e,n,s,r);case 7:return Ft(t,e,e.pendingProps,r),e.child;case 8:return Ft(t,e,e.pendingProps.children,r),e.child;case 12:return Ft(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,a=s.value,De($c,n._currentValue),n._currentValue=a,i!==null)if(Ar(i.value,a)){if(i.children===s.children&&!Kt.current){e=fn(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){a=i.child;for(var u=l.firstContext;u!==null;){if(u.context===n){if(i.tag===1){u=ln(-1,r&-r),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var h=d.pending;h===null?u.next=u:(u.next=h.next,h.next=u),d.pending=u}}i.lanes|=r,u=i.alternate,u!==null&&(u.lanes|=r),jf(i.return,r,e),l.lanes|=r;break}u=u.next}}else if(i.tag===10)a=i.type===e.type?null:i.child;else if(i.tag===18){if(a=i.return,a===null)throw Error(B(341));a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),jf(a,r,e),a=i.sibling}else a=i.child;if(a!==null)a.return=i;else for(a=i;a!==null;){if(a===e){a=null;break}if(i=a.sibling,i!==null){i.return=a.return,a=i;break}a=a.return}i=a}Ft(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Mi(e,r),s=vr(s),n=n(s),e.flags|=1,Ft(t,e,n,r),e.child;case 14:return n=e.type,s=Nr(n,e.pendingProps),s=Nr(n.type,s),by(t,e,n,s,r);case 15:return Tw(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Nr(n,s),cc(t,e),e.tag=1,Qt(n)?(t=!0,Uc(e)):t=!1,Mi(e,r),Ew(e,n,s),If(e,n,s,r),Af(null,e,n,!0,t,r);case 19:return Pw(t,e,r);case 22:return Iw(t,e,r)}throw Error(B(156,e.tag))};function Kw(t,e){return b1(t,e)}function f4(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(t,e,r,n){return new f4(t,e,r,n)}function gp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function m4(t){if(typeof t=="function")return gp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Mm)return 11;if(t===Lm)return 14}return 2}function es(t,e){var r=t.alternate;return r===null?(r=gr(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function hc(t,e,r,n,s,i){var a=2;if(n=t,typeof t=="function")gp(t)&&(a=1);else if(typeof t=="string")a=5;else e:switch(t){case vi:return Bs(r.children,s,i,e);case Dm:a=8,s|=8;break;case Jh:return t=gr(12,r,e,s|2),t.elementType=Jh,t.lanes=i,t;case Xh:return t=gr(13,r,e,s),t.elementType=Xh,t.lanes=i,t;case Zh:return t=gr(19,r,e,s),t.elementType=Zh,t.lanes=i,t;case s1:return Ou(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case r1:a=10;break e;case n1:a=9;break e;case Mm:a=11;break e;case Lm:a=14;break e;case Pn:a=16,n=null;break e}throw Error(B(130,t==null?t:typeof t,""))}return e=gr(a,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function Bs(t,e,r,n){return t=gr(7,t,n,e),t.lanes=r,t}function Ou(t,e,r,n){return t=gr(22,t,n,e),t.elementType=s1,t.lanes=r,t.stateNode={isHidden:!1},t}function Nh(t,e,r){return t=gr(6,t,null,e),t.lanes=r,t}function Eh(t,e,r){return e=gr(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function p4(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=sh(0),this.expirationTimes=sh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=sh(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function yp(t,e,r,n,s,i,a,l,u){return t=new p4(t,e,r,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=gr(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},ep(i),t}function g4(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:yi,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Qw(t){if(!t)return ds;t=t._reactInternals;e:{if(ii(t)!==t||t.tag!==1)throw Error(B(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Qt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(B(171))}if(t.tag===1){var r=t.type;if(Qt(r))return Q1(t,r,e)}return e}function Yw(t,e,r,n,s,i,a,l,u){return t=yp(r,n,!0,t,s,i,a,l,u),t.context=Qw(null),r=t.current,n=zt(),s=Zn(r),i=ln(n,s),i.callback=e??null,Jn(r,i,s),t.current.lanes=s,el(t,s,n),Yt(t,n),t}function Fu(t,e,r,n){var s=e.current,i=zt(),a=Zn(s);return r=Qw(r),e.context===null?e.context=r:e.pendingContext=r,e=ln(i,a),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Jn(s,e,a),t!==null&&(Cr(t,s,a,i),oc(t,s,a)),a}function Zc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Ry(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function vp(t,e){Ry(t,e),(t=t.alternate)&&Ry(t,e)}function y4(){return null}var Jw=typeof reportError=="function"?reportError:function(t){console.error(t)};function xp(t){this._internalRoot=t}Uu.prototype.render=xp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(B(409));Fu(t,e,null,null)};Uu.prototype.unmount=xp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ys(function(){Fu(null,t,null,null)}),e[dn]=null}};function Uu(t){this._internalRoot=t}Uu.prototype.unstable_scheduleHydration=function(t){if(t){var e=I1();t={blockedOn:null,target:t,priority:e};for(var r=0;r<Mn.length&&e!==0&&e<Mn[r].priority;r++);Mn.splice(r,0,t),r===0&&k1(t)}};function wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Dy(){}function v4(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var d=Zc(a);i.call(d)}}var a=Yw(e,n,t,0,null,!1,!1,"",Dy);return t._reactRootContainer=a,t[dn]=a.current,Ca(t.nodeType===8?t.parentNode:t),Ys(),a}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var l=n;n=function(){var d=Zc(u);l.call(d)}}var u=yp(t,0,!1,null,null,!1,!1,"",Dy);return t._reactRootContainer=u,t[dn]=u.current,Ca(t.nodeType===8?t.parentNode:t),Ys(function(){Fu(e,u,r,n)}),u}function Bu(t,e,r,n,s){var i=r._reactRootContainer;if(i){var a=i;if(typeof s=="function"){var l=s;s=function(){var u=Zc(a);l.call(u)}}Fu(e,a,t,s)}else a=v4(r,e,t,s,n);return Zc(a)}j1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=Jo(e.pendingLanes);r!==0&&(Fm(e,r|1),Yt(e,tt()),!(Ee&6)&&(Ji=tt()+500,_s()))}break;case 13:Ys(function(){var n=hn(t,1);if(n!==null){var s=zt();Cr(n,t,1,s)}}),vp(t,1)}};Um=function(t){if(t.tag===13){var e=hn(t,134217728);if(e!==null){var r=zt();Cr(e,t,134217728,r)}vp(t,134217728)}};T1=function(t){if(t.tag===13){var e=Zn(t),r=hn(t,e);if(r!==null){var n=zt();Cr(r,t,e,n)}vp(t,e)}};I1=function(){return Te};C1=function(t,e){var r=Te;try{return Te=t,e()}finally{Te=r}};uf=function(t,e,r){switch(e){case"input":if(rf(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=Pu(n);if(!s)throw Error(B(90));o1(n),rf(n,s)}}}break;case"textarea":l1(t,r);break;case"select":e=r.value,e!=null&&Ai(t,!!r.multiple,e,!1)}};p1=fp;g1=Ys;var x4={usingClientEntryPoint:!1,Events:[rl,_i,Pu,f1,m1,fp]},Go={findFiberByHostInstance:Vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},w4={bundleType:Go.bundleType,version:Go.version,rendererPackageName:Go.rendererPackageName,rendererConfig:Go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=x1(t),t===null?null:t.stateNode},findFiberByHostInstance:Go.findFiberByHostInstance||y4,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kl.isDisabled&&Kl.supportsFiber)try{Iu=Kl.inject(w4),Wr=Kl}catch{}}ar.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=x4;ar.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wp(e))throw Error(B(200));return g4(t,e,null,r)};ar.createRoot=function(t,e){if(!wp(t))throw Error(B(299));var r=!1,n="",s=Jw;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=yp(t,1,!1,null,null,r,!1,n,s),t[dn]=e.current,Ca(t.nodeType===8?t.parentNode:t),new xp(e)};ar.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(B(188)):(t=Object.keys(t).join(","),Error(B(268,t)));return t=x1(e),t=t===null?null:t.stateNode,t};ar.flushSync=function(t){return Ys(t)};ar.hydrate=function(t,e,r){if(!zu(e))throw Error(B(200));return Bu(null,t,e,!0,r)};ar.hydrateRoot=function(t,e,r){if(!wp(t))throw Error(B(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",a=Jw;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(a=r.onRecoverableError)),e=Yw(e,null,t,1,r??null,s,!1,i,a),t[dn]=e.current,Ca(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new Uu(e)};ar.render=function(t,e,r){if(!zu(e))throw Error(B(200));return Bu(null,t,e,!1,r)};ar.unmountComponentAtNode=function(t){if(!zu(t))throw Error(B(40));return t._reactRootContainer?(Ys(function(){Bu(null,null,t,!1,function(){t._reactRootContainer=null,t[dn]=null})}),!0):!1};ar.unstable_batchedUpdates=fp;ar.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!zu(r))throw Error(B(200));if(t==null||t._reactInternals===void 0)throw Error(B(38));return Bu(t,e,r,!1,n)};ar.version="18.3.1-next-f1338f8080-20240426";function Xw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Xw)}catch(t){console.error(t)}}Xw(),Xx.exports=ar;var Zw=Xx.exports,My=Zw;Qh.createRoot=My.createRoot,Qh.hydrateRoot=My.hydrateRoot;var e2={exports:{}},t2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xi=R;function b4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var _4=typeof Object.is=="function"?Object.is:b4,N4=Xi.useState,E4=Xi.useEffect,S4=Xi.useLayoutEffect,j4=Xi.useDebugValue;function T4(t,e){var r=e(),n=N4({inst:{value:r,getSnapshot:e}}),s=n[0].inst,i=n[1];return S4(function(){s.value=r,s.getSnapshot=e,Sh(s)&&i({inst:s})},[t,r,e]),E4(function(){return Sh(s)&&i({inst:s}),t(function(){Sh(s)&&i({inst:s})})},[t]),j4(r),r}function Sh(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!_4(t,r)}catch{return!0}}function I4(t,e){return e()}var C4=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?I4:T4;t2.useSyncExternalStore=Xi.useSyncExternalStore!==void 0?Xi.useSyncExternalStore:C4;e2.exports=t2;var k4=e2.exports,r2={exports:{}},n2={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $u=R,A4=k4;function P4(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var R4=typeof Object.is=="function"?Object.is:P4,D4=A4.useSyncExternalStore,M4=$u.useRef,L4=$u.useEffect,V4=$u.useMemo,O4=$u.useDebugValue;n2.useSyncExternalStoreWithSelector=function(t,e,r,n,s){var i=M4(null);if(i.current===null){var a={hasValue:!1,value:null};i.current=a}else a=i.current;i=V4(function(){function u(v){if(!d){if(d=!0,h=v,v=n(v),s!==void 0&&a.hasValue){var x=a.value;if(s(x,v))return f=x}return f=v}if(x=f,R4(h,v))return x;var y=n(v);return s!==void 0&&s(x,y)?(h=v,x):(h=v,f=y)}var d=!1,h,f,m=r===void 0?null:r;return[function(){return u(e())},m===null?void 0:function(){return u(m())}]},[e,r,n,s]);var l=D4(t,i[0],i[1]);return L4(function(){a.hasValue=!0,a.value=l},[l]),O4(l),l};r2.exports=n2;var F4=r2.exports;function U4(t){t()}let s2=U4;const z4=t=>s2=t,B4=()=>s2,Ly=Symbol.for("react-redux-context"),Vy=typeof globalThis<"u"?globalThis:{};function $4(){var t;if(!R.createContext)return{};const e=(t=Vy[Ly])!=null?t:Vy[Ly]=new Map;let r=e.get(R.createContext);return r||(r=R.createContext(null),e.set(R.createContext,r)),r}const hs=$4();function bp(t=hs){return function(){return R.useContext(t)}}const i2=bp(),W4=()=>{throw new Error("uSES not initialized!")};let o2=W4;const H4=t=>{o2=t},q4=(t,e)=>t===e;function G4(t=hs){const e=t===hs?i2:bp(t);return function(n,s={}){const{equalityFn:i=q4,stabilityCheck:a=void 0,noopCheck:l=void 0}=typeof s=="function"?{equalityFn:s}:s,{store:u,subscription:d,getServerState:h,stabilityCheck:f,noopCheck:m}=e();R.useRef(!0);const v=R.useCallback({[n.name](y){return n(y)}}[n.name],[n,f,a]),x=o2(d.addNestedSub,u.getState,h||u.getState,v,i);return R.useDebugValue(x),x}}const $e=G4();var a2={exports:{}},Ie={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xt=typeof Symbol=="function"&&Symbol.for,_p=xt?Symbol.for("react.element"):60103,Np=xt?Symbol.for("react.portal"):60106,Wu=xt?Symbol.for("react.fragment"):60107,Hu=xt?Symbol.for("react.strict_mode"):60108,qu=xt?Symbol.for("react.profiler"):60114,Gu=xt?Symbol.for("react.provider"):60109,Ku=xt?Symbol.for("react.context"):60110,Ep=xt?Symbol.for("react.async_mode"):60111,Qu=xt?Symbol.for("react.concurrent_mode"):60111,Yu=xt?Symbol.for("react.forward_ref"):60112,Ju=xt?Symbol.for("react.suspense"):60113,K4=xt?Symbol.for("react.suspense_list"):60120,Xu=xt?Symbol.for("react.memo"):60115,Zu=xt?Symbol.for("react.lazy"):60116,Q4=xt?Symbol.for("react.block"):60121,Y4=xt?Symbol.for("react.fundamental"):60117,J4=xt?Symbol.for("react.responder"):60118,X4=xt?Symbol.for("react.scope"):60119;function cr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case _p:switch(t=t.type,t){case Ep:case Qu:case Wu:case qu:case Hu:case Ju:return t;default:switch(t=t&&t.$$typeof,t){case Ku:case Yu:case Zu:case Xu:case Gu:return t;default:return e}}case Np:return e}}}function l2(t){return cr(t)===Qu}Ie.AsyncMode=Ep;Ie.ConcurrentMode=Qu;Ie.ContextConsumer=Ku;Ie.ContextProvider=Gu;Ie.Element=_p;Ie.ForwardRef=Yu;Ie.Fragment=Wu;Ie.Lazy=Zu;Ie.Memo=Xu;Ie.Portal=Np;Ie.Profiler=qu;Ie.StrictMode=Hu;Ie.Suspense=Ju;Ie.isAsyncMode=function(t){return l2(t)||cr(t)===Ep};Ie.isConcurrentMode=l2;Ie.isContextConsumer=function(t){return cr(t)===Ku};Ie.isContextProvider=function(t){return cr(t)===Gu};Ie.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===_p};Ie.isForwardRef=function(t){return cr(t)===Yu};Ie.isFragment=function(t){return cr(t)===Wu};Ie.isLazy=function(t){return cr(t)===Zu};Ie.isMemo=function(t){return cr(t)===Xu};Ie.isPortal=function(t){return cr(t)===Np};Ie.isProfiler=function(t){return cr(t)===qu};Ie.isStrictMode=function(t){return cr(t)===Hu};Ie.isSuspense=function(t){return cr(t)===Ju};Ie.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Wu||t===Qu||t===qu||t===Hu||t===Ju||t===K4||typeof t=="object"&&t!==null&&(t.$$typeof===Zu||t.$$typeof===Xu||t.$$typeof===Gu||t.$$typeof===Ku||t.$$typeof===Yu||t.$$typeof===Y4||t.$$typeof===J4||t.$$typeof===X4||t.$$typeof===Q4)};Ie.typeOf=cr;a2.exports=Ie;var Z4=a2.exports,c2=Z4,ej={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},tj={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},u2={};u2[c2.ForwardRef]=ej;u2[c2.Memo]=tj;var Ce={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp=Symbol.for("react.element"),jp=Symbol.for("react.portal"),ed=Symbol.for("react.fragment"),td=Symbol.for("react.strict_mode"),rd=Symbol.for("react.profiler"),nd=Symbol.for("react.provider"),sd=Symbol.for("react.context"),rj=Symbol.for("react.server_context"),id=Symbol.for("react.forward_ref"),od=Symbol.for("react.suspense"),ad=Symbol.for("react.suspense_list"),ld=Symbol.for("react.memo"),cd=Symbol.for("react.lazy"),nj=Symbol.for("react.offscreen"),d2;d2=Symbol.for("react.module.reference");function wr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case Sp:switch(t=t.type,t){case ed:case rd:case td:case od:case ad:return t;default:switch(t=t&&t.$$typeof,t){case rj:case sd:case id:case cd:case ld:case nd:return t;default:return e}}case jp:return e}}}Ce.ContextConsumer=sd;Ce.ContextProvider=nd;Ce.Element=Sp;Ce.ForwardRef=id;Ce.Fragment=ed;Ce.Lazy=cd;Ce.Memo=ld;Ce.Portal=jp;Ce.Profiler=rd;Ce.StrictMode=td;Ce.Suspense=od;Ce.SuspenseList=ad;Ce.isAsyncMode=function(){return!1};Ce.isConcurrentMode=function(){return!1};Ce.isContextConsumer=function(t){return wr(t)===sd};Ce.isContextProvider=function(t){return wr(t)===nd};Ce.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===Sp};Ce.isForwardRef=function(t){return wr(t)===id};Ce.isFragment=function(t){return wr(t)===ed};Ce.isLazy=function(t){return wr(t)===cd};Ce.isMemo=function(t){return wr(t)===ld};Ce.isPortal=function(t){return wr(t)===jp};Ce.isProfiler=function(t){return wr(t)===rd};Ce.isStrictMode=function(t){return wr(t)===td};Ce.isSuspense=function(t){return wr(t)===od};Ce.isSuspenseList=function(t){return wr(t)===ad};Ce.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===ed||t===rd||t===td||t===od||t===ad||t===nj||typeof t=="object"&&t!==null&&(t.$$typeof===cd||t.$$typeof===ld||t.$$typeof===nd||t.$$typeof===sd||t.$$typeof===id||t.$$typeof===d2||t.getModuleId!==void 0)};Ce.typeOf=wr;function sj(){const t=B4();let e=null,r=null;return{clear(){e=null,r=null},notify(){t(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){let n=[],s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0,i=r={callback:n,next:null,prev:r};return i.prev?i.prev.next=i:e=i,function(){!s||e===null||(s=!1,i.next?i.next.prev=i.prev:r=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}const Oy={notify(){},get:()=>[]};function ij(t,e){let r,n=Oy,s=0,i=!1;function a(y){h();const j=n.subscribe(y);let N=!1;return()=>{N||(N=!0,j(),f())}}function l(){n.notify()}function u(){x.onStateChange&&x.onStateChange()}function d(){return i}function h(){s++,r||(r=e?e.addNestedSub(u):t.subscribe(u),n=sj())}function f(){s--,r&&s===0&&(r(),r=void 0,n.clear(),n=Oy)}function m(){i||(i=!0,h())}function v(){i&&(i=!1,f())}const x={addNestedSub:a,notifyNestedSubs:l,handleChangeWrapper:u,isSubscribed:d,trySubscribe:m,tryUnsubscribe:v,getListeners:()=>n};return x}const oj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",aj=oj?R.useLayoutEffect:R.useEffect;function lj({store:t,context:e,children:r,serverState:n,stabilityCheck:s="once",noopCheck:i="once"}){const a=R.useMemo(()=>{const d=ij(t);return{store:t,subscription:d,getServerState:n?()=>n:void 0,stabilityCheck:s,noopCheck:i}},[t,n,s,i]),l=R.useMemo(()=>t.getState(),[t]);aj(()=>{const{subscription:d}=a;return d.onStateChange=d.notifyNestedSubs,d.trySubscribe(),l!==t.getState()&&d.notifyNestedSubs(),()=>{d.tryUnsubscribe(),d.onStateChange=void 0}},[a,l]);const u=e||hs;return R.createElement(u.Provider,{value:a},r)}function h2(t=hs){const e=t===hs?i2:bp(t);return function(){const{store:n}=e();return n}}const cj=h2();function uj(t=hs){const e=t===hs?cj:h2(t);return function(){return e().dispatch}}const en=uj();H4(F4.useSyncExternalStoreWithSelector);z4(Zw.unstable_batchedUpdates);/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Oa(){return Oa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Oa.apply(this,arguments)}var Wn;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Wn||(Wn={}));const Fy="popstate";function dj(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:a,hash:l}=n.location;return $f("",{pathname:i,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:eu(s)}return fj(e,r,null,t)}function nt(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Tp(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hj(){return Math.random().toString(36).substr(2,8)}function Uy(t,e){return{usr:t.state,key:t.key,idx:e}}function $f(t,e,r,n){return r===void 0&&(r=null),Oa({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?fo(e):e,{state:r,key:e&&e.key||n||hj()})}function eu(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function fo(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function fj(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,a=s.history,l=Wn.Pop,u=null,d=h();d==null&&(d=0,a.replaceState(Oa({},a.state,{idx:d}),""));function h(){return(a.state||{idx:null}).idx}function f(){l=Wn.Pop;let j=h(),N=j==null?null:j-d;d=j,u&&u({action:l,location:y.location,delta:N})}function m(j,N){l=Wn.Push;let _=$f(y.location,j,N);r&&r(_,j),d=h()+1;let S=Uy(_,d),A=y.createHref(_);try{a.pushState(S,"",A)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(A)}i&&u&&u({action:l,location:y.location,delta:1})}function v(j,N){l=Wn.Replace;let _=$f(y.location,j,N);r&&r(_,j),d=h();let S=Uy(_,d),A=y.createHref(_);a.replaceState(S,"",A),i&&u&&u({action:l,location:y.location,delta:0})}function x(j){let N=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof j=="string"?j:eu(j);return _=_.replace(/ $/,"%20"),nt(N,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,N)}let y={get action(){return l},get location(){return t(s,a)},listen(j){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Fy,f),u=j,()=>{s.removeEventListener(Fy,f),u=null}},createHref(j){return e(s,j)},createURL:x,encodeLocation(j){let N=x(j);return{pathname:N.pathname,search:N.search,hash:N.hash}},push:m,replace:v,go(j){return a.go(j)}};return y}var zy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(zy||(zy={}));function mj(t,e,r){return r===void 0&&(r="/"),pj(t,e,r,!1)}function pj(t,e,r,n){let s=typeof e=="string"?fo(e):e,i=Ip(s.pathname||"/",r);if(i==null)return null;let a=f2(t);gj(a);let l=null;for(let u=0;l==null&&u<a.length;++u){let d=Tj(i);l=Sj(a[u],d,n)}return l}function f2(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,a,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:a,route:i};u.relativePath.startsWith("/")&&(nt(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let d=ts([n,u.relativePath]),h=r.concat(u);i.children&&i.children.length>0&&(nt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),f2(i.children,e,h,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:Nj(d,i.index),routesMeta:h})};return t.forEach((i,a)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,a);else for(let u of m2(i.path))s(i,a,u)}),e}function m2(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let a=m2(n.join("/")),l=[];return l.push(...a.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...a),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function gj(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:Ej(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const yj=/^:[\w-]+$/,vj=3,xj=2,wj=1,bj=10,_j=-2,By=t=>t==="*";function Nj(t,e){let r=t.split("/"),n=r.length;return r.some(By)&&(n+=_j),e&&(n+=xj),r.filter(s=>!By(s)).reduce((s,i)=>s+(yj.test(i)?vj:i===""?wj:bj),n)}function Ej(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function Sj(t,e,r){r===void 0&&(r=!1);let{routesMeta:n}=t,s={},i="/",a=[];for(let l=0;l<n.length;++l){let u=n[l],d=l===n.length-1,h=i==="/"?e:e.slice(i.length)||"/",f=$y({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!f&&d&&r&&!n[n.length-1].route.index&&(f=$y({path:u.relativePath,caseSensitive:u.caseSensitive,end:!1},h)),!f)return null;Object.assign(s,f.params),a.push({params:s,pathname:ts([i,f.pathname]),pathnameBase:Pj(ts([i,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(i=ts([i,f.pathnameBase]))}return a}function $y(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=jj(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],a=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:n.reduce((d,h,f)=>{let{paramName:m,isOptional:v}=h;if(m==="*"){let y=l[f]||"";a=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const x=l[f];return v&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:a,pattern:t}}function jj(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),Tp(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Tj(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Tp(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ip(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}const Ij=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Cj=t=>Ij.test(t);function kj(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?fo(t):t,i;if(r)if(Cj(r))i=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),Tp(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+r))}r.startsWith("/")?i=Wy(r.substring(1),"/"):i=Wy(r,e)}else i=e;return{pathname:i,search:Rj(n),hash:Dj(s)}}function Wy(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function jh(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function Aj(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function Cp(t,e){let r=Aj(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function kp(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=fo(t):(s=Oa({},t),nt(!s.pathname||!s.pathname.includes("?"),jh("?","pathname","search",s)),nt(!s.pathname||!s.pathname.includes("#"),jh("#","pathname","hash",s)),nt(!s.search||!s.search.includes("#"),jh("#","search","hash",s)));let i=t===""||s.pathname==="",a=i?"/":s.pathname,l;if(a==null)l=r;else{let f=e.length-1;if(!n&&a.startsWith("..")){let m=a.split("/");for(;m[0]==="..";)m.shift(),f-=1;s.pathname=m.join("/")}l=f>=0?e[f]:"/"}let u=kj(s,l),d=a&&a!=="/"&&a.endsWith("/"),h=(i||a===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const ts=t=>t.join("/").replace(/\/\/+/g,"/"),Pj=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),Rj=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,Dj=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function Mj(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const p2=["post","put","patch","delete"];new Set(p2);const Lj=["get",...p2];new Set(Lj);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Fa(){return Fa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Fa.apply(this,arguments)}const Ap=R.createContext(null),Vj=R.createContext(null),Ns=R.createContext(null),ud=R.createContext(null),_n=R.createContext({outlet:null,matches:[],isDataRoute:!1}),g2=R.createContext(null);function Oj(t,e){let{relative:r}=e===void 0?{}:e;mo()||nt(!1);let{basename:n,navigator:s}=R.useContext(Ns),{hash:i,pathname:a,search:l}=v2(t,{relative:r}),u=a;return n!=="/"&&(u=a==="/"?n:ts([n,a])),s.createHref({pathname:u,search:l,hash:i})}function mo(){return R.useContext(ud)!=null}function Dr(){return mo()||nt(!1),R.useContext(ud).location}function y2(t){R.useContext(Ns).static||R.useLayoutEffect(t)}function Xt(){let{isDataRoute:t}=R.useContext(_n);return t?Zj():Fj()}function Fj(){mo()||nt(!1);let t=R.useContext(Ap),{basename:e,future:r,navigator:n}=R.useContext(Ns),{matches:s}=R.useContext(_n),{pathname:i}=Dr(),a=JSON.stringify(Cp(s,r.v7_relativeSplatPath)),l=R.useRef(!1);return y2(()=>{l.current=!0}),R.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){n.go(d);return}let f=kp(d,JSON.parse(a),i,h.relative==="path");t==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ts([e,f.pathname])),(h.replace?n.replace:n.push)(f,h.state,h)},[e,n,a,i,t])}const Uj=R.createContext(null);function zj(t){let e=R.useContext(_n).outlet;return e&&R.createElement(Uj.Provider,{value:t},e)}function v2(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=R.useContext(Ns),{matches:s}=R.useContext(_n),{pathname:i}=Dr(),a=JSON.stringify(Cp(s,n.v7_relativeSplatPath));return R.useMemo(()=>kp(t,JSON.parse(a),i,r==="path"),[t,a,i,r])}function Bj(t,e){return $j(t,e)}function $j(t,e,r,n){mo()||nt(!1);let{navigator:s}=R.useContext(Ns),{matches:i}=R.useContext(_n),a=i[i.length-1],l=a?a.params:{};a&&a.pathname;let u=a?a.pathnameBase:"/";a&&a.route;let d=Dr(),h;if(e){var f;let j=typeof e=="string"?fo(e):e;u==="/"||(f=j.pathname)!=null&&f.startsWith(u)||nt(!1),h=j}else h=d;let m=h.pathname||"/",v=m;if(u!=="/"){let j=u.replace(/^\//,"").split("/");v="/"+m.replace(/^\//,"").split("/").slice(j.length).join("/")}let x=mj(t,{pathname:v}),y=Kj(x&&x.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:ts([u,s.encodeLocation?s.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?u:ts([u,s.encodeLocation?s.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,r,n);return e&&y?R.createElement(ud.Provider,{value:{location:Fa({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Wn.Pop}},y):y}function Wj(){let t=Xj(),e=Mj(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),r?R.createElement("pre",{style:s},r):null,i)}const Hj=R.createElement(Wj,null);class qj extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?R.createElement(_n.Provider,{value:this.props.routeContext},R.createElement(g2.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Gj(t){let{routeContext:e,match:r,children:n}=t,s=R.useContext(Ap);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),R.createElement(_n.Provider,{value:e},n)}function Kj(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let a=t,l=(s=r)==null?void 0:s.errors;if(l!=null){let h=a.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);h>=0||nt(!1),a=a.slice(0,Math.min(a.length,h+1))}let u=!1,d=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<a.length;h++){let f=a[h];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(d=h),f.route.id){let{loaderData:m,errors:v}=r,x=f.route.loader&&m[f.route.id]===void 0&&(!v||v[f.route.id]===void 0);if(f.route.lazy||x){u=!0,d>=0?a=a.slice(0,d+1):a=[a[0]];break}}}return a.reduceRight((h,f,m)=>{let v,x=!1,y=null,j=null;r&&(v=l&&f.route.id?l[f.route.id]:void 0,y=f.route.errorElement||Hj,u&&(d<0&&m===0?(eT("route-fallback",!1),x=!0,j=null):d===m&&(x=!0,j=f.route.hydrateFallbackElement||null)));let N=e.concat(a.slice(0,m+1)),_=()=>{let S;return v?S=y:x?S=j:f.route.Component?S=R.createElement(f.route.Component,null):f.route.element?S=f.route.element:S=h,R.createElement(Gj,{match:f,routeContext:{outlet:h,matches:N,isDataRoute:r!=null},children:S})};return r&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?R.createElement(qj,{location:r.location,revalidation:r.revalidation,component:y,error:v,children:_(),routeContext:{outlet:null,matches:N,isDataRoute:!0}}):_()},null)}var x2=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(x2||{}),tu=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(tu||{});function Qj(t){let e=R.useContext(Ap);return e||nt(!1),e}function Yj(t){let e=R.useContext(Vj);return e||nt(!1),e}function Jj(t){let e=R.useContext(_n);return e||nt(!1),e}function w2(t){let e=Jj(),r=e.matches[e.matches.length-1];return r.route.id||nt(!1),r.route.id}function Xj(){var t;let e=R.useContext(g2),r=Yj(tu.UseRouteError),n=w2(tu.UseRouteError);return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function Zj(){let{router:t}=Qj(x2.UseNavigateStable),e=w2(tu.UseNavigateStable),r=R.useRef(!1);return y2(()=>{r.current=!0}),R.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Fa({fromRouteId:e},i)))},[t,e])}const Hy={};function eT(t,e,r){!e&&!Hy[t]&&(Hy[t]=!0)}function tT(t,e){t==null||t.v7_startTransition,(t==null?void 0:t.v7_relativeSplatPath)===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function ru(t){let{to:e,replace:r,state:n,relative:s}=t;mo()||nt(!1);let{future:i,static:a}=R.useContext(Ns),{matches:l}=R.useContext(_n),{pathname:u}=Dr(),d=Xt(),h=kp(e,Cp(l,i.v7_relativeSplatPath),u,s==="path"),f=JSON.stringify(h);return R.useEffect(()=>d(JSON.parse(f),{replace:r,state:n,relative:s}),[d,f,s,r,n]),null}function rT(t){return zj(t.context)}function st(t){nt(!1)}function nT(t){let{basename:e="/",children:r=null,location:n,navigationType:s=Wn.Pop,navigator:i,static:a=!1,future:l}=t;mo()&&nt(!1);let u=e.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:u,navigator:i,static:a,future:Fa({v7_relativeSplatPath:!1},l)}),[u,l,i,a]);typeof n=="string"&&(n=fo(n));let{pathname:h="/",search:f="",hash:m="",state:v=null,key:x="default"}=n,y=R.useMemo(()=>{let j=Ip(h,u);return j==null?null:{location:{pathname:j,search:f,hash:m,state:v,key:x},navigationType:s}},[u,h,f,m,v,x,s]);return y==null?null:R.createElement(Ns.Provider,{value:d},R.createElement(ud.Provider,{children:r,value:y}))}function sT(t){let{children:e,location:r}=t;return Bj(Wf(e),r)}new Promise(()=>{});function Wf(t,e){e===void 0&&(e=[]);let r=[];return R.Children.forEach(t,(n,s)=>{if(!R.isValidElement(n))return;let i=[...e,s];if(n.type===R.Fragment){r.push.apply(r,Wf(n.props.children,i));return}n.type!==st&&nt(!1),!n.props.index||!n.props.children||nt(!1);let a={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Wf(n.props.children,i)),r.push(a)}),r}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Hf(){return Hf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Hf.apply(this,arguments)}function iT(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function oT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function aT(t,e){return t.button===0&&(!e||e==="_self")&&!oT(t)}function qf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function lT(t,e){let r=qf(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}const cT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],uT="6";try{window.__reactRouterVersion=uT}catch{}const dT="startTransition",qy=uE[dT];function hT(t){let{basename:e,children:r,future:n,window:s}=t,i=R.useRef();i.current==null&&(i.current=dj({window:s,v5Compat:!0}));let a=i.current,[l,u]=R.useState({action:a.action,location:a.location}),{v7_startTransition:d}=n||{},h=R.useCallback(f=>{d&&qy?qy(()=>u(f)):u(f)},[u,d]);return R.useLayoutEffect(()=>a.listen(h),[a,h]),R.useEffect(()=>tT(n),[n]),R.createElement(nT,{basename:e,children:r,location:l.location,navigationType:l.action,navigator:a,future:n})}const fT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",mT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,rs=R.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:a,state:l,target:u,to:d,preventScrollReset:h,viewTransition:f}=e,m=iT(e,cT),{basename:v}=R.useContext(Ns),x,y=!1;if(typeof d=="string"&&mT.test(d)&&(x=d,fT))try{let S=new URL(window.location.href),A=d.startsWith("//")?new URL(S.protocol+d):new URL(d),L=Ip(A.pathname,v);A.origin===S.origin&&L!=null?d=L+A.search+A.hash:y=!0}catch{}let j=Oj(d,{relative:s}),N=pT(d,{replace:a,state:l,target:u,preventScrollReset:h,relative:s,viewTransition:f});function _(S){n&&n(S),S.defaultPrevented||N(S)}return R.createElement("a",Hf({},m,{href:x||j,onClick:y||i?n:_,ref:r,target:u}))});var Gy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Gy||(Gy={}));var Ky;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Ky||(Ky={}));function pT(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:a,viewTransition:l}=e===void 0?{}:e,u=Xt(),d=Dr(),h=v2(t,{relative:a});return R.useCallback(f=>{if(aT(f,r)){f.preventDefault();let m=n!==void 0?n:eu(d)===eu(h);u(t,{replace:m,state:s,preventScrollReset:i,relative:a,viewTransition:l})}},[d,u,h,n,s,r,t,i,a,l])}function gT(t){let e=R.useRef(qf(t)),r=R.useRef(!1),n=Dr(),s=R.useMemo(()=>lT(n.search,r.current?null:e.current),[n.search]),i=Xt(),a=R.useCallback((l,u)=>{const d=qf(typeof l=="function"?l(s):l);r.current=!0,i("?"+d,u)},[i,s]);return[s,a]}function jr(t){for(var e=arguments.length,r=Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];throw Error("[Immer] minified error nr: "+t+(r.length?" "+r.map(function(s){return"'"+s+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function fs(t){return!!t&&!!t[ze]}function mn(t){var e;return!!t&&(function(r){if(!r||typeof r!="object")return!1;var n=Object.getPrototypeOf(r);if(n===null)return!0;var s=Object.hasOwnProperty.call(n,"constructor")&&n.constructor;return s===Object||typeof s=="function"&&Function.toString.call(s)===ST}(t)||Array.isArray(t)||!!t[tv]||!!(!((e=t.constructor)===null||e===void 0)&&e[tv])||Pp(t)||Rp(t))}function Js(t,e,r){r===void 0&&(r=!1),po(t)===0?(r?Object.keys:Oi)(t).forEach(function(n){r&&typeof n=="symbol"||e(n,t[n],t)}):t.forEach(function(n,s){return e(s,n,t)})}function po(t){var e=t[ze];return e?e.i>3?e.i-4:e.i:Array.isArray(t)?1:Pp(t)?2:Rp(t)?3:0}function Vi(t,e){return po(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function yT(t,e){return po(t)===2?t.get(e):t[e]}function b2(t,e,r){var n=po(t);n===2?t.set(e,r):n===3?t.add(r):t[e]=r}function _2(t,e){return t===e?t!==0||1/t==1/e:t!=t&&e!=e}function Pp(t){return NT&&t instanceof Map}function Rp(t){return ET&&t instanceof Set}function Ms(t){return t.o||t.t}function Dp(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var e=E2(t);delete e[ze];for(var r=Oi(e),n=0;n<r.length;n++){var s=r[n],i=e[s];i.writable===!1&&(i.writable=!0,i.configurable=!0),(i.get||i.set)&&(e[s]={configurable:!0,writable:!0,enumerable:i.enumerable,value:t[s]})}return Object.create(Object.getPrototypeOf(t),e)}function Mp(t,e){return e===void 0&&(e=!1),Lp(t)||fs(t)||!mn(t)||(po(t)>1&&(t.set=t.add=t.clear=t.delete=vT),Object.freeze(t),e&&Js(t,function(r,n){return Mp(n,!0)},!0)),t}function vT(){jr(2)}function Lp(t){return t==null||typeof t!="object"||Object.isFrozen(t)}function qr(t){var e=Yf[t];return e||jr(18,t),e}function xT(t,e){Yf[t]||(Yf[t]=e)}function Gf(){return Ua}function Th(t,e){e&&(qr("Patches"),t.u=[],t.s=[],t.v=e)}function nu(t){Kf(t),t.p.forEach(wT),t.p=null}function Kf(t){t===Ua&&(Ua=t.l)}function Qy(t){return Ua={p:[],l:Ua,h:t,m:!0,_:0}}function wT(t){var e=t[ze];e.i===0||e.i===1?e.j():e.g=!0}function Ih(t,e){e._=e.p.length;var r=e.p[0],n=t!==void 0&&t!==r;return e.h.O||qr("ES5").S(e,t,n),n?(r[ze].P&&(nu(e),jr(4)),mn(t)&&(t=su(e,t),e.l||iu(e,t)),e.u&&qr("Patches").M(r[ze].t,t,e.u,e.s)):t=su(e,r,[]),nu(e),e.u&&e.v(e.u,e.s),t!==N2?t:void 0}function su(t,e,r){if(Lp(e))return e;var n=e[ze];if(!n)return Js(e,function(l,u){return Yy(t,n,e,l,u,r)},!0),e;if(n.A!==t)return e;if(!n.P)return iu(t,n.t,!0),n.t;if(!n.I){n.I=!0,n.A._--;var s=n.i===4||n.i===5?n.o=Dp(n.k):n.o,i=s,a=!1;n.i===3&&(i=new Set(s),s.clear(),a=!0),Js(i,function(l,u){return Yy(t,n,s,l,u,r,a)}),iu(t,s,!1),r&&t.u&&qr("Patches").N(n,r,t.u,t.s)}return n.o}function Yy(t,e,r,n,s,i,a){if(fs(s)){var l=su(t,s,i&&e&&e.i!==3&&!Vi(e.R,n)?i.concat(n):void 0);if(b2(r,n,l),!fs(l))return;t.m=!1}else a&&r.add(s);if(mn(s)&&!Lp(s)){if(!t.h.D&&t._<1)return;su(t,s),e&&e.A.l||iu(t,s)}}function iu(t,e,r){r===void 0&&(r=!1),!t.l&&t.h.D&&t.m&&Mp(e,r)}function Ch(t,e){var r=t[ze];return(r?Ms(r):t)[e]}function Jy(t,e){if(e in t)for(var r=Object.getPrototypeOf(t);r;){var n=Object.getOwnPropertyDescriptor(r,e);if(n)return n;r=Object.getPrototypeOf(r)}}function Vn(t){t.P||(t.P=!0,t.l&&Vn(t.l))}function kh(t){t.o||(t.o=Dp(t.t))}function Qf(t,e,r){var n=Pp(e)?qr("MapSet").F(e,r):Rp(e)?qr("MapSet").T(e,r):t.O?function(s,i){var a=Array.isArray(s),l={i:a?1:0,A:i?i.A:Gf(),P:!1,I:!1,R:{},l:i,t:s,k:null,o:null,j:null,C:!1},u=l,d=za;a&&(u=[l],d=Zo);var h=Proxy.revocable(u,d),f=h.revoke,m=h.proxy;return l.k=m,l.j=f,m}(e,r):qr("ES5").J(e,r);return(r?r.A:Gf()).p.push(n),n}function bT(t){return fs(t)||jr(22,t),function e(r){if(!mn(r))return r;var n,s=r[ze],i=po(r);if(s){if(!s.P&&(s.i<4||!qr("ES5").K(s)))return s.t;s.I=!0,n=Xy(r,i),s.I=!1}else n=Xy(r,i);return Js(n,function(a,l){s&&yT(s.t,a)===l||b2(n,a,e(l))}),i===3?new Set(n):n}(t)}function Xy(t,e){switch(e){case 2:return new Map(t);case 3:return Array.from(t)}return Dp(t)}function _T(){function t(i,a){var l=s[i];return l?l.enumerable=a:s[i]=l={configurable:!0,enumerable:a,get:function(){var u=this[ze];return za.get(u,i)},set:function(u){var d=this[ze];za.set(d,i,u)}},l}function e(i){for(var a=i.length-1;a>=0;a--){var l=i[a][ze];if(!l.P)switch(l.i){case 5:n(l)&&Vn(l);break;case 4:r(l)&&Vn(l)}}}function r(i){for(var a=i.t,l=i.k,u=Oi(l),d=u.length-1;d>=0;d--){var h=u[d];if(h!==ze){var f=a[h];if(f===void 0&&!Vi(a,h))return!0;var m=l[h],v=m&&m[ze];if(v?v.t!==f:!_2(m,f))return!0}}var x=!!a[ze];return u.length!==Oi(a).length+(x?0:1)}function n(i){var a=i.k;if(a.length!==i.t.length)return!0;var l=Object.getOwnPropertyDescriptor(a,a.length-1);if(l&&!l.get)return!0;for(var u=0;u<a.length;u++)if(!a.hasOwnProperty(u))return!0;return!1}var s={};xT("ES5",{J:function(i,a){var l=Array.isArray(i),u=function(h,f){if(h){for(var m=Array(f.length),v=0;v<f.length;v++)Object.defineProperty(m,""+v,t(v,!0));return m}var x=E2(f);delete x[ze];for(var y=Oi(x),j=0;j<y.length;j++){var N=y[j];x[N]=t(N,h||!!x[N].enumerable)}return Object.create(Object.getPrototypeOf(f),x)}(l,i),d={i:l?5:4,A:a?a.A:Gf(),P:!1,I:!1,R:{},l:a,t:i,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,ze,{value:d,writable:!0}),u},S:function(i,a,l){l?fs(a)&&a[ze].A===i&&e(i.p):(i.u&&function u(d){if(d&&typeof d=="object"){var h=d[ze];if(h){var f=h.t,m=h.k,v=h.R,x=h.i;if(x===4)Js(m,function(S){S!==ze&&(f[S]!==void 0||Vi(f,S)?v[S]||u(m[S]):(v[S]=!0,Vn(h)))}),Js(f,function(S){m[S]!==void 0||Vi(m,S)||(v[S]=!1,Vn(h))});else if(x===5){if(n(h)&&(Vn(h),v.length=!0),m.length<f.length)for(var y=m.length;y<f.length;y++)v[y]=!1;else for(var j=f.length;j<m.length;j++)v[j]=!0;for(var N=Math.min(m.length,f.length),_=0;_<N;_++)m.hasOwnProperty(_)||(v[_]=!0),v[_]===void 0&&u(m[_])}}}}(i.p[0]),e(i.p))},K:function(i){return i.i===4?r(i):n(i)}})}var Zy,Ua,Vp=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",NT=typeof Map<"u",ET=typeof Set<"u",ev=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",N2=Vp?Symbol.for("immer-nothing"):((Zy={})["immer-nothing"]=!0,Zy),tv=Vp?Symbol.for("immer-draftable"):"__$immer_draftable",ze=Vp?Symbol.for("immer-state"):"__$immer_state",ST=""+Object.prototype.constructor,Oi=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:Object.getOwnPropertyNames,E2=Object.getOwnPropertyDescriptors||function(t){var e={};return Oi(t).forEach(function(r){e[r]=Object.getOwnPropertyDescriptor(t,r)}),e},Yf={},za={get:function(t,e){if(e===ze)return t;var r=Ms(t);if(!Vi(r,e))return function(s,i,a){var l,u=Jy(i,a);return u?"value"in u?u.value:(l=u.get)===null||l===void 0?void 0:l.call(s.k):void 0}(t,r,e);var n=r[e];return t.I||!mn(n)?n:n===Ch(t.t,e)?(kh(t),t.o[e]=Qf(t.A.h,n,t)):n},has:function(t,e){return e in Ms(t)},ownKeys:function(t){return Reflect.ownKeys(Ms(t))},set:function(t,e,r){var n=Jy(Ms(t),e);if(n!=null&&n.set)return n.set.call(t.k,r),!0;if(!t.P){var s=Ch(Ms(t),e),i=s==null?void 0:s[ze];if(i&&i.t===r)return t.o[e]=r,t.R[e]=!1,!0;if(_2(r,s)&&(r!==void 0||Vi(t.t,e)))return!0;kh(t),Vn(t)}return t.o[e]===r&&(r!==void 0||e in t.o)||Number.isNaN(r)&&Number.isNaN(t.o[e])||(t.o[e]=r,t.R[e]=!0),!0},deleteProperty:function(t,e){return Ch(t.t,e)!==void 0||e in t.t?(t.R[e]=!1,kh(t),Vn(t)):delete t.R[e],t.o&&delete t.o[e],!0},getOwnPropertyDescriptor:function(t,e){var r=Ms(t),n=Reflect.getOwnPropertyDescriptor(r,e);return n&&{writable:!0,configurable:t.i!==1||e!=="length",enumerable:n.enumerable,value:r[e]}},defineProperty:function(){jr(11)},getPrototypeOf:function(t){return Object.getPrototypeOf(t.t)},setPrototypeOf:function(){jr(12)}},Zo={};Js(za,function(t,e){Zo[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}}),Zo.deleteProperty=function(t,e){return Zo.set.call(this,t,e,void 0)},Zo.set=function(t,e,r){return za.set.call(this,t[0],e,r,t[0])};var jT=function(){function t(r){var n=this;this.O=ev,this.D=!0,this.produce=function(s,i,a){if(typeof s=="function"&&typeof i!="function"){var l=i;i=s;var u=n;return function(y){var j=this;y===void 0&&(y=l);for(var N=arguments.length,_=Array(N>1?N-1:0),S=1;S<N;S++)_[S-1]=arguments[S];return u.produce(y,function(A){var L;return(L=i).call.apply(L,[j,A].concat(_))})}}var d;if(typeof i!="function"&&jr(6),a!==void 0&&typeof a!="function"&&jr(7),mn(s)){var h=Qy(n),f=Qf(n,s,void 0),m=!0;try{d=i(f),m=!1}finally{m?nu(h):Kf(h)}return typeof Promise<"u"&&d instanceof Promise?d.then(function(y){return Th(h,a),Ih(y,h)},function(y){throw nu(h),y}):(Th(h,a),Ih(d,h))}if(!s||typeof s!="object"){if((d=i(s))===void 0&&(d=s),d===N2&&(d=void 0),n.D&&Mp(d,!0),a){var v=[],x=[];qr("Patches").M(s,d,v,x),a(v,x)}return d}jr(21,s)},this.produceWithPatches=function(s,i){if(typeof s=="function")return function(d){for(var h=arguments.length,f=Array(h>1?h-1:0),m=1;m<h;m++)f[m-1]=arguments[m];return n.produceWithPatches(d,function(v){return s.apply(void 0,[v].concat(f))})};var a,l,u=n.produce(s,i,function(d,h){a=d,l=h});return typeof Promise<"u"&&u instanceof Promise?u.then(function(d){return[d,a,l]}):[u,a,l]},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var e=t.prototype;return e.createDraft=function(r){mn(r)||jr(8),fs(r)&&(r=bT(r));var n=Qy(this),s=Qf(this,r,void 0);return s[ze].C=!0,Kf(n),s},e.finishDraft=function(r,n){var s=r&&r[ze],i=s.A;return Th(i,n),Ih(void 0,i)},e.setAutoFreeze=function(r){this.D=r},e.setUseProxies=function(r){r&&!ev&&jr(20),this.O=r},e.applyPatches=function(r,n){var s;for(s=n.length-1;s>=0;s--){var i=n[s];if(i.path.length===0&&i.op==="replace"){r=i.value;break}}s>-1&&(n=n.slice(s+1));var a=qr("Patches").$;return fs(r)?a(r,n):this.produce(r,function(l){return a(l,n)})},t}(),or=new jT,S2=or.produce;or.produceWithPatches.bind(or);or.setAutoFreeze.bind(or);or.setUseProxies.bind(or);or.applyPatches.bind(or);or.createDraft.bind(or);or.finishDraft.bind(or);function Ba(t){"@babel/helpers - typeof";return Ba=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ba(t)}function TT(t,e){if(Ba(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(Ba(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function IT(t){var e=TT(t,"string");return Ba(e)=="symbol"?e:e+""}function CT(t,e,r){return(e=IT(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rv(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),r.push.apply(r,n)}return r}function nv(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?rv(Object(r),!0).forEach(function(n){CT(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):rv(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function At(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var sv=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ah=function(){return Math.random().toString(36).substring(7).split("").join(".")},ou={INIT:"@@redux/INIT"+Ah(),REPLACE:"@@redux/REPLACE"+Ah(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+Ah()}};function kT(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function j2(t,e,r){var n;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(At(0));if(typeof e=="function"&&typeof r>"u"&&(r=e,e=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(At(1));return r(j2)(t,e)}if(typeof t!="function")throw new Error(At(2));var s=t,i=e,a=[],l=a,u=!1;function d(){l===a&&(l=a.slice())}function h(){if(u)throw new Error(At(3));return i}function f(y){if(typeof y!="function")throw new Error(At(4));if(u)throw new Error(At(5));var j=!0;return d(),l.push(y),function(){if(j){if(u)throw new Error(At(6));j=!1,d();var _=l.indexOf(y);l.splice(_,1),a=null}}}function m(y){if(!kT(y))throw new Error(At(7));if(typeof y.type>"u")throw new Error(At(8));if(u)throw new Error(At(9));try{u=!0,i=s(i,y)}finally{u=!1}for(var j=a=l,N=0;N<j.length;N++){var _=j[N];_()}return y}function v(y){if(typeof y!="function")throw new Error(At(10));s=y,m({type:ou.REPLACE})}function x(){var y,j=f;return y={subscribe:function(_){if(typeof _!="object"||_===null)throw new Error(At(11));function S(){_.next&&_.next(h())}S();var A=j(S);return{unsubscribe:A}}},y[sv]=function(){return this},y}return m({type:ou.INIT}),n={dispatch:m,subscribe:f,getState:h,replaceReducer:v},n[sv]=x,n}function AT(t){Object.keys(t).forEach(function(e){var r=t[e],n=r(void 0,{type:ou.INIT});if(typeof n>"u")throw new Error(At(12));if(typeof r(void 0,{type:ou.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(At(13))})}function PT(t){for(var e=Object.keys(t),r={},n=0;n<e.length;n++){var s=e[n];typeof t[s]=="function"&&(r[s]=t[s])}var i=Object.keys(r),a;try{AT(r)}catch(l){a=l}return function(u,d){if(u===void 0&&(u={}),a)throw a;for(var h=!1,f={},m=0;m<i.length;m++){var v=i[m],x=r[v],y=u[v],j=x(y,d);if(typeof j>"u")throw d&&d.type,new Error(At(14));f[v]=j,h=h||j!==y}return h=h||i.length!==Object.keys(u).length,h?f:u}}function au(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return e.length===0?function(n){return n}:e.length===1?e[0]:e.reduce(function(n,s){return function(){return n(s.apply(void 0,arguments))}})}function RT(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(n){return function(){var s=n.apply(void 0,arguments),i=function(){throw new Error(At(15))},a={getState:s.getState,dispatch:function(){return i.apply(void 0,arguments)}},l=e.map(function(u){return u(a)});return i=au.apply(void 0,l)(s.dispatch),nv(nv({},s),{},{dispatch:i})}}}function T2(t){var e=function(n){var s=n.dispatch,i=n.getState;return function(a){return function(l){return typeof l=="function"?l(s,i,t):a(l)}}};return e}var I2=T2();I2.withExtraArgument=T2;const iv=I2;var C2=globalThis&&globalThis.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),DT=globalThis&&globalThis.__generator||function(t,e){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,a;return a={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function l(d){return function(h){return u([d,h])}}function u(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=d[0]&2?s.return:d[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,d[1])).done)return i;switch(s=0,i&&(d=[d[0]&2,i.value]),d[0]){case 0:case 1:i=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,s=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!i||d[1]>i[0]&&d[1]<i[3])){r.label=d[1];break}if(d[0]===6&&r.label<i[1]){r.label=i[1],i=d;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(d);break}i[2]&&r.ops.pop(),r.trys.pop();continue}d=e.call(t,r)}catch(h){d=[6,h],s=0}finally{n=i=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}},Zi=globalThis&&globalThis.__spreadArray||function(t,e){for(var r=0,n=e.length,s=t.length;r<n;r++,s++)t[s]=e[r];return t},MT=Object.defineProperty,LT=Object.defineProperties,VT=Object.getOwnPropertyDescriptors,ov=Object.getOwnPropertySymbols,OT=Object.prototype.hasOwnProperty,FT=Object.prototype.propertyIsEnumerable,av=function(t,e,r){return e in t?MT(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r},ns=function(t,e){for(var r in e||(e={}))OT.call(e,r)&&av(t,r,e[r]);if(ov)for(var n=0,s=ov(e);n<s.length;n++){var r=s[n];FT.call(e,r)&&av(t,r,e[r])}return t},Ph=function(t,e){return LT(t,VT(e))},UT=function(t,e,r){return new Promise(function(n,s){var i=function(u){try{l(r.next(u))}catch(d){s(d)}},a=function(u){try{l(r.throw(u))}catch(d){s(d)}},l=function(u){return u.done?n(u.value):Promise.resolve(u.value).then(i,a)};l((r=r.apply(t,e)).next())})},zT=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?au:au.apply(null,arguments)};function BT(t){if(typeof t!="object"||t===null)return!1;var e=Object.getPrototypeOf(t);if(e===null)return!0;for(var r=e;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return e===r}function ss(t,e){function r(){for(var n=[],s=0;s<arguments.length;s++)n[s]=arguments[s];if(e){var i=e.apply(void 0,n);if(!i)throw new Error("prepareAction did not return an object");return ns(ns({type:t,payload:i.payload},"meta"in i&&{meta:i.meta}),"error"in i&&{error:i.error})}return{type:t,payload:n[0]}}return r.toString=function(){return""+t},r.type=t,r.match=function(n){return n.type===t},r}var $T=function(t){C2(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=t.apply(this,r)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Zi([void 0],r[0].concat(this)))):new(e.bind.apply(e,Zi([void 0],r.concat(this))))},e}(Array),WT=function(t){C2(e,t);function e(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var s=t.apply(this,r)||this;return Object.setPrototypeOf(s,e.prototype),s}return Object.defineProperty(e,Symbol.species,{get:function(){return e},enumerable:!1,configurable:!0}),e.prototype.concat=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return t.prototype.concat.apply(this,r)},e.prototype.prepend=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return r.length===1&&Array.isArray(r[0])?new(e.bind.apply(e,Zi([void 0],r[0].concat(this)))):new(e.bind.apply(e,Zi([void 0],r.concat(this))))},e}(Array);function Jf(t){return mn(t)?S2(t,function(){}):t}function HT(t){return typeof t=="boolean"}function qT(){return function(e){return GT(e)}}function GT(t){t===void 0&&(t={});var e=t.thunk,r=e===void 0?!0:e;t.immutableCheck,t.serializableCheck,t.actionCreatorCheck;var n=new $T;return r&&(HT(r)?n.push(iv):n.push(iv.withExtraArgument(r.extraArgument))),n}var KT=!0;function QT(t){var e=qT(),r=t||{},n=r.reducer,s=n===void 0?void 0:n,i=r.middleware,a=i===void 0?e():i,l=r.devTools,u=l===void 0?!0:l,d=r.preloadedState,h=d===void 0?void 0:d,f=r.enhancers,m=f===void 0?void 0:f,v;if(typeof s=="function")v=s;else if(BT(s))v=PT(s);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var x=a;typeof x=="function"&&(x=x(e));var y=RT.apply(void 0,x),j=au;u&&(j=zT(ns({trace:!KT},typeof u=="object"&&u)));var N=new WT(y),_=N;Array.isArray(m)?_=Zi([y],m):typeof m=="function"&&(_=m(N));var S=j.apply(void 0,_);return j2(v,h,S)}function k2(t){var e={},r=[],n,s={addCase:function(i,a){var l=typeof i=="string"?i:i.type;if(!l)throw new Error("`builder.addCase` cannot be called with an empty action type");if(l in e)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return e[l]=a,s},addMatcher:function(i,a){return r.push({matcher:i,reducer:a}),s},addDefaultCase:function(i){return n=i,s}};return t(s),[e,r,n]}function YT(t){return typeof t=="function"}function JT(t,e,r,n){r===void 0&&(r=[]);var s=typeof e=="function"?k2(e):[e,r,n],i=s[0],a=s[1],l=s[2],u;if(YT(t))u=function(){return Jf(t())};else{var d=Jf(t);u=function(){return d}}function h(f,m){f===void 0&&(f=u());var v=Zi([i[m.type]],a.filter(function(x){var y=x.matcher;return y(m)}).map(function(x){var y=x.reducer;return y}));return v.filter(function(x){return!!x}).length===0&&(v=[l]),v.reduce(function(x,y){if(y)if(fs(x)){var j=x,N=y(j,m);return N===void 0?x:N}else{if(mn(x))return S2(x,function(_){return y(_,m)});var N=y(x,m);if(N===void 0){if(x===null)return x;throw Error("A case reducer on a non-draftable value must not return undefined")}return N}return x},f)}return h.getInitialState=u,h}function XT(t,e){return t+"/"+e}function dd(t){var e=t.name;if(!e)throw new Error("`name` is a required option for createSlice");typeof process<"u";var r=typeof t.initialState=="function"?t.initialState:Jf(t.initialState),n=t.reducers||{},s=Object.keys(n),i={},a={},l={};s.forEach(function(h){var f=n[h],m=XT(e,h),v,x;"reducer"in f?(v=f.reducer,x=f.prepare):v=f,i[h]=v,a[m]=v,l[h]=x?ss(m,x):ss(m)});function u(){var h=typeof t.extraReducers=="function"?k2(t.extraReducers):[t.extraReducers],f=h[0],m=f===void 0?{}:f,v=h[1],x=v===void 0?[]:v,y=h[2],j=y===void 0?void 0:y,N=ns(ns({},m),a);return JT(r,function(_){for(var S in N)_.addCase(S,N[S]);for(var A=0,L=x;A<L.length;A++){var O=L[A];_.addMatcher(O.matcher,O.reducer)}j&&_.addDefaultCase(j)})}var d;return{name:e,reducer:function(h,f){return d||(d=u()),d(h,f)},actions:l,caseReducers:i,getInitialState:function(){return d||(d=u()),d.getInitialState()}}}var ZT="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",eI=function(t){t===void 0&&(t=21);for(var e="",r=t;r--;)e+=ZT[Math.random()*64|0];return e},tI=["name","message","stack","code"],Rh=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),lv=function(){function t(e,r){this.payload=e,this.meta=r}return t}(),rI=function(t){if(typeof t=="object"&&t!==null){for(var e={},r=0,n=tI;r<n.length;r++){var s=n[r];typeof t[s]=="string"&&(e[s]=t[s])}return e}return{message:String(t)}},Mr=function(){function t(e,r,n){var s=ss(e+"/fulfilled",function(d,h,f,m){return{payload:d,meta:Ph(ns({},m||{}),{arg:f,requestId:h,requestStatus:"fulfilled"})}}),i=ss(e+"/pending",function(d,h,f){return{payload:void 0,meta:Ph(ns({},f||{}),{arg:h,requestId:d,requestStatus:"pending"})}}),a=ss(e+"/rejected",function(d,h,f,m,v){return{payload:m,error:(n&&n.serializeError||rI)(d||"Rejected"),meta:Ph(ns({},v||{}),{arg:f,requestId:h,rejectedWithValue:!!m,requestStatus:"rejected",aborted:(d==null?void 0:d.name)==="AbortError",condition:(d==null?void 0:d.name)==="ConditionError"})}}),l=typeof AbortController<"u"?AbortController:function(){function d(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return d.prototype.abort=function(){},d}();function u(d){return function(h,f,m){var v=n!=null&&n.idGenerator?n.idGenerator(d):eI(),x=new l,y;function j(_){y=_,x.abort()}var N=function(){return UT(this,null,function(){var _,S,A,L,O,T,b;return DT(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),L=(_=n==null?void 0:n.condition)==null?void 0:_.call(n,d,{getState:f,extra:m}),sI(L)?[4,L]:[3,2];case 1:L=C.sent(),C.label=2;case 2:if(L===!1||x.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return O=new Promise(function(w,k){return x.signal.addEventListener("abort",function(){return k({name:"AbortError",message:y||"Aborted"})})}),h(i(v,d,(S=n==null?void 0:n.getPendingMeta)==null?void 0:S.call(n,{requestId:v,arg:d},{getState:f,extra:m}))),[4,Promise.race([O,Promise.resolve(r(d,{dispatch:h,getState:f,extra:m,requestId:v,signal:x.signal,abort:j,rejectWithValue:function(w,k){return new Rh(w,k)},fulfillWithValue:function(w,k){return new lv(w,k)}})).then(function(w){if(w instanceof Rh)throw w;return w instanceof lv?s(w.payload,v,d,w.meta):s(w,v,d)})])];case 3:return A=C.sent(),[3,5];case 4:return T=C.sent(),A=T instanceof Rh?a(null,v,d,T.payload,T.meta):a(T,v,d),[3,5];case 5:return b=n&&!n.dispatchConditionRejection&&a.match(A)&&A.meta.condition,b||h(A),[2,A]}})})}();return Object.assign(N,{abort:j,requestId:v,arg:d,unwrap:function(){return N.then(nI)}})}}return Object.assign(u,{pending:i,rejected:a,fulfilled:s,typePrefix:e})}return t.withTypes=function(){return t},t}();function nI(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function sI(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var Op="listenerMiddleware";ss(Op+"/add");ss(Op+"/removeAll");ss(Op+"/remove");var cv;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);_T();const iI="modulepreload",oI=function(t){return"/"+t},uv={},Xf=function(e,r,n){if(!r||r.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=oI(i),i in uv)return;uv[i]=!0;const a=i.endsWith(".css"),l=a?'[rel="stylesheet"]':"";if(!!n)for(let h=s.length-1;h>=0;h--){const f=s[h];if(f.href===i&&(!a||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=a?"stylesheet":iI,a||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),a)return new Promise((h,f)=>{d.addEventListener("load",h),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i})},aI=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},lI=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],a=t[r++],l=t[r++],u=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;e[n++]=String.fromCharCode(55296+(u>>10)),e[n++]=String.fromCharCode(56320+(u&1023))}else{const i=t[r++],a=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return e.join("")},P2={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],a=s+1<t.length,l=a?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,h=i>>2,f=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,v=d&63;u||(v=64,a||(m=64)),n.push(r[h],r[f],r[m],r[v])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(A2(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):lI(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],l=s<t.length?r[t.charAt(s)]:0;++s;const d=s<t.length?r[t.charAt(s)]:64;++s;const f=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||f==null)throw new cI;const m=i<<2|l>>4;if(n.push(m),d!==64){const v=l<<4&240|d>>2;if(n.push(v),f!==64){const x=d<<6&192|f;n.push(x)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cI extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const uI=function(t){const e=A2(t);return P2.encodeByteArray(e,!0)},lu=function(t){return uI(t).replace(/\./g,"")},R2=function(t){try{return P2.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hI=()=>dI().__FIREBASE_DEFAULTS__,fI=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mI=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&R2(t[1]);return e&&JSON.parse(e)},hd=()=>{try{return aI()||hI()||fI()||mI()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},D2=t=>{var e,r;return(r=(e=hd())==null?void 0:e.emulatorHosts)==null?void 0:r[t]},pI=t=>{const e=D2(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},M2=()=>{var t;return(t=hd())==null?void 0:t.config},L2=t=>{var e;return(e=hd())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function V2(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yI(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a={iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[lu(JSON.stringify(r)),lu(JSON.stringify(a)),l].join(".")}const fa={};function vI(){const t={prod:[],emulator:[]};for(const e of Object.keys(fa))fa[e]?t.emulator.push(e):t.prod.push(e);return t}function xI(t){let e=document.getElementById(t),r=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),r=!0),{created:r,element:e}}let dv=!1;function O2(t,e){if(typeof window>"u"||typeof document>"u"||!go(window.location.host)||fa[t]===e||fa[t]||dv)return;fa[t]=e;function r(m){return`__firebase__banner__${m}`}const n="__firebase__banner",i=vI().prod.length>0;function a(){const m=document.getElementById(n);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,v){m.setAttribute("width","24"),m.setAttribute("id",v),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function d(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{dv=!0,a()},m}function h(m,v){m.setAttribute("id",v),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=xI(n),v=r("text"),x=document.getElementById(v)||document.createElement("span"),y=r("learnmore"),j=document.getElementById(y)||document.createElement("a"),N=r("preprendIcon"),_=document.getElementById(N)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const S=m.element;l(S),h(j,y);const A=d();u(_,N),S.append(_,x,j,A),document.body.appendChild(S)}i?(x.innerText="Preview backend disconnected.",_.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(_.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,x.innerText="Preview backend running in this workspace."),x.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wI(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lt())}function bI(){var e;const t=(e=hd())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function _I(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function NI(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function EI(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function SI(){const t=Lt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function jI(){return!bI()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function TI(){try{return typeof indexedDB=="object"}catch{return!1}}function II(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)==null?void 0:i.message)||"")}}catch(r){e(r)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CI="FirebaseError";class Nn extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=CI,Object.setPrototypeOf(this,Nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,sl.prototype.create)}}class sl{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],a=i?kI(i,n):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new Nn(s,l,n)}}function kI(t,e){return t.replace(AI,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const AI=/\{\$([^}]+)}/g;function PI(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Xs(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],a=e[s];if(hv(i)&&hv(a)){if(!Xs(i,a))return!1}else if(i!==a)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function hv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function RI(t,e){const r=new DI(t,e);return r.subscribe.bind(r)}class DI{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");MI(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=Dh),s.error===void 0&&(s.error=Dh),s.complete===void 0&&(s.complete=Dh);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function MI(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function Dh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function St(t){return t&&t._delegate?t._delegate:t}class Zs{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new gI;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),n=(e==null?void 0:e.optional)??!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(n)return null;throw s}else{if(n)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OI(e))try{this.getOrInitializeService({instanceIdentifier:Ls})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=Ls){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ls){return this.instances.has(e)}getOptions(e=Ls){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);n===l&&a.resolve(s)}return s}onInit(e,r){const n=this.normalizeInstanceIdentifier(r),s=this.onInitCallbacks.get(n)??new Set;s.add(e),this.onInitCallbacks.set(n,s);const i=this.instances.get(n);return i&&e(i,n),()=>{s.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:VI(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=Ls){return this.component?this.component.multipleInstances?e:Ls:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function VI(t){return t===Ls?void 0:t}function OI(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new LI(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const UI={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},zI=xe.INFO,BI={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},$I=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=BI[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fp{constructor(e){this.name=e,this._logLevel=zI,this._logHandler=$I,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?UI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const WI=(t,e)=>e.some(r=>t instanceof r);let fv,mv;function HI(){return fv||(fv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qI(){return mv||(mv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const F2=new WeakMap,Zf=new WeakMap,U2=new WeakMap,Mh=new WeakMap,Up=new WeakMap;function GI(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",a)},i=()=>{r(is(t.result)),s()},a=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",a)});return e.then(r=>{r instanceof IDBCursor&&F2.set(r,t)}).catch(()=>{}),Up.set(e,t),e}function KI(t){if(Zf.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",a),t.removeEventListener("abort",a)},i=()=>{r(),s()},a=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",a),t.addEventListener("abort",a)});Zf.set(t,e)}let em={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Zf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||U2.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return is(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function QI(t){em=t(em)}function YI(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Lh(this),e,...r);return U2.set(n,e.sort?e.sort():[e]),is(n)}:qI().includes(t)?function(...e){return t.apply(Lh(this),e),is(F2.get(this))}:function(...e){return is(t.apply(Lh(this),e))}}function JI(t){return typeof t=="function"?YI(t):(t instanceof IDBTransaction&&KI(t),WI(t,HI())?new Proxy(t,em):t)}function is(t){if(t instanceof IDBRequest)return GI(t);if(Mh.has(t))return Mh.get(t);const e=JI(t);return e!==t&&(Mh.set(t,e),Up.set(e,t)),e}const Lh=t=>Up.get(t);function XI(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const a=indexedDB.open(t,e),l=is(a);return n&&a.addEventListener("upgradeneeded",u=>{n(is(a.result),u.oldVersion,u.newVersion,is(a.transaction),u)}),r&&a.addEventListener("blocked",u=>r(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const ZI=["get","getKey","getAll","getAllKeys","count"],eC=["put","add","delete","clear"],Vh=new Map;function pv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vh.get(e))return Vh.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=eC.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||ZI.includes(r)))return;const i=async function(a,...l){const u=this.transaction(a,s?"readwrite":"readonly");let d=u.store;return n&&(d=d.index(l.shift())),(await Promise.all([d[r](...l),s&&u.done]))[0]};return Vh.set(e,i),i}QI(t=>({...t,get:(e,r,n)=>pv(e,r)||t.get(e,r,n),has:(e,r)=>!!pv(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(rC(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function rC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const tm="@firebase/app",gv="0.14.7";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pn=new Fp("@firebase/app"),nC="@firebase/app-compat",sC="@firebase/analytics-compat",iC="@firebase/analytics",oC="@firebase/app-check-compat",aC="@firebase/app-check",lC="@firebase/auth",cC="@firebase/auth-compat",uC="@firebase/database",dC="@firebase/data-connect",hC="@firebase/database-compat",fC="@firebase/functions",mC="@firebase/functions-compat",pC="@firebase/installations",gC="@firebase/installations-compat",yC="@firebase/messaging",vC="@firebase/messaging-compat",xC="@firebase/performance",wC="@firebase/performance-compat",bC="@firebase/remote-config",_C="@firebase/remote-config-compat",NC="@firebase/storage",EC="@firebase/storage-compat",SC="@firebase/firestore",jC="@firebase/ai",TC="@firebase/firestore-compat",IC="firebase",CC="12.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm="[DEFAULT]",kC={[tm]:"fire-core",[nC]:"fire-core-compat",[iC]:"fire-analytics",[sC]:"fire-analytics-compat",[aC]:"fire-app-check",[oC]:"fire-app-check-compat",[lC]:"fire-auth",[cC]:"fire-auth-compat",[uC]:"fire-rtdb",[dC]:"fire-data-connect",[hC]:"fire-rtdb-compat",[fC]:"fire-fn",[mC]:"fire-fn-compat",[pC]:"fire-iid",[gC]:"fire-iid-compat",[yC]:"fire-fcm",[vC]:"fire-fcm-compat",[xC]:"fire-perf",[wC]:"fire-perf-compat",[bC]:"fire-rc",[_C]:"fire-rc-compat",[NC]:"fire-gcs",[EC]:"fire-gcs-compat",[SC]:"fire-fst",[TC]:"fire-fst-compat",[jC]:"fire-vertex","fire-js":"fire-js",[IC]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new Map,AC=new Map,nm=new Map;function yv(t,e){try{t.container.addComponent(e)}catch(r){pn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function eo(t){const e=t.name;if(nm.has(e))return pn.debug(`There were multiple attempts to register component ${e}.`),!1;nm.set(e,t);for(const r of cu.values())yv(r,t);for(const r of AC.values())yv(r,t);return!0}function zp(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function $r(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},os=new sl("app","Firebase",PC);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,r,n){this._isDeleted=!1,this._options={...e},this._config={...r},this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Zs("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw os.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yo=CC;function z2(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n={name:rm,automaticDataCollectionEnabled:!0,...e},s=n.name;if(typeof s!="string"||!s)throw os.create("bad-app-name",{appName:String(s)});if(r||(r=M2()),!r)throw os.create("no-options");const i=cu.get(s);if(i){if(Xs(r,i.options)&&Xs(n,i.config))return i;throw os.create("duplicate-app",{appName:s})}const a=new FI(s);for(const u of nm.values())a.addComponent(u);const l=new RC(r,n,a);return cu.set(s,l),l}function B2(t=rm){const e=cu.get(t);if(!e&&t===rm&&M2())return z2();if(!e)throw os.create("no-app",{appName:t});return e}function as(t,e,r){let n=kC[t]??t;r&&(n+=`-${r}`);const s=n.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const a=[`Unable to register library "${n}" with version "${e}":`];s&&a.push(`library name "${n}" contains illegal characters (whitespace or "/")`),s&&i&&a.push("and"),i&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),pn.warn(a.join(" "));return}eo(new Zs(`${n}-version`,()=>({library:n,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DC="firebase-heartbeat-database",MC=1,$a="firebase-heartbeat-store";let Oh=null;function $2(){return Oh||(Oh=XI(DC,MC,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore($a)}catch(r){console.warn(r)}}}}).catch(t=>{throw os.create("idb-open",{originalErrorMessage:t.message})})),Oh}async function LC(t){try{const r=(await $2()).transaction($a),n=await r.objectStore($a).get(W2(t));return await r.done,n}catch(e){if(e instanceof Nn)pn.warn(e.message);else{const r=os.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});pn.warn(r.message)}}}async function vv(t,e){try{const n=(await $2()).transaction($a,"readwrite");await n.objectStore($a).put(e,W2(t)),await n.done}catch(r){if(r instanceof Nn)pn.warn(r.message);else{const n=os.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});pn.warn(n.message)}}}function W2(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=1024,OC=30;class FC{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new zC(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xv();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)==null?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>OC){const a=BC(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){pn.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=xv(),{heartbeatsToSend:n,unsentEntries:s}=UC(this._heartbeatsCache.heartbeats),i=lu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return pn.warn(r),""}}}function xv(){return new Date().toISOString().substring(0,10)}function UC(t,e=VC){const r=[];let n=t.slice();for(const s of t){const i=r.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),wv(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),wv(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class zC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TI()?II().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await LC(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const n=await this.read();return vv(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}else return}}function wv(t){return lu(JSON.stringify({version:2,heartbeats:t})).length}function BC(t){if(t.length===0)return-1;let e=0,r=t[0].date;for(let n=1;n<t.length;n++)t[n].date<r&&(r=t[n].date,e=n);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $C(t){eo(new Zs("platform-logger",e=>new tC(e),"PRIVATE")),eo(new Zs("heartbeat",e=>new FC(e),"PRIVATE")),as(tm,gv,t),as(tm,gv,"esm2020"),as("fire-js","")}$C("");var bv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ls,H2;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,b){function C(){}C.prototype=b.prototype,T.F=b.prototype,T.prototype=new C,T.prototype.constructor=T,T.D=function(w,k,P){for(var I=Array(arguments.length-2),$=2;$<arguments.length;$++)I[$-2]=arguments[$];return b.prototype[k].apply(w,I)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(n,r),n.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(T,b,C){C||(C=0);const w=Array(16);if(typeof b=="string")for(var k=0;k<16;++k)w[k]=b.charCodeAt(C++)|b.charCodeAt(C++)<<8|b.charCodeAt(C++)<<16|b.charCodeAt(C++)<<24;else for(k=0;k<16;++k)w[k]=b[C++]|b[C++]<<8|b[C++]<<16|b[C++]<<24;b=T.g[0],C=T.g[1],k=T.g[2];let P=T.g[3],I;I=b+(P^C&(k^P))+w[0]+3614090360&4294967295,b=C+(I<<7&4294967295|I>>>25),I=P+(k^b&(C^k))+w[1]+3905402710&4294967295,P=b+(I<<12&4294967295|I>>>20),I=k+(C^P&(b^C))+w[2]+606105819&4294967295,k=P+(I<<17&4294967295|I>>>15),I=C+(b^k&(P^b))+w[3]+3250441966&4294967295,C=k+(I<<22&4294967295|I>>>10),I=b+(P^C&(k^P))+w[4]+4118548399&4294967295,b=C+(I<<7&4294967295|I>>>25),I=P+(k^b&(C^k))+w[5]+1200080426&4294967295,P=b+(I<<12&4294967295|I>>>20),I=k+(C^P&(b^C))+w[6]+2821735955&4294967295,k=P+(I<<17&4294967295|I>>>15),I=C+(b^k&(P^b))+w[7]+4249261313&4294967295,C=k+(I<<22&4294967295|I>>>10),I=b+(P^C&(k^P))+w[8]+1770035416&4294967295,b=C+(I<<7&4294967295|I>>>25),I=P+(k^b&(C^k))+w[9]+2336552879&4294967295,P=b+(I<<12&4294967295|I>>>20),I=k+(C^P&(b^C))+w[10]+4294925233&4294967295,k=P+(I<<17&4294967295|I>>>15),I=C+(b^k&(P^b))+w[11]+2304563134&4294967295,C=k+(I<<22&4294967295|I>>>10),I=b+(P^C&(k^P))+w[12]+1804603682&4294967295,b=C+(I<<7&4294967295|I>>>25),I=P+(k^b&(C^k))+w[13]+4254626195&4294967295,P=b+(I<<12&4294967295|I>>>20),I=k+(C^P&(b^C))+w[14]+2792965006&4294967295,k=P+(I<<17&4294967295|I>>>15),I=C+(b^k&(P^b))+w[15]+1236535329&4294967295,C=k+(I<<22&4294967295|I>>>10),I=b+(k^P&(C^k))+w[1]+4129170786&4294967295,b=C+(I<<5&4294967295|I>>>27),I=P+(C^k&(b^C))+w[6]+3225465664&4294967295,P=b+(I<<9&4294967295|I>>>23),I=k+(b^C&(P^b))+w[11]+643717713&4294967295,k=P+(I<<14&4294967295|I>>>18),I=C+(P^b&(k^P))+w[0]+3921069994&4294967295,C=k+(I<<20&4294967295|I>>>12),I=b+(k^P&(C^k))+w[5]+3593408605&4294967295,b=C+(I<<5&4294967295|I>>>27),I=P+(C^k&(b^C))+w[10]+38016083&4294967295,P=b+(I<<9&4294967295|I>>>23),I=k+(b^C&(P^b))+w[15]+3634488961&4294967295,k=P+(I<<14&4294967295|I>>>18),I=C+(P^b&(k^P))+w[4]+3889429448&4294967295,C=k+(I<<20&4294967295|I>>>12),I=b+(k^P&(C^k))+w[9]+568446438&4294967295,b=C+(I<<5&4294967295|I>>>27),I=P+(C^k&(b^C))+w[14]+3275163606&4294967295,P=b+(I<<9&4294967295|I>>>23),I=k+(b^C&(P^b))+w[3]+4107603335&4294967295,k=P+(I<<14&4294967295|I>>>18),I=C+(P^b&(k^P))+w[8]+1163531501&4294967295,C=k+(I<<20&4294967295|I>>>12),I=b+(k^P&(C^k))+w[13]+2850285829&4294967295,b=C+(I<<5&4294967295|I>>>27),I=P+(C^k&(b^C))+w[2]+4243563512&4294967295,P=b+(I<<9&4294967295|I>>>23),I=k+(b^C&(P^b))+w[7]+1735328473&4294967295,k=P+(I<<14&4294967295|I>>>18),I=C+(P^b&(k^P))+w[12]+2368359562&4294967295,C=k+(I<<20&4294967295|I>>>12),I=b+(C^k^P)+w[5]+4294588738&4294967295,b=C+(I<<4&4294967295|I>>>28),I=P+(b^C^k)+w[8]+2272392833&4294967295,P=b+(I<<11&4294967295|I>>>21),I=k+(P^b^C)+w[11]+1839030562&4294967295,k=P+(I<<16&4294967295|I>>>16),I=C+(k^P^b)+w[14]+4259657740&4294967295,C=k+(I<<23&4294967295|I>>>9),I=b+(C^k^P)+w[1]+2763975236&4294967295,b=C+(I<<4&4294967295|I>>>28),I=P+(b^C^k)+w[4]+1272893353&4294967295,P=b+(I<<11&4294967295|I>>>21),I=k+(P^b^C)+w[7]+4139469664&4294967295,k=P+(I<<16&4294967295|I>>>16),I=C+(k^P^b)+w[10]+3200236656&4294967295,C=k+(I<<23&4294967295|I>>>9),I=b+(C^k^P)+w[13]+681279174&4294967295,b=C+(I<<4&4294967295|I>>>28),I=P+(b^C^k)+w[0]+3936430074&4294967295,P=b+(I<<11&4294967295|I>>>21),I=k+(P^b^C)+w[3]+3572445317&4294967295,k=P+(I<<16&4294967295|I>>>16),I=C+(k^P^b)+w[6]+76029189&4294967295,C=k+(I<<23&4294967295|I>>>9),I=b+(C^k^P)+w[9]+3654602809&4294967295,b=C+(I<<4&4294967295|I>>>28),I=P+(b^C^k)+w[12]+3873151461&4294967295,P=b+(I<<11&4294967295|I>>>21),I=k+(P^b^C)+w[15]+530742520&4294967295,k=P+(I<<16&4294967295|I>>>16),I=C+(k^P^b)+w[2]+3299628645&4294967295,C=k+(I<<23&4294967295|I>>>9),I=b+(k^(C|~P))+w[0]+4096336452&4294967295,b=C+(I<<6&4294967295|I>>>26),I=P+(C^(b|~k))+w[7]+1126891415&4294967295,P=b+(I<<10&4294967295|I>>>22),I=k+(b^(P|~C))+w[14]+2878612391&4294967295,k=P+(I<<15&4294967295|I>>>17),I=C+(P^(k|~b))+w[5]+4237533241&4294967295,C=k+(I<<21&4294967295|I>>>11),I=b+(k^(C|~P))+w[12]+1700485571&4294967295,b=C+(I<<6&4294967295|I>>>26),I=P+(C^(b|~k))+w[3]+2399980690&4294967295,P=b+(I<<10&4294967295|I>>>22),I=k+(b^(P|~C))+w[10]+4293915773&4294967295,k=P+(I<<15&4294967295|I>>>17),I=C+(P^(k|~b))+w[1]+2240044497&4294967295,C=k+(I<<21&4294967295|I>>>11),I=b+(k^(C|~P))+w[8]+1873313359&4294967295,b=C+(I<<6&4294967295|I>>>26),I=P+(C^(b|~k))+w[15]+4264355552&4294967295,P=b+(I<<10&4294967295|I>>>22),I=k+(b^(P|~C))+w[6]+2734768916&4294967295,k=P+(I<<15&4294967295|I>>>17),I=C+(P^(k|~b))+w[13]+1309151649&4294967295,C=k+(I<<21&4294967295|I>>>11),I=b+(k^(C|~P))+w[4]+4149444226&4294967295,b=C+(I<<6&4294967295|I>>>26),I=P+(C^(b|~k))+w[11]+3174756917&4294967295,P=b+(I<<10&4294967295|I>>>22),I=k+(b^(P|~C))+w[2]+718787259&4294967295,k=P+(I<<15&4294967295|I>>>17),I=C+(P^(k|~b))+w[9]+3951481745&4294967295,T.g[0]=T.g[0]+b&4294967295,T.g[1]=T.g[1]+(k+(I<<21&4294967295|I>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+P&4294967295}n.prototype.v=function(T,b){b===void 0&&(b=T.length);const C=b-this.blockSize,w=this.C;let k=this.h,P=0;for(;P<b;){if(k==0)for(;P<=C;)s(this,T,P),P+=this.blockSize;if(typeof T=="string"){for(;P<b;)if(w[k++]=T.charCodeAt(P++),k==this.blockSize){s(this,w),k=0;break}}else for(;P<b;)if(w[k++]=T[P++],k==this.blockSize){s(this,w),k=0;break}}this.h=k,this.o+=b},n.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var b=1;b<T.length-8;++b)T[b]=0;b=this.o*8;for(var C=T.length-8;C<T.length;++C)T[C]=b&255,b/=256;for(this.v(T),T=Array(16),b=0,C=0;C<4;++C)for(let w=0;w<32;w+=8)T[b++]=this.g[C]>>>w&255;return T};function i(T,b){var C=l;return Object.prototype.hasOwnProperty.call(C,T)?C[T]:C[T]=b(T)}function a(T,b){this.h=b;const C=[];let w=!0;for(let k=T.length-1;k>=0;k--){const P=T[k]|0;w&&P==b||(C[k]=P,w=!1)}this.g=C}var l={};function u(T){return-128<=T&&T<128?i(T,function(b){return new a([b|0],b<0?-1:0)}):new a([T|0],T<0?-1:0)}function d(T){if(isNaN(T)||!isFinite(T))return f;if(T<0)return j(d(-T));const b=[];let C=1;for(let w=0;T>=C;w++)b[w]=T/C|0,C*=4294967296;return new a(b,0)}function h(T,b){if(T.length==0)throw Error("number format error: empty string");if(b=b||10,b<2||36<b)throw Error("radix out of range: "+b);if(T.charAt(0)=="-")return j(h(T.substring(1),b));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=d(Math.pow(b,8));let w=f;for(let P=0;P<T.length;P+=8){var k=Math.min(8,T.length-P);const I=parseInt(T.substring(P,P+k),b);k<8?(k=d(Math.pow(b,k)),w=w.j(k).add(d(I))):(w=w.j(C),w=w.add(d(I)))}return w}var f=u(0),m=u(1),v=u(16777216);t=a.prototype,t.m=function(){if(y(this))return-j(this).m();let T=0,b=1;for(let C=0;C<this.g.length;C++){const w=this.i(C);T+=(w>=0?w:4294967296+w)*b,b*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(x(this))return"0";if(y(this))return"-"+j(this).toString(T);const b=d(Math.pow(T,6));var C=this;let w="";for(;;){const k=A(C,b).g;C=N(C,k.j(b));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(T);if(C=k,x(C))return P+w;for(;P.length<6;)P="0"+P;w=P+w}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function x(T){if(T.h!=0)return!1;for(let b=0;b<T.g.length;b++)if(T.g[b]!=0)return!1;return!0}function y(T){return T.h==-1}t.l=function(T){return T=N(this,T),y(T)?-1:x(T)?0:1};function j(T){const b=T.g.length,C=[];for(let w=0;w<b;w++)C[w]=~T.g[w];return new a(C,~T.h).add(m)}t.abs=function(){return y(this)?j(this):this},t.add=function(T){const b=Math.max(this.g.length,T.g.length),C=[];let w=0;for(let k=0;k<=b;k++){let P=w+(this.i(k)&65535)+(T.i(k)&65535),I=(P>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);w=I>>>16,P&=65535,I&=65535,C[k]=I<<16|P}return new a(C,C[C.length-1]&-2147483648?-1:0)};function N(T,b){return T.add(j(b))}t.j=function(T){if(x(this)||x(T))return f;if(y(this))return y(T)?j(this).j(j(T)):j(j(this).j(T));if(y(T))return j(this.j(j(T)));if(this.l(v)<0&&T.l(v)<0)return d(this.m()*T.m());const b=this.g.length+T.g.length,C=[];for(var w=0;w<2*b;w++)C[w]=0;for(w=0;w<this.g.length;w++)for(let k=0;k<T.g.length;k++){const P=this.i(w)>>>16,I=this.i(w)&65535,$=T.i(k)>>>16,H=T.i(k)&65535;C[2*w+2*k]+=I*H,_(C,2*w+2*k),C[2*w+2*k+1]+=P*H,_(C,2*w+2*k+1),C[2*w+2*k+1]+=I*$,_(C,2*w+2*k+1),C[2*w+2*k+2]+=P*$,_(C,2*w+2*k+2)}for(T=0;T<b;T++)C[T]=C[2*T+1]<<16|C[2*T];for(T=b;T<2*b;T++)C[T]=0;return new a(C,0)};function _(T,b){for(;(T[b]&65535)!=T[b];)T[b+1]+=T[b]>>>16,T[b]&=65535,b++}function S(T,b){this.g=T,this.h=b}function A(T,b){if(x(b))throw Error("division by zero");if(x(T))return new S(f,f);if(y(T))return b=A(j(T),b),new S(j(b.g),j(b.h));if(y(b))return b=A(T,j(b)),new S(j(b.g),b.h);if(T.g.length>30){if(y(T)||y(b))throw Error("slowDivide_ only works with positive integers.");for(var C=m,w=b;w.l(T)<=0;)C=L(C),w=L(w);var k=O(C,1),P=O(w,1);for(w=O(w,2),C=O(C,2);!x(w);){var I=P.add(w);I.l(T)<=0&&(k=k.add(C),P=I),w=O(w,1),C=O(C,1)}return b=N(T,k.j(b)),new S(k,b)}for(k=f;T.l(b)>=0;){for(C=Math.max(1,Math.floor(T.m()/b.m())),w=Math.ceil(Math.log(C)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),P=d(C),I=P.j(b);y(I)||I.l(T)>0;)C-=w,P=d(C),I=P.j(b);x(P)&&(P=m),k=k.add(P),T=N(T,I)}return new S(k,T)}t.B=function(T){return A(this,T).h},t.and=function(T){const b=Math.max(this.g.length,T.g.length),C=[];for(let w=0;w<b;w++)C[w]=this.i(w)&T.i(w);return new a(C,this.h&T.h)},t.or=function(T){const b=Math.max(this.g.length,T.g.length),C=[];for(let w=0;w<b;w++)C[w]=this.i(w)|T.i(w);return new a(C,this.h|T.h)},t.xor=function(T){const b=Math.max(this.g.length,T.g.length),C=[];for(let w=0;w<b;w++)C[w]=this.i(w)^T.i(w);return new a(C,this.h^T.h)};function L(T){const b=T.g.length+1,C=[];for(let w=0;w<b;w++)C[w]=T.i(w)<<1|T.i(w-1)>>>31;return new a(C,T.h)}function O(T,b){const C=b>>5;b%=32;const w=T.g.length-C,k=[];for(let P=0;P<w;P++)k[P]=b>0?T.i(P+C)>>>b|T.i(P+C+1)<<32-b:T.i(P+C);return new a(k,T.h)}n.prototype.digest=n.prototype.A,n.prototype.reset=n.prototype.u,n.prototype.update=n.prototype.v,H2=n,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.B,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=h,ls=a}).apply(typeof bv<"u"?bv:typeof self<"u"?self:typeof window<"u"?window:{});var Ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var q2,ea,G2,fc,sm,K2,Q2,Y2;(function(){var t,e=Object.defineProperty;function r(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ql=="object"&&Ql];for(var p=0;p<c.length;++p){var g=c[p];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var n=r(this);function s(c,p){if(p)e:{var g=n;c=c.split(".");for(var E=0;E<c.length-1;E++){var M=c[E];if(!(M in g))break e;g=g[M]}c=c[c.length-1],E=g[c],p=p(E),p!=E&&p!=null&&e(g,c,{configurable:!0,writable:!0,value:p})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(p){var g=[],E;for(E in p)Object.prototype.hasOwnProperty.call(p,E)&&g.push([E,p[E]]);return g}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var i=i||{},a=this||self;function l(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function u(c,p,g){return c.call.apply(c.bind,arguments)}function d(c,p,g){return d=u,d.apply(null,arguments)}function h(c,p){var g=Array.prototype.slice.call(arguments,1);return function(){var E=g.slice();return E.push.apply(E,arguments),c.apply(this,E)}}function f(c,p){function g(){}g.prototype=p.prototype,c.Z=p.prototype,c.prototype=new g,c.prototype.constructor=c,c.Ob=function(E,M,V){for(var W=Array(arguments.length-2),pe=2;pe<arguments.length;pe++)W[pe-2]=arguments[pe];return p.prototype[M].apply(E,W)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function v(c){const p=c.length;if(p>0){const g=Array(p);for(let E=0;E<p;E++)g[E]=c[E];return g}return[]}function x(c,p){for(let E=1;E<arguments.length;E++){const M=arguments[E];var g=typeof M;if(g=g!="object"?g:M?Array.isArray(M)?"array":g:"null",g=="array"||g=="object"&&typeof M.length=="number"){g=c.length||0;const V=M.length||0;c.length=g+V;for(let W=0;W<V;W++)c[g+W]=M[W]}else c.push(M)}}class y{constructor(p,g){this.i=p,this.j=g,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function j(c){a.setTimeout(()=>{throw c},0)}function N(){var c=T;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class _{constructor(){this.h=this.g=null}add(p,g){const E=S.get();E.set(p,g),this.h?this.h.next=E:this.g=E,this.h=E}}var S=new y(()=>new A,c=>c.reset());class A{constructor(){this.next=this.g=this.h=null}set(p,g){this.h=p,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let L,O=!1,T=new _,b=()=>{const c=Promise.resolve(void 0);L=()=>{c.then(C)}};function C(){for(var c;c=N();){try{c.h.call(c.g)}catch(g){j(g)}var p=S;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}O=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var P=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const g=()=>{};a.addEventListener("test",g,p),a.removeEventListener("test",g,p)}catch{}return c}();function I(c){return/^[\s\xa0]*$/.test(c)}function $(c,p){k.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}f($,k),$.prototype.init=function(c,p){const g=this.type=c.type,E=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(g=="mouseover"?p=c.fromElement:g=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,E?(this.clientX=E.clientX!==void 0?E.clientX:E.pageX,this.clientY=E.clientY!==void 0?E.clientY:E.pageY,this.screenX=E.screenX||0,this.screenY=E.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&$.Z.h.call(this)},$.prototype.h=function(){$.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var H="closure_listenable_"+(Math.random()*1e6|0),ue=0;function oe(c,p,g,E,M){this.listener=c,this.proxy=null,this.src=p,this.type=g,this.capture=!!E,this.ha=M,this.key=++ue,this.da=this.fa=!1}function z(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Y(c,p,g){for(const E in c)p.call(g,c[E],E,c)}function te(c,p){for(const g in c)p.call(void 0,c[g],g,c)}function X(c){const p={};for(const g in c)p[g]=c[g];return p}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function se(c,p){let g,E;for(let M=1;M<arguments.length;M++){E=arguments[M];for(g in E)c[g]=E[g];for(let V=0;V<J.length;V++)g=J[V],Object.prototype.hasOwnProperty.call(E,g)&&(c[g]=E[g])}}function de(c){this.src=c,this.g={},this.h=0}de.prototype.add=function(c,p,g,E,M){const V=c.toString();c=this.g[V],c||(c=this.g[V]=[],this.h++);const W=ie(c,p,E,M);return W>-1?(p=c[W],g||(p.fa=!1)):(p=new oe(p,this.src,V,!!E,M),p.fa=g,c.push(p)),p};function K(c,p){const g=p.type;if(g in c.g){var E=c.g[g],M=Array.prototype.indexOf.call(E,p,void 0),V;(V=M>=0)&&Array.prototype.splice.call(E,M,1),V&&(z(p),c.g[g].length==0&&(delete c.g[g],c.h--))}}function ie(c,p,g,E){for(let M=0;M<c.length;++M){const V=c[M];if(!V.da&&V.listener==p&&V.capture==!!g&&V.ha==E)return M}return-1}var ve="closure_lm_"+(Math.random()*1e6|0),Ue={};function je(c,p,g,E,M){if(E&&E.once)return le(c,p,g,E,M);if(Array.isArray(p)){for(let V=0;V<p.length;V++)je(c,p[V],g,E,M);return null}return g=Md(g),c&&c[H]?c.J(p,g,l(E)?!!E.capture:!!E,M):br(c,p,g,!1,E,M)}function br(c,p,g,E,M,V){if(!p)throw Error("Invalid event type");const W=l(M)?!!M.capture:!!M;let pe=Lr(c);if(pe||(c[ve]=pe=new de(c)),g=pe.add(p,g,E,W,V),g.proxy)return g;if(E=D(),g.proxy=E,E.src=c,E.listener=g,c.addEventListener)P||(M=W),M===void 0&&(M=!1),c.addEventListener(p.toString(),E,M);else if(c.attachEvent)c.attachEvent(js(p.toString()),E);else if(c.addListener&&c.removeListener)c.addListener(E);else throw Error("addEventListener and attachEvent are unavailable.");return g}function D(){function c(g){return p.call(c.src,c.listener,g)}const p=Dd;return c}function le(c,p,g,E,M){if(Array.isArray(p)){for(let V=0;V<p.length;V++)le(c,p[V],g,E,M);return null}return g=Md(g),c&&c[H]?c.K(p,g,l(E)?!!E.capture:!!E,M):br(c,p,g,!0,E,M)}function Me(c,p,g,E,M){if(Array.isArray(p))for(var V=0;V<p.length;V++)Me(c,p[V],g,E,M);else E=l(E)?!!E.capture:!!E,g=Md(g),c&&c[H]?(c=c.i,V=String(p).toString(),V in c.g&&(p=c.g[V],g=ie(p,g,E,M),g>-1&&(z(p[g]),Array.prototype.splice.call(p,g,1),p.length==0&&(delete c.g[V],c.h--)))):c&&(c=Lr(c))&&(p=c.g[p.toString()],c=-1,p&&(c=ie(p,g,E,M)),(g=c>-1?p[c]:null)&&mt(g))}function mt(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[H])K(p.i,c);else{var g=c.type,E=c.proxy;p.removeEventListener?p.removeEventListener(g,E,c.capture):p.detachEvent?p.detachEvent(js(g),E):p.addListener&&p.removeListener&&p.removeListener(E),(g=Lr(p))?(K(g,c),g.h==0&&(g.src=null,p[ve]=null)):z(c)}}}function js(c){return c in Ue?Ue[c]:Ue[c]="on"+c}function Dd(c,p){if(c.da)c=!0;else{p=new $(p,this);const g=c.listener,E=c.ha||c.src;c.fa&&mt(c),c=g.call(E,p)}return c}function Lr(c){return c=c[ve],c instanceof de?c:null}var xl="__closure_events_fn_"+(Math.random()*1e9>>>0);function Md(c){return typeof c=="function"?c:(c[xl]||(c[xl]=function(p){return c.handleEvent(p)}),c[xl])}function Tt(){w.call(this),this.i=new de(this),this.M=this,this.G=null}f(Tt,w),Tt.prototype[H]=!0,Tt.prototype.removeEventListener=function(c,p,g,E){Me(this,c,p,g,E)};function Vt(c,p){var g,E=c.G;if(E)for(g=[];E;E=E.G)g.push(E);if(c=c.M,E=p.type||p,typeof p=="string")p=new k(p,c);else if(p instanceof k)p.target=p.target||c;else{var M=p;p=new k(E,c),se(p,M)}M=!0;let V,W;if(g)for(W=g.length-1;W>=0;W--)V=p.g=g[W],M=wl(V,E,!0,p)&&M;if(V=p.g=c,M=wl(V,E,!0,p)&&M,M=wl(V,E,!1,p)&&M,g)for(W=0;W<g.length;W++)V=p.g=g[W],M=wl(V,E,!1,p)&&M}Tt.prototype.N=function(){if(Tt.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const g=c.g[p];for(let E=0;E<g.length;E++)z(g[E]);delete c.g[p],c.h--}}this.G=null},Tt.prototype.J=function(c,p,g,E){return this.i.add(String(c),p,!1,g,E)},Tt.prototype.K=function(c,p,g,E){return this.i.add(String(c),p,!0,g,E)};function wl(c,p,g,E){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let M=!0;for(let V=0;V<p.length;++V){const W=p[V];if(W&&!W.da&&W.capture==g){const pe=W.listener,ut=W.ha||W.src;W.fa&&K(c.i,W),M=pe.call(ut,E)!==!1&&M}}return M&&!E.defaultPrevented}function bN(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=d(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:a.setTimeout(c,p||0)}function R0(c){c.g=bN(()=>{c.g=null,c.i&&(c.i=!1,R0(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class _N extends w{constructor(p,g){super(),this.m=p,this.l=g,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:R0(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Eo(c){w.call(this),this.h=c,this.g={}}f(Eo,w);var D0=[];function M0(c){Y(c.g,function(p,g){this.g.hasOwnProperty(g)&&mt(p)},c),c.g={}}Eo.prototype.N=function(){Eo.Z.N.call(this),M0(this)},Eo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ld=a.JSON.stringify,NN=a.JSON.parse,EN=class{stringify(c){return a.JSON.stringify(c,void 0)}parse(c){return a.JSON.parse(c,void 0)}};function L0(){}function V0(){}var So={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Vd(){k.call(this,"d")}f(Vd,k);function Od(){k.call(this,"c")}f(Od,k);var Ts={},O0=null;function bl(){return O0=O0||new Tt}Ts.Ia="serverreachability";function F0(c){k.call(this,Ts.Ia,c)}f(F0,k);function jo(c){const p=bl();Vt(p,new F0(p))}Ts.STAT_EVENT="statevent";function U0(c,p){k.call(this,Ts.STAT_EVENT,c),this.stat=p}f(U0,k);function Ot(c){const p=bl();Vt(p,new U0(p,c))}Ts.Ja="timingevent";function z0(c,p){k.call(this,Ts.Ja,c),this.size=p}f(z0,k);function To(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){c()},p)}function Io(){this.g=!0}Io.prototype.ua=function(){this.g=!1};function SN(c,p,g,E,M,V){c.info(function(){if(c.g)if(V){var W="",pe=V.split("&");for(let ke=0;ke<pe.length;ke++){var ut=pe[ke].split("=");if(ut.length>1){const pt=ut[0];ut=ut[1];const Or=pt.split("_");W=Or.length>=2&&Or[1]=="type"?W+(pt+"="+ut+"&"):W+(pt+"=redacted&")}}}else W=null;else W=V;return"XMLHTTP REQ ("+E+") [attempt "+M+"]: "+p+`
`+g+`
`+W})}function jN(c,p,g,E,M,V,W){c.info(function(){return"XMLHTTP RESP ("+E+") [ attempt "+M+"]: "+p+`
`+g+`
`+V+" "+W})}function ci(c,p,g,E){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+IN(c,g)+(E?" "+E:"")})}function TN(c,p){c.info(function(){return"TIMEOUT: "+p})}Io.prototype.info=function(){};function IN(c,p){if(!c.g)return p;if(!p)return null;try{const V=JSON.parse(p);if(V){for(c=0;c<V.length;c++)if(Array.isArray(V[c])){var g=V[c];if(!(g.length<2)){var E=g[1];if(Array.isArray(E)&&!(E.length<1)){var M=E[0];if(M!="noop"&&M!="stop"&&M!="close")for(let W=1;W<E.length;W++)E[W]=""}}}}return Ld(V)}catch{return p}}var _l={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},B0={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},$0;function Fd(){}f(Fd,L0),Fd.prototype.g=function(){return new XMLHttpRequest},$0=new Fd;function Co(c){return encodeURIComponent(String(c))}function CN(c){var p=1;c=c.split(":");const g=[];for(;p>0&&c.length;)g.push(c.shift()),p--;return c.length&&g.push(c.join(":")),g}function En(c,p,g,E){this.j=c,this.i=p,this.l=g,this.S=E||1,this.V=new Eo(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new W0}function W0(){this.i=null,this.g="",this.h=!1}var H0={},Ud={};function zd(c,p,g){c.M=1,c.A=El(Vr(p)),c.u=g,c.R=!0,q0(c,null)}function q0(c,p){c.F=Date.now(),Nl(c),c.B=Vr(c.A);var g=c.B,E=c.S;Array.isArray(E)||(E=[String(E)]),ig(g.i,"t",E),c.C=0,g=c.j.L,c.h=new W0,c.g=Ng(c.j,g?p:null,!c.u),c.P>0&&(c.O=new _N(d(c.Y,c,c.g),c.P)),p=c.V,g=c.g,E=c.ba;var M="readystatechange";Array.isArray(M)||(M&&(D0[0]=M.toString()),M=D0);for(let V=0;V<M.length;V++){const W=je(g,M[V],E||p.handleEvent,!1,p.h||p);if(!W)break;p.g[W.key]=W}p=c.J?X(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),jo(),SN(c.i,c.v,c.B,c.l,c.S,c.u)}En.prototype.ba=function(c){c=c.target;const p=this.O;p&&Tn(c)==3?p.j():this.Y(c)},En.prototype.Y=function(c){try{if(c==this.g)e:{const pe=Tn(this.g),ut=this.g.ya(),ke=this.g.ca();if(!(pe<3)&&(pe!=3||this.g&&(this.h.h||this.g.la()||hg(this.g)))){this.K||pe!=4||ut==7||(ut==8||ke<=0?jo(3):jo(2)),Bd(this);var p=this.g.ca();this.X=p;var g=kN(this);if(this.o=p==200,jN(this.i,this.v,this.B,this.l,this.S,pe,p),this.o){if(this.U&&!this.L){t:{if(this.g){var E,M=this.g;if((E=M.g?M.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(E)){var V=E;break t}}V=null}if(c=V)ci(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,$d(this,c);else{this.o=!1,this.m=3,Ot(12),Is(this),ko(this);break e}}if(this.R){c=!0;let pt;for(;!this.K&&this.C<g.length;)if(pt=AN(this,g),pt==Ud){pe==4&&(this.m=4,Ot(14),c=!1),ci(this.i,this.l,null,"[Incomplete Response]");break}else if(pt==H0){this.m=4,Ot(15),ci(this.i,this.l,g,"[Invalid Chunk]"),c=!1;break}else ci(this.i,this.l,pt,null),$d(this,pt);if(G0(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),pe!=4||g.length!=0||this.h.h||(this.m=1,Ot(16),c=!1),this.o=this.o&&c,!c)ci(this.i,this.l,g,"[Invalid Chunked Response]"),Is(this),ko(this);else if(g.length>0&&!this.W){this.W=!0;var W=this.j;W.g==this&&W.aa&&!W.P&&(W.j.info("Great, no buffering proxy detected. Bytes received: "+g.length),Jd(W),W.P=!0,Ot(11))}}else ci(this.i,this.l,g,null),$d(this,g);pe==4&&Is(this),this.o&&!this.K&&(pe==4?xg(this.j,this):(this.o=!1,Nl(this)))}else HN(this.g),p==400&&g.indexOf("Unknown SID")>0?(this.m=3,Ot(12)):(this.m=0,Ot(13)),Is(this),ko(this)}}}catch{}finally{}};function kN(c){if(!G0(c))return c.g.la();const p=hg(c.g);if(p==="")return"";let g="";const E=p.length,M=Tn(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Is(c),ko(c),"";c.h.i=new a.TextDecoder}for(let V=0;V<E;V++)c.h.h=!0,g+=c.h.i.decode(p[V],{stream:!(M&&V==E-1)});return p.length=0,c.h.g+=g,c.C=0,c.h.g}function G0(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function AN(c,p){var g=c.C,E=p.indexOf(`
`,g);return E==-1?Ud:(g=Number(p.substring(g,E)),isNaN(g)?H0:(E+=1,E+g>p.length?Ud:(p=p.slice(E,E+g),c.C=E+g,p)))}En.prototype.cancel=function(){this.K=!0,Is(this)};function Nl(c){c.T=Date.now()+c.H,K0(c,c.H)}function K0(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=To(d(c.aa,c),p)}function Bd(c){c.D&&(a.clearTimeout(c.D),c.D=null)}En.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(TN(this.i,this.B),this.M!=2&&(jo(),Ot(17)),Is(this),this.m=2,ko(this)):K0(this,this.T-c)};function ko(c){c.j.I==0||c.K||xg(c.j,c)}function Is(c){Bd(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,M0(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function $d(c,p){try{var g=c.j;if(g.I!=0&&(g.g==c||Wd(g.h,c))){if(!c.L&&Wd(g.h,c)&&g.I==3){try{var E=g.Ba.g.parse(p)}catch{E=null}if(Array.isArray(E)&&E.length==3){var M=E;if(M[0]==0){e:if(!g.v){if(g.g)if(g.g.F+3e3<c.F)Cl(g),Tl(g);else break e;Yd(g),Ot(18)}}else g.xa=M[1],0<g.xa-g.K&&M[2]<37500&&g.F&&g.A==0&&!g.C&&(g.C=To(d(g.Va,g),6e3));J0(g.h)<=1&&g.ta&&(g.ta=void 0)}else ks(g,11)}else if((c.L||g.g==c)&&Cl(g),!I(p))for(M=g.Ba.g.parse(p),p=0;p<M.length;p++){let ke=M[p];const pt=ke[0];if(!(pt<=g.K))if(g.K=pt,ke=ke[1],g.I==2)if(ke[0]=="c"){g.M=ke[1],g.ba=ke[2];const Or=ke[3];Or!=null&&(g.ka=Or,g.j.info("VER="+g.ka));const As=ke[4];As!=null&&(g.za=As,g.j.info("SVER="+g.za));const In=ke[5];In!=null&&typeof In=="number"&&In>0&&(E=1.5*In,g.O=E,g.j.info("backChannelRequestTimeoutMs_="+E)),E=g;const Cn=c.g;if(Cn){const Al=Cn.g?Cn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Al){var V=E.h;V.g||Al.indexOf("spdy")==-1&&Al.indexOf("quic")==-1&&Al.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(Hd(V,V.h),V.h=null))}if(E.G){const Xd=Cn.g?Cn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xd&&(E.wa=Xd,Le(E.J,E.G,Xd))}}g.I=3,g.l&&g.l.ra(),g.aa&&(g.T=Date.now()-c.F,g.j.info("Handshake RTT: "+g.T+"ms")),E=g;var W=c;if(E.na=_g(E,E.L?E.ba:null,E.W),W.L){X0(E.h,W);var pe=W,ut=E.O;ut&&(pe.H=ut),pe.D&&(Bd(pe),Nl(pe)),E.g=W}else yg(E);g.i.length>0&&Il(g)}else ke[0]!="stop"&&ke[0]!="close"||ks(g,7);else g.I==3&&(ke[0]=="stop"||ke[0]=="close"?ke[0]=="stop"?ks(g,7):Qd(g):ke[0]!="noop"&&g.l&&g.l.qa(ke),g.A=0)}}jo(4)}catch{}}var PN=class{constructor(c,p){this.g=c,this.map=p}};function Q0(c){this.l=c||10,a.PerformanceNavigationTiming?(c=a.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Y0(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function J0(c){return c.h?1:c.g?c.g.size:0}function Wd(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Hd(c,p){c.g?c.g.add(p):c.h=p}function X0(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Q0.prototype.cancel=function(){if(this.i=Z0(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Z0(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const g of c.g.values())p=p.concat(g.G);return p}return v(c.i)}var eg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function RN(c,p){if(c){c=c.split("&");for(let g=0;g<c.length;g++){const E=c[g].indexOf("=");let M,V=null;E>=0?(M=c[g].substring(0,E),V=c[g].substring(E+1)):M=c[g],p(M,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Sn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof Sn?(this.l=c.l,Ao(this,c.j),this.o=c.o,this.g=c.g,Po(this,c.u),this.h=c.h,qd(this,og(c.i)),this.m=c.m):c&&(p=String(c).match(eg))?(this.l=!1,Ao(this,p[1]||"",!0),this.o=Ro(p[2]||""),this.g=Ro(p[3]||"",!0),Po(this,p[4]),this.h=Ro(p[5]||"",!0),qd(this,p[6]||"",!0),this.m=Ro(p[7]||"")):(this.l=!1,this.i=new Mo(null,this.l))}Sn.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(Do(p,tg,!0),":");var g=this.g;return(g||p=="file")&&(c.push("//"),(p=this.o)&&c.push(Do(p,tg,!0),"@"),c.push(Co(g).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.u,g!=null&&c.push(":",String(g))),(g=this.h)&&(this.g&&g.charAt(0)!="/"&&c.push("/"),c.push(Do(g,g.charAt(0)=="/"?LN:MN,!0))),(g=this.i.toString())&&c.push("?",g),(g=this.m)&&c.push("#",Do(g,ON)),c.join("")},Sn.prototype.resolve=function(c){const p=Vr(this);let g=!!c.j;g?Ao(p,c.j):g=!!c.o,g?p.o=c.o:g=!!c.g,g?p.g=c.g:g=c.u!=null;var E=c.h;if(g)Po(p,c.u);else if(g=!!c.h){if(E.charAt(0)!="/")if(this.g&&!this.h)E="/"+E;else{var M=p.h.lastIndexOf("/");M!=-1&&(E=p.h.slice(0,M+1)+E)}if(M=E,M==".."||M==".")E="";else if(M.indexOf("./")!=-1||M.indexOf("/.")!=-1){E=M.lastIndexOf("/",0)==0,M=M.split("/");const V=[];for(let W=0;W<M.length;){const pe=M[W++];pe=="."?E&&W==M.length&&V.push(""):pe==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),E&&W==M.length&&V.push("")):(V.push(pe),E=!0)}E=V.join("/")}else E=M}return g?p.h=E:g=c.i.toString()!=="",g?qd(p,og(c.i)):g=!!c.m,g&&(p.m=c.m),p};function Vr(c){return new Sn(c)}function Ao(c,p,g){c.j=g?Ro(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function Po(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function qd(c,p,g){p instanceof Mo?(c.i=p,FN(c.i,c.l)):(g||(p=Do(p,VN)),c.i=new Mo(p,c.l))}function Le(c,p,g){c.i.set(p,g)}function El(c){return Le(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ro(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Do(c,p,g){return typeof c=="string"?(c=encodeURI(c).replace(p,DN),g&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function DN(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var tg=/[#\/\?@]/g,MN=/[#\?:]/g,LN=/[#\?]/g,VN=/[#\?@]/g,ON=/#/g;function Mo(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function Cs(c){c.g||(c.g=new Map,c.h=0,c.i&&RN(c.i,function(p,g){c.add(decodeURIComponent(p.replace(/\+/g," ")),g)}))}t=Mo.prototype,t.add=function(c,p){Cs(this),this.i=null,c=ui(this,c);let g=this.g.get(c);return g||this.g.set(c,g=[]),g.push(p),this.h+=1,this};function rg(c,p){Cs(c),p=ui(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function ng(c,p){return Cs(c),p=ui(c,p),c.g.has(p)}t.forEach=function(c,p){Cs(this),this.g.forEach(function(g,E){g.forEach(function(M){c.call(p,M,E,this)},this)},this)};function sg(c,p){Cs(c);let g=[];if(typeof p=="string")ng(c,p)&&(g=g.concat(c.g.get(ui(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)g=g.concat(c[p]);return g}t.set=function(c,p){return Cs(this),this.i=null,c=ui(this,c),ng(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},t.get=function(c,p){return c?(c=sg(this,c),c.length>0?String(c[0]):p):p};function ig(c,p,g){rg(c,p),g.length>0&&(c.i=null,c.g.set(ui(c,p),v(g)),c.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let E=0;E<p.length;E++){var g=p[E];const M=Co(g);g=sg(this,g);for(let V=0;V<g.length;V++){let W=M;g[V]!==""&&(W+="="+Co(g[V])),c.push(W)}}return this.i=c.join("&")};function og(c){const p=new Mo;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function ui(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function FN(c,p){p&&!c.j&&(Cs(c),c.i=null,c.g.forEach(function(g,E){const M=E.toLowerCase();E!=M&&(rg(this,E),ig(this,M,g))},c)),c.j=p}function UN(c,p){const g=new Io;if(a.Image){const E=new Image;E.onload=h(jn,g,"TestLoadImage: loaded",!0,p,E),E.onerror=h(jn,g,"TestLoadImage: error",!1,p,E),E.onabort=h(jn,g,"TestLoadImage: abort",!1,p,E),E.ontimeout=h(jn,g,"TestLoadImage: timeout",!1,p,E),a.setTimeout(function(){E.ontimeout&&E.ontimeout()},1e4),E.src=c}else p(!1)}function zN(c,p){const g=new Io,E=new AbortController,M=setTimeout(()=>{E.abort(),jn(g,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:E.signal}).then(V=>{clearTimeout(M),V.ok?jn(g,"TestPingServer: ok",!0,p):jn(g,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(M),jn(g,"TestPingServer: error",!1,p)})}function jn(c,p,g,E,M){try{M&&(M.onload=null,M.onerror=null,M.onabort=null,M.ontimeout=null),E(g)}catch{}}function BN(){this.g=new EN}function Gd(c){this.i=c.Sb||null,this.h=c.ab||!1}f(Gd,L0),Gd.prototype.g=function(){return new Sl(this.i,this.h)};function Sl(c,p){Tt.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Sl,Tt),t=Sl.prototype,t.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,Vo(this)},t.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||a).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Lo(this)),this.readyState=0},t.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,Vo(this)),this.g&&(this.readyState=3,Vo(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;ag(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function ag(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}t.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?Lo(this):Vo(this),this.readyState==3&&ag(this)}},t.Oa=function(c){this.g&&(this.response=this.responseText=c,Lo(this))},t.Na=function(c){this.g&&(this.response=c,Lo(this))},t.ga=function(){this.g&&Lo(this)};function Lo(c){c.readyState=4,c.l=null,c.j=null,c.B=null,Vo(c)}t.setRequestHeader=function(c,p){this.A.append(c,p)},t.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var g=p.next();!g.done;)g=g.value,c.push(g[0]+": "+g[1]),g=p.next();return c.join(`\r
`)};function Vo(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Sl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function lg(c){let p="";return Y(c,function(g,E){p+=E,p+=":",p+=g,p+=`\r
`}),p}function Kd(c,p,g){e:{for(E in g){var E=!1;break e}E=!0}E||(g=lg(g),typeof c=="string"?g!=null&&Co(g):Le(c,p,g))}function Qe(c){Tt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Qe,Tt);var $N=/^https?$/i,WN=["POST","PUT"];t=Qe.prototype,t.Fa=function(c){this.H=c},t.ea=function(c,p,g,E){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():$0.g(),this.g.onreadystatechange=m(d(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(V){cg(this,V);return}if(c=g||"",g=new Map(this.headers),E)if(Object.getPrototypeOf(E)===Object.prototype)for(var M in E)g.set(M,E[M]);else if(typeof E.keys=="function"&&typeof E.get=="function")for(const V of E.keys())g.set(V,E.get(V));else throw Error("Unknown input type for opt_headers: "+String(E));E=Array.from(g.keys()).find(V=>V.toLowerCase()=="content-type"),M=a.FormData&&c instanceof a.FormData,!(Array.prototype.indexOf.call(WN,p,void 0)>=0)||E||M||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,W]of g)this.g.setRequestHeader(V,W);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(V){cg(this,V)}};function cg(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,ug(c),jl(c)}function ug(c){c.A||(c.A=!0,Vt(c,"complete"),Vt(c,"error"))}t.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,Vt(this,"complete"),Vt(this,"abort"),jl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),jl(this,!0)),Qe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?dg(this):this.Xa())},t.Xa=function(){dg(this)};function dg(c){if(c.h&&typeof i<"u"){if(c.v&&Tn(c)==4)setTimeout(c.Ca.bind(c),0);else if(Vt(c,"readystatechange"),Tn(c)==4){c.h=!1;try{const V=c.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var g;if(!(g=p)){var E;if(E=V===0){let W=String(c.D).match(eg)[1]||null;!W&&a.self&&a.self.location&&(W=a.self.location.protocol.slice(0,-1)),E=!$N.test(W?W.toLowerCase():"")}g=E}if(g)Vt(c,"complete"),Vt(c,"success");else{c.o=6;try{var M=Tn(c)>2?c.g.statusText:""}catch{M=""}c.l=M+" ["+c.ca()+"]",ug(c)}}finally{jl(c)}}}}function jl(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const g=c.g;c.g=null,p||Vt(c,"ready");try{g.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Tn(c){return c.g?c.g.readyState:0}t.ca=function(){try{return Tn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),NN(p)}};function hg(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function HN(c){const p={};c=(c.g&&Tn(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let E=0;E<c.length;E++){if(I(c[E]))continue;var g=CN(c[E]);const M=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const V=p[M]||[];p[M]=V,V.push(g)}te(p,function(E){return E.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Oo(c,p,g){return g&&g.internalChannelParams&&g.internalChannelParams[c]||p}function fg(c){this.za=0,this.i=[],this.j=new Io,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Oo("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Oo("baseRetryDelayMs",5e3,c),this.Za=Oo("retryDelaySeedMs",1e4,c),this.Ta=Oo("forwardChannelMaxRetries",2,c),this.va=Oo("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Q0(c&&c.concurrentRequestLimit),this.Ba=new BN,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=fg.prototype,t.ka=8,t.I=1,t.connect=function(c,p,g,E){Ot(0),this.W=c,this.H=p||{},g&&E!==void 0&&(this.H.OSID=g,this.H.OAID=E),this.F=this.X,this.J=_g(this,null,this.W),Il(this)};function Qd(c){if(mg(c),c.I==3){var p=c.V++,g=Vr(c.J);if(Le(g,"SID",c.M),Le(g,"RID",p),Le(g,"TYPE","terminate"),Fo(c,g),p=new En(c,c.j,p),p.M=2,p.A=El(Vr(g)),g=!1,a.navigator&&a.navigator.sendBeacon)try{g=a.navigator.sendBeacon(p.A.toString(),"")}catch{}!g&&a.Image&&(new Image().src=p.A,g=!0),g||(p.g=Ng(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Nl(p)}bg(c)}function Tl(c){c.g&&(Jd(c),c.g.cancel(),c.g=null)}function mg(c){Tl(c),c.v&&(a.clearTimeout(c.v),c.v=null),Cl(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&a.clearTimeout(c.m),c.m=null)}function Il(c){if(!Y0(c.h)&&!c.m){c.m=!0;var p=c.Ea;L||b(),O||(L(),O=!0),T.add(p,c),c.D=0}}function qN(c,p){return J0(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=To(d(c.Ea,c,p),wg(c,c.D)),c.D++,!0)}t.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const M=new En(this,this.j,c);let V=this.o;if(this.U&&(V?(V=X(V),se(V,this.U)):V=this.U),this.u!==null||this.R||(M.J=V,V=null),this.S)e:{for(var p=0,g=0;g<this.i.length;g++){t:{var E=this.i[g];if("__data__"in E.map&&(E=E.map.__data__,typeof E=="string")){E=E.length;break t}E=void 0}if(E===void 0)break;if(p+=E,p>4096){p=g;break e}if(p===4096||g===this.i.length-1){p=g+1;break e}}p=1e3}else p=1e3;p=gg(this,M,p),g=Vr(this.J),Le(g,"RID",c),Le(g,"CVER",22),this.G&&Le(g,"X-HTTP-Session-Id",this.G),Fo(this,g),V&&(this.R?p="headers="+Co(lg(V))+"&"+p:this.u&&Kd(g,this.u,V)),Hd(this.h,M),this.Ra&&Le(g,"TYPE","init"),this.S?(Le(g,"$req",p),Le(g,"SID","null"),M.U=!0,zd(M,g,null)):zd(M,g,p),this.I=2}}else this.I==3&&(c?pg(this,c):this.i.length==0||Y0(this.h)||pg(this))};function pg(c,p){var g;p?g=p.l:g=c.V++;const E=Vr(c.J);Le(E,"SID",c.M),Le(E,"RID",g),Le(E,"AID",c.K),Fo(c,E),c.u&&c.o&&Kd(E,c.u,c.o),g=new En(c,c.j,g,c.D+1),c.u===null&&(g.J=c.o),p&&(c.i=p.G.concat(c.i)),p=gg(c,g,1e3),g.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Hd(c.h,g),zd(g,E,p)}function Fo(c,p){c.H&&Y(c.H,function(g,E){Le(p,E,g)}),c.l&&Y({},function(g,E){Le(p,E,g)})}function gg(c,p,g){g=Math.min(c.i.length,g);const E=c.l?d(c.l.Ka,c.l,c):null;e:{var M=c.i;let pe=-1;for(;;){const ut=["count="+g];pe==-1?g>0?(pe=M[0].g,ut.push("ofs="+pe)):pe=0:ut.push("ofs="+pe);let ke=!0;for(let pt=0;pt<g;pt++){var V=M[pt].g;const Or=M[pt].map;if(V-=pe,V<0)pe=Math.max(0,M[pt].g-100),ke=!1;else try{V="req"+V+"_"||"";try{var W=Or instanceof Map?Or:Object.entries(Or);for(const[As,In]of W){let Cn=In;l(In)&&(Cn=Ld(In)),ut.push(V+As+"="+encodeURIComponent(Cn))}}catch(As){throw ut.push(V+"type="+encodeURIComponent("_badmap")),As}}catch{E&&E(Or)}}if(ke){W=ut.join("&");break e}}W=void 0}return c=c.i.splice(0,g),p.G=c,W}function yg(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;L||b(),O||(L(),O=!0),T.add(p,c),c.A=0}}function Yd(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=To(d(c.Da,c),wg(c,c.A)),c.A++,!0)}t.Da=function(){if(this.v=null,vg(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=To(d(this.Wa,this),c)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ot(10),Tl(this),vg(this))};function Jd(c){c.B!=null&&(a.clearTimeout(c.B),c.B=null)}function vg(c){c.g=new En(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=Vr(c.na);Le(p,"RID","rpc"),Le(p,"SID",c.M),Le(p,"AID",c.K),Le(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&Le(p,"TO",c.ia),Le(p,"TYPE","xmlhttp"),Fo(c,p),c.u&&c.o&&Kd(p,c.u,c.o),c.O&&(c.g.H=c.O);var g=c.g;c=c.ba,g.M=1,g.A=El(Vr(p)),g.u=null,g.R=!0,q0(g,c)}t.Va=function(){this.C!=null&&(this.C=null,Tl(this),Yd(this),Ot(19))};function Cl(c){c.C!=null&&(a.clearTimeout(c.C),c.C=null)}function xg(c,p){var g=null;if(c.g==p){Cl(c),Jd(c),c.g=null;var E=2}else if(Wd(c.h,p))g=p.G,X0(c.h,p),E=1;else return;if(c.I!=0){if(p.o)if(E==1){g=p.u?p.u.length:0,p=Date.now()-p.F;var M=c.D;E=bl(),Vt(E,new z0(E,g)),Il(c)}else yg(c);else if(M=p.m,M==3||M==0&&p.X>0||!(E==1&&qN(c,p)||E==2&&Yd(c)))switch(g&&g.length>0&&(p=c.h,p.i=p.i.concat(g)),M){case 1:ks(c,5);break;case 4:ks(c,10);break;case 3:ks(c,6);break;default:ks(c,2)}}}function wg(c,p){let g=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(g*=2),g*p}function ks(c,p){if(c.j.info("Error code "+p),p==2){var g=d(c.bb,c),E=c.Ua;const M=!E;E=new Sn(E||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Ao(E,"https"),El(E),M?UN(E.toString(),g):zN(E.toString(),g)}else Ot(2);c.I=0,c.l&&c.l.pa(p),bg(c),mg(c)}t.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ot(2)):(this.j.info("Failed to ping google.com"),Ot(1))};function bg(c){if(c.I=0,c.ja=[],c.l){const p=Z0(c.h);(p.length!=0||c.i.length!=0)&&(x(c.ja,p),x(c.ja,c.i),c.h.i.length=0,v(c.i),c.i.length=0),c.l.oa()}}function _g(c,p,g){var E=g instanceof Sn?Vr(g):new Sn(g);if(E.g!="")p&&(E.g=p+"."+E.g),Po(E,E.u);else{var M=a.location;E=M.protocol,p=p?p+"."+M.hostname:M.hostname,M=+M.port;const V=new Sn(null);E&&Ao(V,E),p&&(V.g=p),M&&Po(V,M),g&&(V.h=g),E=V}return g=c.G,p=c.wa,g&&p&&Le(E,g,p),Le(E,"VER",c.ka),Fo(c,E),E}function Ng(c,p,g){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new Qe(new Gd({ab:g})):new Qe(c.ma),p.Fa(c.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Eg(){}t=Eg.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function kl(){}kl.prototype.g=function(c,p){return new Zt(c,p)};function Zt(c,p){Tt.call(this),this.g=new fg(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!I(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!I(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new di(this)}f(Zt,Tt),Zt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Zt.prototype.close=function(){Qd(this.g)},Zt.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var g={};g.__data__=c,c=g}else this.v&&(g={},g.__data__=Ld(c),c=g);p.i.push(new PN(p.Ya++,c)),p.I==3&&Il(p)},Zt.prototype.N=function(){this.g.l=null,delete this.j,Qd(this.g),delete this.g,Zt.Z.N.call(this)};function Sg(c){Vd.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){e:{for(const g in p){c=g;break e}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}f(Sg,Vd);function jg(){Od.call(this),this.status=1}f(jg,Od);function di(c){this.g=c}f(di,Eg),di.prototype.ra=function(){Vt(this.g,"a")},di.prototype.qa=function(c){Vt(this.g,new Sg(c))},di.prototype.pa=function(c){Vt(this.g,new jg)},di.prototype.oa=function(){Vt(this.g,"b")},kl.prototype.createWebChannel=kl.prototype.g,Zt.prototype.send=Zt.prototype.o,Zt.prototype.open=Zt.prototype.m,Zt.prototype.close=Zt.prototype.close,Y2=function(){return new kl},Q2=function(){return bl()},K2=Ts,sm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},_l.NO_ERROR=0,_l.TIMEOUT=8,_l.HTTP_ERROR=6,fc=_l,B0.COMPLETE="complete",G2=B0,V0.EventType=So,So.OPEN="a",So.CLOSE="b",So.ERROR="c",So.MESSAGE="d",Tt.prototype.listen=Tt.prototype.J,ea=V0,Qe.prototype.listenOnce=Qe.prototype.K,Qe.prototype.getLastError=Qe.prototype.Ha,Qe.prototype.getLastErrorCode=Qe.prototype.ya,Qe.prototype.getStatus=Qe.prototype.ca,Qe.prototype.getResponseJson=Qe.prototype.La,Qe.prototype.getResponseText=Qe.prototype.la,Qe.prototype.send=Qe.prototype.ea,Qe.prototype.setWithCredentials=Qe.prototype.Fa,q2=Qe}).apply(typeof Ql<"u"?Ql:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Pt.UNAUTHENTICATED=new Pt(null),Pt.GOOGLE_CREDENTIALS=new Pt("google-credentials-uid"),Pt.FIRST_PARTY=new Pt("first-party-uid"),Pt.MOCK_USER=new Pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vo="12.8.0";function WC(t){vo=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei=new Fp("@firebase/firestore");function fi(){return ei.logLevel}function Z(t,...e){if(ei.logLevel<=xe.DEBUG){const r=e.map(Bp);ei.debug(`Firestore (${vo}): ${t}`,...r)}}function gn(t,...e){if(ei.logLevel<=xe.ERROR){const r=e.map(Bp);ei.error(`Firestore (${vo}): ${t}`,...r)}}function to(t,...e){if(ei.logLevel<=xe.WARN){const r=e.map(Bp);ei.warn(`Firestore (${vo}): ${t}`,...r)}}function Bp(t){if(typeof t=="string")return t;try{return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ce(t,e,r){let n="Unexpected state";typeof e=="string"?n=e:r=e,J2(t,n,r)}function J2(t,e,r){let n=`FIRESTORE (${vo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(r!==void 0)try{n+=" CONTEXT: "+JSON.stringify(r)}catch{n+=" CONTEXT: "+r}throw gn(n),new Error(n)}function Se(t,e,r,n){let s="Unexpected state";typeof r=="string"?s=r:n=r,t||J2(e,s,n)}function me(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Q extends Nn{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cn{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class HC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(Pt.UNAUTHENTICATED))}shutdown(){}}class qC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class GC{constructor(e){this.t=e,this.currentUser=Pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){Se(this.o===void 0,42304);let n=this.i;const s=u=>this.i!==n?(n=this.i,r(u)):Promise.resolve();let i=new cn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new cn,e.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new cn)}},0),a()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Se(typeof n.accessToken=="string",31837,{l:n}),new X2(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Se(e===null||typeof e=="string",2055,{h:e}),new Pt(e)}}class KC{constructor(e,r,n){this.P=e,this.T=r,this.I=n,this.type="FirstParty",this.user=Pt.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class QC{constructor(e,r,n){this.P=e,this.T=r,this.I=n}getToken(){return Promise.resolve(new KC(this.P,this.T,this.I))}start(e,r){e.enqueueRetryable(()=>r(Pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class _v{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YC{constructor(e,r){this.V=r,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,$r(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,r){Se(this.o===void 0,3512);const n=i=>{i.error!=null&&Z("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,Z("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new _v(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(Se(typeof r.token=="string",44558,{tokenResult:r}),this.m=r.token,new _v(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JC(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=62*Math.floor(4.129032258064516);let n="";for(;n.length<20;){const s=JC(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%62))}return n}}function we(t,e){return t<e?-1:t>e?1:0}function im(t,e){const r=Math.min(t.length,e.length);for(let n=0;n<r;n++){const s=t.charAt(n),i=e.charAt(n);if(s!==i)return Fh(s)===Fh(i)?we(s,i):Fh(s)?1:-1}return we(t.length,e.length)}const XC=55296,ZC=57343;function Fh(t){const e=t.charCodeAt(0);return e>=XC&&e<=ZC}function ro(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nv="__name__";class zr{constructor(e,r,n){r===void 0?r=0:r>e.length&&ce(637,{offset:r,range:e.length}),n===void 0?n=e.length-r:n>e.length-r&&ce(1746,{length:n,range:e.length-r}),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return zr.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof zr?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=zr.compareSegments(e.get(s),r.get(s));if(i!==0)return i}return we(e.length,r.length)}static compareSegments(e,r){const n=zr.isNumericId(e),s=zr.isNumericId(r);return n&&!s?-1:!n&&s?1:n&&s?zr.extractNumericId(e).compare(zr.extractNumericId(r)):im(e,r)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ls.fromString(e.substring(4,e.length-2))}}class Re extends zr{construct(e,r,n){return new Re(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Q(F.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new Re(r)}static emptyPath(){return new Re([])}}const ek=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _t extends zr{construct(e,r,n){return new _t(e,r,n)}static isValidIdentifier(e){return ek.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Nv}static keyField(){return new _t([Nv])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let a=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new Q(F.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new Q(F.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=u,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(n+=l,s++):(i(),s++)}if(i(),a)throw new Q(F.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _t(r)}static emptyPath(){return new _t([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ne{constructor(e){this.path=e}static fromPath(e){return new ne(Re.fromString(e))}static fromName(e){return new ne(Re.fromString(e).popFirst(5))}static empty(){return new ne(Re.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Re.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return Re.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ne(new Re(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z2(t,e,r){if(!r)throw new Q(F.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function tk(t,e,r,n){if(e===!0&&n===!0)throw new Q(F.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Ev(t){if(!ne.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Sv(t){if(ne.isDocumentKey(t))throw new Q(F.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function eb(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function fd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ce(12329,{type:typeof t})}function Pr(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Q(F.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=fd(t);throw new Q(F.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t,e){const r={typeString:t};return e&&(r.value=e),r}function ol(t,e){if(!eb(t))throw new Q(F.INVALID_ARGUMENT,"JSON must be an object");let r;for(const n in e)if(e[n]){const s=e[n].typeString,i="value"in e[n]?{value:e[n].value}:void 0;if(!(n in t)){r=`JSON missing required field: '${n}'`;break}const a=t[n];if(s&&typeof a!==s){r=`JSON field '${n}' must be a ${s}.`;break}if(i!==void 0&&a!==i.value){r=`Expected '${n}' field to equal '${i.value}'`;break}}if(r)throw new Q(F.INVALID_ARGUMENT,r);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=-62135596800,Tv=1e6;class Oe{static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor((e-1e3*r)*Tv);return new Oe(r,n)}constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Q(F.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<jv)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Q(F.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Tv}_compareTo(e){return this.seconds===e.seconds?we(this.nanoseconds,e.nanoseconds):we(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(ol(e,Oe._jsonSchema))return new Oe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-jv;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Oe._jsonSchemaVersion="firestore/timestamp/1.0",Oe._jsonSchema={type:ct("string",Oe._jsonSchemaVersion),seconds:ct("number"),nanoseconds:ct("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{static fromTimestamp(e){return new fe(e)}static min(){return new fe(new Oe(0,0))}static max(){return new fe(new Oe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wa=-1;function rk(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=fe.fromTimestamp(n===1e9?new Oe(r+1,0):new Oe(r,n));return new ms(s,ne.empty(),e)}function nk(t){return new ms(t.readTime,t.key,Wa)}class ms{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new ms(fe.min(),ne.empty(),Wa)}static max(){return new ms(fe.max(),ne.empty(),Wa)}}function sk(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=ne.comparator(t.documentKey,e.documentKey),r!==0?r:we(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ik="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ok{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t){if(t.code!==F.FAILED_PRECONDITION||t.message!==ik)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new U((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof U?r:U.resolve(r)}catch(r){return U.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):U.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):U.reject(r)}static resolve(e){return new U((r,n)=>{r(e)})}static reject(e){return new U((r,n)=>{n(e)})}static waitFor(e){return new U((r,n)=>{let s=0,i=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&r()},u=>n(u))}),a=!0,i===s&&r()})}static or(e){let r=U.resolve(!1);for(const n of e)r=r.next(s=>s?U.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new U((n,s)=>{const i=e.length,a=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;r(e[d]).next(h=>{a[d]=h,++l,l===i&&n(a)},h=>s(h))}})}static doWhile(e,r){return new U((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function ak(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function wo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ae(n),this.ue=n=>r.writeSequenceNumber(n))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}md.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wp=-1;function pd(t){return t==null}function uu(t){return t===0&&1/t==-1/0}function lk(t){return typeof t=="number"&&Number.isInteger(t)&&!uu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb="";function ck(t){let e="";for(let r=0;r<t.length;r++)e.length>0&&(e=Iv(e)),e=uk(t.get(r),e);return Iv(e)}function uk(t,e){let r=e;const n=t.length;for(let s=0;s<n;s++){const i=t.charAt(s);switch(i){case"\0":r+="";break;case tb:r+="";break;default:r+=i}}return r}function Iv(t){return t+tb+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cv(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Es(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function rb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke{constructor(e,r){this.comparator=e,this.root=r||bt.EMPTY}insert(e,r){return new Ke(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new Ke(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Yl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Yl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Yl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Yl(this.root,e,this.comparator,!0)}}class Yl{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??bt.RED,this.left=s??bt.EMPTY,this.right=i??bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new bt(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return bt.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ce(27949);return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1;bt.EMPTY=new class{constructor(){this.size=0}get key(){throw ce(57766)}get value(){throw ce(16141)}get color(){throw ce(16727)}get left(){throw ce(29726)}get right(){throw ce(36894)}copy(e,r,n,s,i){return this}insert(e,r,n){return new bt(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e){this.comparator=e,this.data=new Ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new kv(this.data.getIterator())}getIteratorFrom(e){return new kv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof ft)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new ft(this.comparator);return r.data=e,r}}class kv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nr{constructor(e){this.fields=e,e.sort(_t.comparator)}static empty(){return new nr([])}unionWith(e){let r=new ft(_t.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new nr(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return ro(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new nb("Invalid base64 string: "+i):i}}(e);return new jt(r)}static fromUint8Array(e){const r=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(e);return new jt(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return we(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}jt.EMPTY_BYTE_STRING=new jt("");const dk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ps(t){if(Se(!!t,39018),typeof t=="string"){let e=0;const r=dk.exec(t);if(Se(!!r,46558,{timestamp:t}),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function gs(t){return typeof t=="string"?jt.fromBase64String(t):jt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sb="server_timestamp",ib="__type__",ob="__previous_value__",ab="__local_write_time__";function Hp(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[ib])==null?void 0:n.stringValue)===sb}function gd(t){const e=t.mapValue.fields[ob];return Hp(e)?gd(e):e}function Ha(t){const e=ps(t.mapValue.fields[ab].timestampValue);return new Oe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,r,n,s,i,a,l,u,d,h,f){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=f}}const du="(default)";class qa{constructor(e,r){this.projectId=e,this.database=r||du}static empty(){return new qa("","")}get isDefaultDatabase(){return this.database===du}isEqual(e){return e instanceof qa&&e.projectId===this.projectId&&e.database===this.database}}function fk(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Q(F.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new qa(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb="__type__",cb="__max__",Jl={mapValue:{fields:{__type__:{stringValue:cb}}}},ub="__vector__",hu="value";function ys(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Hp(t)?4:pk(t)?9007199254740991:mk(t)?10:11:ce(28295,{value:t})}function Zr(t,e){if(t===e)return!0;const r=ys(t);if(r!==ys(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ha(t).isEqual(Ha(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=ps(s.timestampValue),l=ps(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return gs(s.bytesValue).isEqual(gs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return et(s.geoPointValue.latitude)===et(i.geoPointValue.latitude)&&et(s.geoPointValue.longitude)===et(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return et(s.integerValue)===et(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=et(s.doubleValue),l=et(i.doubleValue);return a===l?uu(a)===uu(l):isNaN(a)&&isNaN(l)}return!1}(t,e);case 9:return ro(t.arrayValue.values||[],e.arrayValue.values||[],Zr);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Cv(a)!==Cv(l))return!1;for(const u in a)if(a.hasOwnProperty(u)&&(l[u]===void 0||!Zr(a[u],l[u])))return!1;return!0}(t,e);default:return ce(52216,{left:t})}}function Ga(t,e){return(t.values||[]).find(r=>Zr(r,e))!==void 0}function no(t,e){if(t===e)return 0;const r=ys(t),n=ys(e);if(r!==n)return we(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return we(t.booleanValue,e.booleanValue);case 2:return function(i,a){const l=et(i.integerValue||i.doubleValue),u=et(a.integerValue||a.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Av(t.timestampValue,e.timestampValue);case 4:return Av(Ha(t),Ha(e));case 5:return im(t.stringValue,e.stringValue);case 6:return function(i,a){const l=gs(i),u=gs(a);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),u=a.split("/");for(let d=0;d<l.length&&d<u.length;d++){const h=we(l[d],u[d]);if(h!==0)return h}return we(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,a){const l=we(et(i.latitude),et(a.latitude));return l!==0?l:we(et(i.longitude),et(a.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Pv(t.arrayValue,e.arrayValue);case 10:return function(i,a){var m,v,x,y;const l=i.fields||{},u=a.fields||{},d=(m=l[hu])==null?void 0:m.arrayValue,h=(v=u[hu])==null?void 0:v.arrayValue,f=we(((x=d==null?void 0:d.values)==null?void 0:x.length)||0,((y=h==null?void 0:h.values)==null?void 0:y.length)||0);return f!==0?f:Pv(d,h)}(t.mapValue,e.mapValue);case 11:return function(i,a){if(i===Jl.mapValue&&a===Jl.mapValue)return 0;if(i===Jl.mapValue)return 1;if(a===Jl.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=a.fields||{},h=Object.keys(d);u.sort(),h.sort();for(let f=0;f<u.length&&f<h.length;++f){const m=im(u[f],h[f]);if(m!==0)return m;const v=no(l[u[f]],d[h[f]]);if(v!==0)return v}return we(u.length,h.length)}(t.mapValue,e.mapValue);default:throw ce(23264,{he:r})}}function Av(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return we(t,e);const r=ps(t),n=ps(e),s=we(r.seconds,n.seconds);return s!==0?s:we(r.nanos,n.nanos)}function Pv(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=no(r[s],n[s]);if(i)return i}return we(r.length,n.length)}function so(t){return om(t)}function om(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=ps(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return gs(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return ne.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=om(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const a of n)i?i=!1:s+=",",s+=`${a}:${om(r.fields[a])}`;return s+"}"}(t.mapValue):ce(61005,{value:t})}function mc(t){switch(ys(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=gd(t);return e?16+mc(e):16;case 5:return 2*t.stringValue.length;case 6:return gs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(n){return(n.values||[]).reduce((s,i)=>s+mc(i),0)}(t.arrayValue);case 10:case 11:return function(n){let s=0;return Es(n.fields,(i,a)=>{s+=i.length+mc(a)}),s}(t.mapValue);default:throw ce(13486,{value:t})}}function Rv(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function am(t){return!!t&&"integerValue"in t}function qp(t){return!!t&&"arrayValue"in t}function Dv(t){return!!t&&"nullValue"in t}function Mv(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function pc(t){return!!t&&"mapValue"in t}function mk(t){var r,n;return((n=(((r=t==null?void 0:t.mapValue)==null?void 0:r.fields)||{})[lb])==null?void 0:n.stringValue)===ub}function ma(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Es(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=ma(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=ma(t.arrayValue.values[r]);return e}return{...t}}function pk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===cb}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qt{constructor(e){this.value=e}static empty(){return new qt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!pc(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=ma(r)}setAll(e){let r=_t.emptyPath(),n={},s=[];e.forEach((a,l)=>{if(!r.isImmediateParentOf(l)){const u=this.getFieldsMap(r);this.applyChanges(u,n,s),n={},s=[],r=l.popLast()}a?n[l.lastSegment()]=ma(a):s.push(l.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());pc(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Zr(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];pc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Es(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new qt(ma(this.value))}}function db(t){const e=[];return Es(t.fields,(r,n)=>{const s=new _t([r]);if(pc(n)){const i=db(n.mapValue).fields;if(i.length===0)e.push(s);else for(const a of i)e.push(s.child(a))}else e.push(s)}),new nr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e,r,n,s,i,a,l){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new Dt(e,0,fe.min(),fe.min(),fe.min(),qt.empty(),0)}static newFoundDocument(e,r,n,s){return new Dt(e,1,r,fe.min(),n,s,0)}static newNoDocument(e,r){return new Dt(e,2,r,fe.min(),fe.min(),qt.empty(),0)}static newUnknownDocument(e,r){return new Dt(e,3,r,fe.min(),fe.min(),qt.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(fe.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=qt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=qt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=fe.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fu{constructor(e,r){this.position=e,this.inclusive=r}}function Lv(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],a=t.position[s];if(i.field.isKeyField()?n=ne.comparator(ne.fromName(a.referenceValue),r.key):n=no(a,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function Vv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Zr(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,r="asc"){this.field=e,this.dir=r}}function gk(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{}class lt extends hb{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new vk(e,r,n):r==="array-contains"?new bk(e,n):r==="in"?new _k(e,n):r==="not-in"?new Nk(e,n):r==="array-contains-any"?new Ek(e,n):new lt(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new xk(e,n):new wk(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&r.nullValue===void 0&&this.matchesComparison(no(r,this.value)):r!==null&&ys(this.value)===ys(r)&&this.matchesComparison(no(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Rr extends hb{constructor(e,r){super(),this.filters=e,this.op=r,this.Pe=null}static create(e,r){return new Rr(e,r)}matches(e){return fb(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function fb(t){return t.op==="and"}function mb(t){return yk(t)&&fb(t)}function yk(t){for(const e of t.filters)if(e instanceof Rr)return!1;return!0}function lm(t){if(t instanceof lt)return t.field.canonicalString()+t.op.toString()+so(t.value);if(mb(t))return t.filters.map(e=>lm(e)).join(",");{const e=t.filters.map(r=>lm(r)).join(",");return`${t.op}(${e})`}}function pb(t,e){return t instanceof lt?function(n,s){return s instanceof lt&&n.op===s.op&&n.field.isEqual(s.field)&&Zr(n.value,s.value)}(t,e):t instanceof Rr?function(n,s){return s instanceof Rr&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,a,l)=>i&&pb(a,s.filters[l]),!0):!1}(t,e):void ce(19439)}function gb(t){return t instanceof lt?function(r){return`${r.field.canonicalString()} ${r.op} ${so(r.value)}`}(t):t instanceof Rr?function(r){return r.op.toString()+" {"+r.getFilters().map(gb).join(" ,")+"}"}(t):"Filter"}class vk extends lt{constructor(e,r,n){super(e,r,n),this.key=ne.fromName(n.referenceValue)}matches(e){const r=ne.comparator(e.key,this.key);return this.matchesComparison(r)}}class xk extends lt{constructor(e,r){super(e,"in",r),this.keys=yb("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class wk extends lt{constructor(e,r){super(e,"not-in",r),this.keys=yb("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function yb(t,e){var r;return(((r=e.arrayValue)==null?void 0:r.values)||[]).map(n=>ne.fromName(n.referenceValue))}class bk extends lt{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return qp(r)&&Ga(r.arrayValue,this.value)}}class _k extends lt{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&Ga(this.value.arrayValue,r)}}class Nk extends lt{constructor(e,r){super(e,"not-in",r)}matches(e){if(Ga(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&r.nullValue===void 0&&!Ga(this.value.arrayValue,r)}}class Ek extends lt{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!qp(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>Ga(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sk{constructor(e,r=null,n=[],s=[],i=null,a=null,l=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Te=null}}function Ov(t,e=null,r=[],n=[],s=null,i=null,a=null){return new Sk(t,e,r,n,s,i,a)}function Gp(t){const e=me(t);if(e.Te===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>lm(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),pd(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>so(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>so(n)).join(",")),e.Te=r}return e.Te}function Kp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!gk(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!pb(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Vv(t.startAt,e.startAt)&&Vv(t.endAt,e.endAt)}function cm(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class al{constructor(e,r=null,n=[],s=[],i=null,a="F",l=null,u=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function jk(t,e,r,n,s,i,a,l){return new al(t,e,r,n,s,i,a,l)}function Qp(t){return new al(t)}function Fv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Tk(t){return ne.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function vb(t){return t.collectionGroup!==null}function pa(t){const e=me(t);if(e.Ie===null){e.Ie=[];const r=new Set;for(const i of e.explicitOrderBy)e.Ie.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new ft(_t.comparator);return a.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.Ie.push(new mu(i,n))}),r.has(_t.keyField().canonicalString())||e.Ie.push(new mu(_t.keyField(),n))}return e.Ie}function Gr(t){const e=me(t);return e.Ee||(e.Ee=Ik(e,pa(t))),e.Ee}function Ik(t,e){if(t.limitType==="F")return Ov(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new mu(s.field,i)});const r=t.endAt?new fu(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new fu(t.startAt.position,t.startAt.inclusive):null;return Ov(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function um(t,e){const r=t.filters.concat([e]);return new al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function dm(t,e,r){return new al(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function yd(t,e){return Kp(Gr(t),Gr(e))&&t.limitType===e.limitType}function xb(t){return`${Gp(Gr(t))}|lt:${t.limitType}`}function mi(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>gb(s)).join(", ")}]`),pd(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>so(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>so(s)).join(",")),`Target(${n})`}(Gr(t))}; limitType=${t.limitType})`}function vd(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):ne.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of pa(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(a,l,u){const d=Lv(a,l,u);return a.inclusive?d<=0:d<0}(n.startAt,pa(n),s)||n.endAt&&!function(a,l,u){const d=Lv(a,l,u);return a.inclusive?d>=0:d>0}(n.endAt,pa(n),s))}(t,e)}function Ck(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function wb(t){return(e,r)=>{let n=!1;for(const s of pa(t)){const i=kk(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function kk(t,e,r){const n=t.field.isKeyField()?ne.comparator(e.key,r.key):function(i,a,l){const u=a.data.field(i),d=l.data.field(i);return u!==null&&d!==null?no(u,d):ce(42886)}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return ce(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Es(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return rb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=new Ke(ne.comparator);function yn(){return Ak}const bb=new Ke(ne.comparator);function ta(...t){let e=bb;for(const r of t)e=e.insert(r.key,r);return e}function _b(t){let e=bb;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function Us(){return ga()}function Nb(){return ga()}function ga(){return new oi(t=>t.toString(),(t,e)=>t.isEqual(e))}const Pk=new Ke(ne.comparator),Rk=new ft(ne.comparator);function be(...t){let e=Rk;for(const r of t)e=e.add(r);return e}const Dk=new ft(we);function Mk(){return Dk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:uu(e)?"-0":e}}function Eb(t){return{integerValue:""+t}}function Sb(t,e){return lk(e)?Eb(e):Yp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(){this._=void 0}}function Lk(t,e,r){return t instanceof Ka?function(s,i){const a={fields:{[ib]:{stringValue:sb},[ab]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Hp(i)&&(i=gd(i)),i&&(a.fields[ob]=i),{mapValue:a}}(r,e):t instanceof Qa?Tb(t,e):t instanceof Ya?Ib(t,e):function(s,i){const a=jb(s,i),l=Uv(a)+Uv(s.Ae);return am(a)&&am(s.Ae)?Eb(l):Yp(s.serializer,l)}(t,e)}function Vk(t,e,r){return t instanceof Qa?Tb(t,e):t instanceof Ya?Ib(t,e):r}function jb(t,e){return t instanceof Ja?function(n){return am(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class Ka extends xd{}class Qa extends xd{constructor(e){super(),this.elements=e}}function Tb(t,e){const r=Cb(e);for(const n of t.elements)r.some(s=>Zr(s,n))||r.push(n);return{arrayValue:{values:r}}}class Ya extends xd{constructor(e){super(),this.elements=e}}function Ib(t,e){let r=Cb(e);for(const n of t.elements)r=r.filter(s=>!Zr(s,n));return{arrayValue:{values:r}}}class Ja extends xd{constructor(e,r){super(),this.serializer=e,this.Ae=r}}function Uv(t){return et(t.integerValue||t.doubleValue)}function Cb(t){return qp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kb{constructor(e,r){this.field=e,this.transform=r}}function Ok(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof Qa&&s instanceof Qa||n instanceof Ya&&s instanceof Ya?ro(n.elements,s.elements,Zr):n instanceof Ja&&s instanceof Ja?Zr(n.Ae,s.Ae):n instanceof Ka&&s instanceof Ka}(t.transform,e.transform)}class Fk{constructor(e,r){this.version=e,this.transformResults=r}}class Jt{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function gc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class wd{}function Ab(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jp(t.key,Jt.none()):new ll(t.key,t.data,Jt.none());{const r=t.data,n=qt.empty();let s=new ft(_t.comparator);for(let i of e.fields)if(!s.has(i)){let a=r.field(i);a===null&&i.length>1&&(i=i.popLast(),a=r.field(i)),a===null?n.delete(i):n.set(i,a),s=s.add(i)}return new Ss(t.key,n,new nr(s.toArray()),Jt.none())}}function Uk(t,e,r){t instanceof ll?function(s,i,a){const l=s.value.clone(),u=Bv(s.fieldTransforms,i,a.transformResults);l.setAll(u),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(t,e,r):t instanceof Ss?function(s,i,a){if(!gc(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Bv(s.fieldTransforms,i,a.transformResults),u=i.data;u.setAll(Pb(s)),u.setAll(l),i.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(t,e,r):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,r)}function ya(t,e,r,n){return t instanceof ll?function(i,a,l,u){if(!gc(i.precondition,a))return l;const d=i.value.clone(),h=$v(i.fieldTransforms,u,a);return d.setAll(h),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(t,e,r,n):t instanceof Ss?function(i,a,l,u){if(!gc(i.precondition,a))return l;const d=$v(i.fieldTransforms,u,a),h=a.data;return h.setAll(Pb(i)),h.setAll(d),a.convertToFoundDocument(a.version,h).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(f=>f.field))}(t,e,r,n):function(i,a,l){return gc(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(t,e,r)}function zk(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=jb(n.transform,s||null);i!=null&&(r===null&&(r=qt.empty()),r.set(n.field,i))}return r||null}function zv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&ro(n,s,(i,a)=>Ok(i,a))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ll extends wd{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Ss extends wd{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Pb(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function Bv(t,e,r){const n=new Map;Se(t.length===r.length,32656,{Ve:r.length,de:t.length});for(let s=0;s<r.length;s++){const i=t[s],a=i.transform,l=e.data.field(i.field);n.set(i.field,Vk(a,l,r[s]))}return n}function $v(t,e,r){const n=new Map;for(const s of t){const i=s.transform,a=r.data.field(s.field);n.set(s.field,Lk(i,a,e))}return n}class Jp extends wd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Bk extends wd{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Uk(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=ya(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=ya(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=Nb();return this.mutations.forEach(s=>{const i=e.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=r.has(s.key)?null:l;const u=Ab(a,l);u!==null&&n.set(s.key,u),a.isValidDocument()||a.convertToNoDocument(fe.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),be())}isEqual(e){return this.batchId===e.batchId&&ro(this.mutations,e.mutations,(r,n)=>zv(r,n))&&ro(this.baseMutations,e.baseMutations,(r,n)=>zv(r,n))}}class Xp{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){Se(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let s=function(){return Pk}();const i=e.mutations;for(let a=0;a<i.length;a++)s=s.insert(i[a].key,n[a].version);return new Xp(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wk{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hk{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var it,_e;function qk(t){switch(t){case F.OK:return ce(64938);case F.CANCELLED:case F.UNKNOWN:case F.DEADLINE_EXCEEDED:case F.RESOURCE_EXHAUSTED:case F.INTERNAL:case F.UNAVAILABLE:case F.UNAUTHENTICATED:return!1;case F.INVALID_ARGUMENT:case F.NOT_FOUND:case F.ALREADY_EXISTS:case F.PERMISSION_DENIED:case F.FAILED_PRECONDITION:case F.ABORTED:case F.OUT_OF_RANGE:case F.UNIMPLEMENTED:case F.DATA_LOSS:return!0;default:return ce(15467,{code:t})}}function Rb(t){if(t===void 0)return gn("GRPC error has no .code"),F.UNKNOWN;switch(t){case it.OK:return F.OK;case it.CANCELLED:return F.CANCELLED;case it.UNKNOWN:return F.UNKNOWN;case it.DEADLINE_EXCEEDED:return F.DEADLINE_EXCEEDED;case it.RESOURCE_EXHAUSTED:return F.RESOURCE_EXHAUSTED;case it.INTERNAL:return F.INTERNAL;case it.UNAVAILABLE:return F.UNAVAILABLE;case it.UNAUTHENTICATED:return F.UNAUTHENTICATED;case it.INVALID_ARGUMENT:return F.INVALID_ARGUMENT;case it.NOT_FOUND:return F.NOT_FOUND;case it.ALREADY_EXISTS:return F.ALREADY_EXISTS;case it.PERMISSION_DENIED:return F.PERMISSION_DENIED;case it.FAILED_PRECONDITION:return F.FAILED_PRECONDITION;case it.ABORTED:return F.ABORTED;case it.OUT_OF_RANGE:return F.OUT_OF_RANGE;case it.UNIMPLEMENTED:return F.UNIMPLEMENTED;case it.DATA_LOSS:return F.DATA_LOSS;default:return ce(39323,{code:t})}}(_e=it||(it={}))[_e.OK=0]="OK",_e[_e.CANCELLED=1]="CANCELLED",_e[_e.UNKNOWN=2]="UNKNOWN",_e[_e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_e[_e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_e[_e.NOT_FOUND=5]="NOT_FOUND",_e[_e.ALREADY_EXISTS=6]="ALREADY_EXISTS",_e[_e.PERMISSION_DENIED=7]="PERMISSION_DENIED",_e[_e.UNAUTHENTICATED=16]="UNAUTHENTICATED",_e[_e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_e[_e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_e[_e.ABORTED=10]="ABORTED",_e[_e.OUT_OF_RANGE=11]="OUT_OF_RANGE",_e[_e.UNIMPLEMENTED=12]="UNIMPLEMENTED",_e[_e.INTERNAL=13]="INTERNAL",_e[_e.UNAVAILABLE=14]="UNAVAILABLE",_e[_e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gk(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new ls([4294967295,4294967295],0);function Wv(t){const e=Gk().encode(t),r=new H2;return r.update(e),new Uint8Array(r.digest())}function Hv(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ls([r,n],0),new ls([s,i],0)]}class Zp{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new ra(`Invalid padding: ${r}`);if(n<0)throw new ra(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new ra(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new ra(`Invalid padding when bitmap length is 0: ${r}`);this.ge=8*e.length-r,this.pe=ls.fromNumber(this.ge)}ye(e,r,n){let s=e.add(r.multiply(ls.fromNumber(n)));return s.compare(Kk)===1&&(s=new ls([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const r=Wv(e),[n,s]=Hv(r);for(let i=0;i<this.hashCount;i++){const a=this.ye(n,s,i);if(!this.we(a))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),a=new Zp(i,s,r);return n.forEach(l=>a.insert(l)),a}insert(e){if(this.ge===0)return;const r=Wv(e),[n,s]=Hv(r);for(let i=0;i<this.hashCount;i++){const a=this.ye(n,s,i);this.be(a)}}be(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class ra extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,cl.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new bd(fe.min(),s,new Ke(we),yn(),be())}}class cl{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new cl(n,r,be(),be(),be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yc{constructor(e,r,n,s){this.Se=e,this.removedTargetIds=r,this.key=n,this.De=s}}class Db{constructor(e,r){this.targetId=e,this.Ce=r}}class Mb{constructor(e,r,n=jt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class qv{constructor(){this.ve=0,this.Fe=Gv(),this.Me=jt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=be(),r=be(),n=be();return this.Fe.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:ce(38017,{changeType:i})}}),new cl(this.Me,this.xe,e,r,n)}Ke(){this.Oe=!1,this.Fe=Gv()}qe(e,r){this.Oe=!0,this.Fe=this.Fe.insert(e,r)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Se(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class Qk{constructor(e){this.Ge=e,this.ze=new Map,this.je=yn(),this.He=Xl(),this.Je=Xl(),this.Ze=new Ke(we)}Xe(e){for(const r of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(r,e.De):this.et(r,e.key,e.De);for(const r of e.removedTargetIds)this.et(r,e.key,e.De)}tt(e){this.forEachTarget(e,r=>{const n=this.nt(r);switch(e.state){case 0:this.rt(r)&&n.Le(e.resumeToken);break;case 1:n.We(),n.Ne||n.Ke(),n.Le(e.resumeToken);break;case 2:n.We(),n.Ne||this.removeTarget(r);break;case 3:this.rt(r)&&(n.Qe(),n.Le(e.resumeToken));break;case 4:this.rt(r)&&(this.it(r),n.Le(e.resumeToken));break;default:ce(56790,{state:e.state})}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.ze.forEach((n,s)=>{this.rt(s)&&r(s)})}st(e){const r=e.targetId,n=e.Ce.count,s=this.ot(r);if(s){const i=s.target;if(cm(i))if(n===0){const a=new ne(i.path);this.et(r,a,Dt.newNoDocument(a,fe.min()))}else Se(n===1,20013,{expectedCount:n});else{const a=this._t(r);if(a!==n){const l=this.ut(e),u=l?this.ct(l,e,a):1;if(u!==0){this.it(r);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(r,d)}}}}}ut(e){const r=e.Ce.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let a,l;try{a=gs(n).toUint8Array()}catch(u){if(u instanceof nb)return to("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new Zp(a,s,i)}catch(u){return to(u instanceof ra?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,r,n){return r.Ce.count===n-this.Pt(e,r.targetId)?0:2}Pt(e,r){const n=this.Ge.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const a=this.Ge.ht(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.et(r,i,null),s++)}),s}Tt(e){const r=new Map;this.ze.forEach((i,a)=>{const l=this.ot(a);if(l){if(i.current&&cm(l.target)){const u=new ne(l.target.path);this.It(u).has(a)||this.Et(a,u)||this.et(a,u,Dt.newNoDocument(u,e))}i.Be&&(r.set(a,i.ke()),i.Ke())}});let n=be();this.Je.forEach((i,a)=>{let l=!0;a.forEachWhile(u=>{const d=this.ot(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(n=n.add(i))}),this.je.forEach((i,a)=>a.setReadTime(e));const s=new bd(e,r,this.Ze,this.je,n);return this.je=yn(),this.He=Xl(),this.Je=Xl(),this.Ze=new Ke(we),s}Ye(e,r){if(!this.rt(e))return;const n=this.Et(e,r.key)?2:0;this.nt(e).qe(r.key,n),this.je=this.je.insert(r.key,r),this.He=this.He.insert(r.key,this.It(r.key).add(e)),this.Je=this.Je.insert(r.key,this.Rt(r.key).add(e))}et(e,r,n){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,r)?s.qe(r,1):s.Ue(r),this.Je=this.Je.insert(r,this.Rt(r).delete(e)),this.Je=this.Je.insert(r,this.Rt(r).add(e)),n&&(this.je=this.je.insert(r,n))}removeTarget(e){this.ze.delete(e)}_t(e){const r=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let r=this.ze.get(e);return r||(r=new qv,this.ze.set(e,r)),r}Rt(e){let r=this.Je.get(e);return r||(r=new ft(we),this.Je=this.Je.insert(e,r)),r}It(e){let r=this.He.get(e);return r||(r=new ft(we),this.He=this.He.insert(e,r)),r}rt(e){const r=this.ot(e)!==null;return r||Z("WatchChangeAggregator","Detected inactive target",e),r}ot(e){const r=this.ze.get(e);return r&&r.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new qv),this.Ge.getRemoteKeysForTarget(e).forEach(r=>{this.et(e,r,null)})}Et(e,r){return this.Ge.getRemoteKeysForTarget(e).has(r)}}function Xl(){return new Ke(ne.comparator)}function Gv(){return new Ke(ne.comparator)}const Yk=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),Jk=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),Xk=(()=>({and:"AND",or:"OR"}))();class Zk{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function hm(t,e){return t.useProto3Json||pd(e)?e:{value:e}}function pu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Lb(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function eA(t,e){return pu(t,e.toTimestamp())}function Kr(t){return Se(!!t,49232),fe.fromTimestamp(function(r){const n=ps(r);return new Oe(n.seconds,n.nanos)}(t))}function e0(t,e){return fm(t,e).canonicalString()}function fm(t,e){const r=function(s){return new Re(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function Vb(t){const e=Re.fromString(t);return Se(Bb(e),10190,{key:e.toString()}),e}function mm(t,e){return e0(t.databaseId,e.path)}function Uh(t,e){const r=Vb(e);if(r.get(1)!==t.databaseId.projectId)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Q(F.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new ne(Fb(r))}function Ob(t,e){return e0(t.databaseId,e)}function tA(t){const e=Vb(t);return e.length===4?Re.emptyPath():Fb(e)}function pm(t){return new Re(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Fb(t){return Se(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Kv(t,e,r){return{name:mm(t,e),fields:r.value.mapValue.fields}}function rA(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:ce(39313,{state:d})}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,h){return d.useProto3Json?(Se(h===void 0||typeof h=="string",58123),jt.fromBase64String(h||"")):(Se(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),jt.fromUint8Array(h||new Uint8Array))}(t,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(d){const h=d.code===void 0?F.UNKNOWN:Rb(d.code);return new Q(h,d.message||"")}(a);r=new Mb(n,s,i,l||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=Uh(t,n.document.name),i=Kr(n.document.updateTime),a=n.document.createTime?Kr(n.document.createTime):fe.min(),l=new qt({mapValue:{fields:n.document.fields}}),u=Dt.newFoundDocument(s,i,a,l),d=n.targetIds||[],h=n.removedTargetIds||[];r=new yc(d,h,u.key,u)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=Uh(t,n.document),i=n.readTime?Kr(n.readTime):fe.min(),a=Dt.newNoDocument(s,i),l=n.removedTargetIds||[];r=new yc([],l,a.key,a)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=Uh(t,n.document),i=n.removedTargetIds||[];r=new yc([],i,s,null)}else{if(!("filter"in e))return ce(11601,{Vt:e});{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,a=new Hk(s,i),l=n.targetId;r=new Db(l,a)}}return r}function nA(t,e){let r;if(e instanceof ll)r={update:Kv(t,e.key,e.value)};else if(e instanceof Jp)r={delete:mm(t,e.key)};else if(e instanceof Ss)r={update:Kv(t,e.key,e.data),updateMask:hA(e.fieldMask)};else{if(!(e instanceof Bk))return ce(16599,{dt:e.type});r={verify:mm(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,a){const l=a.transform;if(l instanceof Ka)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Qa)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ya)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Ja)return{fieldPath:a.field.canonicalString(),increment:l.Ae};throw ce(20930,{transform:a.transform})}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:eA(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:ce(27497)}(t,e.precondition)),r}function sA(t,e){return t&&t.length>0?(Se(e!==void 0,14353),t.map(r=>function(s,i){let a=s.updateTime?Kr(s.updateTime):Kr(i);return a.isEqual(fe.min())&&(a=Kr(i)),new Fk(a,s.transformResults||[])}(r,e))):[]}function iA(t,e){return{documents:[Ob(t,e.path)]}}function oA(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=Ob(t,s);const i=function(d){if(d.length!==0)return zb(Rr.create(d,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const a=function(d){if(d.length!==0)return d.map(h=>function(m){return{field:pi(m.field),direction:cA(m.dir)}}(h))}(e.orderBy);a&&(r.structuredQuery.orderBy=a);const l=hm(t,e.limit);return l!==null&&(r.structuredQuery.limit=l),e.startAt&&(r.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{ft:r,parent:s}}function aA(t){let e=tA(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){Se(n===1,65062);const h=r.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let i=[];r.where&&(i=function(f){const m=Ub(f);return m instanceof Rr&&mb(m)?m.getFilters():[m]}(r.where));let a=[];r.orderBy&&(a=function(f){return f.map(m=>function(x){return new mu(gi(x.field),function(j){switch(j){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(r.orderBy));let l=null;r.limit&&(l=function(f){let m;return m=typeof f=="object"?f.value:f,pd(m)?null:m}(r.limit));let u=null;r.startAt&&(u=function(f){const m=!!f.before,v=f.values||[];return new fu(v,m)}(r.startAt));let d=null;return r.endAt&&(d=function(f){const m=!f.before,v=f.values||[];return new fu(v,m)}(r.endAt)),jk(e,s,a,i,l,"F",u,d)}function lA(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ce(28987,{purpose:s})}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function Ub(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=gi(r.unaryFilter.field);return lt.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=gi(r.unaryFilter.field);return lt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=gi(r.unaryFilter.field);return lt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=gi(r.unaryFilter.field);return lt.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ce(61313);default:return ce(60726)}}(t):t.fieldFilter!==void 0?function(r){return lt.create(gi(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ce(58110);default:return ce(50506)}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return Rr.create(r.compositeFilter.filters.map(n=>Ub(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ce(1026)}}(r.compositeFilter.op))}(t):ce(30097,{filter:t})}function cA(t){return Yk[t]}function uA(t){return Jk[t]}function dA(t){return Xk[t]}function pi(t){return{fieldPath:t.canonicalString()}}function gi(t){return _t.fromServerFormat(t.fieldPath)}function zb(t){return t instanceof lt?function(r){if(r.op==="=="){if(Mv(r.value))return{unaryFilter:{field:pi(r.field),op:"IS_NAN"}};if(Dv(r.value))return{unaryFilter:{field:pi(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(Mv(r.value))return{unaryFilter:{field:pi(r.field),op:"IS_NOT_NAN"}};if(Dv(r.value))return{unaryFilter:{field:pi(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:pi(r.field),op:uA(r.op),value:r.value}}}(t):t instanceof Rr?function(r){const n=r.getFilters().map(s=>zb(s));return n.length===1?n[0]:{compositeFilter:{op:dA(r.op),filters:n}}}(t):ce(54877,{filter:t})}function hA(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function Bb(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function $b(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,r,n,s,i=fe.min(),a=fe.min(),l=jt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new Hn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fA{constructor(e){this.yt=e}}function mA(t){const e=aA({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?dm(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pA{constructor(){this.Sn=new gA}addToCollectionParentIndex(e,r){return this.Sn.add(r),U.resolve()}getCollectionParents(e,r){return U.resolve(this.Sn.getEntries(r))}addFieldIndex(e,r){return U.resolve()}deleteFieldIndex(e,r){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,r){return U.resolve()}getDocumentsMatchingTarget(e,r){return U.resolve(null)}getIndexType(e,r){return U.resolve(0)}getFieldIndexes(e,r){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,r){return U.resolve(ms.min())}getMinOffsetFromCollectionGroup(e,r){return U.resolve(ms.min())}updateCollectionGroup(e,r,n){return U.resolve()}updateIndexEntries(e,r){return U.resolve()}}class gA{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new ft(Re.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new ft(Re.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Wb=41943040;class Wt{static withCacheSize(e){return new Wt(e,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,r,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=r,this.maximumSequenceNumbersToCollect=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wt.DEFAULT_COLLECTION_PERCENTILE=10,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wt.DEFAULT=new Wt(Wb,Wt.DEFAULT_COLLECTION_PERCENTILE,Wt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wt.DISABLED=new Wt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new io(0)}static ar(){return new io(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yv="LruGarbageCollector",yA=1048576;function Jv([t,e],[r,n]){const s=we(t,r);return s===0?we(e,n):s}class vA{constructor(e){this.Pr=e,this.buffer=new ft(Jv),this.Tr=0}Ir(){return++this.Tr}Er(e){const r=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(r);else{const n=this.buffer.last();Jv(r,n)<0&&(this.buffer=this.buffer.delete(n).add(r))}}get maxValue(){return this.buffer.last()[0]}}class xA{constructor(e,r,n){this.garbageCollector=e,this.asyncQueue=r,this.localStore=n,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Z(Yv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(r){wo(r)?Z(Yv,"Ignoring IndexedDB error during garbage collection: ",r):await xo(r)}await this.Ar(3e5)})}}class wA{constructor(e,r){this.Vr=e,this.params=r}calculateTargetCount(e,r){return this.Vr.dr(e).next(n=>Math.floor(r/100*n))}nthSequenceNumber(e,r){if(r===0)return U.resolve(md.ce);const n=new vA(r);return this.Vr.forEachTarget(e,s=>n.Er(s.sequenceNumber)).next(()=>this.Vr.mr(e,s=>n.Er(s))).next(()=>n.maxValue)}removeTargets(e,r,n){return this.Vr.removeTargets(e,r,n)}removeOrphanedDocuments(e,r){return this.Vr.removeOrphanedDocuments(e,r)}collect(e,r){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),U.resolve(Qv)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Qv):this.gr(e,r))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,r){let n,s,i,a,l,u,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),s=this.params.maximumSequenceNumbersToCollect):s=f,a=Date.now(),this.nthSequenceNumber(e,s))).next(f=>(n=f,l=Date.now(),this.removeTargets(e,n,r))).next(f=>(i=f,u=Date.now(),this.removeOrphanedDocuments(e,n))).next(f=>(d=Date.now(),fi()<=xe.DEBUG&&Z("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-h}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(u-l)+`ms
	Removed ${f} documents in `+(d-u)+`ms
Total Duration: ${d-h}ms`),U.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:f})))}}function bA(t,e){return new wA(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(){this.changes=new oi(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,Dt.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?U.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&ya(n.mutation,s,nr.empty(),Oe.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,be()).next(()=>n))}getLocalViewOfDocuments(e,r,n=be()){const s=Us();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let a=ta();return i.forEach((l,u)=>{a=a.insert(l,u.overlayedDocument)}),a}))}getOverlayedDocuments(e,r){const n=Us();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,be()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((a,l)=>{r.set(a,l)})})}computeViews(e,r,n,s){let i=yn();const a=ga(),l=function(){return ga()}();return r.forEach((u,d)=>{const h=n.get(d.key);s.has(d.key)&&(h===void 0||h.mutation instanceof Ss)?i=i.insert(d.key,d):h!==void 0?(a.set(d.key,h.mutation.getFieldMask()),ya(h.mutation,d,h.mutation.getFieldMask(),Oe.now())):a.set(d.key,nr.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,h)=>a.set(d,h)),r.forEach((d,h)=>l.set(d,new NA(h,a.get(d)??null))),l))}recalculateAndSaveOverlays(e,r){const n=ga();let s=new Ke((a,l)=>a-l),i=be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(a=>{for(const l of a)l.keys().forEach(u=>{const d=r.get(u);if(d===null)return;let h=n.get(u)||nr.empty();h=l.applyToLocalView(d,h),n.set(u,h);const f=(s.get(l.batchId)||be()).add(u);s=s.insert(l.batchId,f)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,h=u.value,f=Nb();h.forEach(m=>{if(!i.has(m)){const v=Ab(r.get(m),n.get(m));v!==null&&f.set(m,v),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,f))}return U.waitFor(a)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return Tk(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):vb(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):U.resolve(Us());let l=Wa,u=i;return a.next(d=>U.forEach(d,(h,f)=>(l<f.largestBatchId&&(l=f.largestBatchId),i.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(m=>{u=u.insert(h,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,be())).next(h=>({batchId:l,changes:_b(h)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new ne(r)).next(n=>{let s=ta();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let a=ta();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,u=>{const d=function(f,m){return new al(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(r,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,n,s).next(h=>{h.forEach((f,m)=>{a=a.insert(f,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(a=>{i.forEach((u,d)=>{const h=d.getKey();a.get(h)===null&&(a=a.insert(h,Dt.newInvalidDocument(h)))});let l=ta();return a.forEach((u,d)=>{const h=i.get(u);h!==void 0&&ya(h.mutation,d,nr.empty(),Oe.now()),vd(r,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SA{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,r){return U.resolve(this.Nr.get(r))}saveBundleMetadata(e,r){return this.Nr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Kr(s.createTime)}}(r)),U.resolve()}getNamedQuery(e,r){return U.resolve(this.Br.get(r))}saveNamedQuery(e,r){return this.Br.set(r.name,function(s){return{name:s.name,query:mA(s.bundledQuery),readTime:Kr(s.readTime)}}(r)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(){this.overlays=new Ke(ne.comparator),this.Lr=new Map}getOverlay(e,r){return U.resolve(this.overlays.get(r))}getOverlays(e,r){const n=Us();return U.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.bt(e,r,i)}),U.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Lr.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Lr.delete(n)),U.resolve()}getOverlaysForCollection(e,r,n){const s=Us(),i=r.length+1,a=new ne(r.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!r.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>n&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Ke((d,h)=>d-h);const a=this.overlays.getIterator();for(;a.hasNext();){const d=a.getNext().value;if(d.getKey().getCollectionGroup()===r&&d.largestBatchId>n){let h=i.get(d.largestBatchId);h===null&&(h=Us(),i=i.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const l=Us(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,h)=>l.set(d,h)),!(l.size()>=s)););return U.resolve(l)}bt(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const a=this.Lr.get(s.largestBatchId).delete(n.key);this.Lr.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(n.key,new Wk(r,n));let i=this.Lr.get(r);i===void 0&&(i=be(),this.Lr.set(r,i)),this.Lr.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(){this.sessionToken=jt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0{constructor(){this.kr=new ft(gt.Kr),this.qr=new ft(gt.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,r){const n=new gt(e,r);this.kr=this.kr.add(n),this.qr=this.qr.add(n)}$r(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Wr(new gt(e,r))}Qr(e,r){e.forEach(n=>this.removeReference(n,r))}Gr(e){const r=new ne(new Re([])),n=new gt(r,e),s=new gt(r,e+1),i=[];return this.qr.forEachInRange([n,s],a=>{this.Wr(a),i.push(a.key)}),i}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const r=new ne(new Re([])),n=new gt(r,e),s=new gt(r,e+1);let i=be();return this.qr.forEachInRange([n,s],a=>{i=i.add(a.key)}),i}containsKey(e){const r=new gt(e,0),n=this.kr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class gt{constructor(e,r){this.key=e,this.Hr=r}static Kr(e,r){return ne.comparator(e.key,r.key)||we(e.Hr,r.Hr)}static Ur(e,r){return we(e.Hr,r.Hr)||ne.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IA{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Yn=1,this.Jr=new ft(gt.Kr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new $k(i,r,n,s);this.mutationQueue.push(a);for(const l of s)this.Jr=this.Jr.add(new gt(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(a)}lookupMutationBatch(e,r){return U.resolve(this.Zr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.Xr(n),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?Wp:this.Yn-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new gt(r,0),s=new gt(r,Number.POSITIVE_INFINITY),i=[];return this.Jr.forEachInRange([n,s],a=>{const l=this.Zr(a.Hr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new ft(we);return r.forEach(s=>{const i=new gt(s,0),a=new gt(s,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([i,a],l=>{n=n.add(l.Hr)})}),U.resolve(this.Yr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;ne.isDocumentKey(i)||(i=i.child(""));const a=new gt(new ne(i),0);let l=new ft(we);return this.Jr.forEachWhile(u=>{const d=u.key.path;return!!n.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.Hr)),!0)},a),U.resolve(this.Yr(l))}Yr(e){const r=[];return e.forEach(n=>{const s=this.Zr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){Se(this.ei(r.batchId,"removed")===0,55003),this.mutationQueue.shift();let n=this.Jr;return U.forEach(r.mutations,s=>{const i=new gt(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Jr=n})}nr(e){}containsKey(e,r){const n=new gt(r,0),s=this.Jr.firstAfterOrEqual(n);return U.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}ei(e,r){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const r=this.Xr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CA{constructor(e){this.ti=e,this.docs=function(){return new Ke(ne.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,a=this.ti(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return U.resolve(n?n.document.mutableCopy():Dt.newInvalidDocument(r))}getEntries(e,r){let n=yn();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():Dt.newInvalidDocument(s))}),U.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=yn();const a=r.path,l=new ne(a.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:h}}=u.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||sk(nk(h),n)<=0||(s.has(h.key)||vd(r,h))&&(i=i.insert(h.key,h.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,r,n,s){ce(9500)}ni(e,r){return U.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new kA(this)}getSize(e){return U.resolve(this.size)}}class kA extends _A{constructor(e){super(),this.Mr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.Mr.addEntry(e,s)):this.Mr.removeEntry(n)}),U.waitFor(r)}getFromCache(e,r){return this.Mr.getEntry(e,r)}getAllFromCache(e,r){return this.Mr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AA{constructor(e){this.persistence=e,this.ri=new oi(r=>Gp(r),Kp),this.lastRemoteSnapshotVersion=fe.min(),this.highestTargetId=0,this.ii=0,this.si=new t0,this.targetCount=0,this.oi=io._r()}forEachTarget(e,r){return this.ri.forEach((n,s)=>r(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.ii&&(this.ii=r),U.resolve()}lr(e){this.ri.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.oi=new io(r),this.highestTargetId=r),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,r){return this.lr(r),this.targetCount+=1,U.resolve()}updateTargetData(e,r){return this.lr(r),U.resolve()}removeTargetData(e,r){return this.ri.delete(r.target),this.si.Gr(r.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.ri.forEach((a,l)=>{l.sequenceNumber<=r&&n.get(l.targetId)===null&&(this.ri.delete(a),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,r){const n=this.ri.get(r)||null;return U.resolve(n)}addMatchingKeys(e,r,n){return this.si.$r(r,n),U.resolve()}removeMatchingKeys(e,r,n){this.si.Qr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(a=>{i.push(s.markPotentiallyOrphaned(e,a))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.si.Gr(r),U.resolve()}getMatchingKeysForTargetId(e,r){const n=this.si.jr(r);return U.resolve(n)}containsKey(e,r){return U.resolve(this.si.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hb{constructor(e,r){this._i={},this.overlays={},this.ai=new md(0),this.ui=!1,this.ui=!0,this.ci=new TA,this.referenceDelegate=e(this),this.li=new AA(this),this.indexManager=new pA,this.remoteDocumentCache=function(s){return new CA(s)}(n=>this.referenceDelegate.hi(n)),this.serializer=new fA(r),this.Pi=new SA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new jA,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this._i[e.toKey()];return n||(n=new IA(r,this.referenceDelegate),this._i[e.toKey()]=n),n}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,r,n){Z("MemoryPersistence","Starting transaction:",e);const s=new PA(this.ai.next());return this.referenceDelegate.Ti(),n(s).next(i=>this.referenceDelegate.Ii(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Ei(e,r){return U.or(Object.values(this._i).map(n=>()=>n.containsKey(e,r)))}}class PA extends ok{constructor(e){super(),this.currentSequenceNumber=e}}class r0{constructor(e){this.persistence=e,this.Ri=new t0,this.Ai=null}static Vi(e){return new r0(e)}get di(){if(this.Ai)return this.Ai;throw ce(60996)}addReference(e,r,n){return this.Ri.addReference(n,r),this.di.delete(n.toString()),U.resolve()}removeReference(e,r,n){return this.Ri.removeReference(n,r),this.di.add(n.toString()),U.resolve()}markPotentiallyOrphaned(e,r){return this.di.add(r.toString()),U.resolve()}removeTarget(e,r){this.Ri.Gr(r.targetId).forEach(s=>this.di.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}Ti(){this.Ai=new Set}Ii(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.di,n=>{const s=ne.fromPath(n);return this.mi(e,s).next(i=>{i||r.removeEntry(s,fe.min())})}).next(()=>(this.Ai=null,r.apply(e)))}updateLimboDocument(e,r){return this.mi(e,r).next(n=>{n?this.di.delete(r.toString()):this.di.add(r.toString())})}hi(e){return 0}mi(e,r){return U.or([()=>U.resolve(this.Ri.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Ei(e,r)])}}class gu{constructor(e,r){this.persistence=e,this.fi=new oi(n=>ck(n.path),(n,s)=>n.isEqual(s)),this.garbageCollector=bA(this,r)}static Vi(e,r){return new gu(e,r)}Ti(){}Ii(e){return U.resolve()}forEachTarget(e,r){return this.persistence.getTargetCache().forEachTarget(e,r)}dr(e){const r=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(n=>r.next(s=>n+s))}pr(e){let r=0;return this.mr(e,n=>{r++}).next(()=>r)}mr(e,r){return U.forEach(this.fi,(n,s)=>this.wr(e,n,s).next(i=>i?U.resolve():r(s)))}removeTargets(e,r,n){return this.persistence.getTargetCache().removeTargets(e,r,n)}removeOrphanedDocuments(e,r){let n=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.ni(e,a=>this.wr(e,a,r).next(l=>{l||(n++,i.removeEntry(a,fe.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}removeTarget(e,r){const n=r.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,r,n){return this.fi.set(n,e.currentSequenceNumber),U.resolve()}removeReference(e,r,n){return this.fi.set(n,e.currentSequenceNumber),U.resolve()}updateLimboDocument(e,r){return this.fi.set(r,e.currentSequenceNumber),U.resolve()}hi(e){let r=e.key.toString().length;return e.isFoundDocument()&&(r+=mc(e.data.value)),r}wr(e,r,n){return U.or([()=>this.persistence.Ei(e,r),()=>this.persistence.getTargetCache().containsKey(e,r),()=>{const s=this.fi.get(r);return U.resolve(s!==void 0&&s>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.Ts=n,this.Is=s}static Es(e,r){let n=be(),s=be();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new n0(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return jI()?8:ak(Lt())>0?6:4}()}initialize(e,r){this.fs=e,this.indexManager=r,this.Rs=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.gs(e,r).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.ps(e,r,s,n).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new RA;return this.ys(e,r,a).next(l=>{if(i.result=l,this.As)return this.ws(e,r,a,l.size)})}).next(()=>i.result)}ws(e,r,n,s){return n.documentReadCount<this.Vs?(fi()<=xe.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",mi(r),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),U.resolve()):(fi()<=xe.DEBUG&&Z("QueryEngine","Query:",mi(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.ds*s?(fi()<=xe.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",mi(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Gr(r))):U.resolve())}gs(e,r){if(Fv(r))return U.resolve(null);let n=Gr(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=dm(r,null,"F"),n=Gr(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const a=be(...i);return this.fs.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,n).next(u=>{const d=this.bs(r,l);return this.Ss(r,d,a,u.readTime)?this.gs(e,dm(r,null,"F")):this.Ds(e,d,r,u)}))})))}ps(e,r,n,s){return Fv(r)||s.isEqual(fe.min())?U.resolve(null):this.fs.getDocuments(e,n).next(i=>{const a=this.bs(r,i);return this.Ss(r,a,n,s)?U.resolve(null):(fi()<=xe.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),mi(r)),this.Ds(e,a,r,rk(s,Wa)).next(l=>l))})}bs(e,r){let n=new ft(wb(e));return r.forEach((s,i)=>{vd(e,i)&&(n=n.add(i))}),n}Ss(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}ys(e,r,n){return fi()<=xe.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",mi(r)),this.fs.getDocumentsMatchingQuery(e,r,ms.min(),n)}Ds(e,r,n,s){return this.fs.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0="LocalStore",MA=3e8;class LA{constructor(e,r,n,s){this.persistence=e,this.Cs=r,this.serializer=s,this.vs=new Ke(we),this.Fs=new oi(i=>Gp(i),Kp),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(n)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new EA(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.vs))}}function VA(t,e,r,n){return new LA(t,e,r,n)}async function qb(t,e){const r=me(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.Os(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const a=[],l=[];let u=be();for(const d of s){a.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}for(const d of i){l.push(d.batchId);for(const h of d.mutations)u=u.add(h.key)}return r.localDocuments.getDocuments(n,u).next(d=>({Ns:d,removedBatchIds:a,addedBatchIds:l}))})})}function OA(t,e){const r=me(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,h){const f=d.batch,m=f.keys();let v=U.resolve();return m.forEach(x=>{v=v.next(()=>h.getEntry(u,x)).next(y=>{const j=d.docVersions.get(x);Se(j!==null,48541),y.version.compareTo(j)<0&&(f.applyToRemoteDocument(y,d),y.isValidDocument()&&(y.setReadTime(d.commitVersion),h.addEntry(y)))})}),v.next(()=>l.mutationQueue.removeMutationBatch(u,f))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(l){let u=be();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function Gb(t){const e=me(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.li.getLastRemoteSnapshotVersion(r))}function FA(t,e){const r=me(t),n=e.snapshotVersion;let s=r.vs;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=r.xs.newChangeBuffer({trackRemovals:!0});s=r.vs;const l=[];e.targetChanges.forEach((h,f)=>{const m=s.get(f);if(!m)return;l.push(r.li.removeMatchingKeys(i,h.removedDocuments,f).next(()=>r.li.addMatchingKeys(i,h.addedDocuments,f)));let v=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(f)!==null?v=v.withResumeToken(jt.EMPTY_BYTE_STRING,fe.min()).withLastLimboFreeSnapshotVersion(fe.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,n)),s=s.insert(f,v),function(y,j,N){return y.resumeToken.approximateByteSize()===0||j.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=MA?!0:N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0}(m,v,h)&&l.push(r.li.updateTargetData(i,v))});let u=yn(),d=be();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(r.persistence.referenceDelegate.updateLimboDocument(i,h))}),l.push(UA(i,a,e.documentUpdates).next(h=>{u=h.Bs,d=h.Ls})),!n.isEqual(fe.min())){const h=r.li.getLastRemoteSnapshotVersion(i).next(f=>r.li.setTargetsMetadata(i,i.currentSequenceNumber,n));l.push(h)}return U.waitFor(l).next(()=>a.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(r.vs=s,i))}function UA(t,e,r){let n=be(),s=be();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let a=yn();return r.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(fe.min())?(e.removeEntry(l,u.readTime),a=a.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),a=a.insert(l,u)):Z(s0,"Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Bs:a,Ls:s}})}function zA(t,e){const r=me(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=Wp),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function BA(t,e){const r=me(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.li.getTargetData(n,e).next(i=>i?(s=i,U.resolve(s)):r.li.allocateTargetId(n).next(a=>(s=new Hn(e,a,"TargetPurposeListen",n.currentSequenceNumber),r.li.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.vs.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.vs=r.vs.insert(n.targetId,n),r.Fs.set(e,n.targetId)),n})}async function gm(t,e,r){const n=me(t),s=n.vs.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,a=>n.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!wo(a))throw a;Z(s0,`Failed to update sequence numbers for target ${e}: ${a}`)}n.vs=n.vs.remove(e),n.Fs.delete(s.target)}function Xv(t,e,r){const n=me(t);let s=fe.min(),i=be();return n.persistence.runTransaction("Execute query","readwrite",a=>function(u,d,h){const f=me(u),m=f.Fs.get(h);return m!==void 0?U.resolve(f.vs.get(m)):f.li.getTargetData(d,h)}(n,a,Gr(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,n.li.getMatchingKeysForTargetId(a,l.targetId).next(u=>{i=u})}).next(()=>n.Cs.getDocumentsMatchingQuery(a,e,r?s:fe.min(),r?i:be())).next(l=>($A(n,Ck(e),l),{documents:l,ks:i})))}function $A(t,e,r){let n=t.Ms.get(e)||fe.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.Ms.set(e,n)}class Zv{constructor(){this.activeTargetIds=Mk()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class WA{constructor(){this.vo=new Zv,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,r,n){this.Fo[e]=r}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Zv,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ex="ConnectivityMonitor";class tx{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Z(ex,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Z(ex,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zl=null;function ym(){return Zl===null?Zl=function(){return 268435456+Math.round(2147483648*Math.random())}():Zl++,"0x"+Zl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh="RestConnection",qA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class GA{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const r=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.qo=r+"://"+e.host,this.Uo=`projects/${n}/databases/${s}`,this.$o=this.databaseId.database===du?`project_id=${n}`:`project_id=${n}&database_id=${s}`}Wo(e,r,n,s,i){const a=ym(),l=this.Qo(e,r.toUriEncodedString());Z(zh,`Sending RPC '${e}' ${a}:`,l,n);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,s,i);const{host:d}=new URL(l),h=go(d);return this.zo(e,l,u,n,h).then(f=>(Z(zh,`Received RPC '${e}' ${a}: `,f),f),f=>{throw to(zh,`RPC '${e}' ${a} failed with error: `,f,"url: ",l,"request:",n),f})}jo(e,r,n,s,i,a){return this.Wo(e,r,n,s,i)}Go(e,r,n){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vo}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,i)=>e[i]=s),n&&n.headers.forEach((s,i)=>e[i]=s)}Qo(e,r){const n=qA[e];let s=`${this.qo}/v1/${r}:${n}`;return this.databaseInfo.apiKey&&(s=`${s}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),s}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kt="WebChannelConnection",Ko=(t,e,r)=>{t.listen(e,n=>{try{r(n)}catch(s){setTimeout(()=>{throw s},0)}})};class Fi extends GA{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Fi.c_){const e=Q2();Ko(e,K2.STAT_EVENT,r=>{r.stat===sm.PROXY?Z(kt,"STAT_EVENT: detected buffering proxy"):r.stat===sm.NOPROXY&&Z(kt,"STAT_EVENT: detected no buffering proxy")}),Fi.c_=!0}}zo(e,r,n,s,i){const a=ym();return new Promise((l,u)=>{const d=new q2;d.setWithCredentials(!0),d.listenOnce(G2.COMPLETE,()=>{try{switch(d.getLastErrorCode()){case fc.NO_ERROR:const f=d.getResponseJson();Z(kt,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(f)),l(f);break;case fc.TIMEOUT:Z(kt,`RPC '${e}' ${a} timed out`),u(new Q(F.DEADLINE_EXCEEDED,"Request time out"));break;case fc.HTTP_ERROR:const m=d.getStatus();if(Z(kt,`RPC '${e}' ${a} failed with status:`,m,"response text:",d.getResponseText()),m>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const x=v==null?void 0:v.error;if(x&&x.status&&x.message){const y=function(N){const _=N.toLowerCase().replace(/_/g,"-");return Object.values(F).indexOf(_)>=0?_:F.UNKNOWN}(x.status);u(new Q(y,x.message))}else u(new Q(F.UNKNOWN,"Server responded with status "+d.getStatus()))}else u(new Q(F.UNAVAILABLE,"Connection failed."));break;default:ce(9055,{l_:e,streamId:a,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Z(kt,`RPC '${e}' ${a} completed.`)}});const h=JSON.stringify(s);Z(kt,`RPC '${e}' ${a} sending request:`,s),d.send(r,"POST",h,n,15)})}T_(e,r,n){const s=ym(),i=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const d=i.join("");Z(kt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const h=a.createWebChannel(d,l);this.I_(h);let f=!1,m=!1;const v=new KA({Ho:x=>{m?Z(kt,`Not sending because RPC '${e}' stream ${s} is closed:`,x):(f||(Z(kt,`Opening RPC '${e}' stream ${s} transport.`),h.open(),f=!0),Z(kt,`RPC '${e}' stream ${s} sending:`,x),h.send(x))},Jo:()=>h.close()});return Ko(h,ea.EventType.OPEN,()=>{m||(Z(kt,`RPC '${e}' stream ${s} transport opened.`),v.i_())}),Ko(h,ea.EventType.CLOSE,()=>{m||(m=!0,Z(kt,`RPC '${e}' stream ${s} transport closed`),v.o_(),this.E_(h))}),Ko(h,ea.EventType.ERROR,x=>{m||(m=!0,to(kt,`RPC '${e}' stream ${s} transport errored. Name:`,x.name,"Message:",x.message),v.o_(new Q(F.UNAVAILABLE,"The operation could not be completed")))}),Ko(h,ea.EventType.MESSAGE,x=>{var y;if(!m){const j=x.data[0];Se(!!j,16349);const N=j,_=(N==null?void 0:N.error)||((y=N[0])==null?void 0:y.error);if(_){Z(kt,`RPC '${e}' stream ${s} received error:`,_);const S=_.status;let A=function(T){const b=it[T];if(b!==void 0)return Rb(b)}(S),L=_.message;A===void 0&&(A=F.INTERNAL,L="Unknown error status: "+S+" with message "+_.message),m=!0,v.o_(new Q(A,L)),h.close()}else Z(kt,`RPC '${e}' stream ${s} received:`,j),v.__(j)}}),Fi.u_(),setTimeout(()=>{v.s_()},0),v}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(r=>r===e)}Go(e,r,n){super.Go(e,r,n),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return Y2()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t){return new Fi(t)}function Bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _d(t){return new Zk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Fi.c_=!1;class Kb{constructor(e,r,n=1e3,s=1.5,i=6e4){this.Ci=e,this.timerId=r,this.R_=n,this.A_=s,this.V_=i,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const r=Math.floor(this.d_+this.y_()),n=Math.max(0,Date.now()-this.f_),s=Math.max(0,r-n);s>0&&Z("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.d_} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,s,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rx="PersistentStream";class Qb{constructor(e,r,n,s,i,a,l,u){this.Ci=e,this.b_=n,this.S_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Kb(e,r)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,r){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():r&&r.code===F.RESOURCE_EXHAUSTED?(gn(r.toString()),gn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):r&&r.code===F.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(r)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),r=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.D_===r&&this.G_(n,s)},n=>{e(()=>{const s=new Q(F.UNKNOWN,"Fetching auth token failed: "+n.message);return this.z_(s)})})}G_(e,r){const n=this.Q_(this.D_);this.stream=this.j_(e,r),this.stream.Zo(()=>{n(()=>this.listener.Zo())}),this.stream.Yo(()=>{n(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(s=>{n(()=>this.z_(s))}),this.stream.onMessage(s=>{n(()=>++this.F_==1?this.H_(s):this.onNext(s))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return Z(rx,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return r=>{this.Ci.enqueueAndForget(()=>this.D_===e?r():(Z(rx,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class YA extends Qb{constructor(e,r,n,s,i,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}j_(e,r){return this.connection.T_("Listen",e,r)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const r=rA(this.serializer,e),n=function(i){if(!("targetChange"in i))return fe.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?fe.min():a.readTime?Kr(a.readTime):fe.min()}(e);return this.listener.J_(r,n)}Z_(e){const r={};r.database=pm(this.serializer),r.addTarget=function(i,a){let l;const u=a.target;if(l=cm(u)?{documents:iA(i,u)}:{query:oA(i,u).ft},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Lb(i,a.resumeToken);const d=hm(i,a.expectedCount);d!==null&&(l.expectedCount=d)}else if(a.snapshotVersion.compareTo(fe.min())>0){l.readTime=pu(i,a.snapshotVersion.toTimestamp());const d=hm(i,a.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const n=lA(this.serializer,e);n&&(r.labels=n),this.K_(r)}X_(e){const r={};r.database=pm(this.serializer),r.removeTarget=e,this.K_(r)}}class JA extends Qb{constructor(e,r,n,s,i,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,a),this.serializer=i}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,r){return this.connection.T_("Write",e,r)}H_(e){return Se(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Se(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Se(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const r=sA(e.writeResults,e.commitTime),n=Kr(e.commitTime);return this.listener.na(n,r)}ra(){const e={};e.database=pm(this.serializer),this.K_(e)}ea(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>nA(this.serializer,n))};this.K_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{}class ZA extends XA{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,r,n,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Wo(e,fm(r,n),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Q(F.UNKNOWN,i.toString())})}jo(e,r,n,s,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.jo(e,fm(r,n),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===F.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Q(F.UNKNOWN,a.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function eP(t,e,r,n){return new ZA(t,e,r,n)}class tP{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(gn(r),this.aa=!1):Z("OnlineStateTracker",r)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ti="RemoteStore";class rP{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=i,this.Aa.Mo(a=>{n.enqueueAndForget(async()=>{ai(this)&&(Z(ti,"Restarting streams for network reachability change."),await async function(u){const d=me(u);d.Ea.add(4),await ul(d),d.Va.set("Unknown"),d.Ea.delete(4),await Nd(d)}(this))})}),this.Va=new tP(n,s)}}async function Nd(t){if(ai(t))for(const e of t.Ra)await e(!0)}async function ul(t){for(const e of t.Ra)await e(!1)}function Yb(t,e){const r=me(t);r.Ia.has(e.targetId)||(r.Ia.set(e.targetId,e),l0(r)?a0(r):bo(r).O_()&&o0(r,e))}function i0(t,e){const r=me(t),n=bo(r);r.Ia.delete(e),n.O_()&&Jb(r,e),r.Ia.size===0&&(n.O_()?n.L_():ai(r)&&r.Va.set("Unknown"))}function o0(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(fe.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}bo(t).Z_(e)}function Jb(t,e){t.da.$e(e),bo(t).X_(e)}function a0(t){t.da=new Qk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),bo(t).start(),t.Va.ua()}function l0(t){return ai(t)&&!bo(t).x_()&&t.Ia.size>0}function ai(t){return me(t).Ea.size===0}function Xb(t){t.da=void 0}async function nP(t){t.Va.set("Online")}async function sP(t){t.Ia.forEach((e,r)=>{o0(t,e)})}async function iP(t,e){Xb(t),l0(t)?(t.Va.ha(e),a0(t)):t.Va.set("Unknown")}async function oP(t,e,r){if(t.Va.set("Online"),e instanceof Mb&&e.state===2&&e.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s.Ia.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s.Ia.delete(l),s.da.removeTarget(l))}(t,e)}catch(n){Z(ti,"Failed to remove targets %s: %s ",e.targetIds.join(","),n),await yu(t,n)}else if(e instanceof yc?t.da.Xe(e):e instanceof Db?t.da.st(e):t.da.tt(e),!r.isEqual(fe.min()))try{const n=await Gb(t.localStore);r.compareTo(n)>=0&&await function(i,a){const l=i.da.Tt(a);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const h=i.Ia.get(d);h&&i.Ia.set(d,h.withResumeToken(u.resumeToken,a))}}),l.targetMismatches.forEach((u,d)=>{const h=i.Ia.get(u);if(!h)return;i.Ia.set(u,h.withResumeToken(jt.EMPTY_BYTE_STRING,h.snapshotVersion)),Jb(i,u);const f=new Hn(h.target,u,d,h.sequenceNumber);o0(i,f)}),i.remoteSyncer.applyRemoteEvent(l)}(t,r)}catch(n){Z(ti,"Failed to raise snapshot:",n),await yu(t,n)}}async function yu(t,e,r){if(!wo(e))throw e;t.Ea.add(1),await ul(t),t.Va.set("Offline"),r||(r=()=>Gb(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z(ti,"Retrying IndexedDB access"),await r(),t.Ea.delete(1),await Nd(t)})}function Zb(t,e){return e().catch(r=>yu(t,r,e))}async function Ed(t){const e=me(t),r=vs(e);let n=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Wp;for(;aP(e);)try{const s=await zA(e.localStore,n);if(s===null){e.Ta.length===0&&r.L_();break}n=s.batchId,lP(e,s)}catch(s){await yu(e,s)}e_(e)&&t_(e)}function aP(t){return ai(t)&&t.Ta.length<10}function lP(t,e){t.Ta.push(e);const r=vs(t);r.O_()&&r.Y_&&r.ea(e.mutations)}function e_(t){return ai(t)&&!vs(t).x_()&&t.Ta.length>0}function t_(t){vs(t).start()}async function cP(t){vs(t).ra()}async function uP(t){const e=vs(t);for(const r of t.Ta)e.ea(r.mutations)}async function dP(t,e,r){const n=t.Ta.shift(),s=Xp.from(n,e,r);await Zb(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Ed(t)}async function hP(t,e){e&&vs(t).Y_&&await async function(n,s){if(function(a){return qk(a)&&a!==F.ABORTED}(s.code)){const i=n.Ta.shift();vs(n).B_(),await Zb(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Ed(n)}}(t,e),e_(t)&&t_(t)}async function nx(t,e){const r=me(t);r.asyncQueue.verifyOperationInProgress(),Z(ti,"RemoteStore received new credentials");const n=ai(r);r.Ea.add(3),await ul(r),n&&r.Va.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.Ea.delete(3),await Nd(r)}async function fP(t,e){const r=me(t);e?(r.Ea.delete(2),await Nd(r)):e||(r.Ea.add(2),await ul(r),r.Va.set("Unknown"))}function bo(t){return t.ma||(t.ma=function(r,n,s){const i=me(r);return i.sa(),new YA(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:nP.bind(null,t),Yo:sP.bind(null,t),t_:iP.bind(null,t),J_:oP.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),l0(t)?a0(t):t.Va.set("Unknown")):(await t.ma.stop(),Xb(t))})),t.ma}function vs(t){return t.fa||(t.fa=function(r,n,s){const i=me(r);return i.sa(),new JA(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:cP.bind(null,t),t_:hP.bind(null,t),ta:uP.bind(null,t),na:dP.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await Ed(t)):(await t.fa.stop(),t.Ta.length>0&&(Z(ti,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c0{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const a=Date.now()+n,l=new c0(e,r,a,s,i);return l.start(n),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Q(F.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function u0(t,e){if(gn("AsyncQueue",`${e}: ${t}`),wo(t))return new Q(F.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{static emptySet(e){return new Ui(e.comparator)}constructor(e){this.comparator=e?(r,n)=>e(r,n)||ne.comparator(r.key,n.key):(r,n)=>ne.comparator(r.key,n.key),this.keyedMap=ta(),this.sortedSet=new Ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Ui)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Ui;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(){this.ga=new Ke(ne.comparator)}track(e){const r=e.doc.key,n=this.ga.get(r);n?e.type!==0&&n.type===3?this.ga=this.ga.insert(r,e):e.type===3&&n.type!==1?this.ga=this.ga.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.ga=this.ga.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.ga=this.ga.remove(r):e.type===1&&n.type===2?this.ga=this.ga.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.ga=this.ga.insert(r,{type:2,doc:e.doc}):ce(63341,{Vt:e,pa:n}):this.ga=this.ga.insert(r,e)}ya(){const e=[];return this.ga.inorderTraversal((r,n)=>{e.push(n)}),e}}class oo{constructor(e,r,n,s,i,a,l,u,d){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,r,n,s,i){const a=[];return r.forEach(l=>{a.push({type:0,doc:l})}),new oo(e,r,Ui.emptySet(r),a,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&yd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mP{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class pP{constructor(){this.queries=ix(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(r,n){const s=me(r),i=s.queries;s.queries=ix(),i.forEach((a,l)=>{for(const u of l.ba)u.onError(n)})})(this,new Q(F.ABORTED,"Firestore shutting down"))}}function ix(){return new oi(t=>xb(t),yd)}async function r_(t,e){const r=me(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.Sa()&&e.Da()&&(n=2):(i=new mP,n=e.Da()?0:1);try{switch(n){case 0:i.wa=await r.onListen(s,!0);break;case 1:i.wa=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(a){const l=u0(a,`Initialization of query '${mi(e.query)}' failed`);return void e.onError(l)}r.queries.set(s,i),i.ba.push(e),e.va(r.onlineState),i.wa&&e.Fa(i.wa)&&d0(r)}async function n_(t,e){const r=me(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const a=i.ba.indexOf(e);a>=0&&(i.ba.splice(a,1),i.ba.length===0?s=e.Da()?0:1:!i.Sa()&&e.Da()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function gP(t,e){const r=me(t);let n=!1;for(const s of e){const i=s.query,a=r.queries.get(i);if(a){for(const l of a.ba)l.Fa(s)&&(n=!0);a.wa=s}}n&&d0(r)}function yP(t,e,r){const n=me(t),s=n.queries.get(e);if(s)for(const i of s.ba)i.onError(r);n.queries.delete(e)}function d0(t){t.Ca.forEach(e=>{e.next()})}var vm,ox;(ox=vm||(vm={})).Ma="default",ox.Cache="cache";class s_{constructor(e,r,n){this.query=e,this.xa=r,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new oo(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),r=!0):this.La(e,this.onlineState)&&(this.ka(e),r=!0),this.Na=e,r}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let r=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),r=!0),r}La(e,r){if(!e.fromCache||!this.Da())return!0;const n=r!=="Offline";return(!this.options.Ka||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const r=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}ka(e){e=oo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==vm.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e){this.key=e}}class o_{constructor(e){this.key=e}}class vP{constructor(e,r){this.query=e,this.Za=r,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=be(),this.mutatedKeys=be(),this.eu=wb(e),this.tu=new Ui(this.eu)}get nu(){return this.Za}ru(e,r){const n=r?r.iu:new sx,s=r?r.tu:this.tu;let i=r?r.mutatedKeys:this.mutatedKeys,a=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,f)=>{const m=s.get(h),v=vd(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),y=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let j=!1;m&&v?m.data.isEqual(v.data)?x!==y&&(n.track({type:3,doc:v}),j=!0):this.su(m,v)||(n.track({type:2,doc:v}),j=!0,(u&&this.eu(v,u)>0||d&&this.eu(v,d)<0)&&(l=!0)):!m&&v?(n.track({type:0,doc:v}),j=!0):m&&!v&&(n.track({type:1,doc:m}),j=!0,(u||d)&&(l=!0)),j&&(v?(a=a.add(v),i=y?i.add(h):i.delete(h)):(a=a.delete(h),i=i.delete(h)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const h=this.query.limitType==="F"?a.last():a.first();a=a.delete(h.key),i=i.delete(h.key),n.track({type:1,doc:h})}return{tu:a,iu:n,Ss:l,mutatedKeys:i}}su(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const a=e.iu.ya();a.sort((h,f)=>function(v,x){const y=j=>{switch(j){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ce(20277,{Vt:j})}};return y(v)-y(x)}(h.type,f.type)||this.eu(h.doc,f.doc)),this.ou(n),s=s??!1;const l=r&&!s?this._u():[],u=this.Ya.size===0&&this.current&&!s?1:0,d=u!==this.Xa;return this.Xa=u,a.length!==0||d?{snapshot:new oo(this.query,e.tu,i,a,e.mutatedKeys,u===0,d,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new sx,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(r=>this.Za=this.Za.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Za=this.Za.delete(r)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=be(),this.tu.forEach(n=>{this.uu(n.key)&&(this.Ya=this.Ya.add(n.key))});const r=[];return e.forEach(n=>{this.Ya.has(n)||r.push(new o_(n))}),this.Ya.forEach(n=>{e.has(n)||r.push(new i_(n))}),r}cu(e){this.Za=e.ks,this.Ya=be();const r=this.ru(e.documents);return this.applyChanges(r,!0)}lu(){return oo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const h0="SyncEngine";class xP{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class wP{constructor(e){this.key=e,this.hu=!1}}class bP{constructor(e,r,n,s,i,a){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.Pu={},this.Tu=new oi(l=>xb(l),yd),this.Iu=new Map,this.Eu=new Set,this.Ru=new Ke(ne.comparator),this.Au=new Map,this.Vu=new t0,this.du={},this.mu=new Map,this.fu=io.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function _P(t,e,r=!0){const n=h_(t);let s;const i=n.Tu.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await a_(n,e,r,!0),s}async function NP(t,e){const r=h_(t);await a_(r,e,!0,!1)}async function a_(t,e,r,n){const s=await BA(t.localStore,Gr(e)),i=s.targetId,a=t.sharedClientState.addLocalQueryTarget(i,r);let l;return n&&(l=await EP(t,e,i,a==="current",s.resumeToken)),t.isPrimaryClient&&r&&Yb(t.remoteStore,s),l}async function EP(t,e,r,n,s){t.pu=(f,m,v)=>async function(y,j,N,_){let S=j.view.ru(N);S.Ss&&(S=await Xv(y.localStore,j.query,!1).then(({documents:T})=>j.view.ru(T,S)));const A=_&&_.targetChanges.get(j.targetId),L=_&&_.targetMismatches.get(j.targetId)!=null,O=j.view.applyChanges(S,y.isPrimaryClient,A,L);return lx(y,j.targetId,O.au),O.snapshot}(t,f,m,v);const i=await Xv(t.localStore,e,!0),a=new vP(e,i.ks),l=a.ru(i.documents),u=cl.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),d=a.applyChanges(l,t.isPrimaryClient,u);lx(t,r,d.au);const h=new xP(e,r,a);return t.Tu.set(e,h),t.Iu.has(r)?t.Iu.get(r).push(e):t.Iu.set(r,[e]),d.snapshot}async function SP(t,e,r){const n=me(t),s=n.Tu.get(e),i=n.Iu.get(s.targetId);if(i.length>1)return n.Iu.set(s.targetId,i.filter(a=>!yd(a,e))),void n.Tu.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await gm(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&i0(n.remoteStore,s.targetId),xm(n,s.targetId)}).catch(xo)):(xm(n,s.targetId),await gm(n.localStore,s.targetId,!0))}async function jP(t,e){const r=me(t),n=r.Tu.get(e),s=r.Iu.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),i0(r.remoteStore,n.targetId))}async function TP(t,e,r){const n=DP(t);try{const s=await function(a,l){const u=me(a),d=Oe.now(),h=l.reduce((v,x)=>v.add(x.key),be());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",v=>{let x=yn(),y=be();return u.xs.getEntries(v,h).next(j=>{x=j,x.forEach((N,_)=>{_.isValidDocument()||(y=y.add(N))})}).next(()=>u.localDocuments.getOverlayedDocuments(v,x)).next(j=>{f=j;const N=[];for(const _ of l){const S=zk(_,f.get(_.key).overlayedDocument);S!=null&&N.push(new Ss(_.key,S,db(S.value.mapValue),Jt.exists(!0)))}return u.mutationQueue.addMutationBatch(v,d,N,l)}).next(j=>{m=j;const N=j.applyToLocalDocumentSet(f,y);return u.documentOverlayCache.saveOverlays(v,j.batchId,N)})}).then(()=>({batchId:m.batchId,changes:_b(f)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(a,l,u){let d=a.du[a.currentUser.toKey()];d||(d=new Ke(we)),d=d.insert(l,u),a.du[a.currentUser.toKey()]=d}(n,s.batchId,r),await dl(n,s.changes),await Ed(n.remoteStore)}catch(s){const i=u0(s,"Failed to persist write");r.reject(i)}}async function l_(t,e){const r=me(t);try{const n=await FA(r.localStore,e);e.targetChanges.forEach((s,i)=>{const a=r.Au.get(i);a&&(Se(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.hu=!0:s.modifiedDocuments.size>0?Se(a.hu,14607):s.removedDocuments.size>0&&(Se(a.hu,42227),a.hu=!1))}),await dl(r,n,e)}catch(n){await xo(n)}}function ax(t,e,r){const n=me(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Tu.forEach((i,a)=>{const l=a.view.va(e);l.snapshot&&s.push(l.snapshot)}),function(a,l){const u=me(a);u.onlineState=l;let d=!1;u.queries.forEach((h,f)=>{for(const m of f.ba)m.va(l)&&(d=!0)}),d&&d0(u)}(n.eventManager,e),s.length&&n.Pu.J_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function IP(t,e,r){const n=me(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Au.get(e),i=s&&s.key;if(i){let a=new Ke(ne.comparator);a=a.insert(i,Dt.newNoDocument(i,fe.min()));const l=be().add(i),u=new bd(fe.min(),new Map,new Ke(we),a,l);await l_(n,u),n.Ru=n.Ru.remove(i),n.Au.delete(e),f0(n)}else await gm(n.localStore,e,!1).then(()=>xm(n,e,r)).catch(xo)}async function CP(t,e){const r=me(t),n=e.batch.batchId;try{const s=await OA(r.localStore,e);u_(r,n,null),c_(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await dl(r,s)}catch(s){await xo(s)}}async function kP(t,e,r){const n=me(t);try{const s=await function(a,l){const u=me(a);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let h;return u.mutationQueue.lookupMutationBatch(d,l).next(f=>(Se(f!==null,37113),h=f.keys(),u.mutationQueue.removeMutationBatch(d,f))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,h,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h)).next(()=>u.localDocuments.getDocuments(d,h))})}(n.localStore,e);u_(n,e,r),c_(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await dl(n,s)}catch(s){await xo(s)}}function c_(t,e){(t.mu.get(e)||[]).forEach(r=>{r.resolve()}),t.mu.delete(e)}function u_(t,e,r){const n=me(t);let s=n.du[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.du[n.currentUser.toKey()]=s}}function xm(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Iu.get(e))t.Tu.delete(n),r&&t.Pu.yu(n,r);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(n=>{t.Vu.containsKey(n)||d_(t,n)})}function d_(t,e){t.Eu.delete(e.path.canonicalString());const r=t.Ru.get(e);r!==null&&(i0(t.remoteStore,r),t.Ru=t.Ru.remove(e),t.Au.delete(r),f0(t))}function lx(t,e,r){for(const n of r)n instanceof i_?(t.Vu.addReference(n.key,e),AP(t,n)):n instanceof o_?(Z(h0,"Document no longer in limbo: "+n.key),t.Vu.removeReference(n.key,e),t.Vu.containsKey(n.key)||d_(t,n.key)):ce(19791,{wu:n})}function AP(t,e){const r=e.key,n=r.path.canonicalString();t.Ru.get(r)||t.Eu.has(n)||(Z(h0,"New document in limbo: "+r),t.Eu.add(n),f0(t))}function f0(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const r=new ne(Re.fromString(e)),n=t.fu.next();t.Au.set(n,new wP(r)),t.Ru=t.Ru.insert(r,n),Yb(t.remoteStore,new Hn(Gr(Qp(r.path)),n,"TargetPurposeLimboResolution",md.ce))}}async function dl(t,e,r){const n=me(t),s=[],i=[],a=[];n.Tu.isEmpty()||(n.Tu.forEach((l,u)=>{a.push(n.pu(u,e,r).then(d=>{var h;if((d||r)&&n.isPrimaryClient){const f=d?!d.fromCache:(h=r==null?void 0:r.targetChanges.get(u.targetId))==null?void 0:h.current;n.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(d){s.push(d);const f=n0.Es(u.targetId,d);i.push(f)}}))}),await Promise.all(a),n.Pu.J_(s),await async function(u,d){const h=me(u);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>U.forEach(d,m=>U.forEach(m.Ts,v=>h.persistence.referenceDelegate.addReference(f,m.targetId,v)).next(()=>U.forEach(m.Is,v=>h.persistence.referenceDelegate.removeReference(f,m.targetId,v)))))}catch(f){if(!wo(f))throw f;Z(s0,"Failed to update sequence numbers: "+f)}for(const f of d){const m=f.targetId;if(!f.fromCache){const v=h.vs.get(m),x=v.snapshotVersion,y=v.withLastLimboFreeSnapshotVersion(x);h.vs=h.vs.insert(m,y)}}}(n.localStore,i))}async function PP(t,e){const r=me(t);if(!r.currentUser.isEqual(e)){Z(h0,"User change. New user:",e.toKey());const n=await qb(r.localStore,e);r.currentUser=e,function(i,a){i.mu.forEach(l=>{l.forEach(u=>{u.reject(new Q(F.CANCELLED,a))})}),i.mu.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await dl(r,n.Ns)}}function RP(t,e){const r=me(t),n=r.Au.get(e);if(n&&n.hu)return be().add(n.key);{let s=be();const i=r.Iu.get(e);if(!i)return s;for(const a of i){const l=r.Tu.get(a);s=s.unionWith(l.view.nu)}return s}}function h_(t){const e=me(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=l_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=IP.bind(null,e),e.Pu.J_=gP.bind(null,e.eventManager),e.Pu.yu=yP.bind(null,e.eventManager),e}function DP(t){const e=me(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=CP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=kP.bind(null,e),e}class vu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=_d(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,r){return null}Mu(e,r){return null}vu(e){return VA(this.persistence,new DA,e.initialUser,this.serializer)}Cu(e){return new Hb(r0.Vi,this.serializer)}Du(e){return new WA}async terminate(){var e,r;(e=this.gcScheduler)==null||e.stop(),(r=this.indexBackfillerScheduler)==null||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}vu.provider={build:()=>new vu};class MP extends vu{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,r){Se(this.persistence.referenceDelegate instanceof gu,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new xA(n,e.asyncQueue,r)}Cu(e){const r=this.cacheSizeBytes!==void 0?Wt.withCacheSize(this.cacheSizeBytes):Wt.DEFAULT;return new Hb(n=>gu.Vi(n,r),this.serializer)}}class wm{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>ax(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=PP.bind(null,this.syncEngine),await fP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new pP}()}createDatastore(e){const r=_d(e.databaseInfo.databaseId),n=QA(e.databaseInfo);return eP(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,a,l){return new rP(n,s,i,a,l)}(this.localStore,this.datastore,e.asyncQueue,r=>ax(this.syncEngine,r,0),function(){return tx.v()?new tx:new HA}())}createSyncEngine(e,r){return function(s,i,a,l,u,d,h){const f=new bP(s,i,a,l,u,d);return h&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=me(s);Z(ti,"RemoteStore shutting down."),i.Ea.add(5),await ul(i),i.Aa.shutdown(),i.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(r=this.eventManager)==null||r.terminate()}}wm.provider={build:()=>new wm};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):gn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs="FirestoreClient";class LP{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this._databaseInfo=s,this.user=Pt.UNAUTHENTICATED,this.clientId=$p.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async a=>{Z(xs,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(n,a=>(Z(xs,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=u0(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function $h(t,e){t.asyncQueue.verifyOperationInProgress(),Z(xs,"Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await qb(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function cx(t,e){t.asyncQueue.verifyOperationInProgress();const r=await VP(t);Z(xs,"Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>nx(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>nx(e.remoteStore,s)),t._onlineComponents=e}async function VP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z(xs,"Using user provided OfflineComponentProvider");try{await $h(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===F.FAILED_PRECONDITION||s.code===F.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;to("Error using user provided cache. Falling back to memory cache: "+r),await $h(t,new vu)}}else Z(xs,"Using default OfflineComponentProvider"),await $h(t,new MP(void 0));return t._offlineComponents}async function m_(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z(xs,"Using user provided OnlineComponentProvider"),await cx(t,t._uninitializedComponentsProvider._online)):(Z(xs,"Using default OnlineComponentProvider"),await cx(t,new wm))),t._onlineComponents}function OP(t){return m_(t).then(e=>e.syncEngine)}async function p_(t){const e=await m_(t),r=e.eventManager;return r.onListen=_P.bind(null,e.syncEngine),r.onUnlisten=SP.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=NP.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=jP.bind(null,e.syncEngine),r}function FP(t,e,r={}){const n=new cn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const h=new f_({next:m=>{h.Nu(),a.enqueueAndForget(()=>n_(i,f));const v=m.docs.has(l);!v&&m.fromCache?d.reject(new Q(F.UNAVAILABLE,"Failed to get document because the client is offline.")):v&&m.fromCache&&u&&u.source==="server"?d.reject(new Q(F.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new s_(Qp(l.path),h,{includeMetadataChanges:!0,Ka:!0});return r_(i,f)}(await p_(t),t.asyncQueue,e,r,n)),n.promise}function UP(t,e,r={}){const n=new cn;return t.asyncQueue.enqueueAndForget(async()=>function(i,a,l,u,d){const h=new f_({next:m=>{h.Nu(),a.enqueueAndForget(()=>n_(i,f)),m.fromCache&&u.source==="server"?d.reject(new Q(F.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),f=new s_(l,h,{includeMetadataChanges:!0,Ka:!0});return r_(i,f)}(await p_(t),t.asyncQueue,e,r,n)),n.promise}function zP(t,e){const r=new cn;return t.asyncQueue.enqueueAndForget(async()=>TP(await OP(t),e,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BP="ComponentProvider",ux=new Map;function $P(t,e,r,n,s){return new hk(t,e,r,s.host,s.ssl,s.experimentalForceLongPolling,s.experimentalAutoDetectLongPolling,g_(s.experimentalLongPollingOptions),s.useFetchStreams,s.isUsingEmulator,n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_="firestore.googleapis.com",dx=!0;class hx{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Q(F.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=y_,this.ssl=dx}else this.host=e.host,this.ssl=e.ssl??dx;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Wb;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<yA)throw new Q(F.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}tk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=g_(e.experimentalLongPollingOptions??{}),function(n){if(n.timeoutSeconds!==void 0){if(isNaN(n.timeoutSeconds))throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (must not be NaN)`);if(n.timeoutSeconds<5)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (minimum allowed value is 5)`);if(n.timeoutSeconds>30)throw new Q(F.INVALID_ARGUMENT,`invalid long polling timeout: ${n.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Sd{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new hx({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Q(F.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Q(F.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new hx(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new HC;switch(n.type){case"firstParty":return new QC(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Q(F.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=ux.get(r);n&&(Z(BP,"Removing Datastore"),ux.delete(r),n.terminate())}(this),Promise.resolve()}}function WP(t,e,r,n={}){var d;t=Pr(t,Sd);const s=go(e),i=t._getSettings(),a={...i,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${r}`;s&&(V2(`https://${l}`),O2("Firestore",!0)),i.host!==y_&&i.host!==l&&to("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...i,host:l,ssl:s,emulatorOptions:n};if(!Xs(u,a)&&(t._setSettings(u),n.mockUserToken)){let h,f;if(typeof n.mockUserToken=="string")h=n.mockUserToken,f=Pt.MOCK_USER;else{h=yI(n.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const m=n.mockUserToken.sub||n.mockUserToken.user_id;if(!m)throw new Q(F.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new Pt(m)}t._authCredentials=new qC(new X2(h,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new _o(this.firestore,e,this._query)}}class rt{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new cs(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new rt(this.firestore,e,this._key)}toJSON(){return{type:rt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,r,n){if(ol(r,rt._jsonSchema))return new rt(e,n||null,new ne(Re.fromString(r.referencePath)))}}rt._jsonSchemaVersion="firestore/documentReference/1.0",rt._jsonSchema={type:ct("string",rt._jsonSchemaVersion),referencePath:ct("string")};class cs extends _o{constructor(e,r,n){super(e,r,Qp(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new rt(this.firestore,null,new ne(e))}withConverter(e){return new cs(this.firestore,e,this._path)}}function Pe(t,e,...r){if(t=St(t),Z2("collection","path",e),t instanceof Sd){const n=Re.fromString(e,...r);return Sv(n),new cs(t,null,n)}{if(!(t instanceof rt||t instanceof cs))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Re.fromString(e,...r));return Sv(n),new cs(t.firestore,null,n)}}function ae(t,e,...r){if(t=St(t),arguments.length===1&&(e=$p.newId()),Z2("doc","path",e),t instanceof Sd){const n=Re.fromString(e,...r);return Ev(n),new rt(t,null,new ne(n))}{if(!(t instanceof rt||t instanceof cs))throw new Q(F.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(Re.fromString(e,...r));return Ev(n),new rt(t.firestore,t instanceof cs?t.converter:null,new ne(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx="AsyncQueue";class mx{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Kb(this,"async_queue_retry"),this._c=()=>{const n=Bh();n&&Z(fx,"Visibility state changed to "+n.visibilityState),this.M_.w_()},this.ac=e;const r=Bh();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const r=Bh();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const r=new cn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!wo(e))throw e;Z(fx,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const r=this.ac.then(()=>(this.rc=!0,e().catch(n=>{throw this.nc=n,this.rc=!1,gn("INTERNAL UNHANDLED ERROR: ",px(n)),n}).then(n=>(this.rc=!1,n))));return this.ac=r,r}enqueueAfterDelay(e,r,n){this.uc(),this.oc.indexOf(e)>-1&&(r=0);const s=c0.createAndSchedule(this,e,r,n,i=>this.hc(i));return this.tc.push(s),s}uc(){this.nc&&ce(47125,{Pc:px(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const r of this.tc)if(r.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.tc)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const r=this.tc.indexOf(e);this.tc.splice(r,1)}}function px(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class li extends Sd{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new mx,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mx(e),this._firestoreClient=void 0,await e}}}function HP(t,e){const r=typeof t=="object"?t:B2(),n=typeof t=="string"?t:e||du,s=zp(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=pI("firestore");i&&WP(s,...i)}return s}function jd(t){if(t._terminated)throw new Q(F.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||qP(t),t._firestoreClient}function qP(t){var n,s,i,a;const e=t._freezeSettings(),r=$P(t._databaseId,((n=t._app)==null?void 0:n.options.appId)||"",t._persistenceKey,(s=t._app)==null?void 0:s.options.apiKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((a=e.localCache)!=null&&a._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new LP(t._authCredentials,t._appCheckCredentials,t._queue,r,t._componentsProvider&&function(u){const d=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(d),_online:d}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(e){this._byteString=e}static fromBase64String(e){try{return new pr(jt.fromBase64String(e))}catch(r){throw new Q(F.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new pr(jt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:pr._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(ol(e,pr._jsonSchema))return pr.fromBase64String(e.bytes)}}pr._jsonSchemaVersion="firestore/bytes/1.0",pr._jsonSchema={type:ct("string",pr._jsonSchemaVersion),bytes:ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Q(F.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _t(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qr{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Q(F.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Q(F.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return we(this._lat,e._lat)||we(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Qr._jsonSchemaVersion}}static fromJSON(e){if(ol(e,Qr._jsonSchema))return new Qr(e.latitude,e.longitude)}}Qr._jsonSchemaVersion="firestore/geoPoint/1.0",Qr._jsonSchema={type:ct("string",Qr._jsonSchemaVersion),latitude:ct("number"),longitude:ct("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}toJSON(){return{type:kr._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(ol(e,kr._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(r=>typeof r=="number"))return new kr(e.vectorValues);throw new Q(F.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}kr._jsonSchemaVersion="firestore/vectorValue/1.0",kr._jsonSchema={type:ct("string",kr._jsonSchemaVersion),vectorValues:ct("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP=/^__.*__$/;class KP{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new Ss(e,this.data,this.fieldMask,r,this.fieldTransforms):new ll(e,this.data,r,this.fieldTransforms)}}class v_{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new Ss(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function x_(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ce(40011,{dataSource:t})}}class m0{constructor(e,r,n,s,i,a){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.validatePath(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new m0({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePathSegment(e),n}childContextForFieldPath(e){var s;const r=(s=this.path)==null?void 0:s.child(e),n=this.contextWith({path:r,arrayElement:!1});return n.validatePath(),n}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return xu(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(x_(this.dataSource)&&GP.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class QP{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||_d(e)}createContext(e,r,n,s=!1){return new m0({dataSource:e,methodName:r,targetDoc:n,path:_t.emptyPath(),arrayElement:!1,hasConverter:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function fl(t){const e=t._freezeSettings(),r=_d(t._databaseId);return new QP(t._databaseId,!!e.ignoreUndefinedProperties,r)}function p0(t,e,r,n,s,i={}){const a=t.createContext(i.merge||i.mergeFields?2:0,e,r,s);v0("Data must be an object, but it was:",a,n);const l=__(n,a);let u,d;if(i.merge)u=new nr(a.fieldMask),d=a.fieldTransforms;else if(i.mergeFields){const h=[];for(const f of i.mergeFields){const m=ao(e,f,r);if(!a.contains(m))throw new Q(F.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);S_(h,m)||h.push(m)}u=new nr(h),d=a.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,d=a.fieldTransforms;return new KP(new qt(l),u,d)}class Id extends hl{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Id}}class g0 extends hl{_toFieldTransform(e){return new kb(e.path,new Ka)}isEqual(e){return e instanceof g0}}class y0 extends hl{constructor(e,r){super(e),this.Vc=r}_toFieldTransform(e){const r=new Ja(e.serializer,Sb(e.serializer,this.Vc));return new kb(e.path,r)}isEqual(e){return e instanceof y0&&this.Vc===e.Vc}}function w_(t,e,r,n){const s=t.createContext(1,e,r);v0("Data must be an object, but it was:",s,n);const i=[],a=qt.empty();Es(n,(u,d)=>{const h=E_(e,u,r);d=St(d);const f=s.childContextForFieldPath(h);if(d instanceof Id)i.push(h);else{const m=ml(d,f);m!=null&&(i.push(h),a.set(h,m))}});const l=new nr(i);return new v_(a,l,s.fieldTransforms)}function b_(t,e,r,n,s,i){const a=t.createContext(1,e,r),l=[ao(e,n,r)],u=[s];if(i.length%2!=0)throw new Q(F.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(ao(e,i[m])),u.push(i[m+1]);const d=[],h=qt.empty();for(let m=l.length-1;m>=0;--m)if(!S_(d,l[m])){const v=l[m];let x=u[m];x=St(x);const y=a.childContextForFieldPath(v);if(x instanceof Id)d.push(v);else{const j=ml(x,y);j!=null&&(d.push(v),h.set(v,j))}}const f=new nr(d);return new v_(h,f,a.fieldTransforms)}function YP(t,e,r,n=!1){return ml(r,t.createContext(n?4:3,e))}function ml(t,e){if(N_(t=St(t)))return v0("Unsupported field value:",e,t),__(t,e);if(t instanceof hl)return function(n,s){if(!x_(s.dataSource))throw s.createError(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.createError(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(n,s){const i=[];let a=0;for(const l of n){let u=ml(l,s.childContextForArray(a));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),a++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=St(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return Sb(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=Oe.fromDate(n);return{timestampValue:pu(s.serializer,i)}}if(n instanceof Oe){const i=new Oe(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:pu(s.serializer,i)}}if(n instanceof Qr)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof pr)return{bytesValue:Lb(s.serializer,n._byteString)};if(n instanceof rt){const i=s.databaseId,a=n.firestore._databaseId;if(!a.isEqual(i))throw s.createError(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:e0(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof kr)return function(a,l){const u=a instanceof kr?a.toArray():a;return{mapValue:{fields:{[lb]:{stringValue:ub},[hu]:{arrayValue:{values:u.map(h=>{if(typeof h!="number")throw l.createError("VectorValues must only contain numeric values.");return Yp(l.serializer,h)})}}}}}}(n,s);if($b(n))return n._toProto(s.serializer);throw s.createError(`Unsupported field value: ${fd(n)}`)}(t,e)}function __(t,e){const r={};return rb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Es(t,(n,s)=>{const i=ml(s,e.childContextForField(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function N_(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof Qr||t instanceof pr||t instanceof rt||t instanceof hl||t instanceof kr||$b(t))}function v0(t,e,r){if(!N_(r)||!eb(r)){const n=fd(r);throw n==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+n)}}function ao(t,e,r){if((e=St(e))instanceof Td)return e._internalPath;if(typeof e=="string")return E_(t,e);throw xu("Field path arguments must be of type string or ",t,!1,void 0,r)}const JP=new RegExp("[~\\*/\\[\\]]");function E_(t,e,r){if(e.search(JP)>=0)throw xu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new Td(...e.split("."))._internalPath}catch{throw xu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function xu(t,e,r,n,s){const i=n&&!n.isEmpty(),a=s!==void 0;let l=`Function ${e}() called with invalid data`;r&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||a)&&(u+=" (found",i&&(u+=` in field ${n}`),a&&(u+=` in document ${s}`),u+=")"),new Q(F.INVALID_ARGUMENT,l+t+u)}function S_(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XP{convertValue(e,r="none"){switch(ys(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(gs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw ce(62114,{value:e})}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Es(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var n,s,i;const r=(i=(s=(n=e.fields)==null?void 0:n[hu].arrayValue)==null?void 0:s.values)==null?void 0:i.map(a=>et(a.doubleValue));return new kr(r)}convertGeoPoint(e){return new Qr(et(e.latitude),et(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=gd(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(Ha(e));default:return null}}convertTimestamp(e){const r=ps(e);return new Oe(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=Re.fromString(e);Se(Bb(n),9688,{name:e});const s=new qa(n.get(1),n.get(3)),i=new ne(n.popFirst(5));return s.isEqual(r)||gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_ extends XP{constructor(e){super(),this.firestore=e}convertBytes(e){return new pr(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new rt(this.firestore,null,r)}}function re(){return new g0("serverTimestamp")}function Ut(t){return new y0("increment",t)}const gx="@firebase/firestore",yx="4.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new ZP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const r=this._document.data.field(ao("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class ZP extends T_{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eR(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Q(F.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class x0{}class tR extends x0{}function ot(t,e,...r){let n=[];e instanceof x0&&n.push(e),n=n.concat(r),function(i){const a=i.filter(u=>u instanceof w0).length,l=i.filter(u=>u instanceof Cd).length;if(a>1||a>0&&l>0)throw new Q(F.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Cd extends tR{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Cd(e,r,n)}_apply(e){const r=this._parse(e);return I_(e._query,r),new _o(e.firestore,e.converter,um(e._query,r))}_parse(e){const r=fl(e.firestore);return function(i,a,l,u,d,h,f){let m;if(d.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new Q(F.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){xx(f,h);const x=[];for(const y of f)x.push(vx(u,i,y));m={arrayValue:{values:x}}}else m=vx(u,i,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||xx(f,h),m=YP(l,a,f,h==="in"||h==="not-in");return lt.create(d,h,m)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Ze(t,e,r){const n=e,s=ao("where",t);return Cd._create(s,n,r)}class w0 extends x0{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new w0(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:Rr.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const u of l)I_(a,u),a=um(a,u)}(e._query,r),new _o(e.firestore,e.converter,um(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function vx(t,e,r){if(typeof(r=St(r))=="string"){if(r==="")throw new Q(F.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!vb(e)&&r.indexOf("/")!==-1)throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(Re.fromString(r));if(!ne.isDocumentKey(n))throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Rv(t,new ne(n))}if(r instanceof rt)return Rv(t,r._key);throw new Q(F.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${fd(r)}.`)}function xx(t,e){if(!Array.isArray(t)||t.length===0)throw new Q(F.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function I_(t,e){const r=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Q(F.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}function b0(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}class na{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class $s extends T_{constructor(e,r,n,s,i,a){super(e,r,n,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new vc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(ao("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,r={};return r.type=$s._jsonSchemaVersion,r.bundle="",r.bundleSource="DocumentSnapshot",r.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?r:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),r.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),r)}}$s._jsonSchemaVersion="firestore/documentSnapshot/1.0",$s._jsonSchema={type:ct("string",$s._jsonSchemaVersion),bundleSource:ct("string","DocumentSnapshot"),bundleName:ct("string"),bundle:ct("string")};class vc extends $s{data(e={}){return super.data(e)}}class zi{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new na(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new vc(this._firestore,this._userDataWriter,n.key,n,new na(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Q(F.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const u=new vc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new na(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new vc(s._firestore,s._userDataWriter,l.doc.key,l.doc,new na(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,h=-1;return l.type!==0&&(d=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),h=a.indexOf(l.doc.key)),{type:rR(l.type),doc:u,oldIndex:d,newIndex:h}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Q(F.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=zi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=$p.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const r=[],n=[],s=[];return this.docs.forEach(i=>{i._document!==null&&(r.push(i._document),n.push(this._userDataWriter.convertObjectMap(i._document.data.value.mapValue.fields,"previous")),s.push(i.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function rR(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ce(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zi._jsonSchemaVersion="firestore/querySnapshot/1.0",zi._jsonSchema={type:ct("string",zi._jsonSchemaVersion),bundleSource:ct("string","QuerySnapshot"),bundleName:ct("string"),bundle:ct("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e,r){this._firestore=e,this._commitHandler=r,this._mutations=[],this._committed=!1,this._dataReader=fl(e)}set(e,r,n){this._verifyNotCommitted();const s=Wh(e,this._firestore),i=b0(s.converter,r,n),a=p0(this._dataReader,"WriteBatch.set",s._key,i,s.converter!==null,n);return this._mutations.push(a.toMutation(s._key,Jt.none())),this}update(e,r,n,...s){this._verifyNotCommitted();const i=Wh(e,this._firestore);let a;return a=typeof(r=St(r))=="string"||r instanceof Td?b_(this._dataReader,"WriteBatch.update",i._key,r,n,s):w_(this._dataReader,"WriteBatch.update",i._key,r),this._mutations.push(a.toMutation(i._key,Jt.exists(!0))),this}delete(e){this._verifyNotCommitted();const r=Wh(e,this._firestore);return this._mutations=this._mutations.concat(new Jp(r._key,Jt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Q(F.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Wh(t,e){if((t=St(t)).firestore!==e)throw new Q(F.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){t=Pr(t,rt);const e=Pr(t.firestore,li),r=jd(e);return FP(r,t._key).then(n=>sR(e,t,n))}function We(t){t=Pr(t,_o);const e=Pr(t.firestore,li),r=jd(e),n=new j_(e);return eR(t._query),UP(r,t._query).then(s=>new zi(e,n,t,s))}function vn(t,e,r){t=Pr(t,rt);const n=Pr(t.firestore,li),s=b0(t.converter,e,r),i=fl(n);return kd(n,[p0(i,"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Jt.none())])}function Ae(t,e,r,...n){t=Pr(t,rt);const s=Pr(t.firestore,li),i=fl(s);let a;return a=typeof(e=St(e))=="string"||e instanceof Td?b_(i,"updateDoc",t._key,e,r,n):w_(i,"updateDoc",t._key,e),kd(s,[a.toMutation(t._key,Jt.exists(!0))])}function Dn(t,e){const r=Pr(t.firestore,li),n=ae(t),s=b0(t.converter,e),i=fl(t.firestore);return kd(r,[p0(i,"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Jt.exists(!1))]).then(()=>n)}function kd(t,e){const r=jd(t);return zP(r,e)}function sR(t,e,r){const n=r.docs.get(e._key),s=new j_(t);return new $s(t,s,e._key,n,new na(r.hasPendingWrites,r.fromCache),e.converter)}function iR(t){return t=Pr(t,li),jd(t),new nR(t,e=>kd(t,e))}(function(e,r=!0){WC(yo),eo(new Zs("firestore",(n,{instanceIdentifier:s,options:i})=>{const a=n.getProvider("app").getImmediate(),l=new li(new GC(n.getProvider("auth-internal")),new YC(a,n.getProvider("app-check-internal")),fk(a,s),a);return i={useFetchStreams:r,...i},l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),as(gx,yx,e),as(gx,yx,"esm2020")})();var oR="firebase",aR="12.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */as(oR,aR,"app");function C_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const lR=C_,k_=new sl("auth","Firebase",C_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu=new Fp("@firebase/auth");function cR(t,...e){wu.logLevel<=xe.WARN&&wu.warn(`Auth (${yo}): ${t}`,...e)}function xc(t,...e){wu.logLevel<=xe.ERROR&&wu.error(`Auth (${yo}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xn(t,...e){throw _0(t,...e)}function Yr(t,...e){return _0(t,...e)}function A_(t,e,r){const n={...lR(),[e]:r};return new sl("auth","Firebase",n).create(e,{appName:t.name})}function Ws(t){return A_(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function _0(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return k_.create(t,...e)}function he(t,e,...r){if(!t)throw _0(e,...r)}function on(t){const e="INTERNAL ASSERTION FAILED: "+t;throw xc(e),new Error(e)}function wn(t,e){t||on(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function uR(){return wx()==="http:"||wx()==="https:"}function wx(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(uR()||NI()||"connection"in navigator)?navigator.onLine:!0}function hR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,r){this.shortDelay=e,this.longDelay=r,wn(r>e,"Short delay should be less than long delay!"),this.isMobile=wI()||EI()}get(){return dR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N0(t,e){wn(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P_{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;on("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;on("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;on("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mR=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],pR=new pl(3e4,6e4);function E0(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function No(t,e,r,n,s={}){return R_(t,s,async()=>{let i={},a={};n&&(e==="GET"?a=n:i={body:JSON.stringify(n)});const l=il({key:t.config.apiKey,...a}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:u,...i};return _I()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&go(t.emulatorConfig.host)&&(d.credentials="include"),P_.fetch()(await D_(t,t.config.apiHost,r,l),d)})}async function R_(t,e,r){t._canInitEmulator=!1;const n={...fR,...e};try{const s=new yR(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const a=await i.json();if("needConfirmation"in a)throw ec(t,"account-exists-with-different-credential",a);if(i.ok&&!("errorMessage"in a))return a;{const l=i.ok?a.errorMessage:a.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw ec(t,"credential-already-in-use",a);if(u==="EMAIL_EXISTS")throw ec(t,"email-already-in-use",a);if(u==="USER_DISABLED")throw ec(t,"user-disabled",a);const h=n[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw A_(t,h,d);xn(t,h)}}catch(s){if(s instanceof Nn)throw s;xn(t,"network-request-failed",{message:String(s)})}}async function gR(t,e,r,n,s={}){const i=await No(t,e,r,n,s);return"mfaPendingCredential"in i&&xn(t,"multi-factor-auth-required",{_serverResponse:i}),i}async function D_(t,e,r,n){const s=`${e}${r}?${n}`,i=t,a=i.config.emulator?N0(t.config,s):`${t.config.apiScheme}://${s}`;return mR.includes(r)&&(await i._persistenceManagerAvailable,i._getPersistenceType()==="COOKIE")?i._getPersistence()._getFinalTarget(a).toString():a}class yR{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(Yr(this.auth,"network-request-failed")),pR.get())})}}function ec(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=Yr(t,e,n);return s.customData._tokenResponse=r,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vR(t,e){return No(t,"POST","/v1/accounts:delete",e)}async function bu(t,e){return No(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function va(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function xR(t,e=!1){const r=St(t),n=await r.getIdToken(e),s=S0(n);he(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,a=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:va(Hh(s.auth_time)),issuedAtTime:va(Hh(s.iat)),expirationTime:va(Hh(s.exp)),signInProvider:a||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Hh(t){return Number(t)*1e3}function S0(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return xc("JWT malformed, contained fewer than 3 sections"),null;try{const s=R2(r);return s?JSON.parse(s):(xc("Failed to decode base64 JWT payload"),null)}catch(s){return xc("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function bx(t){const e=S0(t);return he(e,"internal-error"),he(typeof e.exp<"u","internal-error"),he(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xa(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof Nn&&wR(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function wR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const n=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,n)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=va(this.lastLoginAt),this.creationTime=va(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _u(t){var f;const e=t.auth,r=await t.getIdToken(),n=await Xa(t,bu(e,{idToken:r}));he(n==null?void 0:n.users.length,e,"internal-error");const s=n.users[0];t._notifyReloadListener(s);const i=(f=s.providerUserInfo)!=null&&f.length?M_(s.providerUserInfo):[],a=NR(t.providerData,i),l=t.isAnonymous,u=!(t.email&&s.passwordHash)&&!(a!=null&&a.length),d=l?u:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function _R(t){const e=St(t);await _u(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function NR(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function M_(t){return t.map(({providerId:e,...r})=>({providerId:e,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ER(t,e){const r=await R_(t,{},async()=>{const n=il({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,a=await D_(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:n};return t.emulatorConfig&&go(t.emulatorConfig.host)&&(u.credentials="include"),P_.fetch()(a,u)});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function SR(t,e){return No(t,"POST","/v2/accounts:revokeToken",E0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){he(e.idToken,"internal-error"),he(typeof e.idToken<"u","internal-error"),he(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):bx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){he(e.length!==0,"internal-error");const r=bx(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(he(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await ER(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,a=new Bi;return n&&(he(typeof n=="string","internal-error",{appName:e}),a.refreshToken=n),s&&(he(typeof s=="string","internal-error",{appName:e}),a.accessToken=s),i&&(he(typeof i=="number","internal-error",{appName:e}),a.expirationTime=i),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bi,this.toJSON())}_performRefresh(){return on("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,e){he(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Tr{constructor({uid:e,auth:r,stsTokenManager:n,...s}){this.providerId="firebase",this.proactiveRefresh=new bR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=r,this.stsTokenManager=n,this.accessToken=n.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new _m(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const r=await Xa(this,this.stsTokenManager.getToken(this.auth,e));return he(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return xR(this,e)}reload(){return _R(this)}_assign(e){this!==e&&(he(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>({...r})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new Tr({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return r.metadata._copy(this.metadata),r}_onReload(e){he(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await _u(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($r(this.auth.app))return Promise.reject(Ws(this.auth));const e=await this.getIdToken();return await Xa(this,vR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){const n=r.displayName??void 0,s=r.email??void 0,i=r.phoneNumber??void 0,a=r.photoURL??void 0,l=r.tenantId??void 0,u=r._redirectEventId??void 0,d=r.createdAt??void 0,h=r.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:v,providerData:x,stsTokenManager:y}=r;he(f&&y,e,"internal-error");const j=Bi.fromJSON(this.name,y);he(typeof f=="string",e,"internal-error"),An(n,e.name),An(s,e.name),he(typeof m=="boolean",e,"internal-error"),he(typeof v=="boolean",e,"internal-error"),An(i,e.name),An(a,e.name),An(l,e.name),An(u,e.name),An(d,e.name),An(h,e.name);const N=new Tr({uid:f,auth:e,email:s,emailVerified:m,displayName:n,isAnonymous:v,photoURL:a,phoneNumber:i,tenantId:l,stsTokenManager:j,createdAt:d,lastLoginAt:h});return x&&Array.isArray(x)&&(N.providerData=x.map(_=>({..._}))),u&&(N._redirectEventId=u),N}static async _fromIdTokenResponse(e,r,n=!1){const s=new Bi;s.updateFromServerResponse(r);const i=new Tr({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await _u(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];he(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?M_(s.providerUserInfo):[],a=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new Bi;l.updateFromIdToken(n);const u=new Tr({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:a}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new _m(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _x=new Map;function an(t){wn(t instanceof Function,"Expected a class definition");let e=_x.get(t);return e?(wn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_x.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}L_.type="NONE";const Nx=L_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wc(t,e,r){return`firebase:${t}:${e}:${r}`}class $i{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=wc(this.userKey,s.apiKey,i),this.fullPersistenceKey=wc("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const r=await bu(this.auth,{idToken:e}).catch(()=>{});return r?Tr._fromGetAccountInfoResponse(this.auth,r,e):null}return Tr._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new $i(an(Nx),e,n);const s=(await Promise.all(r.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||an(Nx);const a=wc(n,e.config.apiKey,e.name);let l=null;for(const d of r)try{const h=await d._get(a);if(h){let f;if(typeof h=="string"){const m=await bu(e,{idToken:h}).catch(()=>{});if(!m)break;f=await Tr._fromGetAccountInfoResponse(e,m,h)}else f=Tr._fromJSON(e,h);d!==i&&(l=f),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new $i(i,e,n):(i=u[0],l&&await i._set(a,l.toJSON()),await Promise.all(r.map(async d=>{if(d!==i)try{await d._remove(a)}catch{}})),new $i(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ex(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(U_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(V_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(B_(e))return"Blackberry";if($_(e))return"Webos";if(O_(e))return"Safari";if((e.includes("chrome/")||F_(e))&&!e.includes("edge/"))return"Chrome";if(z_(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function V_(t=Lt()){return/firefox\//i.test(t)}function O_(t=Lt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function F_(t=Lt()){return/crios\//i.test(t)}function U_(t=Lt()){return/iemobile/i.test(t)}function z_(t=Lt()){return/android/i.test(t)}function B_(t=Lt()){return/blackberry/i.test(t)}function $_(t=Lt()){return/webos/i.test(t)}function j0(t=Lt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function jR(t=Lt()){var e;return j0(t)&&!!((e=window.navigator)!=null&&e.standalone)}function TR(){return SI()&&document.documentMode===10}function W_(t=Lt()){return j0(t)||z_(t)||$_(t)||B_(t)||/windows phone/i.test(t)||U_(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H_(t,e=[]){let r;switch(t){case"Browser":r=Ex(Lt());break;case"Worker":r=`${Ex(Lt())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${yo}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((a,l)=>{try{const u=e(i);a(u)}catch(u){l(u)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e={}){return No(t,"GET","/v2/passwordPolicy",E0(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kR=6;class AR{constructor(e){var n;const r=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=r.minPasswordLength??kR,r.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=r.maxPasswordLength),r.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=r.containsLowercaseCharacter),r.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=r.containsUppercaseCharacter),r.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=r.containsNumericCharacter),r.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=r.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((n=e.allowedNonAlphanumericCharacters)==null?void 0:n.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const r={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,r),this.validatePasswordCharacterOptions(e,r),r.isValid&&(r.isValid=r.meetsMinPasswordLength??!0),r.isValid&&(r.isValid=r.meetsMaxPasswordLength??!0),r.isValid&&(r.isValid=r.containsLowercaseLetter??!0),r.isValid&&(r.isValid=r.containsUppercaseLetter??!0),r.isValid&&(r.isValid=r.containsNumericCharacter??!0),r.isValid&&(r.isValid=r.containsNonAlphanumericCharacter??!0),r}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PR{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Sx(this),this.idTokenSubscription=new Sx(this),this.beforeStateQueue=new IR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=k_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(i=>this._resolvePersistenceManagerAvailable=i)}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=an(r)),this._initializationPromise=this.queue(async()=>{var n,s,i;if(!this._deleted&&(this.persistenceManager=await $i.create(this,e),(n=this._resolvePersistenceManagerAvailable)==null||n.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((i=this.currentUser)==null?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await bu(this,{idToken:e}),n=await Tr._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var i;if($r(this.app)){const a=this.app.settings.authIdToken;return a?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let n=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const a=(i=this.redirectUser)==null?void 0:i._redirectEventId,l=n==null?void 0:n._redirectEventId,u=await this.tryRedirectSignIn(e);(!a||a===l)&&(u!=null&&u.user)&&(n=u.user,s=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return he(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await _u(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=hR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($r(this.app))return Promise.reject(Ws(this));const r=e?St(e):null;return r&&he(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&he(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $r(this.app)?Promise.reject(Ws(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $r(this.app)?Promise.reject(Ws(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(an(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await CR(this),r=new AR(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new sl("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await SR(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&an(e)||this._popupRedirectResolver;he(r,this,"argument-error"),this.redirectPersistenceManager=await $i.create(this,[an(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)==null?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)==null?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((r=this.currentUser)==null?void 0:r.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let a=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(he(l,this,"internal-error"),l.then(()=>{a||i(this.currentUser)}),typeof r=="function"){const u=e.addObserver(r,n,s);return()=>{a=!0,u()}}else{const u=e.addObserver(r);return()=>{a=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return he(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=H_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const r=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());r&&(e["X-Firebase-Client"]=r);const n=await this._getAppCheckToken();return n&&(e["X-Firebase-AppCheck"]=n),e}async _getAppCheckToken(){var r;if($r(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((r=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:r.getToken());return e!=null&&e.error&&cR(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function T0(t){return St(t)}class Sx{constructor(e){this.auth=e,this.observer=null,this.addObserver=RI(r=>this.observer=r)}get next(){return he(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let I0={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RR(t){I0=t}function DR(t){return I0.loadJS(t)}function MR(){return I0.gapiScript}function LR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VR(t,e){const r=zp(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(Xs(i,e??{}))return s;xn(s,"already-initialized")}return r.initialize({options:e})}function OR(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(an);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function FR(t,e,r){const n=T0(t);he(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!!(r!=null&&r.disableWarnings),i=q_(e),{host:a,port:l}=UR(e),u=l===null?"":`:${l}`,d={url:`${i}//${a}${u}/`},h=Object.freeze({host:a,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!n._canInitEmulator){he(n.config.emulator&&n.emulatorConfig,n,"emulator-config-failed"),he(Xs(d,n.config.emulator)&&Xs(h,n.emulatorConfig),n,"emulator-config-failed");return}n.config.emulator=d,n.emulatorConfig=h,n.settings.appVerificationDisabledForTesting=!0,go(a)?(V2(`${i}//${a}${u}`),O2("Auth",!0)):s||zR()}function q_(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UR(t){const e=q_(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:jx(n.substr(i.length+1))}}else{const[i,a]=n.split(":");return{host:i,port:jx(a)}}}function jx(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function zR(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return on("not implemented")}_getIdTokenResponse(e){return on("not implemented")}_linkToIdToken(e,r){return on("not implemented")}_getReauthenticationResolver(e){return on("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wi(t,e){return gR(t,"POST","/v1/accounts:signInWithIdp",E0(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BR="http://localhost";class ri extends G_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new ri(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):xn("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s,...i}=r;if(!n||!s)return null;const a=new ri(n,s);return a.idToken=i.idToken||void 0,a.accessToken=i.accessToken||void 0,a.secret=i.secret,a.nonce=i.nonce,a.pendingToken=i.pendingToken||null,a}_getIdTokenResponse(e){const r=this.buildRequest();return Wi(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Wi(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Wi(e,r)}buildRequest(){const e={requestUri:BR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=il(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gl extends K_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends gl{constructor(){super("facebook.com")}static credential(e){return ri._fromParams({providerId:On.PROVIDER_ID,signInMethod:On.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return On.credentialFromTaggedObject(e)}static credentialFromError(e){return On.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return On.credential(e.oauthAccessToken)}catch{return null}}}On.FACEBOOK_SIGN_IN_METHOD="facebook.com";On.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn extends gl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return ri._fromParams({providerId:Fn.PROVIDER_ID,signInMethod:Fn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return Fn.credentialFromTaggedObject(e)}static credentialFromError(e){return Fn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return Fn.credential(r,n)}catch{return null}}}Fn.GOOGLE_SIGN_IN_METHOD="google.com";Fn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un extends gl{constructor(){super("github.com")}static credential(e){return ri._fromParams({providerId:Un.PROVIDER_ID,signInMethod:Un.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Un.credentialFromTaggedObject(e)}static credentialFromError(e){return Un.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Un.credential(e.oauthAccessToken)}catch{return null}}}Un.GITHUB_SIGN_IN_METHOD="github.com";Un.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends gl{constructor(){super("twitter.com")}static credential(e,r){return ri._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return zn.credential(r,n)}catch{return null}}}zn.TWITTER_SIGN_IN_METHOD="twitter.com";zn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await Tr._fromIdTokenResponse(e,n,s),a=Tx(n);return new lo({user:i,providerId:a,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=Tx(n);return new lo({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function Tx(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu extends Nn{constructor(e,r,n,s){super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,Nu.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new Nu(e,r,n,s)}}function Q_(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Nu._fromErrorAndOperation(t,i,e,n):i})}async function $R(t,e,r=!1){const n=await Xa(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return lo._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WR(t,e,r=!1){const{auth:n}=t;if($r(n.app))return Promise.reject(Ws(n));const s="reauthenticate";try{const i=await Xa(t,Q_(n,s,e,t),r);he(i.idToken,n,"internal-error");const a=S0(i.idToken);he(a,n,"internal-error");const{sub:l}=a;return he(t.uid===l,n,"user-mismatch"),lo._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&xn(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HR(t,e,r=!1){if($r(t.app))return Promise.reject(Ws(t));const n="signIn",s=await Q_(t,n,e),i=await lo._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}function qR(t,e,r,n){return St(t).onIdTokenChanged(e,r,n)}function GR(t,e,r){return St(t).beforeAuthStateChanged(e,r)}const Eu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem(Eu,"1"),this.storage.removeItem(Eu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1e3,QR=10;class J_ extends Y_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=W_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((a,l,u)=>{this.notifyListeners(a,u)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const a=this.storage.getItem(n);!r&&this.localCache[n]===a||this.notifyListeners(n,a)},i=this.storage.getItem(n);TR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QR):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},KR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}J_.type="LOCAL";const YR=J_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_ extends Y_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}X_.type="SESSION";const Z_=X_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ad{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Ad(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,a=this.handlersMap[s];if(!(a!=null&&a.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const l=Array.from(a).map(async d=>d(r.origin,i)),u=await JR(l);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:u})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ad.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C0(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,a;return new Promise((l,u)=>{const d=C0("",20);s.port1.start();const h=setTimeout(()=>{u(new Error("unsupported_event"))},n);a={messageChannel:s,onMessage(f){const m=f;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(h),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(h),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(a),s.port1.addEventListener("message",a.onMessage),this.target.postMessage({eventType:e,eventId:d,data:r},[s.port2])}).finally(()=>{a&&this.removeMessageHandler(a)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jr(){return window}function ZR(t){Jr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eN(){return typeof Jr().WorkerGlobalScope<"u"&&typeof Jr().importScripts=="function"}async function e3(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t3(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function r3(){return eN()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tN="firebaseLocalStorageDb",n3=1,Su="firebaseLocalStorage",rN="fbase_key";class yl{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Pd(t,e){return t.transaction([Su],e?"readwrite":"readonly").objectStore(Su)}function s3(){const t=indexedDB.deleteDatabase(tN);return new yl(t).toPromise()}function Nm(){const t=indexedDB.open(tN,n3);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Su,{keyPath:rN})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Su)?e(n):(n.close(),await s3(),e(await Nm()))})})}async function Ix(t,e,r){const n=Pd(t,!0).put({[rN]:e,value:r});return new yl(n).toPromise()}async function i3(t,e){const r=Pd(t,!1).get(e),n=await new yl(r).toPromise();return n===void 0?null:n.value}function Cx(t,e){const r=Pd(t,!0).delete(e);return new yl(r).toPromise()}const o3=800,a3=3;class nN{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nm(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>a3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return eN()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ad._getInstance(r3()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var r,n;if(this.activeServiceWorker=await e3(),!this.activeServiceWorker)return;this.sender=new XR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(r=e[0])!=null&&r.fulfilled&&(n=e[0])!=null&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t3()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nm();return await Ix(e,Eu,"1"),await Cx(e,Eu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ix(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>i3(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>Cx(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Pd(s,!1).getAll();return new yl(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nN.type="LOCAL";const l3=nN;new pl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c3(t,e){return e?an(e):(he(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0 extends G_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Wi(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Wi(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function u3(t){return HR(t.auth,new k0(t),t.bypassAuthState)}function d3(t){const{auth:e,user:r}=t;return he(r,e,"internal-error"),WR(r,new k0(t),t.bypassAuthState)}async function h3(t){const{auth:e,user:r}=t;return he(r,e,"internal-error"),$R(r,new k0(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sN{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:a,type:l}=e;if(a){this.reject(a);return}const u={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return u3;case"linkViaPopup":case"linkViaRedirect":return h3;case"reauthViaPopup":case"reauthViaRedirect":return d3;default:xn(this.auth,"internal-error")}}resolve(e){wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){wn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3=new pl(2e3,1e4);class Ci extends sN{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,Ci.currentPopupAction&&Ci.currentPopupAction.cancel(),Ci.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return he(e,this.auth,"internal-error"),e}async onExecution(){wn(this.filter.length===1,"Popup operations only handle one event");const e=C0();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(Yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ci.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if((n=(r=this.authWindow)==null?void 0:r.window)!=null&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,f3.get())};e()}}Ci.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m3="pendingRedirect",bc=new Map;class p3 extends sN{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=bc.get(this.auth._key());if(!e){try{const n=await g3(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}bc.set(this.auth._key(),e)}return this.bypassAuthState||bc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function g3(t,e){const r=x3(e),n=v3(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function y3(t,e){bc.set(t._key(),e)}function v3(t){return an(t._redirectPersistence)}function x3(t){return wc(m3,t.config.apiKey,t.name)}async function w3(t,e,r=!1){if($r(t.app))return Promise.reject(Ws(t));const n=T0(t),s=c3(n,e),a=await new p3(n,s,r).execute();return a&&!r&&(delete a.user._redirectEventId,await n._persistUserIfCurrent(a.user),await n._setRedirectUser(null,e)),a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=10*60*1e3;class _3{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N3(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!iN(e)){const s=((n=e.error.code)==null?void 0:n.split("auth/")[1])||"internal-error";r.onError(Yr(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=b3&&this.cachedEventUids.clear(),this.cachedEventUids.has(kx(e))}saveEventToCache(e){this.cachedEventUids.add(kx(e)),this.lastProcessedEventTime=Date.now()}}function kx(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iN({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N3(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iN(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E3(t,e={}){return No(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S3=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,j3=/^https?/;async function T3(t){if(t.config.emulator)return;const{authorizedDomains:e}=await E3(t);for(const r of e)try{if(I3(r))return}catch{}xn(t,"unauthorized-domain")}function I3(t){const e=bm(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const a=new URL(t);return a.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&a.hostname===n}if(!j3.test(r))return!1;if(S3.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C3=new pl(3e4,6e4);function Ax(){const t=Jr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function k3(t){return new Promise((e,r)=>{var s,i,a;function n(){Ax(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ax(),r(Yr(t,"network-request-failed"))},timeout:C3.get()})}if((i=(s=Jr().gapi)==null?void 0:s.iframes)!=null&&i.Iframe)e(gapi.iframes.getContext());else if((a=Jr().gapi)!=null&&a.load)n();else{const l=LR("iframefcb");return Jr()[l]=()=>{gapi.load?n():r(Yr(t,"network-request-failed"))},DR(`${MR()}?onload=${l}`).catch(u=>r(u))}}).catch(e=>{throw _c=null,e})}let _c=null;function A3(t){return _c=_c||k3(t),_c}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P3=new pl(5e3,15e3),R3="__/auth/iframe",D3="emulator/auth/iframe",M3={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},L3=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function V3(t){const e=t.config;he(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?N0(e,D3):`https://${t.config.authDomain}/${R3}`,n={apiKey:e.apiKey,appName:t.name,v:yo},s=L3.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${il(n).slice(1)}`}async function O3(t){const e=await A3(t),r=Jr().gapi;return he(r,t,"internal-error"),e.open({where:document.body,url:V3(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:M3,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const a=Yr(t,"network-request-failed"),l=Jr().setTimeout(()=>{i(a)},P3.get());function u(){Jr().clearTimeout(l),s(n)}n.ping(u).then(u,()=>{i(a)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F3={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},U3=500,z3=600,B3="_blank",$3="http://localhost";class Px{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function W3(t,e,r,n=U3,s=z3){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-n)/2,0).toString();let l="";const u={...F3,width:n.toString(),height:s.toString(),top:i,left:a},d=Lt().toLowerCase();r&&(l=F_(d)?B3:r),V_(d)&&(e=e||$3,u.scrollbars="yes");const h=Object.entries(u).reduce((m,[v,x])=>`${m}${v}=${x},`,"");if(jR(d)&&l!=="_self")return H3(e||"",l),new Px(null);const f=window.open(e||"",l,h);he(f,t,"popup-blocked");try{f.focus()}catch{}return new Px(f)}function H3(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q3="__/auth/handler",G3="emulator/auth/handler",K3=encodeURIComponent("fac");async function Rx(t,e,r,n,s,i){he(t.config.authDomain,t,"auth-domain-config-required"),he(t.config.apiKey,t,"invalid-api-key");const a={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:yo,eventId:s};if(e instanceof K_){e.setDefaultLanguage(t.languageCode),a.providerId=e.providerId||"",PI(e.getCustomParameters())||(a.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,f]of Object.entries(i||{}))a[h]=f}if(e instanceof gl){const h=e.getScopes().filter(f=>f!=="");h.length>0&&(a.scopes=h.join(","))}t.tenantId&&(a.tid=t.tenantId);const l=a;for(const h of Object.keys(l))l[h]===void 0&&delete l[h];const u=await t._getAppCheckToken(),d=u?`#${K3}=${encodeURIComponent(u)}`:"";return`${Q3(t)}?${il(l).slice(1)}${d}`}function Q3({config:t}){return t.emulator?N0(t,G3):`https://${t.authDomain}/${q3}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh="webStorageSupport";class Y3{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Z_,this._completeRedirectFn=w3,this._overrideRedirectResult=y3}async _openPopup(e,r,n,s){var a;wn((a=this.eventManagers[e._key()])==null?void 0:a.manager,"_initialize() not called before _openPopup()");const i=await Rx(e,r,n,bm(),s);return W3(e,i,C0())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await Rx(e,r,n,bm(),s);return ZR(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(wn(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await O3(e),n=new _3(e);return r.register("authEvent",s=>(he(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(qh,{type:qh},s=>{var a;const i=(a=s==null?void 0:s[0])==null?void 0:a[qh];i!==void 0&&r(!!i),xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=T3(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return W_()||O_()||j0()}}const J3=Y3;var Dx="@firebase/auth",Mx="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X3{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){he(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e6(t){eo(new Zs("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:l}=n.options;he(a&&!a.includes(":"),"invalid-api-key",{appName:n.name});const u={apiKey:a,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:H_(t)},d=new PR(n,s,i,u);return OR(d,r),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),eo(new Zs("auth-internal",e=>{const r=T0(e.getProvider("auth").getImmediate());return(n=>new X3(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),as(Dx,Mx,Z3(t)),as(Dx,Mx,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t6=5*60,r6=L2("authIdTokenMaxAge")||t6;let Lx=null;const n6=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>r6)return;const s=r==null?void 0:r.token;Lx!==s&&(Lx=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function s6(t=B2()){const e=zp(t,"auth");if(e.isInitialized())return e.getImmediate();const r=VR(t,{popupRedirectResolver:J3,persistence:[l3,YR,Z_]}),n=L2("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const a=n6(i.toString());GR(r,a,()=>a(r.currentUser)),qR(r,l=>a(l))}}const s=D2("auth");return s&&FR(r,`http://${s}`),r}function i6(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}RR({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=Yr("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",i6().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e6("Browser");const o6={apiKey:"AIzaSyBQ5JeGI0vdJvICTLhyraRsa9x19sF-CWM",authDomain:"hackchackpack.firebaseapp.com",projectId:"hackchackpack",storageBucket:"hackchackpack.firebasestorage.app",messagingSenderId:"1074792242415",appId:"1:1074792242415:web:5ab3a24d2ea75ba55e4f1a"},oN=z2(o6),G=HP(oN);s6(oN);const Vx=t=>btoa(t),a6=(t,e)=>btoa(t)===e,Ox=()=>"token_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),vl={login:async(t,e,r="phone")=>{try{const n=Pe(G,"users");let s;if(r==="nid"){const d=ot(n,Ze("nid","==",t));s=await We(d)}else if(r==="passport"){const d=ot(n,Ze("passport","==",t));s=await We(d)}else{const d=ot(n,Ze("phone","==",t));s=await We(d)}if(s.empty)throw new Error("Invalid credentials");const i=s.docs[0],a=i.data();if(!a6(e,a.password))throw new Error("Invalid credentials");const l=a.isActive!==void 0?a.isActive:a.role==="admin";if(!l&&a.role!=="admin")throw new Error("Your account is not active. Please contact an administrator.");return await Ae(ae(G,"users",i.id),{lastLogin:re()}),{success:!0,data:{token:Ox(),user:{id:i.id,phone:a.phone,name:a.name,role:a.role||"consumer",isActive:l}}}}catch(n){throw new Error(n.message||"Login failed")}},register:async(t,e,r,n,s=null,i=null)=>{try{const a=Pe(G,"users"),l=ot(a,Ze("phone","==",e));if(!(await We(l)).empty)throw new Error("Phone number already registered");if(n){const y=ot(a,Ze("nid","==",n));if(!(await We(y)).empty)throw new Error("NID already registered")}if(s){const y=ot(a,Ze("passport","==",s));if(!(await We(y)).empty)throw new Error("Passport already registered")}let h=(()=>{const y="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let j="";for(let N=0;N<8;N++)j+=y.charAt(Math.floor(Math.random()*y.length));return j})(),f=null;if(i){const y=ot(a,Ze("referralCode","==",i)),j=await We(y);if(!j.empty)f=j.docs[0].id;else{const N=await Ne(ae(G,"users",i));N.exists()&&(f=N.id)}}const m=Vx(r),v=ae(Pe(G,"users"));if(await vn(v,{name:t,phone:e,password:m,nid:n||null,passport:s||null,role:"consumer",isActive:!0,referralCode:h,referredBy:f||null,totalReferrals:0,createdAt:re(),lastLogin:null}),await vn(ae(G,"wallets",v.id),{userId:v.id,rechargeWallet:0,balanceWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()}),f){const y=ae(G,"users",f);if((await Ne(y)).exists()){await Ae(y,{totalReferrals:Ut(1),updatedAt:re()});try{const{updateVIPLevel:N}=await Xf(()=>import("./vipService-3f63a4c5.js"),[]);await N(f)}catch(N){console.error("Error updating VIP level:",N)}}}return{success:!0,data:{token:Ox(),user:{id:v.id,phone:e,name:t,role:"consumer",isActive:!0},referralBonus:0}}}catch(a){throw new Error(a.message||"Registration failed")}},logout:async()=>(localStorage.removeItem("token"),localStorage.removeItem("user"),{success:!0}),verifyIdentity:async(t,e)=>{try{const r=Pe(G,"users");let n;if(t==="nid"){const a=ot(r,Ze("nid","==",e));n=await We(a)}else if(t==="passport"){const a=ot(r,Ze("passport","==",e));n=await We(a)}else throw new Error('Invalid ID type. Must be "nid" or "passport"');if(n.empty)throw new Error(`${t==="nid"?"NID":"Passport"} not found`);const s=n.docs[0],i=s.data();return{success:!0,data:{userId:s.id,phone:i.phone,name:i.name}}}catch(r){throw new Error(r.message||"Identity verification failed")}},resetPassword:async(t,e)=>{try{const r=ae(G,"users",t);if(!(await Ne(r)).exists())throw new Error("User not found");const s=Vx(e);return await Ae(r,{password:s,updatedAt:re()}),{success:!0,message:"Password reset successfully"}}catch(r){throw new Error(r.message||"Password reset failed")}}},Rd={getUserProfile:async t=>{try{const e=localStorage.getItem("user");if(!e)throw new Error("User not found");const r=JSON.parse(e),n=await Ne(ae(G,"users",r.id));if(!n.exists())throw new Error("User not found");const s=n.data();return{success:!0,data:{id:n.id,phone:s.phone,name:s.name,role:s.role||"user",isActive:s.isActive!==void 0?s.isActive:!1}}}catch(e){throw new Error(e.message||"Failed to fetch profile")}},updateProfile:async(t,e)=>{try{const r=localStorage.getItem("user");if(!r)throw new Error("User not found");const n=JSON.parse(r),s=ae(G,"users",n.id);await Ae(s,{...e,updatedAt:re()});const i=await Ne(s);return{success:!0,data:{id:i.id,...i.data()}}}catch(r){throw new Error(r.message||"Failed to update profile")}},getReferralStatistics:async t=>{try{const e=localStorage.getItem("user");if(!e)throw new Error("User not found");const r=JSON.parse(e),n=Pe(G,"users"),s=ot(n,Ze("referredBy","==",r.id)),i=await We(s),a=i.size;let l=0,u=0;const d=i.docs.map(async f=>{const m=f.id,v=Pe(G,"userProducts"),x=ot(v,Ze("userId","==",m));return!(await We(x)).empty});return(await Promise.all(d)).forEach(f=>{f?l++:u++}),{success:!0,data:{totalReferrals:a,purchasedCount:l,notPurchasedCount:u}}}catch(e){throw new Error(e.message||"Failed to fetch referral statistics")}}},A0={getWallet:async t=>{try{const e=localStorage.getItem("user");if(!e)throw new Error("User not found");const r=JSON.parse(e),n=await Ne(ae(G,"wallets",r.id));if(!n.exists())return await vn(ae(G,"wallets",r.id),{userId:r.id,rechargeWallet:0,balanceWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()}),{success:!0,data:{rechargeWallet:0,balanceWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0}};const s=n.data(),i=s.rechargeWallet!=null?Number(s.rechargeWallet):0,a=s.balanceWallet!=null?Number(s.balanceWallet):0,l=s.totalEarnings!=null?Number(s.totalEarnings):0,u=s.totalWithdrawals!=null?Number(s.totalWithdrawals):0,d=s.incomeToday!=null?Number(s.incomeToday):0,h=s.incomeYesterday!=null?Number(s.incomeYesterday):0,f=s.lossToday!=null?Number(s.lossToday):0,m=s.lossTotal!=null?Number(s.lossTotal):0;return{success:!0,data:{rechargeWallet:isNaN(i)?0:i,balanceWallet:isNaN(a)?0:a,totalEarnings:isNaN(l)?0:l,totalWithdrawals:isNaN(u)?0:u,incomeToday:isNaN(d)?0:d,incomeYesterday:isNaN(h)?0:h,lossToday:isNaN(f)?0:f,lossTotal:isNaN(m)?0:m}}}catch(e){throw new Error(e.message||"Failed to fetch wallet")}},recharge:async(t,e,r="")=>{try{const n=localStorage.getItem("user");if(!n)throw new Error("User not found");const s=JSON.parse(n),i=typeof e=="number"?e:parseFloat(e);if(isNaN(i)||i<=0)throw new Error("Invalid recharge amount");return{success:!0,data:{transactionId:(await Dn(Pe(G,"transactions"),{userId:s.id,type:"recharge",amount:i,status:"pending",proofImageUrl:r||"",transactionId:"TXN_"+Date.now(),createdAt:re(),updatedAt:re()})).id,status:"pending",message:"Recharge request submitted. Waiting for admin approval."}}}catch(n){throw new Error(n.message||"Recharge failed")}},withdraw:async(t,e,r=null,n=null,s=null,i=null)=>{try{const a=localStorage.getItem("user");if(!a)throw new Error("User not found");const l=JSON.parse(a),u=ae(G,"wallets",l.id),d=await Ne(u);if(!d.exists())throw new Error("Wallet not found");const h=d.data(),f=h.balanceWallet!=null?Number(h.balanceWallet):0,v=new Date().getDay();if(v!==0&&v!==6){const O=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];throw new Error(`Withdrawals are only available on Saturday and Sunday. Today is ${O[v]}.`)}const x=Pe(G,"userProducts"),y=ot(x,Ze("userId","==",l.id));if((await We(y)).empty)throw new Error("Account is locked. You must purchase at least one product before you can withdraw.");if(e>f)throw new Error(`Insufficient balance. Available balance: ${f.toFixed(2)}`);const N=s!==null?s:e*.1,_=i!==null?i:e-N,S=f-e;await Ae(u,{balanceWallet:Ut(-e),totalWithdrawals:Ut(e),updatedAt:re()});const A={userId:l.id,type:"withdraw",amount:e,vatTax:N,netAmount:_,status:"pending",transactionId:"TXN_"+Date.now(),createdAt:re()};return r&&n&&(A.paymentMethod=r,A.paymentName=n.name,A.paymentNumber=n.number),{success:!0,data:{transactionId:(await Dn(Pe(G,"transactions"),A)).id,newBalance:S,status:"pending"}}}catch(a){throw new Error(a.message||"Withdrawal failed")}}},l6={getTeam:async t=>{try{const e=localStorage.getItem("user");if(!e)throw new Error("User not found");const r=JSON.parse(e),n=await Ne(ae(G,"teams",r.id));if(n.exists())return{success:!0,data:n.data()};const s={userId:r.id,cumulativeRecharge:0,tiers:{B:{percentage:11,members:[]},C:{percentage:4,members:[]},D:{percentage:2,members:[]}},statistics:{todayNewMembers:0,yesterdayNewMembers:0,todayRechargeAmount:0,yesterdayRechargeAmount:0,currentMonthRechargeAmount:0,lastMonthRechargeAmount:0},validMembers:[],invalidMembers:[]};return await vn(ae(G,"teams",r.id),{...s,updatedAt:re()}),{success:!0,data:s}}catch(e){throw new Error(e.message||"Failed to fetch team data")}}},Xr={getProducts:async t=>{try{const e=Pe(G,"products"),r=await We(e);if(r.empty){const s=[{name:"Product 1",price:100},{name:"Product 2",price:200}],i=[];for(const a of s){const l=await Dn(e,{...a,createdAt:re()});i.push({id:l.id,...a})}return{success:!0,data:{products:i}}}return{success:!0,data:{products:r.docs.map(s=>({id:s.id,...s.data()}))}}}catch(e){throw new Error(e.message||"Failed to fetch products")}},addProduct:async(t,e)=>{try{const r=Pe(G,"products"),n=Number(e.validityDays);let s=!Number.isNaN(n)&&n>0?Math.floor(n):null;!s&&!e.validateDate&&(s=45);const i={name:e.name,price:e.price,description:e.description||"",imageUrl:e.imageUrl||"",validityDays:s,validateDate:e.validateDate||null,earnAmount:e.earnAmount||0,totalEarning:e.totalEarning||0,createdAt:re(),updatedAt:re()};return{success:!0,data:{id:(await Dn(r,i)).id,...i}}}catch(r){throw new Error(r.message||"Failed to add product")}},updateProduct:async(t,e,r)=>{try{if(e&&e.startsWith("temp_"))throw new Error("Invalid product ID. Please refresh the page and try again.");const n=ae(G,"products",e);if(!(await Ne(n)).exists())throw new Error(`Product with ID "${e}" does not exist. Please refresh the page and try again.`);return await Ae(n,{...r,updatedAt:re()}),{success:!0,data:{id:e,...r}}}catch(n){throw new Error(n.message||"Failed to update product")}},deleteProduct:async(t,e)=>{try{const r=ae(G,"products",e);return await Ae(r,{deleted:!0,deletedAt:re()}),{success:!0}}catch(r){throw new Error(r.message||"Failed to delete product")}},purchaseProduct:async(t,e)=>{var r,n;try{const s=localStorage.getItem("user");if(!s)throw new Error("User not found");const i=JSON.parse(s),a=await Ne(ae(G,"products",e));if(!a.exists())throw new Error("Product not found");const l=a.data();if(l.deleted)throw new Error("Product is no longer available");const u=await Ne(ae(G,"wallets",i.id));if(!u.exists())throw new Error("Wallet not found");if((u.data().rechargeWallet||0)<l.price)throw new Error("Insufficient balance in recharge wallet");const f=Pe(G,"userProducts"),m=ot(f,Ze("userId","==",i.id)),x=(await We(m)).empty,y=ae(G,"users",i.id),j=await Ne(y),N=j.exists()?j.data():null;await Ae(ae(G,"wallets",i.id),{rechargeWallet:Ut(-l.price),updatedAt:re()});let _=!1;if(x&&N&&!N.isActive){await Ae(y,{isActive:!0,activatedAt:re(),updatedAt:re()}),_=!0;const w={...i,isActive:!0};localStorage.setItem("user",JSON.stringify(w))}if(x&&N&&!N.firstPurchaseAt)try{await Ae(y,{firstPurchaseAt:re(),updatedAt:re()})}catch(w){console.error("Failed to set firstPurchaseAt:",w)}const S=new Date,A=1e3*60*60*24;let L=null,O=null;if(l.validateDate){L=l.validateDate;const w=(r=l.validateDate)!=null&&r.toMillis?new Date(l.validateDate.toMillis()):new Date(l.validateDate);Number.isNaN((n=w==null?void 0:w.getTime)==null?void 0:n.call(w))||(O=Math.max(0,Math.ceil((w-S)/A)))}const T=Number(l.validityDays),b=!Number.isNaN(T)&&T>0?Math.floor(T):O??48,C=await Dn(Pe(G,"userProducts"),{userId:i.id,productId:e,productName:l.name,productPrice:l.price,productDescription:l.description||"",imageUrl:l.imageUrl||"",purchaseDate:re(),status:"active",validateDate:L,validityDays:b,earnAmount:l.earnAmount||0,earnWindowStartAt:re(),lastEarnAttempt:null,totalEarnings:0,createdAt:re()});if(await Dn(Pe(G,"transactions"),{userId:i.id,type:"purchase",amount:l.price,status:"completed",productId:e,purchaseId:C.id,transactionId:"TXN_"+Date.now(),createdAt:re()}),N){const w=N.referredBy,k=!!N.referralPurchaseBonusGranted;if(w&&x&&!k){let P=200;try{const oe=await Ne(ae(G,"settings","app"));oe.exists()&&(P=oe.data().referralBonus||200)}catch(oe){console.error("Failed to fetch referral bonus from settings, using default:",oe)}const I=ae(G,"wallets",w);(await Ne(I)).exists()?await Ae(I,{balanceWallet:Ut(P),totalEarnings:Ut(P),incomeToday:Ut(P),updatedAt:re()}):await vn(I,{userId:w,rechargeWallet:0,balanceWallet:P,totalEarnings:P,totalWithdrawals:0,incomeToday:P,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()});const H=await Ne(ae(G,"users",w)),ue=H.exists()?H.data().name:"Unknown";await Dn(Pe(G,"transactions"),{userId:w,type:"referral_purchase_bonus",amount:P,status:"completed",description:`Referral bonus for ${N.name||"user"}'s product purchase`,referredUserId:i.id,referredUserPurchaseId:C.id,transactionId:"REF_PURCHASE_"+Date.now()+"_"+w,createdAt:re()});try{await Ae(y,{referralPurchaseBonusGranted:!0,referralPurchaseBonusGrantedAt:re(),updatedAt:re()})}catch(oe){console.error("Failed to flag referral bonus as granted:",oe)}}}return{success:!0,data:{purchaseId:C.id,product:{id:e,name:l.name,price:l.price},accountActivated:_}}}catch(s){throw new Error(s.message||"Failed to purchase product")}},getUserProducts:async t=>{try{const e=localStorage.getItem("user");if(!e)throw new Error("User not found");const r=JSON.parse(e),n=Pe(G,"userProducts"),s=ot(n,Ze("userId","==",r.id)),a=(await We(s)).docs.map(m=>({id:m.id,...m.data()})),l=a.filter(m=>!m.imageUrl&&m.productId).map(m=>m.productId),u={};if(l.length>0){const m=l.map(async v=>{try{const x=await Ne(ae(G,"products",v));if(x.exists()){const y=x.data();y.imageUrl&&(u[v]=y.imageUrl)}}catch(x){console.error(`Failed to fetch image for product ${v}:`,x)}});await Promise.all(m)}const d=new Date,h=[],f=[];return a.forEach(m=>{var x,y;!m.imageUrl&&m.productId&&u[m.productId]&&(m.imageUrl=u[m.productId],Ae(ae(G,"userProducts",m.id),{imageUrl:u[m.productId],updatedAt:re()}).catch(j=>console.error("Failed to update product imageUrl:",j)));let v;if(m.validateDate)v=(x=m.validateDate)!=null&&x.toMillis?new Date(m.validateDate.toMillis()):new Date(m.validateDate);else{const j=(y=m.purchaseDate)!=null&&y.toMillis?new Date(m.purchaseDate.toMillis()):new Date(m.purchaseDate),N=m.validityDays||48;v=new Date(j),v.setDate(v.getDate()+N)}v>d&&m.status==="active"?h.push({...m,expiryDate:v,daysRemaining:Math.ceil((v-d)/(1e3*60*60*24))}):(v<=d&&m.status==="active"&&Ae(ae(G,"userProducts",m.id),{status:"expired",updatedAt:re()}).catch(j=>console.error("Failed to update product status:",j)),f.push({...m,expiryDate:v}))}),{success:!0,data:{unexpired:h,expired:f}}}catch(e){throw new Error(e.message||"Failed to fetch user products")}},earnFromProduct:async(t,e)=>{var r,n;try{const s=localStorage.getItem("user");if(!s)throw new Error("User not found");const i=JSON.parse(s),a=Date.now(),l=ae(G,"userProducts",e),u=await Ne(l);if(!u.exists())throw new Error("Product not found");const d=u.data();let h;if(d.validateDate)h=(r=d.validateDate)!=null&&r.toMillis?new Date(d.validateDate.toMillis()):new Date(d.validateDate);else{const T=(n=d.purchaseDate)!=null&&n.toMillis?new Date(d.purchaseDate.toMillis()):new Date(d.purchaseDate),b=d.validityDays||48;h=new Date(T),h.setDate(h.getDate()+b)}if(h<=new Date)throw new Error("Product has expired");const f=d.earnAmount||0;if(f<=0)throw new Error("This product does not have an earn amount configured");const m=3*60*60*1e3,v=24*60*60*1e3,x=T=>T!=null&&T.toMillis?T.toMillis():T?new Date(T).getTime():null;let y=x(d.earnWindowStartAt)??x(d.purchaseDate);y?d.earnWindowStartAt||await Ae(l,{earnWindowStartAt:new Date(y),updatedAt:re()}):(await Ae(l,{earnWindowStartAt:re(),updatedAt:re()}),y=a);const j=Math.floor(Math.max(0,a-y)/v),N=y+j*v,_=N+m;if(a<N){const T=N-a,b=Math.floor(T/(60*60*1e3)),C=Math.floor(T%(60*60*1e3)/(60*1e3)),w=Math.floor(T%(60*1e3)/1e3);throw new Error(`Earning not available yet. Window opens in ${b}h ${C}m ${w}s`)}if(a>_){const T=N+v,b=T-a,C=Math.max(0,Math.floor(b/(60*60*1e3))),w=Math.max(0,Math.floor(b%(60*60*1e3)/(60*1e3))),k=Math.max(0,Math.floor(b%(60*1e3)/1e3));throw await Ae(l,{earnWindowStartAt:new Date(T),earnLastMissedAt:re(),updatedAt:re()}),new Error(`You missed the 3-hour earning window. Next opportunity in ${C}h ${w}m ${k}s`)}const S=ae(G,"wallets",i.id),A=await Ne(S);if(!A.exists())throw new Error("Wallet not found");const L=A.data();await Ae(S,{balanceWallet:Ut(f),totalEarnings:Ut(f),incomeToday:Ut(f),updatedAt:re()});const O=N+v;return await Ae(l,{earnWindowStartAt:new Date(O),lastEarnAttempt:re(),lastEarnClaimAt:re(),totalEarnings:Ut(f),updatedAt:re()}),await Dn(Pe(G,"transactions"),{userId:i.id,type:"earn",amount:f,status:"completed",userProductId:e,productName:d.productName,transactionId:"EARN_"+Date.now(),createdAt:re()}),{success:!0,data:{amount:f,message:`Successfully earned ${f}`}}}catch(s){throw new Error(s.message||"Failed to earn from product")}}},Ps={getAllMembers:async t=>{try{const e=Pe(G,"users"),r=ot(e,Ze("role","==","consumer"));return{success:!0,data:{members:(await We(r)).docs.map(i=>({id:i.id,...i.data()}))}}}catch(e){throw new Error(e.message||"Failed to fetch members")}},toggleMemberStatus:async(t,e,r)=>{try{const n=ae(G,"users",e);return await Ae(n,{isActive:r,updatedAt:re()}),{success:!0,data:{id:e,isActive:r}}}catch(n){throw new Error(n.message||"Failed to update member status")}},getAllTransactions:async(t,e=100)=>{try{const r=Pe(G,"transactions"),n=ot(r);let i=(await We(n)).docs.map(l=>({id:l.id,...l.data()}));return i.sort((l,u)=>{var f,m,v,x;const d=((m=(f=l.createdAt)==null?void 0:f.toMillis)==null?void 0:m.call(f))||0;return(((x=(v=u.createdAt)==null?void 0:v.toMillis)==null?void 0:x.call(v))||0)-d}),i=i.slice(0,e),{success:!0,data:{transactions:await Promise.all(i.map(async l=>{try{const u=await Ne(ae(G,"users",l.userId)),d=u.exists()?u.data():null;return{...l,userName:(d==null?void 0:d.name)||"Unknown",userPhone:(d==null?void 0:d.phone)||"Unknown"}}catch{return{...l,userName:"Unknown",userPhone:"Unknown"}}}))}}}catch(r){throw new Error(r.message||"Failed to fetch transactions")}},getAllWithdrawals:async t=>{try{const e=Pe(G,"transactions"),r=ot(e,Ze("type","==","withdraw"));let s=(await We(r)).docs.map(a=>({id:a.id,...a.data()}));return s.sort((a,l)=>{var h,f,m,v;const u=((f=(h=a.createdAt)==null?void 0:h.toMillis)==null?void 0:f.call(h))||0;return(((v=(m=l.createdAt)==null?void 0:m.toMillis)==null?void 0:v.call(m))||0)-u}),{success:!0,data:{withdrawals:await Promise.all(s.map(async a=>{try{const l=await Ne(ae(G,"users",a.userId)),u=l.exists()?l.data():null;return{...a,userName:(u==null?void 0:u.name)||"Unknown",userPhone:(u==null?void 0:u.phone)||"Unknown"}}catch{return{...a,userName:"Unknown",userPhone:"Unknown"}}}))}}}catch(e){throw new Error(e.message||"Failed to fetch withdrawals")}},updateWithdrawalStatus:async(t,e,r,n="")=>{try{const s=ae(G,"transactions",e),i=await Ne(s);if(!i.exists())throw new Error("Withdrawal not found");const a=i.data();if(r==="rejected"&&a.status==="pending"){const l=ae(G,"wallets",a.userId);(await Ne(l)).exists()&&await Ae(l,{balanceWallet:Ut(a.amount),totalWithdrawals:Ut(-a.amount),updatedAt:re()})}return r==="approved"&&a.status,await Ae(s,{status:r,adminNote:n,processedAt:re(),updatedAt:re()}),{success:!0,data:{id:e,status:r}}}catch(s){throw new Error(s.message||"Failed to update withdrawal status")}},getAllPendingRecharges:async t=>{try{const e=Pe(G,"transactions"),r=ot(e,Ze("type","==","recharge"),Ze("status","==","pending"));let s=(await We(r)).docs.map(a=>({id:a.id,...a.data()}));return s.sort((a,l)=>{var h,f,m,v;const u=((f=(h=a.createdAt)==null?void 0:h.toMillis)==null?void 0:f.call(h))||0;return(((v=(m=l.createdAt)==null?void 0:m.toMillis)==null?void 0:v.call(m))||0)-u}),{success:!0,data:{recharges:await Promise.all(s.map(async a=>{try{const l=await Ne(ae(G,"users",a.userId)),u=l.exists()?l.data():null;return{...a,userName:(u==null?void 0:u.name)||"Unknown",userPhone:(u==null?void 0:u.phone)||"Unknown"}}catch{return{...a,userName:"Unknown",userPhone:"Unknown"}}}))}}}catch(e){throw new Error(e.message||"Failed to fetch pending recharges")}},updateRechargeStatus:async(t,e,r,n="")=>{try{const s=ae(G,"transactions",e),i=await Ne(s);if(!i.exists())throw new Error("Recharge request not found");const a=i.data();if(a.type!=="recharge")throw new Error("Transaction is not a recharge");if(r==="approved"&&a.status==="pending"){const l=ae(G,"wallets",a.userId),u=await Ne(l),d=typeof a.amount=="number"?a.amount:parseFloat(a.amount)||0;if(isNaN(d)||d<=0)throw new Error("Invalid recharge amount: "+a.amount);u.exists()?await Ae(l,{rechargeWallet:Ut(d),balanceWallet:Ut(d),updatedAt:re()}):await vn(l,{userId:a.userId,rechargeWallet:d,balanceWallet:d,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()})}return await Ae(s,{status:r,adminNote:n,processedAt:re(),updatedAt:re()}),{success:!0,data:{id:e,status:r}}}catch(s){throw new Error(s.message||"Failed to update recharge status")}}},xa={getVIPStatus:async t=>{var e,r;try{const n=localStorage.getItem("user");if(!n)throw new Error("User not found");const s=JSON.parse(n),i=await Ne(ae(G,"users",s.id));if(!i.exists())throw new Error("User not found");const a=i.data(),l=a.totalReferrals||0,u=a.vipLevel||0,d=a.lastWeeklyReward,h=a.lastMonthlyReward,{calculateVIPLevel:f,VIP_REWARDS:m,getVIPLevelName:v,updateVIPLevel:x}=await Xf(()=>import("./vipService-3f63a4c5.js"),[]),y=f(l);if(y!==u)try{await x(s.id)}catch(A){console.error("Error syncing VIP level:",A)}const j=((e=m[y])==null?void 0:e.weekly)||0,N=((r=m[y])==null?void 0:r.monthly)||0;let _=null,S=null;if(d&&y>0){const A=d.toMillis?new Date(d.toMillis()):new Date(d);_=new Date(A.getTime()+7*24*60*60*1e3)}if(h&&y===2){const A=h.toMillis?new Date(h.toMillis()):new Date(h);S=new Date(A.getTime()+30*24*60*60*1e3)}return{success:!0,data:{vipLevel:y,vipLevelName:v(y),referralCount:l,weeklyReward:j,monthlyReward:N,lastWeeklyReward:d?d.toMillis?new Date(d.toMillis()):new Date(d):null,lastMonthlyReward:h?h.toMillis?new Date(h.toMillis()):new Date(h):null,nextWeeklyReward:_,nextMonthlyReward:S}}}catch(n){throw new Error(n.message||"Failed to fetch VIP status")}},claimVIPRewards:async t=>{try{const e=localStorage.getItem("user");if(!e)throw new Error("User not found");const r=JSON.parse(e),{checkAndDistributeVIPRewards:n}=await Xf(()=>import("./vipService-3f63a4c5.js"),[]);return{success:!0,data:await n(r.id)}}catch(e){throw new Error(e.message||"Failed to claim VIP rewards")}}},aN={getSettings:async()=>{try{const t=await Ne(ae(G,"settings","app")),e="+601121222669";if(!t.exists())return{success:!0,data:{bKashNumber:"",bikashQRCodeId:"",totalSystemCurrency:0,currency:"USD",referralBonus:200,supportNumber:e}};const r=t.data();return{success:!0,data:{...r,supportNumber:r.supportNumber||e}}}catch(t){throw new Error(t.message||"Failed to fetch settings")}},updateSettings:async(t,e)=>{try{return await vn(ae(G,"settings","app"),{...e,updatedAt:re()},{merge:!0}),{success:!0,data:e}}catch(r){throw new Error(r.message||"Failed to update settings")}}},Nc=Mr("auth/login",async({identifier:t,password:e,loginType:r="phone"},{rejectWithValue:n})=>{try{const s=await vl.login(t,e,r);return s.success?(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),s.data):n("Login failed")}catch(s){return n(s.message||"Login failed")}}),Ec=Mr("auth/register",async({name:t,phone:e,password:r,nid:n,passport:s=null,referralCode:i=null},{rejectWithValue:a})=>{try{const l=await vl.register(t,e,r,n,s,i);return l.success?(localStorage.setItem("token",l.data.token),localStorage.setItem("user",JSON.stringify(l.data.user)),l.data):a("Registration failed")}catch(l){return a(l.message||"Registration failed")}}),Hs=Mr("auth/logout",async(t,{rejectWithValue:e})=>{try{return localStorage.removeItem("token"),localStorage.removeItem("user"),await vl.logout(),{success:!0}}catch{return localStorage.removeItem("token"),localStorage.removeItem("user"),{success:!0}}}),Sc=Mr("auth/verifyIdentity",async({idType:t,idNumber:e},{rejectWithValue:r})=>{try{const n=await vl.verifyIdentity(t,e);return n.success?n.data:r("Identity verification failed")}catch(n){return r(n.message||"Identity verification failed")}}),jc=Mr("auth/resetPassword",async({userId:t,newPassword:e},{rejectWithValue:r})=>{try{const n=await vl.resetPassword(t,e);return n.success?n:r("Password reset failed")}catch(n){return r(n.message||"Password reset failed")}}),c6=()=>{const t=localStorage.getItem("token"),e=localStorage.getItem("user"),r=e?JSON.parse(e):null;return{token:t||null,user:r||null,isAuthenticated:!!t,loading:!1,error:null}},lN=dd({name:"auth",initialState:c6(),reducers:{clearError:t=>{t.error=null},setCredentials:(t,e)=>{t.token=e.payload.token,t.user=e.payload.user,t.isAuthenticated=!0},updateUserStatus:(t,e)=>{t.user&&(t.user={...t.user,...e.payload},localStorage.setItem("user",JSON.stringify(t.user)))}},extraReducers:t=>{t.addCase(Nc.pending,e=>{e.loading=!0,e.error=null}).addCase(Nc.fulfilled,(e,r)=>{e.loading=!1,e.token=r.payload.token,e.user=r.payload.user,e.isAuthenticated=!0,e.error=null}).addCase(Nc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload,e.isAuthenticated=!1}),t.addCase(Ec.pending,e=>{e.loading=!0,e.error=null}).addCase(Ec.fulfilled,(e,r)=>{e.loading=!1,e.token=r.payload.token,e.user=r.payload.user,e.isAuthenticated=!0,e.error=null}).addCase(Ec.rejected,(e,r)=>{e.loading=!1,e.error=r.payload,e.isAuthenticated=!1}),t.addCase(Hs.pending,e=>{e.loading=!0}).addCase(Hs.fulfilled,e=>{e.loading=!1,e.token=null,e.user=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("user")}).addCase(Hs.rejected,e=>{e.loading=!1,e.token=null,e.user=null,e.isAuthenticated=!1,e.error=null,localStorage.removeItem("token"),localStorage.removeItem("user")}),t.addCase(Sc.pending,e=>{e.loading=!0,e.error=null}).addCase(Sc.fulfilled,(e,r)=>{e.loading=!1,e.error=null}).addCase(Sc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(jc.pending,e=>{e.loading=!0,e.error=null}).addCase(jc.fulfilled,e=>{e.loading=!1,e.error=null}).addCase(jc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),{clearError:qn,setCredentials:u5,updateUserStatus:P0}=lN.actions,u6=lN.reducer,d6=[{label:"Home",path:"/",icon:f6},{label:"Product",path:"/product",icon:m6},{label:"Prize",path:"/prize",icon:p6},{label:"Me",path:"/user",icon:g6}];function h6({currentPath:t}){return o.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-sm z-50",children:o.jsx("ul",{className:"flex justify-around text-xs",children:d6.map(e=>{const r=t===e.path||e.path!=="/"&&t.startsWith(e.path);return o.jsx("li",{className:"flex-1",children:o.jsxs(rs,{to:e.path,className:"flex flex-col items-center py-2 "+(r?"text-primary font-medium":"text-gray-500 hover:text-primary"),children:[o.jsx(e.icon,{active:r}),o.jsx("span",{className:"mt-1 text-[10px] capitalize",children:e.label})]})},e.path)})})})}function f6({active:t}){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 10l9-7 9 7v10a1 1 0 01-1 1h-5a1 1 0 01-1-1V14H9v6a1 1 0 01-1 1H3a1 1 0 01-1-1V10z"})})}function m6({active:t}){return o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20 12H4"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v16"})]})}function p6({active:t}){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v13M5 8v13m14-13v13M3 8h18M4 4h16l-2 4H6L4 4z"})})}function g6({active:t}){return o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 14a4 4 0 01-8 0M12 8a4 4 0 110-8 4 4 0 010 8zM8 14h8"})})}const y6=()=>{const t=Dr();return o.jsxs("div",{className:"min-h-screen flex flex-col bg-gray-50",children:[o.jsxs("header",{className:"bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white py-4 px-4 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-30",children:[o.jsx("div",{className:"absolute top-2 left-4 w-1 h-1 bg-white rounded-full"}),o.jsx("div",{className:"absolute top-6 left-12 w-1 h-1 bg-white rounded-full"}),o.jsx("div",{className:"absolute top-4 left-20 w-1 h-1 bg-white rounded-full"}),o.jsx("div",{className:"absolute top-8 left-32 w-1 h-1 bg-white rounded-full"}),o.jsx("div",{className:"absolute top-3 left-48 w-1 h-1 bg-white rounded-full"}),o.jsx("div",{className:"absolute top-7 left-64 w-1 h-1 bg-white rounded-full"}),o.jsx("div",{className:"absolute top-5 left-80 w-1 h-1 bg-white rounded-full"})]}),o.jsx("div",{className:"relative z-10 text-center",children:o.jsx("h1",{className:"text-2xl font-bold tracking-wider",children:"ADDI"})})]}),o.jsx("main",{className:"flex-1 overflow-y-auto pb-16",children:o.jsx(rT,{})}),o.jsx(h6,{currentPath:t.pathname})]})},dr=({children:t})=>{const{isAuthenticated:e,user:r}=$e(l=>l.auth),n=Dr(),s=en(),[i,a]=R.useState(!1);return R.useEffect(()=>{(async()=>{if(e&&(r!=null&&r.id)&&(r==null?void 0:r.role)!=="admin"&&!(r!=null&&r.isActive))try{a(!0);const u=await Ne(ae(G,"users",r.id));if(u.exists()){const d=u.data();(d.isActive!==void 0?d.isActive:!1)&&!r.isActive&&s(P0({isActive:!0}))}}catch(u){console.error("Error verifying account status:",u)}finally{a(!1)}})()},[e,r,s]),e?i?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),o.jsx("p",{className:"text-gray-600",children:"Verifying account status..."})]})}):(r==null?void 0:r.role)!=="admin"&&!(r!=null&&r.isActive)?o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:o.jsxs("div",{className:"text-center p-6 bg-white rounded-lg shadow-lg max-w-md",children:[o.jsx("div",{className:"text-red-500 mb-4",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Account Not Activated"}),o.jsx("p",{className:"text-gray-600 mb-4",children:"Your account is pending activation by an administrator. Please contact support."})]})}):t:o.jsx(ru,{to:"/login",state:{from:n},replace:!0})},v6=({images:t=[],interval:e=5e3})=>{const[r,n]=R.useState(0);return R.useEffect(()=>{if(t.length<=1)return;const s=setInterval(()=>{n(i=>(i+1)%t.length)},e);return()=>clearInterval(s)},[t,e]),o.jsxs("div",{className:"relative w-full overflow-hidden h-52 md:h-80 rounded-b-3xl shadow-2xl",children:[t.map((s,i)=>o.jsx("div",{className:`absolute inset-0 transition-opacity duration-1000 ease-in-out ${r===i?"opacity-100 z-10":"opacity-0 z-0"}`,children:o.jsx("img",{src:s,alt:`Slide ${i+1}`,className:"w-full h-full object-cover"})},i)),t.length>1&&o.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-20 flex gap-2",children:t.map((s,i)=>o.jsx("button",{onClick:()=>n(i),className:`transition-all duration-300 rounded-full ${r===i?"w-8 h-2 bg-white shadow-lg":"w-2 h-2 bg-white/60 hover:bg-white/80"}`,"aria-label":`Go to slide ${i+1}`},i))})]})},cN=R.createContext(),Gh="+601121222669",ur=()=>{const t=R.useContext(cN);if(!t)throw new Error("useSettings must be used within a SettingsProvider");return t},x6=({children:t})=>{const[e,r]=R.useState({bKashNumber:"",bikashQRCodeId:"",totalSystemCurrency:0,currency:"USD",referralBonus:200,supportNumber:Gh}),[n,s]=R.useState(!0),i=async()=>{try{s(!0);const a=await aN.getSettings();a.success&&r({bKashNumber:a.data.bKashNumber||"",bikashQRCodeId:a.data.bikashQRCodeId||"",totalSystemCurrency:a.data.totalSystemCurrency||0,currency:a.data.currency||"USD",referralBonus:a.data.referralBonus||200,supportNumber:a.data.supportNumber||Gh})}catch(a){console.error("Failed to load settings:",a),r({bKashNumber:"",bikashQRCodeId:"",totalSystemCurrency:0,currency:"USD",referralBonus:200,supportNumber:Gh})}finally{s(!1)}};return R.useEffect(()=>{i()},[]),o.jsx(cN.Provider,{value:{settings:e,loadSettings:i,loading:n},children:t})},mr=t=>({USD:"$",BDT:"",MYR:"RM"})[t]||"$",q=(t,e="USD")=>((t==null||isNaN(t))&&(t=0),`${mr(e)}${parseFloat(t).toFixed(2)}`),w6=()=>{const t=Xt(),{settings:e}=ur(),{user:r}=$e(y=>y.auth),[n,s]=R.useState(!1),[i,a]=R.useState(!1),[l,u]=R.useState(null),[d,h]=R.useState(!1);R.useEffect(()=>{r&&(m(),f())},[r]);const f=async()=>{if(r!=null&&r.id)try{h(!0);const y=await xa.getVIPStatus(null);if(y.success){u(y.data);try{await xa.claimVIPRewards(null)}catch{}}}catch(y){console.error("Failed to fetch VIP status:",y)}finally{h(!1)}},m=async()=>{var y,j;try{a(!0);const N=await Xr.getUserProducts(null);if(N.success){const _=(((y=N.data.unexpired)==null?void 0:y.length)||0)+(((j=N.data.expired)==null?void 0:j.length)||0);s(_>0)}}catch(N){console.error("Failed to check user purchases:",N),s(!1)}finally{a(!1)}},v=["https://images.unsplash.com/photo-1529626455594-4ff0802cfb7e?auto=format&fit=crop&w=700&q=80","https://images.pexels.com/photos/5665384/pexels-photo-5665384.jpeg","https://images.pexels.com/photos/27919253/pexels-photo-27919253.jpeg","https://images.pexels.com/photos/27919272/pexels-photo-27919272.jpeg","https://images.pexels.com/photos/27992044/pexels-photo-27992044.jpeg","https://images.pexels.com/photos/18108801/pexels-photo-18108801.jpeg","https://images.pexels.com/photos/27603695/pexels-photo-27603695.jpeg","https://images.pexels.com/photos/14409995/pexels-photo-14409995.jpeg","https://images.pexels.com/photos/27523254/pexels-photo-27523254.jpeg","https://images.pexels.com/photos/27523299/pexels-photo-27523299.jpeg","https://images.pexels.com/photos/27661934/pexels-photo-27661934.jpeg","https://images.pexels.com/photos/27603571/pexels-photo-27603571.jpeg"],x=[{label:"My product",onClick:()=>t("/my-product"),icon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 11V7a4 4 0 10-8 0v4M12 14v5m-3 0h6"})})},{label:"Invitation",onClick:()=>t("/invitation"),icon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c2.28 0 4-1.79 4-4s-1.72-4-4-4-4 1.79-4 4 1.72 4 4 4zM6 21v-2a4 4 0 014-4h0a4 4 0 014 4v2"})})},{label:"My teams",onClick:()=>t("/my-teams"),icon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5V9H2v11h5M12 13.01V13"})})},{label:"Online",onClick:()=>t("/online"),icon:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 12.79A9 9 0 1111.21 3H21z"})})}];return o.jsxs("div",{className:"flex flex-col gap-6 pb-6 bg-gradient-to-b from-gray-50 to-white min-h-screen",children:[o.jsxs("div",{className:"relative -mt-4",children:[o.jsx(v6,{images:v}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 via-black/10 to-transparent pointer-events-none"}),o.jsx("div",{className:"absolute top-4 right-4 z-20 bg-white/95 backdrop-blur-md rounded-full px-4 py-2 shadow-xl border border-white/50",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),o.jsx("span",{className:"text-xs font-semibold text-gray-800",children:"Live Now"})]})})]}),l&&o.jsx("div",{className:"mx-4 relative",children:l.vipLevel>0?o.jsxs("div",{className:"bg-gradient-to-br from-purple-600 via-pink-600 to-orange-600 rounded-3xl p-6 shadow-2xl text-white transform hover:scale-[1.02] transition-all duration-300 border-2 border-yellow-300 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-20",children:[o.jsx("div",{className:"absolute top-4 left-4 w-20 h-20 border-3 border-white rounded-full animate-pulse"}),o.jsx("div",{className:"absolute bottom-4 right-4 w-16 h-16 border-3 border-white rounded-full animate-pulse delay-500"}),o.jsx("div",{className:"absolute top-1/2 left-1/3 w-12 h-12 border-2 border-white rounded-full animate-pulse delay-700"})]}),o.jsx("div",{className:"absolute top-3 right-6 text-2xl animate-bounce",children:""}),o.jsx("div",{className:"absolute bottom-6 left-8 text-xl animate-bounce delay-500",children:""}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-4xl animate-pulse",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-black mb-1",children:l.vipLevelName}),o.jsx("div",{className:"text-sm text-white/90",children:"Exclusive VIP Member"})]})]}),o.jsx("div",{className:"text-5xl opacity-30",children:l.vipLevel===2?"":""})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-4",children:[o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-3 border border-white/30",children:[o.jsx("div",{className:"text-xs text-white/80 mb-1",children:"Referrals"}),o.jsx("div",{className:"text-2xl font-black",children:l.referralCount}),o.jsx("div",{className:"text-xs text-yellow-200 mt-1",children:l.vipLevel===2?"VIP 2 Unlocked!":`${20-l.referralCount} to VIP 2`})]}),o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-3 border border-white/30",children:[o.jsx("div",{className:"text-xs text-white/80 mb-1",children:"Weekly Reward"}),o.jsx("div",{className:"text-xl font-black",children:q(l.weeklyReward,e.currency)}),l.nextWeeklyReward&&o.jsxs("div",{className:"text-xs text-yellow-200 mt-1",children:["Next: ",new Date(l.nextWeeklyReward).toLocaleDateString()]})]})]}),o.jsxs("div",{className:"bg-white/25 backdrop-blur-md rounded-xl p-4 border border-white/30 mb-3",children:[o.jsx("div",{className:"text-xs font-bold text-yellow-200 mb-2",children:"VIP Benefits"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{children:""})," Weekly Reward"]}),o.jsx("span",{className:"font-bold",children:q(l.weeklyReward,e.currency)})]}),l.monthlyReward>0&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("span",{className:"flex items-center gap-2",children:[o.jsx("span",{children:""})," Monthly Reward"]}),o.jsx("span",{className:"font-bold",children:q(l.monthlyReward,e.currency)})]}),l.nextMonthlyReward&&o.jsxs("div",{className:"text-xs text-white/80 pt-1 border-t border-white/20",children:["Next Monthly: ",new Date(l.nextMonthlyReward).toLocaleDateString()]})]})]})]}),l.vipLevel===1&&o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-3 border border-white/30",children:[o.jsxs("div",{className:"flex items-center justify-between text-xs mb-2",children:[o.jsx("span",{className:"text-white/90",children:"Progress to VIP 2"}),o.jsxs("span",{className:"font-bold text-yellow-200",children:[l.referralCount," / 20"]})]}),o.jsx("div",{className:"w-full bg-white/20 rounded-full h-2",children:o.jsx("div",{className:"bg-gradient-to-r from-yellow-300 to-yellow-500 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(l.referralCount/20*100,100)}%`}})})]})]})]}):o.jsxs("div",{className:"bg-gradient-to-br from-gray-700 via-gray-800 to-gray-900 rounded-3xl p-6 shadow-2xl text-white border-2 border-gray-600 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-10",children:[o.jsx("div",{className:"absolute top-4 right-4 w-16 h-16 border-2 border-white rounded-full"}),o.jsx("div",{className:"absolute bottom-4 left-4 w-12 h-12 border-2 border-white rounded-full"})]}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-4xl",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-black mb-1",children:"Regular Member"}),o.jsx("div",{className:"text-sm text-white/80",children:"Become a VIP Member"})]})]}),o.jsx("div",{className:"text-5xl opacity-30",children:""})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20 mb-3",children:[o.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[o.jsx("span",{className:"text-white/90 font-semibold",children:"Progress to VIP 1"}),o.jsxs("span",{className:"font-black text-yellow-300",children:[l.referralCount," / 5"]})]}),o.jsx("div",{className:"w-full bg-white/20 rounded-full h-3 mb-2",children:o.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-500",style:{width:`${Math.min(l.referralCount/5*100,100)}%`}})}),o.jsxs("div",{className:"text-xs text-white/70",children:[5-l.referralCount," more ",l.referralCount===4?"referral":"referrals"," needed for VIP 1"]})]}),o.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl p-4 border border-white/20",children:[o.jsx("div",{className:"text-xs font-bold text-yellow-300 mb-2",children:"VIP 1 Benefits"}),o.jsxs("div",{className:"space-y-1.5 text-xs",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["Weekly reward: ",q(50,e.currency)]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{children:""}),o.jsx("span",{children:"Exclusive VIP status"})]}),o.jsxs("div",{className:"flex items-center gap-2 text-white/70",children:[o.jsx("span",{children:""}),o.jsxs("span",{children:["VIP 2: ",q(50,e.currency)," weekly + ",q(2e3,e.currency)," monthly"]})]})]}),o.jsx("button",{onClick:()=>t("/invitation"),className:"mt-3 w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white font-bold py-2.5 rounded-xl transition-all transform hover:scale-105 text-sm",children:"Invite Friends to Unlock VIP"})]})]})]})}),o.jsx("div",{className:"mx-4 relative",children:o.jsxs("div",{className:"bg-gradient-to-r from-white via-white/95 to-white backdrop-blur-xl rounded-2xl p-5 shadow-2xl border border-white/50 overflow-hidden relative",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-primary/5 via-accent/5 to-primary/5 opacity-50"}),o.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-primary via-accent to-primary"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[o.jsx("div",{className:"flex-shrink-0 bg-gradient-to-br from-primary to-accent p-2 rounded-xl shadow-lg",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5.882V19.24a1.76 1.76 0 01-3.417.592l-2.147-6.15M18 13a3 3 0 100-6M5.436 13.683A4.001 4.001 0 017 6h1.832c4.1 0 7.625-1.234 9.168-3v14c-1.543-1.766-5.067-3-9.168-3H7a3.988 3.988 0 01-1.564-.317z"})})}),o.jsx("h2",{className:"text-base font-bold text-gray-800 tracking-tight",children:"Latest News"}),o.jsx("div",{className:"ml-auto bg-primary/10 text-primary text-xs font-bold px-2 py-1 rounded-full",children:"NEW"})]}),o.jsx("div",{className:"relative overflow-hidden",children:o.jsx("div",{className:"animate-marquee text-sm text-gray-700 leading-relaxed font-medium",children:"Welcome to ADDI! Today we gather to celebrate the fusion of fashion and beauty. As a luxury brand with a long history, ADDI remains committed to innovation and elegance."})})]})]})}),o.jsxs("div",{className:"mx-4 grid grid-cols-2 gap-4",children:[o.jsxs("button",{onClick:()=>t("/recharge"),className:"group relative flex items-center justify-center gap-3 py-5 bg-gradient-to-br from-primary via-primary to-accent rounded-2xl shadow-2xl hover:shadow-primary/50 transform hover:scale-[1.03] hover:-translate-y-1 transition-all duration-300 text-white font-semibold overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),o.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[o.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-xl group-hover:rotate-180 transition-transform duration-500",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m0 0-3-3h-3"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})]})}),o.jsx("span",{className:"text-base tracking-wide",children:"Recharge"})]}),o.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-white/10 rounded-bl-full"})]}),o.jsxs("button",{onClick:()=>t("/withdraw"),className:"group relative flex items-center justify-center gap-3 py-5 bg-gradient-to-br from-blue-500 via-blue-600 to-indigo-600 rounded-2xl shadow-2xl hover:shadow-blue-500/50 transform hover:scale-[1.03] hover:-translate-y-1 transition-all duration-300 text-white font-semibold overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"}),o.jsxs("div",{className:"relative z-10 flex items-center gap-3",children:[o.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-2 rounded-xl group-hover:rotate-180 transition-transform duration-500",children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:[o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 16V12l-3-3m0 0 3 3h3"}),o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 12h14"})]})}),o.jsx("span",{className:"text-base tracking-wide",children:"Withdraw"})]}),o.jsx("div",{className:"absolute top-0 right-0 w-16 h-16 bg-white/10 rounded-bl-full"})]})]}),o.jsx("div",{className:"mx-4 relative group",children:o.jsxs("div",{className:"bg-gradient-to-br from-amber-400 via-orange-400 to-pink-400 rounded-3xl p-6 text-white shadow-2xl relative overflow-hidden transform hover:scale-[1.02] transition-all duration-500 border-2 border-white/30",children:[o.jsxs("div",{className:"absolute inset-0 opacity-20",children:[o.jsx("div",{className:"absolute top-4 left-4 w-20 h-20 border-3 border-white rounded-full animate-pulse"}),o.jsx("div",{className:"absolute bottom-4 right-4 w-16 h-16 border-3 border-white rounded-full animate-pulse delay-300"}),o.jsx("div",{className:"absolute top-1/2 left-1/4 w-12 h-12 border-3 border-white rounded-full animate-pulse delay-700"}),o.jsx("div",{className:"absolute top-1/3 right-1/3 w-8 h-8 border-2 border-white rounded-full animate-pulse delay-1000"})]}),o.jsx("div",{className:"absolute top-2 right-8 text-2xl animate-bounce",children:""}),o.jsx("div",{className:"absolute bottom-8 left-12 text-xl animate-bounce delay-500",children:""}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex justify-between items-center mb-5",children:[o.jsxs("h3",{className:"font-black text-xl tracking-wide flex items-center gap-3",children:[o.jsx("span",{className:"text-3xl animate-bounce",children:""}),o.jsx("span",{className:"bg-white/20 backdrop-blur-sm px-3 py-1 rounded-full text-sm",children:"Smash Golden Egg"})]}),o.jsx("button",{onClick:()=>alert("Rules: Smashing eggs is for fun only!"),className:"bg-white/20 backdrop-blur-sm hover:bg-white/30 px-3 py-1.5 rounded-lg text-xs font-bold transition-all transform hover:scale-110",children:"Rules"})]}),o.jsx("div",{className:"flex justify-around mb-5",children:Array.from({length:3}).map((y,j)=>o.jsx("div",{className:"transform hover:scale-125 transition-all duration-300 cursor-pointer group/egg",children:o.jsxs("div",{className:"relative",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-14 w-14 filter drop-shadow-2xl group-hover/egg:drop-shadow-[0_0_20px_rgba(255,255,255,0.8)] transition-all",fill:"currentColor",viewBox:"0 0 24 24",stroke:"none",children:o.jsx("path",{d:"M12 2C7.031 2 3 7.03 3 12s4.031 10 9 10 9-5.03 9-10S16.969 2 12 2zm0 18c-4.411 0-8-4.037-8-8s3.589-8 8-8 8 4.037 8 8-3.589 8-8 8z"})}),o.jsx("div",{className:"absolute inset-0 bg-white/30 rounded-full blur-xl opacity-0 group-hover/egg:opacity-100 transition-opacity"})]})},j))}),o.jsxs("div",{className:"text-center bg-white/25 backdrop-blur-md rounded-2xl p-4 border border-white/30 shadow-inner",children:[o.jsxs("p",{className:"text-sm mb-2 font-bold",children:["Remaining amount: ",o.jsx("span",{className:"text-3xl font-black text-yellow-100 drop-shadow-lg",children:"0"})]}),o.jsxs("p",{className:"text-xs leading-relaxed font-semibold opacity-95",children:["Participate in the Golden Egg Smash to Win ",q(1e5,e.currency)," Grand Prize"]})]})]})]})}),o.jsxs("div",{className:"mx-4 bg-white/80 backdrop-blur-xl rounded-3xl p-6 shadow-2xl border border-gray-100/50 relative overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-primary via-accent to-primary"}),o.jsxs("h3",{className:"text-xl font-black text-gray-800 mb-5 flex items-center gap-3",children:[o.jsx("div",{className:"bg-gradient-to-br from-primary to-accent p-2 rounded-xl shadow-lg",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2V6zM14 6a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2V6zM4 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2H6a2 2 0 01-2-2v-2zM14 16a2 2 0 012-2h2a2 2 0 012 2v2a2 2 0 01-2 2h-2a2 2 0 01-2-2v-2z"})})}),o.jsx("span",{className:"bg-gradient-to-r from-gray-800 to-gray-600 bg-clip-text text-transparent",children:"Quick Access"})]}),o.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-4",children:x.map((y,j)=>o.jsxs("button",{onClick:y.onClick,className:"group relative flex flex-col items-center justify-center gap-3 p-4 rounded-2xl text-sm text-gray-700 bg-gradient-to-br from-white to-gray-50 hover:from-primary/10 hover:to-accent/10 hover:text-primary focus:outline-none transform hover:scale-110 hover:-translate-y-1 transition-all duration-300 border-2 border-gray-100 hover:border-primary/40 shadow-md hover:shadow-xl overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-primary/5 to-accent/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),o.jsx("div",{className:"relative z-10 bg-gradient-to-br from-primary/10 to-accent/10 p-3 rounded-xl group-hover:from-primary/20 group-hover:to-accent/20 transition-all transform group-hover:scale-125 group-hover:rotate-6 duration-300",children:o.jsx("span",{className:"text-primary transform transition-transform duration-300 filter drop-shadow-lg",children:y.icon})}),o.jsx("span",{className:"relative z-10 font-bold group-hover:font-black transition-all text-xs sm:text-sm",children:y.label}),o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-accent transform scale-x-0 group-hover:scale-x-100 transition-transform duration-300"})]},j))})]})]})},tr=Mr("wallet/fetchWallet",async(t,{rejectWithValue:e,getState:r})=>{try{const n=r().auth.token;if(!n)return e("No authentication token");const s=await A0.getWallet(n);return s.success?s.data:e("Failed to fetch wallet")}catch(n){return e(n.message||"Failed to fetch wallet")}}),Tc=Mr("wallet/recharge",async(t,{rejectWithValue:e,getState:r})=>{try{const n=r().auth.token;if(!n)return e("No authentication token");const s=typeof t=="number"?t:t.amount,i=typeof t=="object"?t.proofImageUrl:"",a=await A0.recharge(n,s,i);return a.success?{transactionId:a.data.transactionId,status:a.data.status,message:a.data.message}:e("Recharge failed")}catch(n){return e(n.message||"Recharge failed")}}),Ic=Mr("wallet/withdraw",async(t,{rejectWithValue:e,getState:r})=>{try{const n=r().auth.token;if(!n)return e("No authentication token");const s=typeof t=="number"?t:t.amount,i=typeof t=="object"?t.paymentMethod:void 0,a=typeof t=="object"?{name:t.name,number:t.number}:void 0,l=typeof t=="object"?t.vatTax:void 0,u=typeof t=="object"?t.netAmount:void 0,d=await A0.withdraw(n,s,i,a,l,u);return d.success?{amount:s,newBalance:d.data.newBalance}:e("Withdrawal failed")}catch(n){return e(n.message||"Withdrawal failed")}}),b6={rechargeWallet:0,balanceWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,loading:!1,error:null},_6=dd({name:"wallet",initialState:b6,reducers:{setWallet(t,e){return{...t,...e.payload}},updateBalance(t,e){t.balanceWallet+=e.payload.amount},addEarnings(t,e){const{amount:r}=e.payload;t.totalEarnings+=r,t.incomeToday+=r},addWithdrawal(t,e){const{amount:r}=e.payload;t.totalWithdrawals+=r,t.balanceWallet-=r},clearError(t){t.error=null}},extraReducers:t=>{t.addCase(tr.pending,e=>{e.loading=!0,e.error=null}).addCase(tr.fulfilled,(e,r)=>{e.loading=!1,r.payload&&(e.rechargeWallet=r.payload.rechargeWallet??0,e.balanceWallet=r.payload.balanceWallet??0,e.totalEarnings=r.payload.totalEarnings??0,e.totalWithdrawals=r.payload.totalWithdrawals??0,e.incomeToday=r.payload.incomeToday??0,e.incomeYesterday=r.payload.incomeYesterday??0,e.lossToday=r.payload.lossToday??0,e.lossTotal=r.payload.lossTotal??0),e.error=null}).addCase(tr.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Tc.pending,e=>{e.loading=!0,e.error=null}).addCase(Tc.fulfilled,(e,r)=>{e.loading=!1,e.error=null}).addCase(Tc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Ic.pending,e=>{e.loading=!0,e.error=null}).addCase(Ic.fulfilled,(e,r)=>{e.loading=!1,e.totalWithdrawals+=r.payload.amount,e.balanceWallet=r.payload.newBalance,e.error=null}).addCase(Ic.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),N6=_6.reducer,wa=Mr("user/fetchProfile",async(t,{rejectWithValue:e,getState:r})=>{try{const n=r().auth.token;if(!n)return e("No authentication token");const s=await Rd.getUserProfile(n);return s.success?s.data:e("Failed to fetch profile")}catch(n){return e(n.message||"Failed to fetch profile")}}),Kh=Mr("user/updateProfile",async(t,{rejectWithValue:e,getState:r})=>{try{const n=r().auth.token;if(!n)return e("No authentication token");const s=await Rd.updateProfile(n,t);return s.success?s.data:e("Failed to update profile")}catch(n){return e(n.message||"Failed to update profile")}}),E6={id:"368041",phone:"6017****4706",name:"Guest User",loading:!1,error:null},S6=dd({name:"user",initialState:E6,reducers:{updateUser(t,e){return{...t,...e.payload}},clearError(t){t.error=null}},extraReducers:t=>{t.addCase(wa.pending,e=>{e.loading=!0,e.error=null}).addCase(wa.fulfilled,(e,r)=>{e.loading=!1,e.id=r.payload.id,e.phone=r.payload.phone,e.name=r.payload.name,e.isActive=r.payload.isActive!==void 0?r.payload.isActive:!1,e.error=null}).addCase(wa.rejected,(e,r)=>{e.loading=!1,e.error=r.payload}),t.addCase(Kh.pending,e=>{e.loading=!0,e.error=null}).addCase(Kh.fulfilled,(e,r)=>(e.loading=!1,{...e,...r.payload,error:null})).addCase(Kh.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),j6=S6.reducer,T6=()=>{const t=en(),{user:e}=$e(y=>y.auth),r=$e(y=>y.wallet),{settings:n}=ur(),[s,i]=R.useState([]),[a,l]=R.useState(!0),[u,d]=R.useState(null),[h,f]=R.useState({}),m=y=>{var N,_,S;const j=Number(y==null?void 0:y.validityDays);if(!Number.isNaN(j)&&j>0)return Math.floor(j);if(y!=null&&y.validateDate){const A=new Date,L=(N=y.validateDate)!=null&&N.toDate?y.validateDate.toDate():(_=y.validateDate)!=null&&_.toMillis?new Date(y.validateDate.toMillis()):new Date(y.validateDate);if(!Number.isNaN((S=L==null?void 0:L.getTime)==null?void 0:S.call(L)))return Math.max(0,Math.ceil((L-A)/864e5))}return null};R.useEffect(()=>{v(),e&&t(tr())},[e,t]),R.useEffect(()=>{const y=()=>{document.visibilityState==="visible"&&e&&t(tr())};return document.addEventListener("visibilitychange",y),()=>document.removeEventListener("visibilitychange",y)},[e,t]);const v=async()=>{try{l(!0),d(null);const y=await Xr.getProducts();if(y.success){const j=y.data.products.filter(N=>!N.deleted);i(j)}}catch(y){d(y.message||"Failed to load products"),console.error("Error loading products:",y)}finally{l(!1)}},x=async y=>{if(!e){alert("Please login to purchase products");return}if(confirm("Are you sure you want to purchase this product?"))try{f(N=>({...N,[y]:!0}));const j=await Xr.purchaseProduct(null,y);j.success&&(j.data.accountActivated?(alert("Product purchased successfully! Your account has been activated."),t(P0({isActive:!0})),await t(wa()).unwrap()):alert("Product purchased successfully!"),v(),t(tr()))}catch(j){alert(j.message||"Failed to purchase product"),console.error("Purchase error:",j)}finally{f(j=>({...j,[y]:!1}))}};return a?o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),o.jsx("p",{className:"text-gray-600 font-medium",children:"Loading exclusive products..."})]})}):u?o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Products"}),o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:u}),o.jsx("button",{onClick:v,className:"px-4 py-2 bg-primary text-white rounded-md hover:bg-primary/90",children:"Retry"})]}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50",children:[o.jsx("div",{className:"bg-gradient-to-r from-primary via-accent to-primary text-white py-6 px-4 shadow-lg",children:o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-wide",children:"Exclusive Collection"}),o.jsx("p",{className:"text-sm text-white/90 mt-1",children:"Premium Products"})]}),e&&o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl px-4 py-2 border border-white/30",children:[o.jsx("div",{className:"text-xs text-white/80",children:"Wallet Balance"}),o.jsx("div",{className:"text-lg font-bold",children:q(r.rechargeWallet||0,n.currency)})]})]})}),o.jsx("div",{className:"p-4 pb-20",children:s.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-100 rounded-full mb-4",children:o.jsx("svg",{className:"h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),o.jsx("p",{className:"text-gray-500 text-lg",children:"No products available"}),o.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Check back later for exclusive offers"})]}):o.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6",children:s.map(y=>{const j=m(y);return o.jsxs("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden flex flex-col transform hover:-translate-y-1 border border-gray-100",children:[o.jsxs("div",{className:"relative h-48 w-full bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden",children:[y.imageUrl?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:y.imageUrl,alt:y.name,className:"h-full w-full object-cover group-hover:scale-110 transition-transform duration-500"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}):o.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gradient-to-br from-primary/10 to-accent/10",children:o.jsx("svg",{className:"h-16 w-16 text-primary/30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o.jsx("div",{className:"absolute top-3 right-3",children:o.jsx("div",{className:"bg-gradient-to-r from-primary to-accent text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg",children:"EXCLUSIVE"})})]}),o.jsxs("div",{className:"p-4 flex-1 flex flex-col justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"text-base font-bold text-gray-900 mb-2 line-clamp-1",children:y.name}),y.description&&o.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2 leading-relaxed",children:y.description}),o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsxs("span",{className:"text-2xl text-gray-500",children:["Price: ",mr(n.currency)]}),o.jsx("span",{className:"text-2xl font-bold text-primary",children:q(y.price||0,n.currency).replace(mr(n.currency),"")})]})}),j!==null&&o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsx("span",{className:"text-2xl text-gray-500",children:"Validity:"}),o.jsxs("span",{className:"text-2xl font-bold text-primary",children:[j," days"]})]})}),y.earnAmount>0&&o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsxs("span",{className:"text-2xl text-gray-500",children:["Daily Earn: ",mr(n.currency)]}),o.jsx("span",{className:"text-2xl font-bold text-primary",children:q(y.earnAmount||0,n.currency).replace(mr(n.currency),"")})]})}),y.totalEarning>0&&o.jsx("div",{className:"mb-4",children:o.jsxs("div",{className:"flex items-baseline gap-1",children:[o.jsxs("span",{className:"text-2xl text-gray-500",children:["Total Earning: ",mr(n.currency)]}),o.jsx("span",{className:"text-2xl font-bold text-primary",children:q(y.totalEarning||0,n.currency).replace(mr(n.currency),"")})]})})]}),o.jsx("button",{onClick:()=>x(y.id),disabled:h[y.id]||(r.rechargeWallet||0)<(y.price||0),className:"w-full bg-gradient-to-r from-primary to-accent text-white font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-md flex items-center justify-center gap-2 group/btn",children:h[y.id]?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{children:"Processing..."})]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"h-5 w-5 group-hover/btn:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),o.jsx("span",{children:"Purchase Now"})]})}),e&&(r.rechargeWallet||0)<(y.price||0)&&!h[y.id]&&o.jsx("p",{className:"text-xs text-red-500 text-center mt-2",children:"Insufficient balance"})]})]},y.id)})})})]})},I6=()=>{const{settings:t}=ur(),e=[{id:1,date:"2026-01-01",description:"Purchase ABC",amount:100,cashback:10},{id:2,date:"2026-01-05",description:"Purchase XYZ",amount:50,cashback:5}],r=e.reduce((n,s)=>n+s.cashback,0);return o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"Cashback"}),o.jsx("p",{className:"text-sm text-gray-700",children:"Earn cashback on every purchase. Your cashback will be added to your balance wallet automatically."}),o.jsxs("div",{className:"bg-white rounded-lg shadow-md p-4",children:[o.jsx("h2",{className:"font-medium mb-2",children:"Cashback Transactions"}),o.jsxs("table",{className:"w-full text-sm",children:[o.jsx("thead",{children:o.jsxs("tr",{className:"text-left border-b",children:[o.jsx("th",{className:"py-1",children:"Date"}),o.jsx("th",{className:"py-1",children:"Description"}),o.jsxs("th",{className:"py-1",children:["Amount (",mr(t.currency),")"]}),o.jsxs("th",{className:"py-1",children:["Cashback (",mr(t.currency),")"]})]})}),o.jsx("tbody",{children:e.map(n=>o.jsxs("tr",{className:"border-b last:border-0",children:[o.jsx("td",{className:"py-1",children:n.date}),o.jsx("td",{className:"py-1",children:n.description}),o.jsx("td",{className:"py-1",children:q(n.amount,t.currency)}),o.jsx("td",{className:"py-1",children:q(n.cashback,t.currency)})]},n.id))})]}),o.jsxs("div",{className:"mt-3 text-right font-medium",children:["Total cashback: ",q(r,t.currency)]})]})]})},C6=()=>{const{settings:t}=ur(),{user:e}=$e(H=>H.auth),[r,n]=R.useState(null),[s,i]=R.useState(!1),[a,l]=R.useState({hours:0,minutes:0,seconds:0}),[u,d]=R.useState(!1),[h,f]=R.useState(null),[m,v]=R.useState(null),[x,y]=R.useState(!1),[j,N]=R.useState(!0),[_,S]=R.useState(0),[A,L]=R.useState(!1),O=[{amount:5,type:"bonus",probability:30},{amount:10,type:"bonus",probability:25},{amount:20,type:"bonus",probability:20},{amount:50,type:"bonus",probability:15},{amount:100,type:"mega bonus",probability:5},{amount:0,type:"try again",probability:5}];R.useEffect(()=>{w()},[e]),R.useEffect(()=>{if(A!==void 0){k();const H=setInterval(()=>{k()},1e3);return()=>clearInterval(H)}},[r,A]);const T=()=>{const H=new Date;return new Date(H.getFullYear(),H.getMonth(),H.getDate())},b=async H=>{const ue=T(),oe=ue.getTime(),z=Pe(G,"users"),Y=ot(z,Ze("referredBy","==",H),Ze("createdAt",">=",ue)),te=await We(Y);let X=0;return te.forEach(J=>{const de=J.data().firstPurchaseAt,K=de!=null&&de.toMillis?de.toMillis():de?new Date(de).getTime():null;K&&K>=oe&&X++}),X},C=async()=>{if(e!=null&&e.id)try{const H=await b(e.id);S(H),L(H>=3)}catch(H){console.error("Failed to compute today successful referrals:",H),S(0),L(!1)}},w=async()=>{if(!e){N(!1);return}try{const H=await Ne(ae(G,"users",e.id));if(H.exists()){const oe=H.data().lastEggSmash;n(oe?oe.toMillis():null)}await C()}catch(H){console.error("Failed to load last smash time:",H)}finally{N(!1)}},k=()=>{if(!A){i(!1),l({hours:0,minutes:0,seconds:0});return}if(!r){i(!0);return}const H=Date.now(),ue=new Date(r),oe=new Date,z=new Date(ue.getFullYear(),ue.getMonth(),ue.getDate()),Y=new Date(oe.getFullYear(),oe.getMonth(),oe.getDate());if(z.getTime()<Y.getTime())i(!0),l({hours:0,minutes:0,seconds:0});else{const te=new Date(Y);te.setDate(te.getDate()+1);const X=te.getTime()-H;if(X<=0)i(!0),l({hours:0,minutes:0,seconds:0});else{i(!1);const J=Math.floor(X/(1e3*60*60)),se=Math.floor(X%(1e3*60*60)/(1e3*60)),de=Math.floor(X%(1e3*60)/1e3);l({hours:J,minutes:se,seconds:de})}}},P=()=>{const H=Math.random()*100;let ue=0;for(const oe of O)if(ue+=oe.probability,H<=ue)return oe;return O[0]},I=async H=>{!s||u||!e||(d(!0),f(H),y(!1),v(null),setTimeout(async()=>{const ue=P();v(ue),y(!0);try{const oe=new Date;await Ae(ae(G,"users",e.id),{lastEggSmash:re()}),n(oe.getTime()),i(!1)}catch(oe){console.error("Failed to update last smash time:",oe)}setTimeout(()=>{d(!1),f(null)},3e3)},1500))},$=H=>String(H).padStart(2,"0");return j?o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-amber-50 via-yellow-50 to-orange-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-amber-400 border-t-transparent rounded-full animate-spin mb-4"}),o.jsx("p",{className:"text-amber-700 font-medium",children:"Loading Golden Eggs..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-amber-100 via-yellow-100 to-orange-100 pb-20",children:[o.jsxs("div",{className:"bg-gradient-to-r from-amber-500 via-yellow-500 to-orange-500 text-white py-8 px-4 shadow-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-30",children:[...Array(20)].map((H,ue)=>o.jsx("div",{className:"absolute w-1 h-1 bg-white rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*2}s`}},ue))}),o.jsxs("div",{className:"relative z-10 text-center",children:[o.jsxs("div",{className:"flex items-center justify-center gap-2 mb-2",children:[o.jsx("span",{className:"text-4xl animate-bounce",children:""}),o.jsx("h1",{className:"text-3xl font-bold tracking-wide",children:"Golden Egg Smash"}),o.jsx("span",{className:"text-4xl animate-bounce",style:{animationDelay:"0.3s"},children:""})]}),o.jsx("p",{className:"text-yellow-100 text-sm mt-2",children:"Break the golden eggs and win amazing prizes!"})]})]}),o.jsxs("div",{className:"p-4 space-y-6",children:[A?o.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-4 shadow-xl text-white border-2 border-green-400",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-3xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold text-lg mb-1",children:"Prize Unlocked (Today)!"}),o.jsxs("div",{className:"text-sm text-green-100",children:["Successful referrals today: ",o.jsxs("strong",{children:[_,"/3"]})," (must purchase product).",o.jsxs("div",{className:"mt-1",children:["You can smash eggs ",o.jsx("strong",{children:"once today"}),". Tomorrow it resets."]})]})]}),o.jsx("button",{onClick:C,className:"text-xs font-bold bg-white/20 hover:bg-white/30 border border-white/30 rounded-xl px-3 py-2 transition-colors",children:"Refresh"})]})}):o.jsx("div",{className:"bg-gradient-to-br from-orange-500 to-red-500 rounded-2xl p-4 shadow-xl text-white border-2 border-orange-400",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"text-3xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"font-bold text-lg mb-1",children:"Egg Smashing Locked"}),o.jsxs("div",{className:"text-sm text-orange-100",children:["Successful referrals today: ",o.jsxs("strong",{children:[_,"/3"]}),". You need ",o.jsxs("strong",{children:[Math.max(0,3-_)," more"]})," new users to register and purchase a product today.",o.jsx("div",{className:"mt-1",children:"Tomorrow everything resets."})]})]}),o.jsx("button",{onClick:C,className:"text-xs font-bold bg-white/20 hover:bg-white/30 border border-white/30 rounded-xl px-3 py-2 transition-colors",children:"Refresh"})]})}),!s&&A&&o.jsx("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 rounded-2xl p-6 shadow-2xl text-white border-2 border-yellow-400/30",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-yellow-400 text-sm mb-2 font-semibold",children:" Next Smash Available In"}),o.jsxs("div",{className:"flex items-center justify-center gap-3 text-3xl font-bold text-yellow-400",children:[o.jsxs("div",{className:"bg-gray-700 rounded-lg px-4 py-2 min-w-[80px]",children:[$(a.hours),o.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Hours"})]}),o.jsx("div",{className:"text-yellow-500",children:":"}),o.jsxs("div",{className:"bg-gray-700 rounded-lg px-4 py-2 min-w-[80px]",children:[$(a.minutes),o.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Minutes"})]}),o.jsx("div",{className:"text-yellow-500",children:":"}),o.jsxs("div",{className:"bg-gray-700 rounded-lg px-4 py-2 min-w-[80px]",children:[$(a.seconds),o.jsx("div",{className:"text-xs text-gray-400 mt-1",children:"Seconds"})]})]}),o.jsx("p",{className:"text-gray-400 text-xs mt-4",children:"Come back tomorrow for another daily chance!"})]})}),s&&A&&o.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 shadow-2xl text-white border-2 border-yellow-400 animate-pulse",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"text-xl font-bold mb-1",children:"Ready to Smash!"}),o.jsx("div",{className:"text-sm text-green-100",children:"Tap an egg below to reveal your prize (Daily limit: 1 per day)"})]})}),o.jsx("div",{className:"flex justify-center items-center gap-4 md:gap-8 flex-wrap",children:Array.from({length:3}).map((H,ue)=>{const z=u&&h===ue,Y=s&&!u;return o.jsx("button",{onClick:()=>I(ue),disabled:!Y||!A,className:`relative focus:outline-none transition-all duration-300 transform ${Y&&A?"hover:scale-110 hover:-translate-y-2 cursor-pointer":"opacity-50 cursor-not-allowed"} ${z?"scale-125 rotate-12":""}`,"aria-label":"Smash egg",children:o.jsxs("div",{className:`relative ${Y?"animate-bounce filter drop-shadow-2xl":""}`,style:{animationDelay:`${ue*.2}s`},children:[Y&&o.jsx("div",{className:"absolute inset-0 bg-yellow-400 rounded-full blur-xl opacity-50 animate-pulse"}),o.jsxs("div",{className:"relative",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-28 w-28 md:h-36 md:w-36 transition-all duration-300 ${z?"animate-spin text-orange-600":"text-yellow-400"}`,fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M12 2C7.031 2 3 7.03 3 12s4.031 10 9 10 9-5.03 9-10S16.969 2 12 2zm0 18c-4.411 0-8-4.037-8-8s3.589-8 8-8 8 4.037 8 8-3.589 8-8 8z"})}),Y&&o.jsx("div",{className:"absolute inset-0",children:[...Array(6)].map((te,X)=>o.jsx("div",{className:"absolute w-1 h-1 bg-yellow-300 rounded-full animate-ping",style:{left:`${30+X%3*20}%`,top:`${20+Math.floor(X/3)*30}%`,animationDelay:`${X*.3}s`}},X))})]}),z&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx("div",{className:"text-6xl animate-spin",children:""})})]})},ue)})}),x&&m&&o.jsx("div",{className:"fixed inset-0 bg-black/70 flex items-center justify-center z-50 p-4 animate-fadeIn",children:o.jsx("div",{className:"bg-gradient-to-br from-yellow-400 via-amber-500 to-orange-500 rounded-3xl p-8 max-w-md w-full shadow-2xl border-4 border-white transform animate-bounce",children:o.jsx("div",{className:"text-center text-white",children:m.amount===0?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Try Again!"}),o.jsx("p",{className:"text-lg",children:"Better luck next time!"})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-6xl mb-4 animate-bounce",children:""}),o.jsx("h2",{className:"text-3xl font-bold mb-2",children:"Congratulations!"}),o.jsx("div",{className:"text-4xl font-extrabold mb-2 text-yellow-100",children:q(m.amount,t.currency)}),o.jsx("p",{className:"text-xl font-semibold",children:m.type.toUpperCase()}),o.jsx("p",{className:"text-sm text-yellow-100 mt-2",children:"Prize has been added to your wallet!"})]})})})}),o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-lg border border-yellow-200",children:[o.jsxs("h3",{className:"font-bold text-gray-800 mb-3 text-center flex items-center justify-center gap-2",children:[o.jsx("span",{children:""})," How It Works"]}),o.jsxs("ul",{className:"space-y-2 text-sm text-gray-700",children:[o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-yellow-500 font-bold",children:""}),o.jsx("span",{children:"Tap any golden egg to reveal your prize"})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-yellow-500 font-bold",children:""}),o.jsxs("span",{children:["Win amazing bonuses ranging from ",q(5,t.currency)," to ",q(100,t.currency)]})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-yellow-500 font-bold",children:""}),o.jsx("span",{children:A?"You can smash once today (resets tomorrow)":"You need 3 new referred users to purchase a product today to unlock prize"})]}),!A&&o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-yellow-500 font-bold",children:""}),o.jsx("span",{children:"Share your referral code. New users must register and purchase a product today."})]}),o.jsxs("li",{className:"flex items-start gap-2",children:[o.jsx("span",{className:"text-yellow-500 font-bold",children:""}),o.jsx("span",{children:"Prizes are automatically added to your balance wallet"})]})]})]})]}),o.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        .animate-fadeIn {
          animation: fadeIn 0.3s ease-in;
        }
      `})]})},Cc=Mr("team/fetchTeam",async(t,{rejectWithValue:e,getState:r})=>{try{const n=r().auth.token;if(!n)return e("No authentication token");const s=await l6.getTeam(n);return s.success?s.data:e("Failed to fetch team data")}catch(n){return e(n.message||"Failed to fetch team data")}}),k6={cumulativeRecharge:32453,tiers:{B:{percentage:11,members:[{account:"60116****891",level:"B",product:"--",tier:"B"},{account:"60117****215",level:"B",product:"--",tier:"B"},{account:"60112****213",level:"B",product:"--",tier:"B"},{account:"60111****066",level:"B",product:"--",tier:"B"},{account:"60113****123",level:"B",product:"--",tier:"B"}]},C:{percentage:4,members:Array.from({length:14},(t,e)=>({account:`6011${e}****${String(e).padStart(3,"0")}`,level:"C",product:"--",tier:"C"}))},D:{percentage:2,members:Array.from({length:10},(t,e)=>({account:`6012${e}****${String(e).padStart(3,"0")}`,level:"D",product:"--",tier:"D"}))}},statistics:{todayNewMembers:0,yesterdayNewMembers:0,todayRechargeAmount:0,yesterdayRechargeAmount:1163,currentMonthRechargeAmount:14713,lastMonthRechargeAmount:16740},validMembers:[{account:"60116****891",level:"B",product:"--",tier:"B"},{account:"60117****215",level:"B",product:"--",tier:"B"},{account:"60112****213",level:"B",product:"--",tier:"B"},{account:"60111****066",level:"B",product:"--",tier:"B"}],invalidMembers:[],loading:!1,error:null},A6=dd({name:"team",initialState:k6,reducers:{setTeam(t,e){return{...t,...e.payload}},addMember(t,e){const{tier:r,member:n}=e.payload;t.tiers[r].members.push(n),t.validMembers.push(n)},clearError(t){t.error=null}},extraReducers:t=>{t.addCase(Cc.pending,e=>{e.loading=!0,e.error=null}).addCase(Cc.fulfilled,(e,r)=>(e.loading=!1,{...e,...r.payload,error:null})).addCase(Cc.rejected,(e,r)=>{e.loading=!1,e.error=r.payload})}}),P6=A6.reducer,R6=()=>{var Y,te,X,J,se,de;const t=en(),e=$e(K=>K.user),r=$e(K=>K.wallet);$e(K=>K.team);const n=$e(K=>K.auth),s=Xt(),{settings:i}=ur(),[a,l]=R.useState(!1),[u,d]=R.useState(!0),[h,f]=R.useState(!1),[m,v]=R.useState(!1),[x,y]=R.useState(null),[j,N]=R.useState(!1),[_,S]=R.useState(!1),[A,L]=R.useState({totalReferrals:0,purchasedCount:0,notPurchasedCount:0}),[O,T]=R.useState(!1),b=R.useCallback(async()=>{var K,ie;if(!n.isAuthenticated||!((K=n.user)!=null&&K.id)){d(!1);return}try{d(!0);const ve=await Ne(ae(G,"users",n.user.id));if(ve.exists()){const Ue=ve.data(),je=Ue.isActive!==void 0?Ue.isActive:!1;l(je),((ie=n.user)==null?void 0:ie.isActive)!==je&&t(P0({isActive:je}))}}catch(ve){console.error("Error fetching account status:",ve)}finally{d(!1)}},[n.isAuthenticated,(Y=n.user)==null?void 0:Y.id,(te=n.user)==null?void 0:te.isActive,t]),C=R.useCallback(async()=>{var K,ie,ve;if(!(!n.isAuthenticated||!((K=n.user)!=null&&K.id)))try{v(!0);const Ue=await Xr.getUserProducts(null);if(Ue.success){const je=(((ie=Ue.data.unexpired)==null?void 0:ie.length)||0)+(((ve=Ue.data.expired)==null?void 0:ve.length)||0);f(je>0)}}catch(Ue){console.error("Failed to check user purchases:",Ue),f(!1)}finally{v(!1)}},[n.isAuthenticated,(X=n.user)==null?void 0:X.id]),w=R.useCallback(async()=>{var K;if(!(!n.isAuthenticated||!((K=n.user)!=null&&K.id)))try{N(!0);const ie=await xa.getVIPStatus(null);if(ie.success){y(ie.data);try{await xa.claimVIPRewards(null),t(tr())}catch{}}}catch(ie){console.error("Failed to fetch VIP status:",ie)}finally{N(!1)}},[n.isAuthenticated,(J=n.user)==null?void 0:J.id,t]),k=R.useCallback(async()=>{var K;if(!(!n.isAuthenticated||!((K=n.user)!=null&&K.id)))try{T(!0);const ie=await Rd.getReferralStatistics(null);ie.success&&L(ie.data)}catch(ie){console.error("Failed to fetch referral statistics:",ie)}finally{T(!1)}},[n.isAuthenticated,(se=n.user)==null?void 0:se.id]),P=async()=>{var K;if(!(!n.isAuthenticated||!((K=n.user)!=null&&K.id)))try{S(!0);const ie=await xa.claimVIPRewards(null);if(ie.success){const{weekly:ve,monthly:Ue}=ie.data;let je="";ve!=null&&ve.success&&(je+=`Weekly reward: ${q(ve.amount,i.currency)}
`),Ue!=null&&Ue.success&&(je+=`Monthly reward: ${q(Ue.amount,i.currency)}
`),je?(alert(je.trim()||"Rewards claimed successfully!"),t(tr()),w()):alert("No rewards available at this time.")}}catch(ie){alert("Failed to claim rewards: "+ie.message)}finally{S(!1)}};R.useEffect(()=>{n.isAuthenticated&&(t(wa()),t(tr()).then(K=>{K.error&&console.error("Wallet fetch error:",K.error)}),t(Cc()),b(),C(),w(),k())},[n.isAuthenticated,t,b,C,w,k]),R.useEffect(()=>{const K=()=>{document.visibilityState==="visible"&&n.isAuthenticated&&(t(tr()),b(),C())};return document.addEventListener("visibilitychange",K),()=>document.removeEventListener("visibilitychange",K)},[n.isAuthenticated,t,b,C]);const I=async()=>{if(confirm("Are you sure you want to logout?"))try{await t(Hs()).unwrap(),window.location.href="/login"}catch(K){console.error("Logout failed:",K),window.location.href="/login"}},$=K=>{const ie=Number(K);return isNaN(ie)?0:ie},H=[{label:"Recharge wallet (for purchases)",value:$(r.rechargeWallet)},{label:"Balance wallet",value:$(r.balanceWallet)},{label:"Total earnings",value:$(r.totalEarnings)},{label:"Total withdrawals",value:$(r.totalWithdrawals)},{label:"Income today",value:$(r.incomeToday)},{label:"Yesterday's earnings",value:$(r.incomeYesterday)},{label:"Today's loss",value:$(r.lossToday)},{label:"Total loss",value:$(r.lossTotal)}],ue=()=>{t(tr()).then(K=>{K.error?alert("Failed to refresh wallet: "+K.error):alert("Wallet refreshed successfully")})},oe=$(r.totalEarnings)-$(r.totalWithdrawals),z=$(r.totalEarnings)-$(r.lossTotal);return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-50 via-blue-50 to-indigo-50 pb-20",children:[o.jsxs("div",{className:"bg-gradient-to-r from-indigo-600 via-purple-600 to-pink-600 text-white py-10 px-4 shadow-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-20",children:[...Array(12)].map((K,ie)=>o.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`}},ie))}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{children:[o.jsxs("h1",{className:"text-4xl font-extrabold tracking-wide mb-2 flex items-center gap-3",children:[o.jsx("span",{className:"text-5xl",children:""}),"My Account"]}),o.jsx("p",{className:"text-white/90 text-sm",children:"Manage your profile and wallet"})]}),o.jsx("button",{onClick:ue,disabled:r.loading,className:"bg-white/20 backdrop-blur-sm hover:bg-white/30 px-4 py-2 rounded-xl font-semibold text-sm transition-colors disabled:opacity-50 flex items-center gap-2",children:r.loading?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Loading..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})})]}),o.jsx("div",{className:"bg-white/10 backdrop-blur-md rounded-2xl p-5 border border-white/20",children:o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"bg-white/20 rounded-full p-4",children:o.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("div",{className:"text-lg font-bold",children:e.name||"User"}),m?o.jsxs("span",{className:"bg-white/20 text-white text-xs font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[o.jsx("span",{children:""})," Checking..."]}):h?o.jsxs("span",{className:"bg-green-500 text-white text-xs font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[o.jsx("span",{children:""})," Active"]}):o.jsxs("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-0.5 rounded-full flex items-center gap-1",children:[o.jsx("span",{children:""})," Locked"]})]}),o.jsx("div",{className:"text-white/80 text-sm mb-1",children:e.phone}),o.jsxs("div",{className:"text-white/60 text-xs",children:["ID: ",(de=e.id)==null?void 0:de.substring(0,8),"..."]})]})]})})]})]}),r.error&&o.jsx("div",{className:"mx-4 mt-4 bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm shadow-lg",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:""}),o.jsxs("span",{children:["Error: ",r.error]})]})}),n.isAuthenticated&&!m&&!h&&o.jsx("div",{className:"mx-4 mt-4 bg-gradient-to-r from-red-500 to-orange-500 rounded-xl p-4 shadow-lg text-white border-2 border-red-400",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"text-3xl flex-shrink-0",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-lg mb-1",children:"Account Locked for Withdrawal"}),o.jsx("p",{className:"text-sm text-white/90 mb-3",children:"You must purchase at least one product before you can withdraw funds."}),o.jsx("button",{onClick:()=>s("/product"),className:"bg-white text-red-600 px-4 py-2 rounded-lg text-sm font-semibold hover:bg-gray-100 transition-colors",children:"Browse Products "})]})]})}),o.jsxs("div",{className:"px-4 pt-6 space-y-6",children:[x&&x.vipLevel>0&&o.jsxs("div",{className:"bg-gradient-to-br from-purple-600 via-pink-600 to-orange-600 rounded-2xl p-6 shadow-2xl text-white transform hover:scale-[1.02] transition-transform duration-300 border-2 border-yellow-300 relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-20",children:[o.jsx("div",{className:"absolute top-4 left-4 w-16 h-16 border-3 border-white rounded-full animate-pulse"}),o.jsx("div",{className:"absolute bottom-4 right-4 w-12 h-12 border-3 border-white rounded-full animate-pulse delay-500"})]}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"text-sm opacity-90 mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-3xl",children:""}),o.jsx("span",{className:"font-bold text-lg",children:"VIP Status"})]}),o.jsx("div",{className:"text-4xl font-black mb-2",children:x.vipLevelName}),o.jsxs("div",{className:"text-sm text-white/90 mb-3",children:[x.referralCount," Referrals  ",x.referralCount>=20?"VIP 2 Unlocked!":x.referralCount>=5?"VIP 1 Unlocked!":`${20-x.referralCount} more for VIP 2`]})]}),o.jsx("div",{className:"text-6xl opacity-30",children:x.vipLevel===2?"":""})]}),o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 mb-4 border border-white/30",children:[o.jsx("div",{className:"text-xs font-bold mb-2 text-yellow-200",children:"VIP Benefits"}),o.jsxs("div",{className:"space-y-2 text-sm",children:[x.weeklyReward>0&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:" Weekly Reward:"}),o.jsx("span",{className:"font-bold",children:q(x.weeklyReward,i.currency)})]}),x.monthlyReward>0&&o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("span",{children:" Monthly Reward:"}),o.jsx("span",{className:"font-bold",children:q(x.monthlyReward,i.currency)})]})]})]}),(x.nextWeeklyReward||x.nextMonthlyReward)&&o.jsxs("div",{className:"text-xs text-white/80 mb-3",children:[x.nextWeeklyReward&&o.jsxs("div",{children:["Next Weekly: ",new Date(x.nextWeeklyReward).toLocaleDateString()]}),x.nextMonthlyReward&&o.jsxs("div",{children:["Next Monthly: ",new Date(x.nextMonthlyReward).toLocaleDateString()]})]}),o.jsx("button",{onClick:P,disabled:_,className:"w-full bg-white/30 hover:bg-white/40 backdrop-blur-sm text-white font-bold py-3 rounded-xl transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:_?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Claiming..."]}):o.jsxs(o.Fragment,{children:[o.jsx("span",{children:""}),"Claim VIP Rewards"]})})]})]}),x&&x.vipLevel===0&&o.jsx("div",{className:"bg-gradient-to-br from-gray-700 to-gray-900 rounded-2xl p-6 shadow-xl text-white",children:o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"text-sm opacity-90 mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"font-semibold",children:"VIP Progress"})]}),o.jsx("div",{className:"text-2xl font-bold mb-2",children:"Regular Member"}),o.jsxs("div",{className:"text-sm text-white/80 mb-4",children:[x.referralCount," / 5 referrals for VIP 1"]}),o.jsx("div",{className:"w-full bg-white/20 rounded-full h-3 mb-2",children:o.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-pink-500 h-3 rounded-full transition-all duration-500",style:{width:`${Math.min(x.referralCount/5*100,100)}%`}})}),o.jsxs("div",{className:"text-xs text-white/60",children:[5-x.referralCount," more referrals needed for VIP 1"]})]}),o.jsx("div",{className:"text-5xl opacity-30",children:""})]})}),o.jsxs("div",{className:"bg-gradient-to-br from-indigo-600 via-purple-600 to-pink-600 rounded-2xl p-6 shadow-xl text-white transform hover:scale-[1.02] transition-transform duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"text-sm opacity-90 mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-3xl",children:""}),o.jsx("span",{className:"font-bold text-lg",children:"Referral Statistics"})]}),o.jsx("div",{className:"text-sm text-white/90 mb-4",children:"Track your referrals and their purchase status"})]}),o.jsx("div",{className:"text-5xl opacity-30",children:""})]}),O?o.jsx("div",{className:"flex items-center justify-center py-4",children:o.jsxs("svg",{className:"animate-spin h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 border border-white/30",children:[o.jsx("div",{className:"text-xs text-white/80 mb-1",children:"Total Referrals"}),o.jsx("div",{className:"text-3xl font-black mb-1",children:A.totalReferrals}),o.jsx("div",{className:"text-xs text-white/70",children:"All time"})]}),o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 border border-white/30",children:[o.jsx("div",{className:"text-xs text-white/80 mb-1",children:"Purchased"}),o.jsx("div",{className:"text-3xl font-black mb-1 text-green-300",children:A.purchasedCount}),o.jsx("div",{className:"text-xs text-white/70",children:A.totalReferrals>0?`${Math.round(A.purchasedCount/A.totalReferrals*100)}%`:"0%"})]}),o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 border border-white/30",children:[o.jsx("div",{className:"text-xs text-white/80 mb-1",children:"Not Purchased"}),o.jsx("div",{className:"text-3xl font-black mb-1 text-orange-300",children:A.notPurchasedCount}),o.jsx("div",{className:"text-xs text-white/70",children:A.totalReferrals>0?`${Math.round(A.notPurchasedCount/A.totalReferrals*100)}%`:"0%"})]})]}),o.jsx("div",{className:"mt-4 bg-white/10 backdrop-blur-sm rounded-xl p-3 border border-white/20",children:o.jsxs("div",{className:"text-xs text-white/90",children:[o.jsx("span",{className:"font-semibold",children:" Note:"})," You receive a bonus when your referrals purchase products (if you've purchased at least one product yourself)."]})})]}),o.jsx("div",{className:`rounded-2xl p-6 shadow-xl text-white transform hover:scale-[1.02] transition-transform duration-300 ${!m&&h?"bg-gradient-to-br from-green-500 to-emerald-600":"bg-gradient-to-br from-red-500 to-orange-600"}`,children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"text-sm opacity-90 mb-2 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:m?"":h?"":""}),o.jsx("span",{className:"font-semibold",children:"Account Status"})]}),o.jsx("div",{className:"text-3xl font-extrabold mb-2",children:m?"Checking...":h?"Active":"Locked"}),!m&&!h&&o.jsx("div",{className:"text-sm text-white/90",children:"Purchase at least one product to unlock your account (withdrawal access)."}),!m&&h&&o.jsx("div",{className:"text-sm text-white/90",children:"Your account is fully active and ready to use"})]}),o.jsx("div",{className:"text-6xl opacity-30",children:m?"":h?"":""})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-indigo-600 rounded-2xl p-5 shadow-xl text-white transform hover:scale-105 transition-transform duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"text-2xl",children:""}),o.jsx("div",{className:"bg-white/20 rounded-full px-2 py-1 text-xs font-semibold",children:"Balance"})]}),o.jsx("div",{className:"text-2xl font-black mb-1",children:q($(r.balanceWallet),i.currency)}),o.jsx("div",{className:"text-blue-100 text-xs",children:"Available for withdrawal"})]}),o.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-5 shadow-xl text-white transform hover:scale-105 transition-transform duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("div",{className:"text-2xl",children:""}),o.jsx("div",{className:"bg-white/20 rounded-full px-2 py-1 text-xs font-semibold",children:"Earnings"})]}),o.jsx("div",{className:"text-2xl font-black mb-1",children:q(oe,i.currency)}),o.jsx("div",{className:"text-green-100 text-xs",children:"Available to withdraw"})]})]}),o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:""}),"Wallet Summary"]}),o.jsx("div",{className:"grid grid-cols-2 gap-3",children:H.map((K,ie)=>{const ve=K.label.includes("earnings")||K.label.includes("Income"),Ue=K.label.includes("loss")||K.label.includes("Loss"),je=K.label.includes("withdrawal");let br="from-gray-100 to-gray-200",D="text-gray-800",le="";return ve?(br="from-green-100 to-emerald-200",D="text-green-800",le=""):Ue?(br="from-red-100 to-rose-200",D="text-red-800",le=""):je?(br="from-orange-100 to-amber-200",D="text-orange-800",le=""):K.label.includes("Recharge")?(br="from-blue-100 to-indigo-200",D="text-blue-800",le=""):K.label.includes("Balance")&&(br="from-purple-100 to-pink-200",D="text-purple-800",le=""),o.jsxs("div",{className:`bg-gradient-to-br ${br} rounded-xl p-4 shadow-md transform hover:scale-105 transition-transform duration-300`,children:[o.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[o.jsx("span",{className:"text-xl",children:le}),o.jsx("div",{className:`text-xs font-semibold ${D} flex-1 line-clamp-2`,children:K.label})]}),o.jsx("div",{className:`text-lg font-black ${D}`,children:q(K.value,i.currency)})]},ie)})})]}),o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-2xl p-6 shadow-xl border border-gray-100",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:""}),"Quick Actions"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("button",{onClick:()=>s("/my-teams"),className:"bg-gradient-to-br from-blue-500 to-indigo-600 text-white rounded-xl p-4 shadow-lg flex flex-col items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M17 20h5V9H2v11h5M12 13.01V13"})}),o.jsx("span",{className:"text-xs font-semibold",children:"My Teams"})]}),o.jsxs("button",{onClick:()=>s("/invitation"),className:"bg-gradient-to-br from-purple-500 to-pink-600 text-white rounded-xl p-4 shadow-lg flex flex-col items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 11c2.28 0 4-1.79 4-4s-1.72-4-4-4-4 1.79-4 4 1.72 4 4 4zM6 21v-2a4 4 0 014-4h0a4 4 0 014 4v2"})}),o.jsx("span",{className:"text-xs font-semibold",children:"Invite"})]}),o.jsxs("button",{onClick:()=>s("/my-product"),className:"bg-gradient-to-br from-green-500 to-emerald-600 text-white rounded-xl p-4 shadow-lg flex flex-col items-center justify-center gap-2 transform hover:scale-105 transition-all duration-300",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 11V7a4 4 0 10-8 0v4M12 14v5m-3 0h6"})}),o.jsx("span",{className:"text-xs font-semibold",children:"Products"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-slate-800 to-slate-900 rounded-2xl p-6 shadow-xl text-white border border-slate-700",children:[o.jsxs("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-xl",children:""}),"Performance Summary"]}),o.jsx("div",{className:"grid grid-cols-1 gap-4",children:o.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[o.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Net Profit"}),o.jsx("div",{className:`text-2xl font-bold ${z>=0?"text-green-400":"text-red-400"}`,children:q(z,i.currency)}),o.jsx("div",{className:"text-xs text-white/50 mt-1",children:"Earnings - Losses"})]})})]}),o.jsxs("button",{onClick:I,className:"w-full bg-gradient-to-r from-red-500 to-rose-600 hover:from-red-600 hover:to-rose-700 text-white py-4 rounded-2xl font-bold shadow-xl transform hover:scale-[1.02] transition-all duration-300 flex items-center justify-center gap-2",children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})]})};var D6=Object.defineProperty,ju=Object.getOwnPropertySymbols,uN=Object.prototype.hasOwnProperty,dN=Object.prototype.propertyIsEnumerable,Fx=(t,e,r)=>e in t?D6(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,Em=(t,e)=>{for(var r in e||(e={}))uN.call(e,r)&&Fx(t,r,e[r]);if(ju)for(var r of ju(e))dN.call(e,r)&&Fx(t,r,e[r]);return t},Sm=(t,e)=>{var r={};for(var n in t)uN.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&ju)for(var n of ju(t))e.indexOf(n)<0&&dN.call(t,n)&&(r[n]=t[n]);return r};/**
 * @license QR Code generator library (TypeScript)
 * Copyright (c) Project Nayuki.
 * SPDX-License-Identifier: MIT
 */var ni;(t=>{const e=class ge{constructor(u,d,h,f){if(this.version=u,this.errorCorrectionLevel=d,this.modules=[],this.isFunction=[],u<ge.MIN_VERSION||u>ge.MAX_VERSION)throw new RangeError("Version value out of range");if(f<-1||f>7)throw new RangeError("Mask value out of range");this.size=u*4+17;let m=[];for(let x=0;x<this.size;x++)m.push(!1);for(let x=0;x<this.size;x++)this.modules.push(m.slice()),this.isFunction.push(m.slice());this.drawFunctionPatterns();const v=this.addEccAndInterleave(h);if(this.drawCodewords(v),f==-1){let x=1e9;for(let y=0;y<8;y++){this.applyMask(y),this.drawFormatBits(y);const j=this.getPenaltyScore();j<x&&(f=y,x=j),this.applyMask(y)}}s(0<=f&&f<=7),this.mask=f,this.applyMask(f),this.drawFormatBits(f),this.isFunction=[]}static encodeText(u,d){const h=t.QrSegment.makeSegments(u);return ge.encodeSegments(h,d)}static encodeBinary(u,d){const h=t.QrSegment.makeBytes(u);return ge.encodeSegments([h],d)}static encodeSegments(u,d,h=1,f=40,m=-1,v=!0){if(!(ge.MIN_VERSION<=h&&h<=f&&f<=ge.MAX_VERSION)||m<-1||m>7)throw new RangeError("Invalid value");let x,y;for(x=h;;x++){const S=ge.getNumDataCodewords(x,d)*8,A=a.getTotalBits(u,x);if(A<=S){y=A;break}if(x>=f)throw new RangeError("Data too long")}for(const S of[ge.Ecc.MEDIUM,ge.Ecc.QUARTILE,ge.Ecc.HIGH])v&&y<=ge.getNumDataCodewords(x,S)*8&&(d=S);let j=[];for(const S of u){r(S.mode.modeBits,4,j),r(S.numChars,S.mode.numCharCountBits(x),j);for(const A of S.getData())j.push(A)}s(j.length==y);const N=ge.getNumDataCodewords(x,d)*8;s(j.length<=N),r(0,Math.min(4,N-j.length),j),r(0,(8-j.length%8)%8,j),s(j.length%8==0);for(let S=236;j.length<N;S^=253)r(S,8,j);let _=[];for(;_.length*8<j.length;)_.push(0);return j.forEach((S,A)=>_[A>>>3]|=S<<7-(A&7)),new ge(x,d,_,m)}getModule(u,d){return 0<=u&&u<this.size&&0<=d&&d<this.size&&this.modules[d][u]}getModules(){return this.modules}drawFunctionPatterns(){for(let h=0;h<this.size;h++)this.setFunctionModule(6,h,h%2==0),this.setFunctionModule(h,6,h%2==0);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const u=this.getAlignmentPatternPositions(),d=u.length;for(let h=0;h<d;h++)for(let f=0;f<d;f++)h==0&&f==0||h==0&&f==d-1||h==d-1&&f==0||this.drawAlignmentPattern(u[h],u[f]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(u){const d=this.errorCorrectionLevel.formatBits<<3|u;let h=d;for(let m=0;m<10;m++)h=h<<1^(h>>>9)*1335;const f=(d<<10|h)^21522;s(f>>>15==0);for(let m=0;m<=5;m++)this.setFunctionModule(8,m,n(f,m));this.setFunctionModule(8,7,n(f,6)),this.setFunctionModule(8,8,n(f,7)),this.setFunctionModule(7,8,n(f,8));for(let m=9;m<15;m++)this.setFunctionModule(14-m,8,n(f,m));for(let m=0;m<8;m++)this.setFunctionModule(this.size-1-m,8,n(f,m));for(let m=8;m<15;m++)this.setFunctionModule(8,this.size-15+m,n(f,m));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let u=this.version;for(let h=0;h<12;h++)u=u<<1^(u>>>11)*7973;const d=this.version<<12|u;s(d>>>18==0);for(let h=0;h<18;h++){const f=n(d,h),m=this.size-11+h%3,v=Math.floor(h/3);this.setFunctionModule(m,v,f),this.setFunctionModule(v,m,f)}}drawFinderPattern(u,d){for(let h=-4;h<=4;h++)for(let f=-4;f<=4;f++){const m=Math.max(Math.abs(f),Math.abs(h)),v=u+f,x=d+h;0<=v&&v<this.size&&0<=x&&x<this.size&&this.setFunctionModule(v,x,m!=2&&m!=4)}}drawAlignmentPattern(u,d){for(let h=-2;h<=2;h++)for(let f=-2;f<=2;f++)this.setFunctionModule(u+f,d+h,Math.max(Math.abs(f),Math.abs(h))!=1)}setFunctionModule(u,d,h){this.modules[d][u]=h,this.isFunction[d][u]=!0}addEccAndInterleave(u){const d=this.version,h=this.errorCorrectionLevel;if(u.length!=ge.getNumDataCodewords(d,h))throw new RangeError("Invalid argument");const f=ge.NUM_ERROR_CORRECTION_BLOCKS[h.ordinal][d],m=ge.ECC_CODEWORDS_PER_BLOCK[h.ordinal][d],v=Math.floor(ge.getNumRawDataModules(d)/8),x=f-v%f,y=Math.floor(v/f);let j=[];const N=ge.reedSolomonComputeDivisor(m);for(let S=0,A=0;S<f;S++){let L=u.slice(A,A+y-m+(S<x?0:1));A+=L.length;const O=ge.reedSolomonComputeRemainder(L,N);S<x&&L.push(0),j.push(L.concat(O))}let _=[];for(let S=0;S<j[0].length;S++)j.forEach((A,L)=>{(S!=y-m||L>=x)&&_.push(A[S])});return s(_.length==v),_}drawCodewords(u){if(u.length!=Math.floor(ge.getNumRawDataModules(this.version)/8))throw new RangeError("Invalid argument");let d=0;for(let h=this.size-1;h>=1;h-=2){h==6&&(h=5);for(let f=0;f<this.size;f++)for(let m=0;m<2;m++){const v=h-m,y=(h+1&2)==0?this.size-1-f:f;!this.isFunction[y][v]&&d<u.length*8&&(this.modules[y][v]=n(u[d>>>3],7-(d&7)),d++)}}s(d==u.length*8)}applyMask(u){if(u<0||u>7)throw new RangeError("Mask value out of range");for(let d=0;d<this.size;d++)for(let h=0;h<this.size;h++){let f;switch(u){case 0:f=(h+d)%2==0;break;case 1:f=d%2==0;break;case 2:f=h%3==0;break;case 3:f=(h+d)%3==0;break;case 4:f=(Math.floor(h/3)+Math.floor(d/2))%2==0;break;case 5:f=h*d%2+h*d%3==0;break;case 6:f=(h*d%2+h*d%3)%2==0;break;case 7:f=((h+d)%2+h*d%3)%2==0;break;default:throw new Error("Unreachable")}!this.isFunction[d][h]&&f&&(this.modules[d][h]=!this.modules[d][h])}}getPenaltyScore(){let u=0;for(let m=0;m<this.size;m++){let v=!1,x=0,y=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[m][j]==v?(x++,x==5?u+=ge.PENALTY_N1:x>5&&u++):(this.finderPenaltyAddHistory(x,y),v||(u+=this.finderPenaltyCountPatterns(y)*ge.PENALTY_N3),v=this.modules[m][j],x=1);u+=this.finderPenaltyTerminateAndCount(v,x,y)*ge.PENALTY_N3}for(let m=0;m<this.size;m++){let v=!1,x=0,y=[0,0,0,0,0,0,0];for(let j=0;j<this.size;j++)this.modules[j][m]==v?(x++,x==5?u+=ge.PENALTY_N1:x>5&&u++):(this.finderPenaltyAddHistory(x,y),v||(u+=this.finderPenaltyCountPatterns(y)*ge.PENALTY_N3),v=this.modules[j][m],x=1);u+=this.finderPenaltyTerminateAndCount(v,x,y)*ge.PENALTY_N3}for(let m=0;m<this.size-1;m++)for(let v=0;v<this.size-1;v++){const x=this.modules[m][v];x==this.modules[m][v+1]&&x==this.modules[m+1][v]&&x==this.modules[m+1][v+1]&&(u+=ge.PENALTY_N2)}let d=0;for(const m of this.modules)d=m.reduce((v,x)=>v+(x?1:0),d);const h=this.size*this.size,f=Math.ceil(Math.abs(d*20-h*10)/h)-1;return s(0<=f&&f<=9),u+=f*ge.PENALTY_N4,s(0<=u&&u<=2568888),u}getAlignmentPatternPositions(){if(this.version==1)return[];{const u=Math.floor(this.version/7)+2,d=this.version==32?26:Math.ceil((this.version*4+4)/(u*2-2))*2;let h=[6];for(let f=this.size-7;h.length<u;f-=d)h.splice(1,0,f);return h}}static getNumRawDataModules(u){if(u<ge.MIN_VERSION||u>ge.MAX_VERSION)throw new RangeError("Version number out of range");let d=(16*u+128)*u+64;if(u>=2){const h=Math.floor(u/7)+2;d-=(25*h-10)*h-55,u>=7&&(d-=36)}return s(208<=d&&d<=29648),d}static getNumDataCodewords(u,d){return Math.floor(ge.getNumRawDataModules(u)/8)-ge.ECC_CODEWORDS_PER_BLOCK[d.ordinal][u]*ge.NUM_ERROR_CORRECTION_BLOCKS[d.ordinal][u]}static reedSolomonComputeDivisor(u){if(u<1||u>255)throw new RangeError("Degree out of range");let d=[];for(let f=0;f<u-1;f++)d.push(0);d.push(1);let h=1;for(let f=0;f<u;f++){for(let m=0;m<d.length;m++)d[m]=ge.reedSolomonMultiply(d[m],h),m+1<d.length&&(d[m]^=d[m+1]);h=ge.reedSolomonMultiply(h,2)}return d}static reedSolomonComputeRemainder(u,d){let h=d.map(f=>0);for(const f of u){const m=f^h.shift();h.push(0),d.forEach((v,x)=>h[x]^=ge.reedSolomonMultiply(v,m))}return h}static reedSolomonMultiply(u,d){if(u>>>8||d>>>8)throw new RangeError("Byte out of range");let h=0;for(let f=7;f>=0;f--)h=h<<1^(h>>>7)*285,h^=(d>>>f&1)*u;return s(h>>>8==0),h}finderPenaltyCountPatterns(u){const d=u[1];s(d<=this.size*3);const h=d>0&&u[2]==d&&u[3]==d*3&&u[4]==d&&u[5]==d;return(h&&u[0]>=d*4&&u[6]>=d?1:0)+(h&&u[6]>=d*4&&u[0]>=d?1:0)}finderPenaltyTerminateAndCount(u,d,h){return u&&(this.finderPenaltyAddHistory(d,h),d=0),d+=this.size,this.finderPenaltyAddHistory(d,h),this.finderPenaltyCountPatterns(h)}finderPenaltyAddHistory(u,d){d[0]==0&&(u+=this.size),d.pop(),d.unshift(u)}};e.MIN_VERSION=1,e.MAX_VERSION=40,e.PENALTY_N1=3,e.PENALTY_N2=3,e.PENALTY_N3=40,e.PENALTY_N4=10,e.ECC_CODEWORDS_PER_BLOCK=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],e.NUM_ERROR_CORRECTION_BLOCKS=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]],t.QrCode=e;function r(l,u,d){if(u<0||u>31||l>>>u)throw new RangeError("Value out of range");for(let h=u-1;h>=0;h--)d.push(l>>>h&1)}function n(l,u){return(l>>>u&1)!=0}function s(l){if(!l)throw new Error("Assertion error")}const i=class Ye{constructor(u,d,h){if(this.mode=u,this.numChars=d,this.bitData=h,d<0)throw new RangeError("Invalid argument");this.bitData=h.slice()}static makeBytes(u){let d=[];for(const h of u)r(h,8,d);return new Ye(Ye.Mode.BYTE,u.length,d)}static makeNumeric(u){if(!Ye.isNumeric(u))throw new RangeError("String contains non-numeric characters");let d=[];for(let h=0;h<u.length;){const f=Math.min(u.length-h,3);r(parseInt(u.substring(h,h+f),10),f*3+1,d),h+=f}return new Ye(Ye.Mode.NUMERIC,u.length,d)}static makeAlphanumeric(u){if(!Ye.isAlphanumeric(u))throw new RangeError("String contains unencodable characters in alphanumeric mode");let d=[],h;for(h=0;h+2<=u.length;h+=2){let f=Ye.ALPHANUMERIC_CHARSET.indexOf(u.charAt(h))*45;f+=Ye.ALPHANUMERIC_CHARSET.indexOf(u.charAt(h+1)),r(f,11,d)}return h<u.length&&r(Ye.ALPHANUMERIC_CHARSET.indexOf(u.charAt(h)),6,d),new Ye(Ye.Mode.ALPHANUMERIC,u.length,d)}static makeSegments(u){return u==""?[]:Ye.isNumeric(u)?[Ye.makeNumeric(u)]:Ye.isAlphanumeric(u)?[Ye.makeAlphanumeric(u)]:[Ye.makeBytes(Ye.toUtf8ByteArray(u))]}static makeEci(u){let d=[];if(u<0)throw new RangeError("ECI assignment value out of range");if(u<128)r(u,8,d);else if(u<16384)r(2,2,d),r(u,14,d);else if(u<1e6)r(6,3,d),r(u,21,d);else throw new RangeError("ECI assignment value out of range");return new Ye(Ye.Mode.ECI,0,d)}static isNumeric(u){return Ye.NUMERIC_REGEX.test(u)}static isAlphanumeric(u){return Ye.ALPHANUMERIC_REGEX.test(u)}getData(){return this.bitData.slice()}static getTotalBits(u,d){let h=0;for(const f of u){const m=f.mode.numCharCountBits(d);if(f.numChars>=1<<m)return 1/0;h+=4+m+f.bitData.length}return h}static toUtf8ByteArray(u){u=encodeURI(u);let d=[];for(let h=0;h<u.length;h++)u.charAt(h)!="%"?d.push(u.charCodeAt(h)):(d.push(parseInt(u.substring(h+1,h+3),16)),h+=2);return d}};i.NUMERIC_REGEX=/^[0-9]*$/,i.ALPHANUMERIC_REGEX=/^[A-Z0-9 $%*+.\/:-]*$/,i.ALPHANUMERIC_CHARSET="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:";let a=i;t.QrSegment=i})(ni||(ni={}));(t=>{(e=>{const r=class{constructor(s,i){this.ordinal=s,this.formatBits=i}};r.LOW=new r(0,1),r.MEDIUM=new r(1,0),r.QUARTILE=new r(2,3),r.HIGH=new r(3,2),e.Ecc=r})(t.QrCode||(t.QrCode={}))})(ni||(ni={}));(t=>{(e=>{const r=class{constructor(s,i){this.modeBits=s,this.numBitsCharCount=i}numCharCountBits(s){return this.numBitsCharCount[Math.floor((s+7)/17)]}};r.NUMERIC=new r(1,[10,12,14]),r.ALPHANUMERIC=new r(2,[9,11,13]),r.BYTE=new r(4,[8,16,16]),r.KANJI=new r(8,[8,10,12]),r.ECI=new r(7,[0,0,0]),e.Mode=r})(t.QrSegment||(t.QrSegment={}))})(ni||(ni={}));var ki=ni;/**
 * @license qrcode.react
 * Copyright (c) Paul O'Shannessy
 * SPDX-License-Identifier: ISC
 */var M6={L:ki.QrCode.Ecc.LOW,M:ki.QrCode.Ecc.MEDIUM,Q:ki.QrCode.Ecc.QUARTILE,H:ki.QrCode.Ecc.HIGH},hN=128,fN="L",mN="#FFFFFF",pN="#000000",gN=!1,yN=1,L6=4,V6=0,O6=.1;function vN(t,e=0){const r=[];return t.forEach(function(n,s){let i=null;n.forEach(function(a,l){if(!a&&i!==null){r.push(`M${i+e} ${s+e}h${l-i}v1H${i+e}z`),i=null;return}if(l===n.length-1){if(!a)return;i===null?r.push(`M${l+e},${s+e} h1v1H${l+e}z`):r.push(`M${i+e},${s+e} h${l+1-i}v1H${i+e}z`);return}a&&i===null&&(i=l)})}),r.join("")}function xN(t,e){return t.slice().map((r,n)=>n<e.y||n>=e.y+e.h?r:r.map((s,i)=>i<e.x||i>=e.x+e.w?s:!1))}function F6(t,e,r,n){if(n==null)return null;const s=t.length+r*2,i=Math.floor(e*O6),a=s/e,l=(n.width||i)*a,u=(n.height||i)*a,d=n.x==null?t.length/2-l/2:n.x*a,h=n.y==null?t.length/2-u/2:n.y*a,f=n.opacity==null?1:n.opacity;let m=null;if(n.excavate){let x=Math.floor(d),y=Math.floor(h),j=Math.ceil(l+d-x),N=Math.ceil(u+h-y);m={x,y,w:j,h:N}}const v=n.crossOrigin;return{x:d,y:h,h:u,w:l,excavation:m,opacity:f,crossOrigin:v}}function U6(t,e){return e!=null?Math.max(Math.floor(e),0):t?L6:V6}function wN({value:t,level:e,minVersion:r,includeMargin:n,marginSize:s,imageSettings:i,size:a,boostLevel:l}){let u=Xe.useMemo(()=>{const x=(Array.isArray(t)?t:[t]).reduce((y,j)=>(y.push(...ki.QrSegment.makeSegments(j)),y),[]);return ki.QrCode.encodeSegments(x,M6[e],r,void 0,void 0,l)},[t,e,r,l]);const{cells:d,margin:h,numCells:f,calculatedImageSettings:m}=Xe.useMemo(()=>{let v=u.getModules();const x=U6(n,s),y=v.length+x*2,j=F6(v,a,x,i);return{cells:v,margin:x,numCells:y,calculatedImageSettings:j}},[u,a,i,n,s]);return{qrcode:u,margin:h,cells:d,numCells:f,calculatedImageSettings:m}}var z6=function(){try{new Path2D().addPath(new Path2D)}catch{return!1}return!0}(),B6=Xe.forwardRef(function(e,r){const n=e,{value:s,size:i=hN,level:a=fN,bgColor:l=mN,fgColor:u=pN,includeMargin:d=gN,minVersion:h=yN,boostLevel:f,marginSize:m,imageSettings:v}=n,y=Sm(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","marginSize","imageSettings"]),{style:j}=y,N=Sm(y,["style"]),_=v==null?void 0:v.src,S=Xe.useRef(null),A=Xe.useRef(null),L=Xe.useCallback($=>{S.current=$,typeof r=="function"?r($):r&&(r.current=$)},[r]),[O,T]=Xe.useState(!1),{margin:b,cells:C,numCells:w,calculatedImageSettings:k}=wN({value:s,level:a,minVersion:h,boostLevel:f,includeMargin:d,marginSize:m,imageSettings:v,size:i});Xe.useEffect(()=>{if(S.current!=null){const $=S.current,H=$.getContext("2d");if(!H)return;let ue=C;const oe=A.current,z=k!=null&&oe!==null&&oe.complete&&oe.naturalHeight!==0&&oe.naturalWidth!==0;z&&k.excavation!=null&&(ue=xN(C,k.excavation));const Y=window.devicePixelRatio||1;$.height=$.width=i*Y;const te=i/w*Y;H.scale(te,te),H.fillStyle=l,H.fillRect(0,0,w,w),H.fillStyle=u,z6?H.fill(new Path2D(vN(ue,b))):C.forEach(function(X,J){X.forEach(function(se,de){se&&H.fillRect(de+b,J+b,1,1)})}),k&&(H.globalAlpha=k.opacity),z&&H.drawImage(oe,k.x+b,k.y+b,k.w,k.h)}}),Xe.useEffect(()=>{T(!1)},[_]);const P=Em({height:i,width:i},j);let I=null;return _!=null&&(I=Xe.createElement("img",{src:_,key:_,style:{display:"none"},onLoad:()=>{T(!0)},ref:A,crossOrigin:k==null?void 0:k.crossOrigin})),Xe.createElement(Xe.Fragment,null,Xe.createElement("canvas",Em({style:P,height:i,width:i,ref:L,role:"img"},N)),I)});B6.displayName="QRCodeCanvas";var jm=Xe.forwardRef(function(e,r){const n=e,{value:s,size:i=hN,level:a=fN,bgColor:l=mN,fgColor:u=pN,includeMargin:d=gN,minVersion:h=yN,boostLevel:f,title:m,marginSize:v,imageSettings:x}=n,y=Sm(n,["value","size","level","bgColor","fgColor","includeMargin","minVersion","boostLevel","title","marginSize","imageSettings"]),{margin:j,cells:N,numCells:_,calculatedImageSettings:S}=wN({value:s,level:a,minVersion:h,boostLevel:f,includeMargin:d,marginSize:v,imageSettings:x,size:i});let A=N,L=null;x!=null&&S!=null&&(S.excavation!=null&&(A=xN(N,S.excavation)),L=Xe.createElement("image",{href:x.src,height:S.h,width:S.w,x:S.x+j,y:S.y+j,preserveAspectRatio:"none",opacity:S.opacity,crossOrigin:S.crossOrigin}));const O=vN(A,j);return Xe.createElement("svg",Em({height:i,width:i,viewBox:`0 0 ${_} ${_}`,ref:r,role:"img"},y),!!m&&Xe.createElement("title",null,m),Xe.createElement("path",{fill:l,d:`M0,0 h${_}v${_}H0z`,shapeRendering:"crispEdges"}),Xe.createElement("path",{fill:u,d:O,shapeRendering:"crispEdges"}),L)});jm.displayName="QRCodeSVG";const Ux=({size:t=220})=>{const[e,r]=R.useState(!1),[n,s]=R.useState(null);return R.useEffect(()=>{const i=["/assets/default-bikash-qr.png","/assets/default-bikash-qr.jpg","/assets/default-bikash-qr.jpeg","/assets/default-bikash-qr.webp"];let a=0;const l=()=>{if(a>=i.length){r(!0);return}const u=new Image;u.onload=()=>{s(i[a]),r(!1)},u.onerror=()=>{a++,l()},u.src=i[a]};l()},[]),e||!n?o.jsxs("div",{style:{width:t,height:t},className:"flex flex-col items-center justify-center text-gray-400 bg-gray-50 rounded-lg",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),o.jsx("p",{className:"text-xs text-center px-2",children:"Default QR code image not found"}),o.jsx("p",{className:"text-xs text-center px-2 mt-1 text-gray-300",children:"Please add image to /public/assets/"})]}):o.jsx("div",{style:{width:t,height:t},className:"flex items-center justify-center bg-white",children:o.jsx("img",{src:n,alt:"Default Touch 'n Go QR Code",className:"w-full h-full object-contain"})})},$6=()=>{const t=en(),e=Xt(),{loading:r,error:n}=$e(P=>P.wallet),{settings:s,loading:i}=ur(),[a,l]=R.useState("60"),[u,d]=R.useState(!1),[h,f]=R.useState(!1),[m,v]=R.useState(""),[x,y]=R.useState(null),[j,N]=R.useState(""),[_,S]=R.useState(!1),A=["60","300","800","1600","3000","5000"],L="1ErJTfAu21KXcqwRvFSGun79D_t-b0SyY",O=(s==null?void 0:s.bikashQRCodeId)||"",T=(s==null?void 0:s.bKashNumber)||"",b=async P=>{P.preventDefault();const I=parseFloat(a);if(isNaN(I)||I<=0){alert("Please enter a valid amount");return}d(!0)},C=P=>{const I=P.target.files[0];if(I){if(!I.type.startsWith("image/")){alert("Please select an image file (JPG, PNG, etc.)");return}if(I.size>10*1024*1024){alert("Image size should be less than 10MB");return}y(I);const $=new FileReader;$.onloadend=()=>{N($.result)},$.readAsDataURL(I)}},w=()=>{if(!x){alert("Please select an image first");return}const P=`https://drive.google.com/drive/folders/${L}`;window.open(P,"_blank"),alert("Please upload your image to the opened Google Drive folder, then copy the shareable link and paste it below.")},k=async()=>{if(m.trim()&&!m.includes("drive.google.com")&&!m.includes("docs.google.com")&&!confirm("The URL does not appear to be a Google Drive link. Continue anyway?"))return;const P=parseFloat(a);S(!0);try{await t(Tc({amount:P,proofImageUrl:m})).unwrap(),alert("Recharge request submitted! Waiting for admin approval."),d(!1),v(""),y(null),N(""),e("/")}catch(I){alert(`Recharge failed: ${I}`)}finally{S(!1)}};return o.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-green-50 via-white to-blue-50 pb-6",children:[o.jsxs("div",{className:"relative bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 p-6 text-white mb-6 rounded-b-3xl shadow-2xl",children:[o.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-b-3xl"}),o.jsx("div",{className:"relative z-10",children:o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-full transform hover:rotate-12 transition-transform duration-300",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Recharge Wallet"}),o.jsx("p",{className:"text-white/90 text-sm",children:"Add funds to your account"})]})]})})]}),o.jsxs("div",{className:"px-4 space-y-6",children:[o.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:o.jsxs("form",{onSubmit:b,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-semibold text-gray-700 mb-2 flex items-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Enter Amount (",mr(s.currency),")"]}),o.jsxs("div",{className:"relative",children:[o.jsx("input",{type:"number",value:a,onChange:P=>l(P.target.value),className:"w-full px-4 py-4 pl-12 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-lg font-semibold transition-all duration-200",placeholder:"0.00",required:!0,min:"1"}),o.jsx("div",{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Quick Select"}),o.jsx("div",{className:"grid grid-cols-3 gap-3",children:A.map(P=>o.jsxs("button",{type:"button",className:`relative py-4 rounded-xl text-sm font-bold transition-all duration-300 transform hover:scale-105 ${a===P?"bg-gradient-to-br from-green-500 to-emerald-600 text-white shadow-lg shadow-green-500/50 scale-105":"bg-gradient-to-br from-gray-50 to-gray-100 text-gray-700 hover:from-green-50 hover:to-emerald-50 hover:text-green-600 border-2 border-transparent hover:border-green-200"}`,onClick:()=>l(P),children:[a===P&&o.jsx("div",{className:"absolute -top-1 -right-1 bg-white rounded-full p-1",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 text-green-500",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),o.jsx("span",{className:"text-lg",children:q(parseFloat(P),s.currency)})]},P))})]}),n&&o.jsxs("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm flex items-center gap-2 animate-shake",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsx("span",{children:n})]}),o.jsx("button",{type:"submit",disabled:r,className:"w-full py-4 bg-gradient-to-r from-green-500 via-emerald-500 to-teal-500 text-white rounded-xl font-bold text-lg shadow-lg shadow-green-500/50 hover:shadow-xl hover:shadow-green-500/60 transform hover:scale-[1.02] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:r?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})}),"Show QR Code"]})})]})}),o.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-5 border border-blue-100",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("div",{className:"bg-blue-500 p-2 rounded-lg flex-shrink-0",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"font-bold text-gray-800 mb-1",children:"How it works"}),o.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"Select your recharge amount, touch & scan the QR code (or use the bKash number) to send payment. Upload proof of payment (optional) and wait for admin approval."})]})]})})]}),u&&o.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4 overflow-y-auto animate-fadeIn",children:o.jsxs("div",{className:"bg-white rounded-3xl p-6 max-w-md w-full my-8 max-h-[90vh] overflow-y-auto shadow-2xl border-4 border-green-100 animate-scaleIn",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 p-2 rounded-lg",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 4v1m6 11h2m-6 0h-2v4m0-11v3m0 0h.01M12 12h4.01M16 20h4M4 12h4m12 0h.01M5 8h2a1 1 0 001-1V5a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1zm12 0h2a1 1 0 001-1V5a1 1 0 00-1-1h-2a1 1 0 00-1 1v2a1 1 0 001 1zM5 20h2a1 1 0 001-1v-2a1 1 0 00-1-1H5a1 1 0 00-1 1v2a1 1 0 001 1z"})})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Payment QR Code"})]}),o.jsx("button",{onClick:()=>{d(!1),f(!1),v(""),y(null),N("")},className:"text-gray-400 hover:text-gray-600 transition-colors p-2 hover:bg-gray-100 rounded-full",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl p-6 mb-6 border-2 border-green-100",children:o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsxs("div",{className:"w-full flex items-center justify-between mb-3",children:[o.jsxs("div",{className:"text-sm font-bold text-green-700 flex items-center gap-2",children:[o.jsx("span",{className:"text-lg",children:""})," Touch & Scan"]}),o.jsx("button",{type:"button",onClick:()=>f(!0),className:"text-xs font-semibold text-green-700 bg-white/80 border border-green-200 px-3 py-1.5 rounded-full hover:bg-white transition-colors",children:"Tap to zoom"})]}),o.jsxs("button",{type:"button",onClick:()=>f(!0),className:"relative bg-white p-5 rounded-2xl shadow-lg mb-4 border-4 border-green-200 cursor-pointer active:scale-[0.99] transition-transform","aria-label":"Touch and scan QR code (tap to zoom)",children:[o.jsx("div",{className:"absolute -inset-2 rounded-3xl border-2 border-green-400/40 animate-pulseRing pointer-events-none"}),O?o.jsx(jm,{value:O,size:220}):o.jsx(Ux,{size:220})]}),o.jsxs("div",{className:"text-center space-y-2",children:[o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl px-4 py-3 border border-green-200",children:[o.jsx("p",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Send money to Touch 'n Go number:"}),o.jsx("p",{className:"text-xl font-bold text-green-600",children:T})]}),o.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl px-4 py-3 border border-green-200",children:[o.jsx("p",{className:"text-xs text-gray-600 mb-1 font-medium",children:"Amount to send:"}),o.jsx("p",{className:"text-2xl font-bold text-gray-800",children:q(parseFloat(a)||0,s.currency)})]})]})]})}),h&&o.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-[60] p-4 animate-fadeIn",children:o.jsxs("div",{className:"bg-white rounded-3xl p-5 max-w-lg w-full shadow-2xl border-4 border-green-100 animate-scaleIn",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"font-bold text-gray-800 flex items-center gap-2",children:[o.jsx("span",{children:"Touch & Scan"}),o.jsx("span",{className:"text-xs text-gray-500 font-semibold",children:"(Zoom)"})]}),o.jsx("button",{type:"button",onClick:()=>f(!1),className:"text-gray-500 hover:text-gray-800 p-2 rounded-full hover:bg-gray-100 transition-colors","aria-label":"Close QR zoom",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsxs("div",{className:"relative bg-white p-4 rounded-2xl border-4 border-green-200 shadow-lg",children:[o.jsx("div",{className:"absolute -inset-2 rounded-3xl border-2 border-green-400/40 animate-pulseRing pointer-events-none"}),O?o.jsx(jm,{value:O,size:320}):o.jsx(Ux,{size:320})]})}),o.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 border border-gray-200 text-center",children:[o.jsx("div",{className:"text-xs text-gray-500 font-semibold mb-1",children:"Touch 'n Go number"}),o.jsx("div",{className:"text-sm font-bold text-gray-800 break-all",children:T||"-"})]}),o.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 border border-gray-200 text-center",children:[o.jsx("div",{className:"text-xs text-gray-500 font-semibold mb-1",children:"Amount"}),o.jsx("div",{className:"text-sm font-bold text-gray-800",children:q(parseFloat(a)||0,s.currency)})]})]})]})}),o.jsxs("div",{className:"mb-6",children:[o.jsxs("label",{className:"block text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Payment Proof (Optional)"]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Step 1: Select Payment Screenshot"}),o.jsxs("label",{className:"block w-full",children:[o.jsx("input",{type:"file",accept:"image/*",onChange:C,className:"hidden",disabled:_}),o.jsxs("div",{className:"w-full px-4 py-4 border-2 border-dashed border-gray-300 rounded-xl hover:border-green-500 hover:bg-green-50 transition-all duration-200 cursor-pointer text-center",children:[o.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),o.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Click to upload image"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Max size: 10MB (JPG, PNG)"})]})]})]}),j&&o.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded-xl border-2 border-gray-200",children:[o.jsx("p",{className:"text-xs font-semibold text-gray-700 mb-3",children:"Preview:"}),o.jsx("div",{className:"relative",children:o.jsx("img",{src:j,alt:"Payment proof preview",className:"max-w-full h-48 object-contain border-2 border-gray-300 rounded-xl mx-auto bg-white p-2"})})]}),x&&o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Step 2: Upload to Google Drive"}),o.jsxs("button",{type:"button",onClick:w,className:"w-full px-4 py-3 bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white rounded-xl text-sm font-semibold flex items-center justify-center gap-2 shadow-lg transform hover:scale-[1.02] transition-all duration-200",children:[o.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:o.jsx("path",{d:"M10 2L3 7v11h4v-6h6v6h4V7l-7-5z"})}),"Open Google Drive Upload Folder"]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2 text-center",children:"Upload your image to the Google Drive folder, then make it shareable"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Step 3: Paste Google Drive Link (Optional)"}),o.jsx("input",{type:"url",value:m,onChange:P=>v(P.target.value),placeholder:"https://drive.google.com/file/d/... (Optional)",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-sm transition-all duration-200",disabled:_}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"After uploading, right-click the file  Get link  Copy link and paste here"})]}),o.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl",children:[o.jsxs("p",{className:"text-sm text-blue-800 font-bold mb-2 flex items-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Note"]}),o.jsx("p",{className:"text-xs text-blue-700 leading-relaxed",children:"Proof of payment is optional. You can submit without it, but admin approval may take longer without verification."})]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("button",{onClick:k,disabled:_,className:"flex-1 px-6 py-4 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white rounded-xl font-bold text-base shadow-lg shadow-green-500/50 hover:shadow-xl hover:shadow-green-500/60 transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none flex items-center justify-center gap-2",children:_?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5 13l4 4L19 7"})}),"Submit Request"]})}),o.jsx("button",{onClick:()=>{d(!1),f(!1),v(""),y(null),N("")},className:"px-6 py-4 bg-gray-200 hover:bg-gray-300 text-gray-700 rounded-xl font-semibold transition-colors duration-200",children:"Cancel"})]})]})})]})},W6=()=>{const t=en(),e=Xt(),r=$e(J=>J.wallet),{loading:n,error:s}=$e(J=>J.wallet),{user:i}=$e(J=>J.auth),{settings:a}=ur(),[l,u]=R.useState(""),[d,h]=R.useState("bikash"),[f,m]=R.useState(!1),[v,x]=R.useState(null),[y,j]=R.useState({bikash:{number:"",name:""}}),[N,_]=R.useState({number:"",name:""}),[S,A]=R.useState(!0),[L,O]=R.useState(!1),[T,b]=R.useState(!0);R.useEffect(()=>{C(),w()},[i]);const C=async()=>{if(!i){A(!1);return}try{A(!0);const J=await Ne(ae(G,"users",i.id));if(J.exists()){const se=J.data();j({bikash:se.bikash||{number:"",name:""}})}}catch(J){console.error("Failed to load payment details:",J)}finally{A(!1)}},w=async()=>{var J,se;if(!i){b(!1);return}try{b(!0);const de=await Xr.getUserProducts(null);if(de.success){const K=(((J=de.data.unexpired)==null?void 0:J.length)||0)+(((se=de.data.expired)==null?void 0:se.length)||0);O(K>0)}}catch(de){console.error("Failed to check user purchases:",de),O(!1)}finally{b(!1)}},k=()=>{_({number:"",name:""}),x(null),m(!0)},P=J=>{_(y[J]||{number:"",name:""}),x(J),m(!0)},I=async()=>{if(!N.number||!N.name){alert("Please fill in all fields");return}try{const J=v||d,se={...y,[J]:{number:N.number,name:N.name}};await Ae(ae(G,"users",i.id),{[J]:se[J],updatedAt:re()}),j(se),m(!1),x(null),_({number:"",name:""}),alert(`${J.toUpperCase()} details saved successfully!`)}catch(J){alert(`Failed to save ${v||d} details: ${J.message}`)}},$=async J=>{J.preventDefault();const se=parseFloat(l);if(isNaN(se)||se<=0){alert("Please enter a valid amount");return}const de=r.balanceWallet||0;if(se>de){alert(`Insufficient balance. Available balance: ${q(de,a.currency)}`);return}const K=se*.1,ie=se-K,ve=y[d];if(!(ve!=null&&ve.number)||!(ve!=null&&ve.name)){alert(`Please add your ${d.toUpperCase()} details first`),m(!0),x(d);return}const Ue=`Withdrawal Details:

Withdrawal Amount: ${q(se,a.currency)}
VAT Tax (10%): ${q(K,a.currency)}
You will receive: ${q(ie,a.currency)}

Proceed with withdrawal?`;if(confirm(Ue))try{await t(Ic({amount:se,paymentMethod:d,vatTax:K,netAmount:ie,...ve})).unwrap(),alert(`Withdrawal request submitted!

Amount: ${q(se,a.currency)}
VAT (10%): ${q(K,a.currency)}
You will receive: ${q(ie,a.currency)}`),u(""),e("/")}catch(je){alert(`Withdrawal failed: ${je}`)}},H=r.balanceWallet||0,oe=new Date().getDay(),z=oe===0||oe===6,te=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][oe],X=y[d];return S?o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 via-indigo-50 to-purple-50 flex items-center justify-center",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),o.jsx("p",{className:"text-gray-600 font-medium",children:"Loading payment details..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-blue-50 via-indigo-50 to-purple-50 pb-20",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white py-8 px-4 shadow-2xl relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-20",children:[o.jsx("div",{className:"absolute top-4 left-4 w-2 h-2 bg-white rounded-full animate-pulse"}),o.jsx("div",{className:"absolute top-8 right-12 w-1 h-1 bg-white rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),o.jsx("div",{className:"absolute bottom-4 left-1/4 w-1.5 h-1.5 bg-white rounded-full animate-pulse",style:{animationDelay:"1s"}})]}),o.jsxs("div",{className:"relative z-10 text-center",children:[o.jsx("div",{className:"text-4xl mb-2",children:""}),o.jsx("h1",{className:"text-3xl font-bold tracking-wide",children:"Withdraw Funds"}),o.jsx("p",{className:"text-white/90 text-sm mt-2",children:"Withdraw to BIKASH"})]})]}),o.jsxs("div",{className:"p-4 space-y-6",children:[!z&&o.jsx("div",{className:"bg-gradient-to-r from-orange-500 to-red-500 rounded-2xl p-6 shadow-2xl text-white border-2 border-orange-400",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"text-4xl animate-pulse",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold mb-2",children:"Only Saturday and Sunday Withdraw possible"}),o.jsxs("p",{className:"text-white/90 text-sm mb-2",children:["Withdrawals are only available on ",o.jsx("strong",{children:"Saturday"})," and ",o.jsx("strong",{children:"Sunday"}),"."]}),o.jsxs("p",{className:"text-white/80 text-xs",children:["Today is ",te,". Please come back on the weekend to withdraw."]})]})]})}),!T&&!L&&o.jsx("div",{className:"bg-gradient-to-r from-red-500 to-orange-500 rounded-2xl p-6 shadow-2xl text-white border-2 border-red-400",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"text-4xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h3",{className:"text-xl font-bold mb-2",children:"Account Locked"}),o.jsx("p",{className:"text-white/90 text-sm mb-3",children:"You must purchase at least one product before you can withdraw funds."}),o.jsx("button",{onClick:()=>e("/product"),className:"bg-white text-red-600 px-6 py-2 rounded-lg font-semibold hover:bg-gray-100 transition-colors",children:"Go to Products"})]})]})}),o.jsxs("div",{className:"bg-gradient-to-br from-primary to-accent rounded-2xl p-6 shadow-2xl text-white transform hover:scale-[1.02] transition-transform duration-300",children:[o.jsxs("div",{className:"flex items-center justify-between mb-2",children:[o.jsx("span",{className:"text-sm opacity-90",children:"Available Balance"}),o.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),o.jsx("div",{className:"text-3xl font-bold",children:q(H,a.currency)}),o.jsx("div",{className:"text-xs opacity-80 mt-2",children:"You can withdraw from your balance wallet"})]}),o.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-indigo-500 rounded-2xl p-6 shadow-2xl text-white border-2 border-blue-400",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"text-4xl animate-pulse",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("h3",{className:"text-xl font-bold mb-2 flex items-center gap-2",children:["Processing Time",o.jsxs("span",{className:"inline-flex items-center gap-1",children:[o.jsx("span",{className:"w-1.5 h-1.5 bg-white/90 rounded-full animate-bounce"}),o.jsx("span",{className:"w-1.5 h-1.5 bg-white/90 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),o.jsx("span",{className:"w-1.5 h-1.5 bg-white/90 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})]}),o.jsxs("p",{className:"text-white/90 text-sm",children:["Your withdraw amount will be received within ",o.jsx("strong",{children:"72 Hours"})," after submission."]}),o.jsx("div",{className:"mt-4 h-1.5 rounded-full bg-white/20 overflow-hidden",children:o.jsx("div",{className:"h-full w-full animate-shimmer"})})]})]})}),o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("span",{children:""})," Payment Method"]}),o.jsxs("div",{className:"p-4 rounded-xl border-2 border-green-500 bg-green-50 shadow-lg",children:[o.jsx("div",{className:"text-3xl mb-2",children:""}),o.jsx("div",{className:"font-semibold text-green-600",children:"BIKASH"}),(X==null?void 0:X.number)&&o.jsx("div",{className:"text-xs text-gray-500 mt-1",children:X.number})]})]}),X!=null&&X.number&&(X!=null&&X.name)?o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx("span",{children:""})," ",d.toUpperCase()," Details"]}),o.jsx("button",{onClick:()=>P(d),className:"text-primary text-sm font-medium hover:underline",children:"Edit"})]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[o.jsx("span",{className:"text-gray-600 text-sm",children:"Account Name:"}),o.jsx("span",{className:"font-semibold text-gray-800",children:X.name})]}),o.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[o.jsx("span",{className:"text-gray-600 text-sm",children:"Account Number:"}),o.jsx("span",{className:"font-semibold text-gray-800",children:X.number})]})]})]}):o.jsx("div",{className:"bg-yellow-50 border-2 border-yellow-200 rounded-2xl p-6",children:o.jsxs("div",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("h3",{className:"font-bold text-yellow-800 mb-1",children:["No ",d.toUpperCase()," Details"]}),o.jsxs("p",{className:"text-sm text-yellow-700 mb-3",children:["Please add your ",d.toUpperCase()," account details to withdraw."]}),o.jsxs("button",{onClick:()=>k(),className:"bg-yellow-500 text-white px-4 py-2 rounded-lg text-sm font-semibold hover:bg-yellow-600 transition-colors",children:["Add ",d.toUpperCase()," Details"]})]})]})}),f&&o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-white rounded-2xl p-6 max-w-md w-full shadow-2xl animate-fadeIn",children:[o.jsxs("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:[v?"Edit":"Add"," ",d.toUpperCase()," Details"]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Name"}),o.jsx("input",{type:"text",value:N.name,onChange:J=>_({...N,name:J.target.value}),placeholder:"Enter your name",className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary text-sm"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Number"}),o.jsx("input",{type:"text",value:N.number,onChange:J=>_({...N,number:J.target.value}),placeholder:`Enter ${d.toUpperCase()} number`,className:"w-full p-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-primary text-sm"})]}),o.jsxs("div",{className:"flex gap-3 pt-2",children:[o.jsx("button",{onClick:I,className:"flex-1 bg-primary text-white py-3 rounded-lg font-semibold hover:bg-primary/90 transition-colors",children:"Save"}),o.jsx("button",{onClick:()=>{m(!1),x(null),_({number:"",name:""})},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg font-semibold hover:bg-gray-300 transition-colors",children:"Cancel"})]})]})]})}),o.jsxs("form",{onSubmit:$,className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100 space-y-4",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("span",{children:""})," Withdrawal Amount"]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Enter Amount (",mr(a.currency),")"]}),o.jsx("input",{type:"number",step:"0.01",value:l,onChange:J=>u(J.target.value),placeholder:"0.00",className:"w-full p-4 text-lg border-2 border-gray-200 rounded-xl focus:outline-none focus:border-primary focus:ring-2 focus:ring-primary/20"}),o.jsxs("div",{className:"flex items-center justify-between mt-2",children:[o.jsxs("p",{className:"text-xs text-gray-500",children:["Available Balance: ",q(H,a.currency)]}),o.jsx("button",{type:"button",onClick:()=>u(H>0?H.toFixed(2):"0"),className:"text-xs text-primary font-medium hover:underline",children:"Use Max"})]}),l&&parseFloat(l)>0&&o.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-xl space-y-2",children:[o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Withdrawal Amount:"}),o.jsx("span",{className:"text-sm font-semibold text-gray-800",children:q(parseFloat(l)||0,a.currency)})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsx("span",{className:"text-sm font-medium text-gray-700",children:"VAT Tax (10%):"}),o.jsxs("span",{className:"text-sm font-semibold text-red-600",children:["-",q((parseFloat(l)||0)*.1,a.currency)]})]}),o.jsxs("div",{className:"pt-2 border-t-2 border-blue-300 flex justify-between items-center",children:[o.jsx("span",{className:"text-base font-bold text-gray-800",children:"You will receive:"}),o.jsx("span",{className:"text-base font-bold text-green-600",children:q((parseFloat(l)||0)*.9,a.currency)})]}),o.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"* 10% VAT tax will be deducted from your withdrawal amount"})]})]}),o.jsx("div",{className:"grid grid-cols-4 gap-2",children:[100,500,1e3,5e3].map(J=>o.jsx("button",{type:"button",onClick:()=>{u(Math.min(J,H).toFixed(2))},className:"py-2 text-sm rounded-lg bg-gray-100 hover:bg-primary hover:text-white transition-colors font-medium",children:q(J,a.currency)},J))}),s&&o.jsx("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:s}),o.jsx("button",{type:"submit",disabled:n||!(X!=null&&X.number)||!(X!=null&&X.name)||H<=0||!L||T||!z,className:"w-full py-4 bg-gradient-to-r from-primary to-accent text-white rounded-xl font-bold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none disabled:shadow-md",children:n?o.jsxs("span",{className:"flex items-center justify-center gap-2",children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):`Withdraw to ${d.toUpperCase()}`})]})]}),o.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: scale(0.95); }
          to { opacity: 1; transform: scale(1); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.3s ease-out;
        }
      `})]})},H6=()=>{const t=Xt(),e=en(),r=$e(w=>w.wallet),{user:n}=$e(w=>w.auth),{settings:s}=ur(),[i,a]=R.useState("unexpired"),[l,u]=R.useState({unexpired:[],expired:[]}),[d,h]=R.useState(!0),[f,m]=R.useState(null),[v,x]=R.useState({}),[y,j]=R.useState({}),[N,_]=R.useState({});R.useEffect(()=>{n&&(S(),e(tr()))},[n,e]),R.useEffect(()=>{if(l.unexpired.length===0)return;const w=setInterval(()=>{const k={},P={},I=Date.now();l.unexpired.forEach($=>{if($.expiryDate){const ue=new Date($.expiryDate)-I;if(ue>0){const oe=Math.floor(ue/36e5),z=Math.floor(ue%(1e3*60*60)/(1e3*60)),Y=Math.floor(ue%(1e3*60)/1e3);k[$.id]={hours:oe,minutes:z,seconds:Y}}else k[$.id]={hours:0,minutes:0,seconds:0}}if($.earnAmount>0){const H=se=>se!=null&&se.toMillis?se.toMillis():se?new Date(se).getTime():null,ue=H($.earnWindowStartAt)??H($.purchaseDate),oe=3*60*60*1e3,z=24*60*60*1e3,Y=ue??I,te=Math.floor(Math.max(0,I-Y)/z),X=Y+te*z,J=X+oe;if(I<X){const se=X-I,de=Math.floor(se/(60*60*1e3)),K=Math.floor(se%(60*60*1e3)/(60*1e3)),ie=Math.floor(se%(60*1e3)/1e3);P[$.id]={status:"cooldown",hours:de,minutes:K,seconds:ie,canEarn:!1}}else if(I<=J){const se=J-I,de=Math.floor(se/(60*60*1e3)),K=Math.floor(se%(60*60*1e3)/(60*1e3)),ie=Math.floor(se%(60*1e3)/1e3);P[$.id]={status:"window",hours:de,minutes:K,seconds:ie,canEarn:!0}}else{const de=X+z-I,K=Math.max(0,Math.floor(de/(60*60*1e3))),ie=Math.max(0,Math.floor(de%(60*60*1e3)/(60*1e3))),ve=Math.max(0,Math.floor(de%(60*1e3)/1e3));P[$.id]={status:"missed",hours:K,minutes:ie,seconds:ve,canEarn:!1}}}}),x(k),j(P)},1e3);return()=>clearInterval(w)},[l.unexpired]);const S=async()=>{try{h(!0),m(null);const w=await Xr.getUserProducts();w.success&&u({unexpired:w.data.unexpired||[],expired:w.data.expired||[]})}catch(w){m(w.message||"Failed to load products"),console.error("Error loading user products:",w)}finally{h(!1)}},A=w=>String(w||0).padStart(2,"0"),L=w=>w.daysRemaining!==void 0&&w.validityDays?`${w.validityDays-w.daysRemaining}/${w.validityDays}`:"0/48",O=async w=>{if(N[w])return;const k=l.unexpired.find(I=>I.id===w);if(!k)return;const P=y[w];if(!P||!P.canEarn){alert("Earning opportunity is not available. You can only earn during the 3-hour window.");return}if(confirm(`Are you sure you want to earn ${q(k.earnAmount||0,s.currency)} from this product?`))try{_($=>({...$,[w]:!0}));const I=await Xr.earnFromProduct(null,w);I.success&&(alert(`Successfully earned ${q(I.data.amount,s.currency)}!`),await S(),e(tr()))}catch(I){alert(I.message||"Failed to earn from product"),console.error("Earn error:",I)}finally{_(I=>({...I,[w]:!1}))}},T=l[i]||[],b=r.incomeToday>0?r.incomeToday:0,C=r.totalEarnings>0?r.totalEarnings:0;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 via-white to-gray-50",children:[o.jsxs("div",{className:"bg-gradient-to-r from-primary via-accent to-primary text-white py-6 px-4 shadow-lg",children:[o.jsxs("div",{className:"flex items-center mb-4",children:[o.jsx("button",{onClick:()=>t(-1),className:"flex items-center text-white hover:text-white/80 transition-colors mr-4",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h1",{className:"text-2xl font-bold tracking-wide",children:"My Products"}),o.jsx("p",{className:"text-sm text-white/90 mt-1",children:"Your Exclusive Collection"})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4",children:[o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 border border-white/30",children:[o.jsx("div",{className:"text-xs text-white/80 mb-1",children:"Today's Earnings"}),o.jsx("div",{className:"text-2xl font-bold",children:q(b,s.currency)})]}),o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 border border-white/30",children:[o.jsx("div",{className:"text-xs text-white/80 mb-1",children:"Total Earnings"}),o.jsx("div",{className:"text-2xl font-bold",children:q(C,s.currency)})]})]})]}),o.jsxs("div",{className:"p-4 pb-20",children:[o.jsx("div",{className:"bg-white rounded-2xl mb-6 shadow-lg overflow-hidden border border-gray-100",children:o.jsxs("div",{className:"flex",children:[o.jsxs("button",{onClick:()=>a("unexpired"),className:`flex-1 py-4 text-sm font-semibold relative transition-all ${i==="unexpired"?"text-primary bg-primary/10":"text-gray-600 hover:text-primary"}`,children:[o.jsx("span",{className:"relative z-10",children:"Active Products"}),i==="unexpired"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-accent"})]}),o.jsxs("button",{onClick:()=>a("expired"),className:`flex-1 py-4 text-sm font-semibold relative transition-all ${i==="expired"?"text-primary bg-primary/10":"text-gray-600 hover:text-primary"}`,children:[o.jsx("span",{className:"relative z-10",children:"Expired Products"}),i==="expired"&&o.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-gradient-to-r from-primary to-accent"})]})]})}),d&&o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),o.jsx("p",{className:"text-gray-600 font-medium",children:"Loading your products..."})]}),f&&!d&&o.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-xl text-sm mb-4",children:[f,o.jsx("button",{onClick:S,className:"ml-2 text-red-800 underline font-medium",children:"Retry"})]}),!d&&!f&&o.jsxs("div",{className:"space-y-4",children:[T.length===0?o.jsxs("div",{className:"text-center py-16",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-100 rounded-full mb-4",children:o.jsx("svg",{className:"h-10 w-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),o.jsxs("p",{className:"text-gray-600 text-lg font-medium",children:["No ",i==="unexpired"?"active":"expired"," products"]}),o.jsx("p",{className:"text-gray-400 text-sm mt-2",children:i==="unexpired"?"Purchase products to see them here":"No expired products yet"})]}):T.map(w=>{var I,$,H,ue;const k=v[w.id]||{hours:0,minutes:0,seconds:0},P=i==="expired";return o.jsx("div",{className:"group bg-white rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 overflow-hidden border border-gray-100 transform hover:-translate-y-1",children:o.jsxs("div",{className:"flex",children:[o.jsxs("div",{className:"w-32 h-32 sm:w-40 sm:h-40 flex-shrink-0 bg-gradient-to-br from-gray-100 to-gray-200 relative overflow-hidden",children:[w.imageUrl?o.jsxs(o.Fragment,{children:[o.jsx("img",{src:w.imageUrl,alt:w.productName,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-500"}),o.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"})]}):o.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-primary/10 to-accent/10",children:o.jsx("svg",{className:"h-12 w-12 text-primary/30",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),!P&&o.jsx("div",{className:"absolute top-2 left-2",children:o.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg",children:"ACTIVE"})}),P&&o.jsx("div",{className:"absolute top-2 left-2",children:o.jsx("div",{className:"bg-gradient-to-r from-gray-500 to-gray-600 text-white text-xs font-bold px-2 py-1 rounded-full shadow-lg",children:"EXPIRED"})})]}),o.jsxs("div",{className:"flex-1 p-4 sm:p-5 flex flex-col justify-between min-w-0",children:[o.jsxs("div",{className:"space-y-2",children:[o.jsx("h3",{className:"text-base font-bold text-gray-900 line-clamp-1",children:w.productName}),o.jsxs("div",{className:"flex items-baseline gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Price:"}),o.jsx("span",{className:"text-lg font-bold text-primary",children:q(w.productPrice||0,s.currency)})]}),o.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-600",children:[o.jsxs("div",{children:[o.jsx("span",{className:"text-gray-500",children:"Validity: "}),o.jsxs("span",{className:"font-semibold text-gray-900",children:[L(w)," days"]})]}),w.daysRemaining!==void 0&&!P&&o.jsxs("div",{className:"text-primary font-semibold",children:[w.daysRemaining," days left"]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Total Earnings:"}),o.jsx("span",{className:"text-sm font-bold text-green-600",children:q(w.totalEarnings||0,s.currency)}),w.totalEarning>0&&o.jsxs("span",{className:"text-xs text-gray-400",children:["/ ",q(w.totalEarning,s.currency)," max"]})]}),w.totalEarning>0&&w.totalEarnings>=w.totalEarning&&o.jsx("div",{className:"flex items-center gap-2 mt-1",children:o.jsx("span",{className:"text-xs font-semibold text-orange-600",children:" Maximum earning limit reached"})}),w.totalEarning>0&&w.totalEarnings<w.totalEarning&&o.jsxs("div",{className:"mt-1",children:[o.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:o.jsx("div",{className:"bg-gradient-to-r from-green-500 to-emerald-500 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(w.totalEarnings/w.totalEarning*100,100)}%`}})}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[(w.totalEarnings/w.totalEarning*100).toFixed(1),"% of maximum earned"]})]}),w.validateDate&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Valid Until:"}),o.jsx("span",{className:"text-xs font-semibold text-gray-900",children:new Date((I=w.validateDate)!=null&&I.toMillis?w.validateDate.toMillis():w.validateDate).toLocaleDateString()})]}),w.earnAmount>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Daily Earn:"}),o.jsx("span",{className:"text-sm font-bold text-blue-600",children:q(w.earnAmount,s.currency)})]}),w.totalEarning>0&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-xs text-gray-500",children:"Max Total Earning:"}),o.jsx("span",{className:"text-sm font-bold text-purple-600",children:q(w.totalEarning,s.currency)})]}),!P&&w.earnAmount>0&&y[w.id]&&o.jsxs("div",{className:"mt-3 p-3 rounded-xl border-2 shadow-md",style:{backgroundColor:y[w.id].status==="available"||y[w.id].status==="window"?"rgba(34, 197, 94, 0.1)":y[w.id].status==="missed"?"rgba(239, 68, 68, 0.1)":"rgba(59, 130, 246, 0.1)",borderColor:y[w.id].status==="available"||y[w.id].status==="window"?"rgb(34, 197, 94)":y[w.id].status==="missed"?"rgb(239, 68, 68)":"rgb(59, 130, 246)"},children:[y[w.id].status==="available"&&o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-sm font-bold text-green-700",children:"Earning Available Now!"}),o.jsxs("div",{className:"text-xs text-green-600 mt-0.5",children:["You can earn ",q(w.earnAmount,s.currency)," right away"]})]})]}),y[w.id].status==="window"&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-sm font-bold text-orange-700",children:" 3-Hour Window Open!"}),o.jsx("div",{className:"text-xs text-orange-600 mt-0.5",children:"You can earn once during this window"})]})]}),o.jsxs("div",{className:"bg-white/50 rounded-lg p-2 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Time Remaining:"}),o.jsxs("div",{className:"text-lg font-bold text-orange-700",children:[A(y[w.id].hours),":",A(y[w.id].minutes),":",A(y[w.id].seconds)]})]})]}),y[w.id].status==="cooldown"&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-sm font-bold text-blue-700",children:"Next Earning Opportunity"}),o.jsxs("div",{className:"text-xs text-blue-600 mt-0.5",children:["You can earn ",q(w.earnAmount,s.currency)," in:"]})]})]}),o.jsxs("div",{className:"bg-white/50 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Time Until Next Earn:"}),o.jsxs("div",{className:"text-2xl font-bold text-blue-700 tracking-wider",children:[A(y[w.id].hours),":",A(y[w.id].minutes),":",A(y[w.id].seconds)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[y[w.id].hours>0&&`${y[w.id].hours} hour${y[w.id].hours>1?"s":""}, `,y[w.id].minutes," minute",y[w.id].minutes!==1?"s":"",", ",y[w.id].seconds," second",y[w.id].seconds!==1?"s":""]})]})]}),y[w.id].status==="missed"&&o.jsxs("div",{className:"space-y-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:o.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("div",{className:"text-sm font-bold text-red-700",children:" Window Missed"}),o.jsx("div",{className:"text-xs text-red-600 mt-0.5",children:"Next 3-hour window in:"})]})]}),o.jsxs("div",{className:"bg-white/50 rounded-lg p-3 text-center",children:[o.jsx("div",{className:"text-xs text-gray-600 mb-1",children:"Time Until Next Earn:"}),o.jsxs("div",{className:"text-2xl font-bold text-red-700 tracking-wider",children:[A(y[w.id].hours),":",A(y[w.id].minutes),":",A(y[w.id].seconds)]}),o.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[y[w.id].hours>0&&`${y[w.id].hours} hour${y[w.id].hours>1?"s":""}, `,y[w.id].minutes," minute",y[w.id].minutes!==1?"s":"",", ",y[w.id].seconds," second",y[w.id].seconds!==1?"s":""]})]})]})]})]}),!P&&w.earnAmount>0&&o.jsx("button",{className:`w-full font-semibold py-3 rounded-xl shadow-lg hover:shadow-xl transform transition-all duration-200 mt-4 flex items-center justify-center gap-2 group/btn ${($=y[w.id])!=null&&$.canEarn&&!N[w.id]?"bg-gradient-to-r from-primary to-accent text-white hover:scale-[1.02]":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,onClick:()=>O(w.id),disabled:!((H=y[w.id])!=null&&H.canEarn)||N[w.id],children:N[w.id]?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),o.jsx("span",{children:"Processing..."})]}):(ue=y[w.id])!=null&&ue.canEarn?o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"h-5 w-5 group-hover/btn:rotate-12 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsxs("span",{className:"font-bold",children:["Earn ",q(w.earnAmount,s.currency)]})]}):o.jsx(o.Fragment,{children:o.jsx("span",{children:"Earn Unavailable"})})}),!P&&(!w.earnAmount||w.earnAmount===0)&&o.jsxs("div",{className:"mt-4 text-center",children:[o.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Expires in:"}),o.jsxs("div",{className:"text-sm font-semibold text-gray-900",children:[A(k.hours),":",A(k.minutes),":",A(k.seconds)]})]})]})]})},w.id)}),T.length>0&&o.jsx("div",{className:"text-center py-6",children:o.jsxs("div",{className:"inline-flex items-center gap-2 text-gray-400 text-sm",children:[o.jsx("div",{className:"h-px w-12 bg-gray-300"}),o.jsx("span",{children:"End of list"}),o.jsx("div",{className:"h-px w-12 bg-gray-300"})]})})]})]})]})},q6=()=>{const t=$e(b=>b.user),e=$e(b=>b.auth.user),{settings:r}=ur(),[n,s]=R.useState(""),[i,a]=R.useState(0),[l,u]=R.useState(0),[d,h]=R.useState(!1),[f,m]=R.useState(!0),[v,x]=R.useState(!1),y=(e==null?void 0:e.id)||(t==null?void 0:t.id),j=y?y.substring(0,8).toUpperCase():"",N=n||j;R.useEffect(()=>{_()},[y]),R.useEffect(()=>{S()},[e==null?void 0:e.id]);const _=async()=>{if(!y){m(!1);return}try{m(!0);const b=await Ne(ae(G,"users",y));if(b.exists()){const C=b.data();let w=C.referralCode;w||(w=A(),await Ae(ae(G,"users",y),{referralCode:w,updatedAt:re()})),s(w);const k=C.totalReferrals||0;a(k)}else s(j)}catch(b){console.error("Failed to load referral code:",b),s(j)}finally{m(!1)}},S=async()=>{if(e!=null&&e.id)try{x(!0);const b=await Rd.getReferralStatistics(null);b!=null&&b.success&&(a(b.data.totalReferrals||0),u(b.data.purchasedCount||0))}catch(b){console.error("Failed to load referral stats:",b)}finally{x(!1)}},A=()=>{const b="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let C="";for(let w=0;w<8;w++)C+=b.charAt(Math.floor(Math.random()*b.length));return C},L=N?`${window.location.origin}/register?ref=${encodeURIComponent(N)}`:`${window.location.origin}/register`,O=()=>{N&&(navigator.clipboard.writeText(N),h(!0),setTimeout(()=>h(!1),2e3))},T=()=>{navigator.clipboard.writeText(L),h(!0),setTimeout(()=>h(!1),2e3)};return f?o.jsx("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 via-pink-50 to-orange-50 flex items-center justify-center pb-20",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 border-4 border-primary border-t-transparent rounded-full animate-spin mb-4"}),o.jsx("p",{className:"text-gray-600 font-medium",children:"Loading referral information..."})]})}):o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-purple-50 via-pink-50 to-orange-50 pb-20",children:[o.jsxs("div",{className:"bg-gradient-to-r from-purple-600 via-pink-600 to-orange-600 text-white py-10 px-4 shadow-2xl relative overflow-hidden",children:[o.jsxs("div",{className:"absolute inset-0 opacity-20",children:[o.jsx("div",{className:"absolute top-4 left-4 w-3 h-3 bg-white rounded-full animate-pulse"}),o.jsx("div",{className:"absolute top-8 right-12 w-2 h-2 bg-white rounded-full animate-pulse",style:{animationDelay:"0.5s"}}),o.jsx("div",{className:"absolute bottom-4 left-1/4 w-2.5 h-2.5 bg-white rounded-full animate-pulse",style:{animationDelay:"1s"}})]}),o.jsxs("div",{className:"relative z-10 text-center",children:[o.jsx("div",{className:"text-5xl mb-3 animate-bounce",children:""}),o.jsx("h1",{className:"text-3xl font-bold tracking-wide mb-2",children:"Invite & Earn"}),o.jsx("p",{className:"text-white/90 text-sm",children:"Share your referral code and get rewards!"})]})]}),o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsx("div",{className:"bg-gradient-to-br from-green-500 to-emerald-600 rounded-2xl p-6 shadow-2xl text-white border-2 border-green-400",children:o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsxs("div",{children:[o.jsx("div",{className:"text-2xl font-bold mb-1",children:" Referral Rewards"}),o.jsxs("div",{className:"text-sm text-green-100",children:["You earn ",q(r.referralBonus||200,r.currency)," when a referred user makes their first product purchase."]})]}),o.jsx("div",{className:"text-4xl font-extrabold text-yellow-200",children:q(r.referralBonus||200,r.currency)})]})}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-xl border border-gray-100 text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-primary mb-1",children:v?"...":i}),o.jsx("div",{className:"text-sm text-gray-600",children:"Total Referrals"})]}),o.jsxs("div",{className:"bg-white rounded-2xl p-5 shadow-xl border border-gray-100 text-center",children:[o.jsx("div",{className:"text-3xl font-bold text-green-600 mb-1",children:q((l||0)*(r.referralBonus||200),r.currency)}),o.jsx("div",{className:"text-sm text-gray-600",children:"Total Rewards Earned"}),o.jsx("div",{className:"text-xs text-gray-400 mt-1",children:v?"Calculating":`${l} referral purchase(s)`})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border-2 border-primary/30",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("span",{children:""})," Your Unique Referral Code"]}),o.jsx("div",{className:"bg-gradient-to-r from-primary/10 to-accent/10 rounded-xl p-6 border-2 border-dashed border-primary/50 relative",children:o.jsxs("div",{className:"text-center",children:[o.jsx("div",{className:"text-4xl font-black text-primary tracking-widest mb-3 select-all",children:N||""}),o.jsx("button",{onClick:O,className:"px-6 py-2 bg-primary text-white rounded-lg font-semibold hover:bg-primary/90 transition-colors text-sm flex items-center gap-2 mx-auto",children:d?o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Code"]})})]})})]}),o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("span",{children:""})," Share Referral Link"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200 break-all select-all text-sm text-gray-700 font-mono",children:L}),o.jsx("button",{onClick:T,className:"w-full px-4 py-3 bg-gradient-to-r from-primary to-accent text-white rounded-lg font-semibold hover:shadow-lg transform hover:scale-[1.02] transition-all duration-300 flex items-center justify-center gap-2",children:d?o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Link Copied!"]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy Referral Link"]})})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("span",{children:""})," Share Via"]}),o.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[o.jsxs("button",{onClick:()=>{const b=`Join using my referral code: ${N}. After your first product purchase, I will receive ${q(r.referralBonus||200,r.currency)}. ${L}`;window.open(`https://wa.me/?text=${encodeURIComponent(b)}`,"_blank")},className:"p-4 bg-green-500 text-white rounded-xl font-semibold hover:bg-green-600 transition-colors flex flex-col items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"text-xs",children:"WhatsApp"})]}),o.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(`Join using my referral code: ${N}. After your first product purchase, I will receive ${q(r.referralBonus||200,r.currency)}. ${L}`),h(!0),setTimeout(()=>h(!1),2e3)},className:"p-4 bg-blue-500 text-white rounded-xl font-semibold hover:bg-blue-600 transition-colors flex flex-col items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"text-xs",children:"Message"})]}),o.jsxs("button",{onClick:()=>{navigator.share?navigator.share({title:"Join with my referral code!",text:`Join using my referral code: ${N}. After your first product purchase, I will receive ${q(r.referralBonus||200,r.currency)}.`,url:L}):T()},className:"p-4 bg-purple-500 text-white rounded-xl font-semibold hover:bg-purple-600 transition-colors flex flex-col items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{className:"text-xs",children:"Share"})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl p-6 border border-blue-200",children:[o.jsxs("h3",{className:"font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("span",{children:""})," How It Works"]}),o.jsxs("ul",{className:"space-y-3 text-sm text-gray-700",children:[o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-primary font-bold text-lg",children:"1."}),o.jsx("span",{children:"Share your unique referral code with friends"})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-primary font-bold text-lg",children:"2."}),o.jsx("span",{children:"They sign up using your referral code"})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-primary font-bold text-lg",children:"3."}),o.jsxs("span",{children:["When they make their first product purchase, you receive ",q(r.referralBonus||200,r.currency),"."]})]}),o.jsxs("li",{className:"flex items-start gap-3",children:[o.jsx("span",{className:"text-primary font-bold text-lg",children:"4."}),o.jsx("span",{children:"The bonus is added to your wallet automatically after their first purchase."})]})]})]})]})]})},G6=()=>o.jsxs("div",{className:"p-4 space-y-4",children:[o.jsx("h1",{className:"text-xl font-semibold",children:"App Download"}),o.jsx("p",{className:"text-sm text-gray-700",children:"Get the full ADDI experience by downloading our mobile app."}),o.jsxs("div",{className:"bg-white p-4 rounded-md shadow-sm text-sm space-y-3 text-center",children:[o.jsx("div",{className:"text-gray-700",children:"Scan the QR code below with your phone camera to download:"}),o.jsx("div",{className:"flex justify-center",children:o.jsx("img",{alt:"QR code",className:"h-32 w-32",src:"https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=https://example.com/download"})}),o.jsx("div",{className:"text-gray-500 text-xs",children:"Or visit: https://example.com/download"})]})]}),K6=()=>{var a,l,u,d,h,f,m,v,x;const t=$e(y=>y.team),e=Xt(),{settings:r}=ur(),n=(a=t.statistics)!=null&&a.yesterdayNewMembers?((t.statistics.todayNewMembers-t.statistics.yesterdayNewMembers)/t.statistics.yesterdayNewMembers*100).toFixed(1):0,s=(l=t.statistics)!=null&&l.yesterdayRechargeAmount?((t.statistics.todayRechargeAmount-t.statistics.yesterdayRechargeAmount)/t.statistics.yesterdayRechargeAmount*100).toFixed(1):0,i=(u=t.statistics)!=null&&u.lastMonthRechargeAmount?((t.statistics.currentMonthRechargeAmount-t.statistics.lastMonthRechargeAmount)/t.statistics.lastMonthRechargeAmount*100).toFixed(1):0;return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-slate-900 via-blue-900 to-indigo-900 text-white pb-20",children:[o.jsxs("div",{className:"bg-gradient-to-r from-blue-600 via-indigo-600 to-purple-600 text-white py-10 px-4 shadow-2xl relative overflow-hidden",children:[o.jsx("div",{className:"absolute inset-0 opacity-30",children:[...Array(15)].map((y,j)=>o.jsx("div",{className:"absolute w-2 h-2 bg-white rounded-full animate-pulse",style:{left:`${Math.random()*100}%`,top:`${Math.random()*100}%`,animationDelay:`${Math.random()*3}s`,animationDuration:`${2+Math.random()*2}s`}},j))}),o.jsxs("div",{className:"relative z-10 flex items-center",children:[o.jsx("button",{onClick:()=>e(-1),className:"p-2 hover:bg-white/20 rounded-lg transition-colors mr-3 backdrop-blur-sm",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 19l-7-7 7-7"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("h1",{className:"text-4xl font-extrabold tracking-wide mb-2 flex items-center gap-3",children:[o.jsx("span",{className:"text-5xl",children:""}),"My Teams"]}),o.jsx("p",{className:"text-white/90 text-sm",children:"Track your team performance and earnings"})]})]})]}),o.jsxs("div",{className:"px-4 pt-6 space-y-6",children:[o.jsxs("div",{className:"relative bg-gradient-to-br from-yellow-400 via-orange-500 to-pink-500 rounded-3xl p-8 shadow-2xl text-white transform hover:scale-[1.02] transition-all duration-300 overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white/20 rounded-full -mr-16 -mt-16"}),o.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white/10 rounded-full -ml-12 -mb-12"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-4",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[o.jsx("div",{className:"bg-white/20 backdrop-blur-sm rounded-full p-2",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsxs("div",{children:[o.jsx("div",{className:"text-sm opacity-90 font-medium",children:"Team Cumulative Recharge"}),o.jsx("div",{className:"text-xs opacity-70",children:"Total from all team members"})]})]}),o.jsx("div",{className:"text-5xl font-black mb-2 tracking-tight",children:q(t.cumulativeRecharge||0,r.currency)})]}),o.jsx("div",{className:"text-7xl opacity-20",children:""})]}),o.jsx("div",{className:"flex items-center gap-2 mt-4 pt-4 border-t border-white/20",children:o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-lg px-3 py-1.5 text-xs font-semibold",children:[i>0?"":i<0?"":""," ",i>0?"+":"",i,"% vs last month"]})})]})]}),o.jsxs("button",{onClick:()=>alert("Daily commission details feature coming soon"),className:"w-full bg-gradient-to-r from-purple-600 via-pink-600 to-rose-600 hover:from-purple-700 hover:via-pink-700 hover:to-rose-700 text-white py-5 rounded-2xl font-bold shadow-2xl transform hover:scale-[1.02] hover:shadow-purple-500/50 transition-all duration-300 flex items-center justify-center gap-3 text-lg",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsx("span",{children:"Daily Commission Details"}),o.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),o.jsxs("div",{className:"bg-white/5 backdrop-blur-md rounded-3xl p-6 shadow-2xl border border-white/10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-6",children:[o.jsxs("h2",{className:"text-2xl font-bold flex items-center gap-3",children:[o.jsx("div",{className:"bg-gradient-to-br from-blue-500 to-purple-600 rounded-xl p-2",children:o.jsx("span",{className:"text-2xl",children:""})}),o.jsx("span",{children:"Team Statistics"})]}),o.jsx("div",{className:"text-xs text-white/60 bg-white/10 px-3 py-1 rounded-full",children:"Real-time data"})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{className:"group relative bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-blue-500/50 transition-all duration-300 overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-3xl",children:""}),n!==0&&o.jsxs("div",{className:`text-xs font-bold px-2 py-1 rounded-full ${n>0?"bg-green-500/30 text-green-200":"bg-red-500/30 text-red-200"}`,children:[n>0?"":""," ",Math.abs(n),"%"]})]}),o.jsx("div",{className:"text-4xl font-black text-white mb-2",children:((d=t.statistics)==null?void 0:d.todayNewMembers)||0}),o.jsx("div",{className:"text-blue-200 text-xs font-semibold",children:"Today's New Members"})]})]}),o.jsxs("div",{className:"group relative bg-gradient-to-br from-indigo-600 via-purple-700 to-pink-800 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-purple-500/50 transition-all duration-300 overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("div",{className:"text-3xl",children:""})}),o.jsx("div",{className:"text-4xl font-black text-white mb-2",children:((h=t.statistics)==null?void 0:h.yesterdayNewMembers)||0}),o.jsx("div",{className:"text-indigo-200 text-xs font-semibold",children:"Yesterday's New Members"})]})]}),o.jsxs("div",{className:"group relative bg-gradient-to-br from-green-500 via-emerald-600 to-teal-700 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-green-500/50 transition-all duration-300 overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-3xl",children:""}),s!==0&&o.jsxs("div",{className:`text-xs font-bold px-2 py-1 rounded-full ${s>0?"bg-green-500/30 text-green-200":"bg-red-500/30 text-red-200"}`,children:[s>0?"":""," ",Math.abs(s),"%"]})]}),o.jsx("div",{className:"text-2xl font-black text-white mb-2 leading-tight",children:q(((f=t.statistics)==null?void 0:f.todayRechargeAmount)||0,r.currency)}),o.jsx("div",{className:"text-green-200 text-xs font-semibold",children:"Today Recharge Amount"})]})]}),o.jsxs("div",{className:"group relative bg-gradient-to-br from-teal-500 via-cyan-600 to-blue-700 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-cyan-500/50 transition-all duration-300 overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("div",{className:"text-3xl",children:""})}),o.jsx("div",{className:"text-2xl font-black text-white mb-2 leading-tight",children:q(((m=t.statistics)==null?void 0:m.yesterdayRechargeAmount)||0,r.currency)}),o.jsx("div",{className:"text-teal-200 text-xs font-semibold",children:"Yesterday Recharge Amount"})]})]}),o.jsxs("div",{className:"group relative bg-gradient-to-br from-orange-500 via-red-600 to-pink-700 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-orange-500/50 transition-all duration-300 overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),o.jsxs("div",{className:"relative z-10",children:[o.jsxs("div",{className:"flex items-center justify-between mb-3",children:[o.jsx("div",{className:"text-3xl",children:""}),i!==0&&o.jsxs("div",{className:`text-xs font-bold px-2 py-1 rounded-full ${i>0?"bg-green-500/30 text-green-200":"bg-red-500/30 text-red-200"}`,children:[i>0?"":""," ",Math.abs(i),"%"]})]}),o.jsx("div",{className:"text-2xl font-black text-white mb-2 leading-tight",children:q(((v=t.statistics)==null?void 0:v.currentMonthRechargeAmount)||0,r.currency)}),o.jsx("div",{className:"text-orange-200 text-xs font-semibold",children:"Current Month Recharge"})]})]}),o.jsxs("div",{className:"group relative bg-gradient-to-br from-purple-500 via-pink-600 to-rose-700 rounded-2xl p-5 shadow-xl transform hover:scale-105 hover:shadow-pink-500/50 transition-all duration-300 overflow-hidden",children:[o.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-white/10 rounded-full -mr-10 -mt-10"}),o.jsxs("div",{className:"relative z-10",children:[o.jsx("div",{className:"flex items-center justify-between mb-3",children:o.jsx("div",{className:"text-3xl",children:""})}),o.jsx("div",{className:"text-2xl font-black text-white mb-2 leading-tight",children:q(((x=t.statistics)==null?void 0:x.lastMonthRechargeAmount)||0,r.currency)}),o.jsx("div",{className:"text-purple-200 text-xs font-semibold",children:"Last Month Recharge"})]})]})]})]}),o.jsxs("div",{className:"bg-gradient-to-br from-slate-800/50 to-slate-900/50 backdrop-blur-md rounded-3xl p-6 shadow-xl border border-white/10",children:[o.jsxs("h3",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[o.jsx("span",{className:"text-2xl",children:""}),"Quick Insights"]}),o.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[o.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[o.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Member Growth"}),o.jsxs("div",{className:`text-lg font-bold ${n>0?"text-green-400":n<0?"text-red-400":"text-gray-400"}`,children:[n>0?"+":"",n,"%"]})]}),o.jsxs("div",{className:"bg-white/5 rounded-xl p-4 border border-white/10",children:[o.jsx("div",{className:"text-xs text-white/60 mb-1",children:"Recharge Growth"}),o.jsxs("div",{className:`text-lg font-bold ${s>0?"text-green-400":s<0?"text-red-400":"text-gray-400"}`,children:[s>0?"+":"",s,"%"]})]})]})]})]})]})},Q6=()=>{const{settings:t,loading:e}=ur(),r=a=>a?a.replace(/[^\d+]/g,""):"",n="+601121222669",s=t.supportNumber||n,i=()=>{const a=r(s);if(!a){alert("Support number is not configured. Please contact admin.");return}const l=encodeURIComponent("Hello! I need support.");window.open(`https://wa.me/${a}?text=${l}`,"_blank")};return o.jsxs("div",{className:"flex flex-col min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50 pb-6",children:[o.jsxs("div",{className:"relative bg-gradient-to-r from-primary to-accent p-6 text-white mb-6 rounded-b-3xl shadow-lg",children:[o.jsx("div",{className:"absolute inset-0 bg-black/10 rounded-b-3xl"}),o.jsx("div",{className:"relative z-10",children:o.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[o.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-full",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192l-3.536 3.536M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"})})}),o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold",children:"Online Support"}),o.jsx("p",{className:"text-white/90 text-sm",children:"We're here to help you 24/7"})]})]})})]}),o.jsxs("div",{className:"px-4 space-y-6",children:[o.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:o.jsxs("div",{className:"flex items-start gap-4",children:[o.jsx("div",{className:"flex-shrink-0 bg-gradient-to-br from-blue-500 to-purple-500 p-3 rounded-xl",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),o.jsxs("div",{className:"flex-1",children:[o.jsx("h2",{className:"text-lg font-bold text-gray-800 mb-2",children:"Need Help?"}),o.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"Our customer support team is ready to assist you with any questions or concerns. Contact us through WhatsApp for instant support and quick responses."})]})]})}),o.jsxs("div",{className:"bg-gradient-to-br from-green-500 to-green-600 rounded-2xl p-6 shadow-2xl text-white transform hover:scale-[1.02] transition-transform duration-300",children:[o.jsx("div",{className:"flex items-center justify-between mb-4",children:o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-white/20 backdrop-blur-sm p-3 rounded-full",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-8",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})}),o.jsxs("div",{children:[o.jsx("h3",{className:"text-xl font-bold",children:"WhatsApp Support"}),o.jsx("p",{className:"text-white/90 text-sm",children:"Tap to chat with us instantly"})]})]})}),e?o.jsx("div",{className:"flex items-center justify-center py-4",children:o.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-white"})}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-white/20 backdrop-blur-sm rounded-xl p-4 mb-4",children:[o.jsx("p",{className:"text-sm text-white/80 mb-1",children:"Support Number"}),o.jsx("p",{className:"text-xl font-bold",children:s})]}),o.jsxs("button",{onClick:i,className:"w-full bg-white text-green-600 font-bold py-4 rounded-xl hover:bg-gray-100 transition-colors duration-200 flex items-center justify-center gap-2 shadow-lg",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"currentColor",viewBox:"0 0 24 24",children:o.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),o.jsx("span",{children:"Open WhatsApp"})]})]})]}),o.jsxs("div",{className:"bg-white rounded-2xl p-6 shadow-xl border border-gray-100",children:[o.jsxs("h3",{className:"text-lg font-bold text-gray-800 mb-4 flex items-center gap-2",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Support Information"]}),o.jsxs("div",{className:"space-y-3",children:[o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-xl",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"24/7 Availability"}),o.jsx("p",{className:"text-gray-600 text-xs",children:"Our support team is available around the clock"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-xl",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-blue-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13 10V3L4 14h7v7l9-11h-7z"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"Quick Response"}),o.jsx("p",{className:"text-gray-600 text-xs",children:"Get instant help through WhatsApp messaging"})]})]}),o.jsxs("div",{className:"flex items-start gap-3 p-3 bg-gray-50 rounded-xl",children:[o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-purple-500 flex-shrink-0 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})}),o.jsxs("div",{children:[o.jsx("p",{className:"font-semibold text-gray-800 text-sm",children:"Secure Communication"}),o.jsx("p",{className:"text-gray-600 text-xs",children:"Your conversations are encrypted and private"})]})]})]})]})]})]})},Y6=()=>{const t=Xt(),e=Dr(),r=en(),{isAuthenticated:n,loading:s,error:i}=$e(y=>y.auth),[a,l]=R.useState({phone:"",password:""}),[u,d]=R.useState(!1),[h,f]=R.useState({});R.useEffect(()=>{var y,j;if(n){const N=((j=(y=e.state)==null?void 0:y.from)==null?void 0:j.pathname)||"/";t(N,{replace:!0})}},[n,t,e]),R.useEffect(()=>()=>{r(qn())},[r]);const m=y=>{const{name:j,value:N}=y.target;l(_=>({..._,[j]:N})),h[j]&&f(_=>({..._,[j]:""})),i&&r(qn())},v=()=>{const y={};return a.phone.trim()?/^[0-9]{10,15}$/.test(a.phone.replace(/\s+/g,""))||(y.phone="Please enter a valid phone number (10-15 digits)"):y.phone="Phone number is required",a.password?a.password.length<6&&(y.password="Password must be at least 6 characters"):y.password="Password is required",f(y),Object.keys(y).length===0},x=async y=>{var j,N;if(y.preventDefault(),v())try{if((await r(Nc({identifier:a.phone.trim(),password:a.password,loginType:"phone"})).unwrap()).user.role==="admin")t("/admin",{replace:!0});else{const S=((N=(j=e.state)==null?void 0:j.from)==null?void 0:N.pathname)||"/";t(S,{replace:!0})}}catch(_){console.error("Login failed:",_)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 px-4 py-8",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-primary to-accent rounded-2xl shadow-lg mb-4",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Welcome Back"}),o.jsx("p",{className:"text-gray-600 text-sm",children:"Sign in to your account to continue"})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("form",{onSubmit:x,className:"space-y-6",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})}),o.jsx("input",{type:"tel",id:"phone",name:"phone",value:a.phone,onChange:m,placeholder:"Enter your phone number",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${h.phone?"border-red-500":"border-gray-300"}`})]}),h.phone&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.phone})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),o.jsx("input",{type:u?"text":"password",id:"password",name:"password",value:a.password,onChange:m,placeholder:"Enter your password",className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${h.password?"border-red-500":"border-gray-300"}`}),o.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:u?o.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[o.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),o.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):o.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[o.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.906 1.28L3.707 2.293zM14.95 6.05a3 3 0 014.242 4.242L14.95 6.05zm-4.95 4.95l-4.242-4.242a3 3 0 014.242 4.242L10 11z",clipRule:"evenodd"}),o.jsx("path",{d:"M12.316 13.757l-1.415-1.415a3 3 0 01-4.242-4.242L3.05 6.05a10 10 0 00-.542 3.95c0 4.478 2.943 8.268 7 9.542a9.98 9.98 0 003.808-.795z"})]})})]}),h.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:h.password})]}),o.jsx("div",{className:"flex items-center justify-end",children:o.jsx(rs,{to:"/forgot-password",className:"text-sm text-primary hover:text-accent transition-colors",children:"Forgot password?"})}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:i}),o.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary to-accent text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:s?"Signing In...":"Sign In"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["Don't have an account?"," ",o.jsx(rs,{to:"/register",className:"text-primary font-semibold hover:text-accent transition-colors",children:"Sign Up"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(rs,{to:"/",className:"text-sm text-gray-600 hover:text-primary transition-colors inline-flex items-center gap-1",children:[o.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]})})]})})},J6=()=>{const t=Xt(),e=en(),[r]=gT(),{isAuthenticated:n,loading:s,error:i}=$e(L=>L.auth),{settings:a}=ur(),[l,u]=R.useState("nid"),[d,h]=R.useState({name:"",phone:"",password:"",nid:"",passport:""}),[f,m]=R.useState(!1),[v,x]=R.useState({}),[y,j]=R.useState("");R.useState(""),R.useEffect(()=>{const L=r.get("ref");L&&j(L)},[r]),R.useEffect(()=>{n&&t("/",{replace:!0})},[n,t]),R.useEffect(()=>()=>{e(qn())},[e]);const N=L=>{const{name:O,value:T}=L.target;h(b=>({...b,[O]:T})),v[O]&&x(b=>({...b,[O]:""})),i&&e(qn())},_=L=>{const O=L.target.value;u(O),O==="nid"?(h(T=>({...T,passport:""})),x(T=>({...T,passport:"",idNumber:""}))):(h(T=>({...T,nid:""})),x(T=>({...T,nid:"",idNumber:""})))},S=()=>{const L={};return d.name.trim()?d.name.trim().length<2&&(L.name="Name must be at least 2 characters"):L.name="Name is required",d.phone.trim()?/^[0-9]{10,15}$/.test(d.phone.replace(/\s+/g,""))||(L.phone="Please enter a valid phone number"):L.phone="Phone number is required",d.password?d.password.length<6&&(L.password="Password must be at least 6 characters"):L.password="Password is required",(l==="nid"?d.nid:d.passport).trim()||(L.idNumber=`${l==="nid"?"NID":"Passport"} is required`),x(L),Object.keys(L).length===0},A=async L=>{if(L.preventDefault(),S())try{await e(Ec({name:d.name,phone:d.phone,password:d.password,nid:d.nid||null,passport:d.passport||null,referralCode:y||null})).unwrap(),t("/",{replace:!0})}catch(O){console.error("Registration failed:",O)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 px-4 py-8",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-primary to-accent rounded-2xl shadow-lg mb-4",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 9v3m0 0v3m0-3h3m-3 0h-3m-2-5a4 4 0 11-8 0 4 4 0 018 0zM3 20a6 6 0 0112 0v1H3v-1z"})})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Create Account"}),o.jsx("p",{className:"text-gray-600 text-sm",children:"Sign up to get started"}),y&&o.jsx("div",{className:"mt-4 bg-gradient-to-r from-green-100 to-emerald-100 border-2 border-green-400 rounded-xl p-4",children:o.jsxs("div",{className:"flex items-center gap-2 text-green-800",children:[o.jsx("span",{className:"text-2xl",children:""}),o.jsxs("div",{children:[o.jsx("div",{className:"font-bold text-sm",children:"Referral detected"}),o.jsxs("div",{className:"text-xs",children:["Your referrer will receive ",q(a.referralBonus||200,a.currency)," after your first product purchase."]})]})]})})]}),o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("form",{onSubmit:A,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),o.jsx("input",{type:"text",id:"name",name:"name",value:d.name,onChange:N,placeholder:"Enter your full name",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${v.name?"border-red-500":"border-gray-300"}`})]}),v.name&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.name})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{d:"M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"})})}),o.jsx("input",{type:"tel",id:"phone",name:"phone",value:d.phone,onChange:N,placeholder:"Enter your phone number",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${v.phone?"border-red-500":"border-gray-300"}`})]}),v.phone&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.phone})]}),o.jsxs("div",{children:[o.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),o.jsx("input",{type:f?"text":"password",id:"password",name:"password",value:d.password,onChange:N,placeholder:"Create a password",className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${v.password?"border-red-500":"border-gray-300"}`}),o.jsx("button",{type:"button",onClick:()=>m(!f),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:f?o.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[o.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),o.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):o.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[o.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.906 1.28L3.707 2.293zM14.95 6.05a3 3 0 014.242 4.242L14.95 6.05zm-4.95 4.95l-4.242-4.242a3 3 0 014.242 4.242L10 11z",clipRule:"evenodd"}),o.jsx("path",{d:"M12.316 13.757l-1.415-1.415a3 3 0 01-4.242-4.242L3.05 6.05a10 10 0 00-.542 3.95c0 4.478 2.943 8.268 7 9.542a9.98 9.98 0 003.808-.795z"})]})})]}),v.password&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.password})]}),o.jsxs("div",{className:"space-y-4",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"idType",className:"block text-sm font-medium text-gray-700 mb-2",children:["ID Type ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-10",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})}),o.jsxs("select",{id:"idType",name:"idType",value:l,onChange:_,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all appearance-none bg-white",children:[o.jsx("option",{value:"nid",children:"NID (National ID)"}),o.jsx("option",{value:"passport",children:"Passport Number"})]}),o.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"idNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:[l==="nid"?"NID Number":"Passport Number"," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:l==="nid"?o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}):o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"})})}),o.jsx("input",{type:"text",id:"idNumber",name:l,value:l==="nid"?d.nid:d.passport,onChange:N,placeholder:l==="nid"?"Enter your NID number":"Enter your Passport number",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${v.idNumber?"border-red-500":"border-gray-300"}`,required:!0})]}),v.idNumber&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.idNumber})]})]}),i&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:i}),o.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-primary to-accent text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 mt-6 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:s?"Creating Account...":"Create Account"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",o.jsx(rs,{to:"/login",className:"text-primary font-semibold hover:text-accent transition-colors",children:"Sign In"})]})})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(rs,{to:"/",className:"text-sm text-gray-600 hover:text-primary transition-colors inline-flex items-center gap-1",children:[o.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Home"]})})]})})},X6=()=>{const t=Xt(),e=en(),{loading:r,error:n}=$e(I=>I.auth),[s,i]=R.useState(1),[a,l]=R.useState("nid"),[u,d]=R.useState(""),[h,f]=R.useState(""),[m,v]=R.useState(""),[x,y]=R.useState(!1),[j,N]=R.useState(!1),[_,S]=R.useState({}),[A,L]=R.useState(null);R.useEffect(()=>()=>{e(qn())},[e]);const O=I=>{l(I.target.value),d(""),S({})},T=I=>{d(I.target.value),_.idNumber&&S($=>({...$,idNumber:""})),n&&e(qn())},b=I=>{const{name:$,value:H}=I.target;$==="newPassword"?f(H):$==="confirmPassword"&&v(H),_[$]&&S(ue=>({...ue,[$]:""})),n&&e(qn())},C=()=>{const I={};return u.trim()||(I.idNumber=`${a==="nid"?"NID":"Passport"} is required`),S(I),Object.keys(I).length===0},w=()=>{const I={};return h?h.length<6&&(I.newPassword="Password must be at least 6 characters"):I.newPassword="New password is required",m?h!==m&&(I.confirmPassword="Passwords do not match"):I.confirmPassword="Please confirm your password",S(I),Object.keys(I).length===0},k=async I=>{if(I.preventDefault(),C())try{const $=await e(Sc({idType:a,idNumber:u.trim()})).unwrap();L($),i(2)}catch($){console.error("Identity verification failed:",$)}},P=async I=>{if(I.preventDefault(),w())try{await e(jc({userId:A.userId,newPassword:h})).unwrap(),i(3),setTimeout(()=>{t("/login",{replace:!0})},3e3)}catch($){console.error("Password reset failed:",$)}};return o.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 px-4 py-8",children:o.jsxs("div",{className:"w-full max-w-md",children:[o.jsxs("div",{className:"text-center mb-8",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-primary to-accent rounded-2xl shadow-lg mb-4",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"})})}),o.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Reset Password"}),o.jsxs("p",{className:"text-gray-600 text-sm",children:[s===1&&"Verify your identity to reset your password",s===2&&"Enter your new password",s===3&&"Password reset successful!"]})]}),s===1&&o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsxs("form",{onSubmit:k,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"idType",className:"block text-sm font-medium text-gray-700 mb-2",children:["ID Type ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-10",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})})}),o.jsxs("select",{id:"idType",name:"idType",value:a,onChange:O,className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all appearance-none bg-white",children:[o.jsx("option",{value:"nid",children:"NID (National ID)"}),o.jsx("option",{value:"passport",children:"Passport Number"})]}),o.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"idNumber",className:"block text-sm font-medium text-gray-700 mb-2",children:[a==="nid"?"NID Number":"Passport Number"," ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:a==="nid"?o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{d:"M10 2a6 6 0 00-6 6v3.586l-.707.707A1 1 0 004 14h12a1 1 0 00.707-1.707L16 11.586V8a6 6 0 00-6-6zM10 18a3 3 0 01-3-3h6a3 3 0 01-3 3z"})}):o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z"})})}),o.jsx("input",{type:"text",id:"idNumber",name:"idNumber",value:u,onChange:T,placeholder:a==="nid"?"Enter your NID number":"Enter your Passport number",className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${_.idNumber?"border-red-500":"border-gray-300"}`})]}),_.idNumber&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.idNumber})]}),n&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:n}),o.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-primary to-accent text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:r?"Verifying...":"Verify Identity"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs(rs,{to:"/login",className:"text-sm text-primary hover:text-accent transition-colors inline-flex items-center gap-1",children:[o.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back to Login"]})})]}),s===2&&A&&o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[o.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:o.jsxs("p",{className:"text-sm text-blue-800",children:[o.jsx("span",{className:"font-semibold",children:"Verified:"})," ",A.name," (",A.phone,")"]})}),o.jsxs("form",{onSubmit:P,className:"space-y-5",children:[o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"newPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:["New Password ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),o.jsx("input",{type:x?"text":"password",id:"newPassword",name:"newPassword",value:h,onChange:b,placeholder:"Enter new password",className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${_.newPassword?"border-red-500":"border-gray-300"}`}),o.jsx("button",{type:"button",onClick:()=>y(!x),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:x?o.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[o.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),o.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):o.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[o.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.906 1.28L3.707 2.293zM14.95 6.05a3 3 0 014.242 4.242L14.95 6.05zm-4.95 4.95l-4.242-4.242a3 3 0 014.242 4.242L10 11z",clipRule:"evenodd"}),o.jsx("path",{d:"M12.316 13.757l-1.415-1.415a3 3 0 01-4.242-4.242L3.05 6.05a10 10 0 00-.542 3.95c0 4.478 2.943 8.268 7 9.542a9.98 9.98 0 003.808-.795z"})]})})]}),_.newPassword&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.newPassword})]}),o.jsxs("div",{children:[o.jsxs("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-2",children:["Confirm Password ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:o.jsx("svg",{className:"h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),o.jsx("input",{type:j?"text":"password",id:"confirmPassword",name:"confirmPassword",value:m,onChange:b,placeholder:"Confirm new password",className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-primary focus:border-transparent transition-all ${_.confirmPassword?"border-red-500":"border-gray-300"}`}),o.jsx("button",{type:"button",onClick:()=>N(!j),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600",children:j?o.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[o.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),o.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):o.jsxs("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:[o.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.906 1.28L3.707 2.293zM14.95 6.05a3 3 0 014.242 4.242L14.95 6.05zm-4.95 4.95l-4.242-4.242a3 3 0 014.242 4.242L10 11z",clipRule:"evenodd"}),o.jsx("path",{d:"M12.316 13.757l-1.415-1.415a3 3 0 01-4.242-4.242L3.05 6.05a10 10 0 00-.542 3.95c0 4.478 2.943 8.268 7 9.542a9.98 9.98 0 003.808-.795z"})]})})]}),_.confirmPassword&&o.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.confirmPassword})]}),n&&o.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:n}),o.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-primary to-accent text-white py-3 rounded-lg font-semibold shadow-lg hover:shadow-xl transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:r?"Resetting Password...":"Reset Password"})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsxs("button",{type:"button",onClick:()=>{i(1),L(null),f(""),v(""),S({}),e(qn())},className:"text-sm text-primary hover:text-accent transition-colors inline-flex items-center gap-1",children:[o.jsx("svg",{className:"h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z",clipRule:"evenodd"})}),"Back"]})})]}),s===3&&o.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 text-center",children:[o.jsxs("div",{className:"mb-6",children:[o.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4",children:o.jsx("svg",{className:"h-8 w-8 text-green-600",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),o.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Password Reset Successful!"}),o.jsx("p",{className:"text-gray-600",children:"Your password has been reset successfully. Redirecting to login page..."})]}),o.jsxs(rs,{to:"/login",className:"inline-flex items-center gap-2 text-primary hover:text-accent transition-colors font-semibold",children:["Go to Login",o.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:o.jsx("path",{fillRule:"evenodd",d:"M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z",clipRule:"evenodd"})})]})]})]})})},Z6=()=>{const t=Xt(),{user:e}=$e(D=>D.auth),[r,n]=R.useState("members"),[s,i]=R.useState(!1),[a,l]=R.useState([]),[u,d]=R.useState([]),[h,f]=R.useState(!1),[m,v]=R.useState(null),[x,y]=R.useState({name:"",price:"",description:"",imageUrl:"",validityDays:"45",earnAmount:"",totalEarning:""}),[j,N]=R.useState([]),[_,S]=R.useState([]),[A,L]=R.useState([]),{settings:O,loadSettings:T}=ur(),[b,C]=R.useState({bKashNumber:"",bikashQRCodeId:"",totalSystemCurrency:0,currency:"USD",referralBonus:200,supportNumber:"+601121222669"}),[w,k]=R.useState(!1);R.useEffect(()=>{O&&C(O)},[O]);const P=async()=>{i(!0);try{const D=await Ps.getAllMembers();D.success&&l(D.data.members||[])}catch(D){alert("Failed to load members: "+D.message)}finally{i(!1)}},I=async()=>{i(!0);try{const D=await Xr.getProducts();D.success&&d(D.data.products||[])}catch(D){alert("Failed to load products: "+D.message)}finally{i(!1)}},$=async()=>{i(!0);try{const D=await Ps.getAllTransactions();D.success&&N(D.data.transactions||[])}catch(D){alert("Failed to load transactions: "+D.message)}finally{i(!1)}},H=async()=>{i(!0);try{const D=await Ps.getAllWithdrawals();D.success&&S(D.data.withdrawals||[])}catch(D){alert("Failed to load withdrawals: "+D.message)}finally{i(!1)}},ue=async()=>{i(!0);try{const D=await Ps.getAllPendingRecharges();D.success&&L(D.data.recharges||[])}catch(D){alert("Failed to load pending recharges: "+D.message)}finally{i(!1)}},oe=async()=>{try{await T()}catch(D){console.error("Failed to load settings:",D)}},z=async()=>{var D;i(!0);try{const le="+601121222669",Me={...b,supportNumber:((D=b.supportNumber)==null?void 0:D.trim())||le};await aN.updateSettings(null,Me),alert("Settings saved successfully"),k(!1),await oe()}catch(le){alert("Failed to save settings: "+le.message)}finally{i(!1)}},Y=async(D,le)=>{const Me=le==="approved"?"approve":"reject";if(confirm(`Are you sure you want to ${Me} this recharge request?`)){i(!0);try{(await Ps.updateRechargeStatus(null,D,le)).success&&(await ue(),alert(`Recharge ${Me}d successfully`))}catch(mt){alert("Failed to update recharge status: "+mt.message)}finally{i(!1)}}};R.useEffect(()=>{$(),H(),oe()},[]),R.useEffect(()=>{r==="members"&&P(),r==="products"&&I(),r==="transactions"&&$(),r==="withdrawals"&&H(),r==="recharges"&&ue(),r==="settings"&&oe()},[r]);const te=async(D,le)=>{if(confirm(`Are you sure you want to ${le?"deactivate":"activate"} this member?`)){i(!0);try{(await Ps.toggleMemberStatus(null,D,!le)).success&&(await P(),alert(`Member ${le?"deactivated":"activated"} successfully`))}catch(Me){alert("Failed to update member: "+Me.message)}finally{i(!1)}}},X=async D=>{D.preventDefault(),i(!0);try{const le=parseInt(x.validityDays,10),Me=Number.isFinite(le)&&le>0?le:45,mt={name:x.name,price:parseFloat(x.price),description:x.description,imageUrl:x.imageUrl,validityDays:Me,validateDate:null,earnAmount:x.earnAmount?parseFloat(x.earnAmount):0,totalEarning:x.totalEarning?parseFloat(x.totalEarning):0};m?(await Xr.updateProduct(null,m.id,mt),alert("Product updated successfully")):(await Xr.addProduct(null,mt),alert("Product added successfully")),f(!1),v(null),y({name:"",price:"",description:"",imageUrl:"",validityDays:"45",earnAmount:"",totalEarning:""}),await I()}catch(le){alert("Failed to save product: "+le.message)}finally{i(!1)}},J=async(D,le)=>{const Me=le==="approved"?"approve":"reject";if(confirm(`Are you sure you want to ${Me} this withdrawal?`)){i(!0);try{(await Ps.updateWithdrawalStatus(null,D,le)).success&&(await H(),alert(`Withdrawal ${Me}d successfully`))}catch(mt){alert("Failed to update withdrawal: "+mt.message)}finally{i(!1)}}},se=D=>{if(!D)return"N/A";try{return D.toMillis?new Date(D.toMillis()).toLocaleString():new Date(D).toLocaleString()}catch{return"N/A"}},de=D=>{var Me,mt,js;const le=Number(D==null?void 0:D.validityDays);if(!Number.isNaN(le)&&le>0)return Math.floor(le);if(D!=null&&D.validateDate){const Dd=new Date,Lr=(Me=D.validateDate)!=null&&Me.toDate?D.validateDate.toDate():(mt=D.validateDate)!=null&&mt.toMillis?new Date(D.validateDate.toMillis()):new Date(D.validateDate);if(!Number.isNaN((js=Lr==null?void 0:Lr.getTime)==null?void 0:js.call(Lr)))return Math.max(0,Math.ceil((Lr-Dd)/864e5))}return null},K=j.filter(D=>D.type==="recharge"&&(D.status==="approved"||D.status==="completed")).reduce((D,le)=>{const Me=typeof le.amount=="number"?le.amount:parseFloat(le.amount)||0;return D+Me},0),ie=_.filter(D=>D.status==="approved").reduce((D,le)=>{const Me=typeof le.amount=="number"?le.amount:parseFloat(le.amount)||0;return D+Me},0),ve=K-ie,Ue=()=>{const le=new Date().getDate();return le>=1&&le<=5},je={totalMembers:a.length,activeMembers:a.filter(D=>D.isActive).length,inactiveMembers:a.filter(D=>!D.isActive).length,totalProducts:u.length,pendingWithdrawals:_.filter(D=>D.status==="pending").length,totalTransactions:j.length,totalRecharge:K,totalWithdraw:ie,totalBalance:ve,totalSystemCurrency:b.totalSystemCurrency||0},br=async()=>{if(!Ue()){alert("Reset is only available from 1st to 5th of each month");return}if(confirm("Are you sure you want to reset all Balance, Recharge, and Withdraw data? This action cannot be undone!")){i(!0);try{const D=Pe(G,"wallets"),le=await We(D),Me=iR(G);let mt=0;le.forEach(js=>{Me.update(js.ref,{balanceWallet:0,rechargeWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()}),mt++}),await Me.commit(),alert(`Successfully reset ${mt} wallets. Please note: Transaction history remains but balances are reset.`),await $(),await H()}catch(D){alert(`Failed to reset data: ${D.message}`)}finally{i(!1)}}};return o.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-900 via-gray-800 to-gray-900 text-white",children:[o.jsx("header",{className:"bg-gray-900 border-b border-gray-700 py-4 px-4 sticky top-0 z-10",children:o.jsxs("div",{className:"flex items-center justify-between max-w-7xl mx-auto",children:[o.jsxs("div",{children:[o.jsx("h1",{className:"text-2xl font-bold tracking-wider",children:"Admin Panel"}),o.jsxs("p",{className:"text-sm text-gray-400 mt-1",children:["Welcome, ",(e==null?void 0:e.name)||"Admin"]})]}),o.jsx("button",{onClick:()=>t("/"),className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded-md text-sm transition-colors",children:"Back to App"})]})}),o.jsxs("div",{className:"container mx-auto px-4 py-6 max-w-7xl",children:[o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-6",children:[o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[o.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Members"}),o.jsx("div",{className:"text-2xl font-bold",children:je.totalMembers})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[o.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Active Members"}),o.jsx("div",{className:"text-2xl font-bold text-green-400",children:je.activeMembers})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[o.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Inactive Members"}),o.jsx("div",{className:"text-2xl font-bold text-red-400",children:je.inactiveMembers})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[o.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Products"}),o.jsx("div",{className:"text-2xl font-bold",children:je.totalProducts})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[o.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Pending Withdrawals"}),o.jsx("div",{className:"text-2xl font-bold text-orange-400",children:je.pendingWithdrawals})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[o.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Transactions"}),o.jsx("div",{className:"text-2xl font-bold",children:je.totalTransactions})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[o.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Recharge"}),o.jsx("div",{className:"text-2xl font-bold text-green-400",children:q(je.totalRecharge,b.currency)})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700",children:[o.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Withdraw"}),o.jsx("div",{className:"text-2xl font-bold text-red-400",children:q(je.totalWithdraw,b.currency)})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 border-yellow-500/50",children:[o.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"System Currency"}),o.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:q(je.totalSystemCurrency,b.currency)})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-4 border border-gray-700 border-blue-500/50",children:[o.jsx("div",{className:"text-gray-400 text-xs mb-1",children:"Total Balance"}),o.jsx("div",{className:`text-2xl font-bold ${je.totalBalance>=0?"text-blue-400":"text-red-400"}`,children:q(je.totalBalance,b.currency)}),o.jsx("div",{className:"text-[10px] text-gray-500 mt-1",children:"Recharge - Withdraw"})]})]}),Ue()&&o.jsx("div",{className:"mb-6 bg-gradient-to-r from-red-900 to-orange-900 rounded-lg p-4 border-2 border-red-500/50",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsx("h3",{className:"font-bold text-red-200 mb-1",children:" Monthly Reset Available"}),o.jsx("p",{className:"text-xs text-red-300",children:"Reset all wallet balances (1st to 5th only)"})]}),o.jsx("button",{onClick:br,disabled:s,className:"px-6 py-2 bg-red-600 hover:bg-red-700 rounded-lg font-semibold text-sm disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:s?"Resetting...":"Reset All Balances"})]})}),o.jsxs("div",{className:"bg-gray-800 rounded-lg border border-gray-700 mb-6",children:[o.jsx("div",{className:"flex border-b border-gray-700 overflow-x-auto",children:[{id:"members",label:"Members"},{id:"products",label:"Products"},{id:"transactions",label:"All Transactions"},{id:"withdrawals",label:"Withdrawals"},{id:"recharges",label:"Pending Recharges"},{id:"settings",label:"Settings"}].map(D=>o.jsx("button",{onClick:()=>n(D.id),className:`px-6 py-3 text-sm font-medium transition-colors ${r===D.id?"text-white border-b-2 border-blue-500":"text-gray-400 hover:text-white"}`,children:D.label},D.id))}),o.jsxs("div",{className:"p-6",children:[s&&o.jsx("div",{className:"text-center py-8 text-gray-400",children:"Loading..."}),r==="members"&&!s&&o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Member Management"}),o.jsx("button",{onClick:P,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-sm",children:"Refresh"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:"Name"}),o.jsx("th",{className:"p-3",children:"Phone"}),o.jsx("th",{className:"p-3",children:"Status"}),o.jsx("th",{className:"p-3",children:"Joined"}),o.jsx("th",{className:"p-3",children:"Actions"})]})}),o.jsxs("tbody",{children:[a.map(D=>o.jsxs("tr",{className:"border-b border-gray-700",children:[o.jsx("td",{className:"p-3",children:D.name}),o.jsx("td",{className:"p-3",children:D.phone}),o.jsx("td",{className:"p-3",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.isActive?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:D.isActive?"Active":"Inactive"})}),o.jsx("td",{className:"p-3 text-sm text-gray-400",children:se(D.createdAt)}),o.jsx("td",{className:"p-3",children:o.jsx("button",{onClick:()=>te(D.id,D.isActive),className:`px-3 py-1 rounded text-xs ${D.isActive?"bg-red-600 hover:bg-red-700":"bg-green-600 hover:bg-green-700"}`,children:D.isActive?"Deactivate":"Activate"})})]},D.id)),a.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:"5",className:"p-6 text-center text-gray-400",children:"No members found"})})]})]})})]}),r==="products"&&!s&&o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Product Management"}),o.jsx("button",{onClick:()=>{v(null),y({name:"",price:"",description:"",imageUrl:"",validityDays:"45",earnAmount:"",totalEarning:""}),f(!0)},className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-md text-sm",children:"Add Product"})]}),o.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[u.map(D=>o.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg border border-gray-600",children:[o.jsx("h3",{className:"font-semibold mb-2",children:D.name}),o.jsx("p",{className:"text-green-400 text-lg font-bold mb-2",children:q(D.price,b.currency)}),o.jsxs("p",{className:"text-gray-400 text-sm mb-2",children:["Validity: ",de(D)!==null?`${de(D)} days`:""]}),D.description&&o.jsx("p",{className:"text-gray-400 text-sm mb-3",children:D.description}),o.jsx("button",{onClick:()=>{v(D);const le=de(D);y({name:D.name,price:D.price.toString(),description:D.description||"",imageUrl:D.imageUrl||"",validityDays:le!==null?le.toString():"45",earnAmount:(D.earnAmount||0).toString(),totalEarning:(D.totalEarning||0).toString()}),f(!0)},className:"w-full px-3 py-2 bg-blue-600 hover:bg-blue-700 rounded text-sm",children:"Edit"})]},D.id)),u.length===0&&o.jsx("div",{className:"col-span-full text-center py-8 text-gray-400",children:"No products found"})]})]}),r==="transactions"&&!s&&o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"All Transactions"}),o.jsx("button",{onClick:$,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-sm",children:"Refresh"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:"User"}),o.jsx("th",{className:"p-3",children:"Type"}),o.jsx("th",{className:"p-3",children:"Amount"}),o.jsx("th",{className:"p-3",children:"Status"}),o.jsx("th",{className:"p-3",children:"Date"})]})}),o.jsxs("tbody",{children:[j.map(D=>o.jsxs("tr",{className:"border-b border-gray-700",children:[o.jsxs("td",{className:"p-3",children:[o.jsx("div",{children:D.userName}),o.jsx("div",{className:"text-xs text-gray-400",children:D.userPhone})]}),o.jsx("td",{className:"p-3",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.type==="recharge"?"bg-blue-900 text-blue-300":"bg-purple-900 text-purple-300"}`,children:D.type})}),o.jsx("td",{className:"p-3 font-semibold",children:q(D.amount,b.currency)}),o.jsx("td",{className:"p-3",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.status==="completed"?"bg-green-900 text-green-300":D.status==="pending"?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"}`,children:D.status})}),o.jsx("td",{className:"p-3 text-sm text-gray-400",children:se(D.createdAt)})]},D.id)),j.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:"5",className:"p-6 text-center text-gray-400",children:"No transactions found"})})]})]})})]}),r==="withdrawals"&&!s&&o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Withdrawal Management"}),o.jsx("button",{onClick:H,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-sm",children:"Refresh"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:"User"}),o.jsx("th",{className:"p-3",children:"Amount"}),o.jsx("th",{className:"p-3",children:"Payment Method"}),o.jsx("th",{className:"p-3",children:"Account Number"}),o.jsx("th",{className:"p-3",children:"Status"}),o.jsx("th",{className:"p-3",children:"Date"}),o.jsx("th",{className:"p-3",children:"Actions"})]})}),o.jsxs("tbody",{children:[_.map(D=>o.jsxs("tr",{className:"border-b border-gray-700",children:[o.jsxs("td",{className:"p-3",children:[o.jsx("div",{children:D.userName}),o.jsx("div",{className:"text-xs text-gray-400",children:D.userPhone})]}),o.jsx("td",{className:"p-3 font-semibold text-red-400",children:o.jsxs("div",{children:[o.jsx("div",{className:"font-semibold",children:q(D.amount,b.currency)}),D.vatTax&&o.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["VAT (10%): ",q(D.vatTax,b.currency)," | Net: ",q(D.netAmount||D.amount-D.vatTax,b.currency)]})]})}),o.jsx("td",{className:"p-3",children:D.paymentMethod?o.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${D.paymentMethod==="bikash"?"bg-green-900 text-green-300":"bg-orange-900 text-orange-300"}`,children:D.paymentMethod.toUpperCase()}):o.jsx("span",{className:"text-gray-500 text-xs",children:"N/A"})}),o.jsx("td",{className:"p-3",children:D.paymentNumber?o.jsxs("div",{children:[o.jsx("div",{className:"text-sm font-medium text-gray-300",children:D.paymentNumber}),D.paymentName&&o.jsx("div",{className:"text-xs text-gray-500",children:D.paymentName})]}):o.jsx("span",{className:"text-gray-500 text-xs",children:"N/A"})}),o.jsx("td",{className:"p-3",children:o.jsx("span",{className:`px-2 py-1 rounded text-xs ${D.status==="approved"?"bg-green-900 text-green-300":D.status==="pending"?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"}`,children:D.status})}),o.jsx("td",{className:"p-3 text-sm text-gray-400",children:se(D.createdAt)}),o.jsx("td",{className:"p-3",children:D.status==="pending"&&o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>J(D.id,"approved"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-xs",children:"Approve"}),o.jsx("button",{onClick:()=>J(D.id,"rejected"),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:"Reject"})]})})]},D.id)),_.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:"7",className:"p-6 text-center text-gray-400",children:"No withdrawals found"})})]})]})})]}),r==="recharges"&&!s&&o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"Pending Recharge Requests"}),o.jsx("button",{onClick:ue,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded-md text-sm",children:"Refresh"})]}),o.jsx("div",{className:"overflow-x-auto",children:o.jsxs("table",{className:"w-full text-left",children:[o.jsx("thead",{className:"bg-gray-700",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-3",children:"User"}),o.jsx("th",{className:"p-3",children:"Amount"}),o.jsx("th",{className:"p-3",children:"Proof"}),o.jsx("th",{className:"p-3",children:"Date"}),o.jsx("th",{className:"p-3",children:"Actions"})]})}),o.jsxs("tbody",{children:[A.map(D=>o.jsxs("tr",{className:"border-b border-gray-700",children:[o.jsxs("td",{className:"p-3",children:[o.jsx("div",{children:D.userName}),o.jsx("div",{className:"text-xs text-gray-400",children:D.userPhone})]}),o.jsx("td",{className:"p-3 font-semibold text-green-400",children:q(D.amount,b.currency)}),o.jsx("td",{className:"p-3",children:D.proofImageUrl?o.jsx("a",{href:D.proofImageUrl,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 text-sm",children:"View Proof"}):o.jsx("span",{className:"text-gray-500 text-sm",children:"No proof"})}),o.jsx("td",{className:"p-3 text-sm text-gray-400",children:se(D.createdAt)}),o.jsx("td",{className:"p-3",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:()=>Y(D.id,"approved"),className:"px-3 py-1 bg-green-600 hover:bg-green-700 rounded text-xs",children:"Approve"}),o.jsx("button",{onClick:()=>Y(D.id,"rejected"),className:"px-3 py-1 bg-red-600 hover:bg-red-700 rounded text-xs",children:"Reject"})]})})]},D.id)),A.length===0&&o.jsx("tr",{children:o.jsx("td",{colSpan:"5",className:"p-6 text-center text-gray-400",children:"No pending recharge requests"})})]})]})})]}),r==="settings"&&!s&&o.jsxs("div",{children:[o.jsxs("div",{className:"mb-4 flex justify-between items-center",children:[o.jsx("h2",{className:"text-xl font-semibold",children:"App Settings"}),o.jsx("button",{onClick:()=>k(!0),className:"px-4 py-2 bg-green-600 hover:bg-green-700 rounded-md text-sm",children:"Edit Settings"})]}),o.jsxs("div",{className:"bg-gray-700 p-4 rounded-lg",children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Touch 'n Go Number"}),o.jsx("p",{className:"text-white",children:b.bKashNumber||"Not set"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Touch 'n Go QR Code ID"}),o.jsx("p",{className:"text-white",children:b.bikashQRCodeId||"Not set"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Currency"}),o.jsxs("p",{className:"text-white",children:[b.currency||"USD"," (",mr(b.currency||"USD"),")"]})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Total System Currency"}),o.jsx("p",{className:"text-white text-lg font-semibold",children:q(b.totalSystemCurrency||0,b.currency)})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Invitation Bonus"}),o.jsx("p",{className:"text-white text-lg font-semibold",children:q(b.referralBonus||200,b.currency)}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Bonus amount the referrer gets after the referred users first product purchase"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Support Number (WhatsApp)"}),o.jsx("p",{className:"text-white",children:b.supportNumber||"+601121222669"})]})]})]})]})]})]}),w&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Edit Settings"}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Touch 'n Go Number"}),o.jsx("input",{type:"text",value:b.bKashNumber,onChange:D=>C({...b,bKashNumber:D.target.value}),placeholder:"Enter Touch 'n Go number",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Touch 'n Go QR Code ID"}),o.jsx("input",{type:"text",value:b.bikashQRCodeId||"",onChange:D=>C({...b,bikashQRCodeId:D.target.value}),placeholder:"Enter Touch 'n Go QR Code ID (used for QR code generation)",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"This QR Code ID will always be used for payment QR codes"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Currency"}),o.jsxs("select",{value:b.currency||"USD",onChange:D=>C({...b,currency:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",children:[o.jsx("option",{value:"USD",children:"USD ($) - US Dollar"}),o.jsx("option",{value:"BDT",children:"BDT () - Bangladeshi Taka"}),o.jsx("option",{value:"MYR",children:"MYR (RM) - Malaysian Ringgit"})]}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Select the currency for the system"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Total System Currency"}),o.jsx("input",{type:"number",step:"0.01",value:b.totalSystemCurrency||0,onChange:D=>C({...b,totalSystemCurrency:parseFloat(D.target.value)||0}),placeholder:"Enter total system currency",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Total amount of currency in the system"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Invitation Bonus"}),o.jsx("input",{type:"number",step:"0.01",value:b.referralBonus||200,onChange:D=>C({...b,referralBonus:parseFloat(D.target.value)||200}),placeholder:"Enter invitation bonus amount",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Bonus amount the referrer gets after the referred users first product purchase"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Support Number (WhatsApp)"}),o.jsx("input",{type:"text",value:b.supportNumber||"",onChange:D=>C({...b,supportNumber:D.target.value}),placeholder:"+601121222669 (default)",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Support number that users can click to contact via WhatsApp. Default: +601121222669"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("button",{onClick:z,disabled:s,className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 rounded disabled:opacity-50",children:"Save Settings"}),o.jsx("button",{onClick:()=>{k(!1),oe()},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"})]})]})}),h&&o.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:o.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 max-w-md w-full border border-gray-700",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:m?"Edit Product":"Add Product"}),o.jsxs("form",{onSubmit:X,children:[o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Name"}),o.jsx("input",{type:"text",value:x.name,onChange:D=>y({...x,name:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",required:!0})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Price"}),o.jsx("input",{type:"number",step:"0.01",value:x.price,onChange:D=>y({...x,price:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",required:!0})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Description"}),o.jsx("textarea",{value:x.description,onChange:D=>y({...x,description:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",rows:"3"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Product Image URL"}),o.jsx("input",{type:"url",value:x.imageUrl,onChange:D=>y({...x,imageUrl:D.target.value}),placeholder:"https://example.com/image.jpg",className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Validity (Days)"}),o.jsx("input",{type:"number",min:"1",step:"1",value:x.validityDays,onChange:D=>y({...x,validityDays:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",required:!0}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Default is 45 days. Users get this many days of validity after purchase."})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Earn Amount (Daily)"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:x.earnAmount,onChange:D=>y({...x,earnAmount:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white",required:!0}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Amount user can earn daily from this product"})]}),o.jsxs("div",{className:"mb-4",children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Total Earning (Maximum)"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:x.totalEarning,onChange:D=>y({...x,totalEarning:D.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"}),o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Maximum total amount user can earn from this product (0 = unlimited)"})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{type:"submit",className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 rounded",disabled:s,children:[m?"Update":"Add"," Product"]}),o.jsx("button",{type:"button",onClick:()=>{f(!1),v(null),y({name:"",price:"",description:"",imageUrl:"",validityDays:"45",earnAmount:"",totalEarning:""})},className:"px-4 py-2 bg-gray-700 hover:bg-gray-600 rounded",children:"Cancel"})]})]})]})})]})},e5=({children:t})=>{const{isAuthenticated:e,user:r}=$e(i=>i.auth),n=Dr();return e?(r==null?void 0:r.role)==="admin"||(r==null?void 0:r.isAdmin)===!0?t:o.jsx(ru,{to:"/",replace:!0}):o.jsx(ru,{to:"/login",state:{from:n},replace:!0})},t5=t=>btoa(t),r5=async()=>{try{const t=Pe(G,"users");return{success:!0,message:"Firebase connection successful",userCount:(await We(t)).size}}catch(t){return{success:!1,message:`Connection failed: ${t.message}`,error:t}}},n5=async(t={})=>{const{name:e="Admin User",phone:r="1234567890",password:n="admin123",nid:s="ADMIN001"}=t;try{const i=Pe(G,"users"),a=ot(i,Ze("phone","==",r)),l=await We(a);if(!l.empty)return{success:!0,message:"Admin user already exists",isNew:!1,userId:l.docs[0].id,credentials:{phone:r,password:n}};const u=t5(n),d=ae(Pe(G,"users"));await vn(d,{name:e,phone:r,password:u,nid:s,role:"admin",isActive:!0,createdAt:re(),lastLogin:null});const h=d.id;return await vn(ae(G,"wallets",h),{userId:h,rechargeWallet:0,balanceWallet:0,totalEarnings:0,totalWithdrawals:0,incomeToday:0,incomeYesterday:0,lossToday:0,lossTotal:0,updatedAt:re()}),{success:!0,message:"Admin user seeded successfully",isNew:!0,userId:h,credentials:{phone:r,password:n}}}catch(i){return{success:!1,message:`Failed to seed admin: ${i.message}`,error:i}}},s5=()=>{const[t,e]=R.useState(null),[r,n]=R.useState(null),[s,i]=R.useState(!1),[a,l]=R.useState({name:"Admin User",phone:"1234567890",password:"admin123",nid:"ADMIN001"});R.useEffect(()=>{u()},[]);const u=async()=>{i(!0);const h=await r5();e(h),i(!1)},d=async()=>{i(!0);const h=await n5(a);n(h),i(!1)};return o.jsx("div",{className:"min-h-screen bg-gray-900 text-white p-8",children:o.jsxs("div",{className:"max-w-2xl mx-auto",children:[o.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Firebase Admin Seeding"}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 mb-6 border border-gray-700",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Connection Test"}),o.jsx("button",{onClick:u,disabled:s,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 rounded disabled:opacity-50 mb-4",children:"Test Firebase Connection"}),t&&o.jsxs("div",{className:`p-4 rounded ${t.success?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:[o.jsx("p",{className:"font-semibold",children:t.message}),t.userCount!==void 0&&o.jsxs("p",{className:"text-sm mt-2",children:["Users in database: ",t.userCount]}),t.error&&o.jsxs("p",{className:"text-sm mt-2",children:["Error: ",t.error.message]})]})]}),o.jsxs("div",{className:"bg-gray-800 rounded-lg p-6 border border-gray-700",children:[o.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Seed Admin User"}),o.jsxs("div",{className:"space-y-4 mb-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Name"}),o.jsx("input",{type:"text",value:a.name,onChange:h=>l({...a,name:h.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Phone"}),o.jsx("input",{type:"text",value:a.phone,onChange:h=>l({...a,phone:h.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"Password"}),o.jsx("input",{type:"password",value:a.password,onChange:h=>l({...a,password:h.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium mb-2",children:"NID"}),o.jsx("input",{type:"text",value:a.nid,onChange:h=>l({...a,nid:h.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white"})]})]}),o.jsx("button",{onClick:d,disabled:s||!(t!=null&&t.success),className:"w-full px-4 py-2 bg-green-600 hover:bg-green-700 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:s?"Seeding...":"Seed Admin User"}),r&&o.jsxs("div",{className:`mt-4 p-4 rounded ${r.success?"bg-green-900 text-green-300":"bg-red-900 text-red-300"}`,children:[o.jsx("p",{className:"font-semibold",children:r.message}),r.credentials&&o.jsxs("div",{className:"mt-2 text-sm",children:[o.jsx("p",{children:"Login credentials:"}),o.jsxs("p",{children:["Phone: ",r.credentials.phone]}),o.jsxs("p",{children:["Password: ",r.credentials.password]})]})]})]}),o.jsxs("div",{className:"mt-6 p-4 bg-blue-900 rounded text-blue-200 text-sm",children:[o.jsx("p",{className:"font-semibold mb-2",children:"Instructions:"}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1",children:[o.jsx("li",{children:"First, test the Firebase connection"}),o.jsx("li",{children:"If connection is successful, fill in admin details"}),o.jsx("li",{children:'Click "Seed Admin User" to create the admin account'}),o.jsx("li",{children:"Use the credentials to login as admin"}),o.jsx("li",{children:"Remove this component from your app after seeding"})]})]})]})})},i5=()=>{const t=en(),e=Xt(),r=Dr(),{isAuthenticated:n,user:s}=$e(i=>i.auth);return R.useEffect(()=>{(async()=>{if(n&&s&&!["/login","/register"].includes(r.pathname))try{const a=await Ne(ae(G,"users",s.id));if(a.exists()){const l=a.data();l.role!=="admin"&&!l.isActive&&(await t(Hs()).unwrap(),e("/login",{replace:!0}))}else await t(Hs()).unwrap(),e("/login",{replace:!0})}catch(a){console.error("Error checking user status:",a),await t(Hs()).unwrap(),e("/login",{replace:!0})}})()},[n,s,t,e,r.pathname]),null},o5=()=>o.jsxs(o.Fragment,{children:[o.jsx(i5,{}),o.jsxs(sT,{children:[o.jsx(st,{path:"/login",element:o.jsx(Y6,{})}),o.jsx(st,{path:"/register",element:o.jsx(J6,{})}),o.jsx(st,{path:"/forgot-password",element:o.jsx(X6,{})}),o.jsx(st,{path:"/seed-admin",element:o.jsx(s5,{})}),o.jsx(st,{path:"/admin",element:o.jsx(e5,{children:o.jsx(Z6,{})})}),o.jsxs(st,{path:"/",element:o.jsx(y6,{}),children:[o.jsx(st,{index:!0,element:o.jsx(dr,{children:o.jsx(w6,{})})}),o.jsx(st,{path:"product",element:o.jsx(dr,{children:o.jsx(T6,{})})}),o.jsx(st,{path:"cashback",element:o.jsx(dr,{children:o.jsx(I6,{})})}),o.jsx(st,{path:"prize",element:o.jsx(dr,{children:o.jsx(C6,{})})}),o.jsx(st,{path:"user",element:o.jsx(dr,{children:o.jsx(R6,{})})}),o.jsx(st,{path:"recharge",element:o.jsx(dr,{children:o.jsx($6,{})})}),o.jsx(st,{path:"withdraw",element:o.jsx(dr,{children:o.jsx(W6,{})})}),o.jsx(st,{path:"my-product",element:o.jsx(dr,{children:o.jsx(H6,{})})}),o.jsx(st,{path:"invitation",element:o.jsx(dr,{children:o.jsx(q6,{})})}),o.jsx(st,{path:"app-download",element:o.jsx(dr,{children:o.jsx(G6,{})})}),o.jsx(st,{path:"my-teams",element:o.jsx(dr,{children:o.jsx(K6,{})})}),o.jsx(st,{path:"online",element:o.jsx(dr,{children:o.jsx(Q6,{})})}),o.jsx(st,{path:"*",element:o.jsx(ru,{to:"/",replace:!0})})]})]})]});const a5=QT({reducer:{auth:u6,user:j6,wallet:N6,team:P6}});Qh.createRoot(document.getElementById("root")).render(o.jsx(Xe.StrictMode,{children:o.jsx(lj,{store:a5,children:o.jsx(hT,{children:o.jsx(x6,{children:o.jsx(o5,{})})})})}));export{G as a,Dn as b,Pe as c,ae as d,vn as e,Ne as g,Ut as i,re as s,Ae as u};
